<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>proxychains + V2raya</title>
      <link href="/2022/05/29/proxychains-v2raya/"/>
      <url>/2022/05/29/proxychains-v2raya/</url>
      
        <content type="html"><![CDATA[<p>对 Linux 的科学上网的环境头疼很久，由于服务器是在天翼云上面的 Ubuntu 主机，跑个 git 一点速度都没有，真 TM 想爆粗口。想起以前看到过的神器 <code>proxychains</code>。于是决定试试。毕竟无论 apt， git ，还是 curl 等等，单独去指定代理太麻烦了，配置文件各有各的，脑袋记不住。这个服务器考虑到稳定性，没有安装 GUI 界面，所以刚开始并不打算在服务器上部署 V2ray。但是去网上转了一圈，发现免费的 HTTP 代理没有一个能用(浪费时间的东西)。于是顺便在服务器上安装了 <code>V2rayA</code>。</p><p>所以，有了 proxychains + V2rayA 这个组合，做个记录</p><h2 id="proxychains"><a href="#proxychains" class="headerlink" title="proxychains"></a>proxychains</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>我使用的是 Ubuntu，所以一行命令搞定。当然，你也可以自己编译（可以参考下面编译这一步骤）。官方的 <a href="https://github.com/haad/proxychains">Github</a></p><p><code>apt install proxychains4</code></p><p>请注意，install 后必须是 <code>proxychains4</code>，如果只是 proxychains，会安装旧的版本 – 3。</p><h3 id="编译（可选）"><a href="#编译（可选）" class="headerlink" title="编译（可选）"></a>编译（可选）</h3><ol><li><p>安装编译环境<br> <code>apt-get install build-essential</code></p></li><li><p>克隆代码<br> <code>git clone git@github.com:rofl0r/proxychains-ng.git</code><br> <code>cd proxychains-ng</code></p></li><li><p>编译</p> <pre class="line-numbers language-none"><code class="language-none">sudo makesudo make installsudo make install-config<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>找到配置文件，复制到 etc 目录下面<br> <code>cp ./src/proxychains.conf /etc/proxychians.conf</code></p></li><li><p>修改配置<br> 注释 strict_chain<br> 添加 一行配置 <code>socks5 192.168.1.1 1080</code></p></li><li><p>测试，能看到输出结果就是通了<br> <code>proxychains4 -f /etc/proxychians.conf  curl -v google.com</code></p></li></ol><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>配置文件的位置：<code>/etc/proxychains4.conf</code></p><ol><li><p>注销 <code>proxy_dns</code><br> 该参数会代理 DNS，如果要使用本地的 DNS，注销即可</p></li><li><p>注销 <code>strict_chain</code>，开启 <code>dynamic_chain</code><br> strict_chain 是官方默认，但是这有个问题：如果你指定<code>多个</code>代理，他会按照代理的顺序，将数据包依次通过这些代理。</p><ul><li><p><code>dynamic_chain</code>：该配置项能够通过ProxyList中的每个代理运行流量，如果其中一个代理关闭或者没有响应，它能够自动选择ProxyList中的下一个代理；</p></li><li><p><code>strict_chain</code>：该配置为ProxyChains的默认配置，不同于dynamic_chain，也能够通过ProxyList中的每个代理运行流量，但是如果ProxyList中的代理出现故障，不会自动切换到下一个。</p></li><li><p><code>random_chain</code>：该配置项会从ProxyList中随机选择代理IP来运行流量，如果ProxyList中有多个代理IP，在使用proxychains的时候会使用不同的代理访问目标主机，从而使主机端探测流量更加困难。</p></li></ul></li><li><p>添加代理</p><p> 在该文件的最后位置，指定代理，可以有多个，格式如下：<br> <code>http 127.0.0.1 23334</code></p><p> 同时，注销默认的 <code>socks4 127.0.0.1 9050</code></p></li></ol><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>只需在需要代理的命令前面加入 <code>proxychains4</code> 就行，或者直接 <code>proxychains</code>，这两个做了映射，是同一个东西</p><p><code>proxychains curl google.com</code></p><p>你还能像这样，查看你代理后的 IP 地址<br><code>proxychains curl myip.ipip.net</code><br><code>proxychains curl cip.cc</code></p><h2 id="V2rayA"><a href="#V2rayA" class="headerlink" title="V2rayA"></a>V2rayA</h2><p>上面说了 proxychains 的使用方法，但是我们还需要有一个代理，才能畅快使用外网。我去网上找了一堆免费的 HTTP 代理，发现没一个能用的，curl 各种报错，白瞎了我一个晚上。想想还是安装一个 v2ray 到服务器算了。于是找了这个 V2rayA。部署和使用方法可以参考官方的<a href="https://v2raya.org/docs/prologue/installation/debian/">文档</a></p><p>首先，你要确认你用的是哪个个核心：<code>v2fly</code> or <code>xray</code>。 </p><p>在没有科学上网的环境下，要去使用一键脚本安装 V2rayA，会进入死循环。没办法，只能使用离线安装的方法来搞。</p><p>我这里以 <code>Xray</code> 为例：</p><ol><li><p>官方的一键安装脚本为：<br> <code># bash -c &quot;$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)&quot; @ install</code></p><p> 直接在本地浏览器访问 <code>https://github.com/XTLS/Xray-install/raw/main/install-release.sh</code></p><p> 然后把脚本的内容复制到远程服务器上，保存为文件，这里命名为 go.sh，赋予 744 的权限（用 chmod 命令）</p></li><li><p>Xray-core 下载的 URL：<br> <code>https://github.com/XTLS/Xray-core/releases/</code></p><p> 根据自己的服务器的 CPU 架构选择对应的安装包， 我这里是：<code>Xray-linux-64.zip</code>。这里，我们需要下载好安装包，然后上传到服务器</p></li><li><p>安装，使用 <code>--local</code> 指定安装包的位置<br> <code>go.sh install --local Xray-linux-64.zip</code></p></li><li><p>禁用 xray 服务。安装后可以关掉服务，因为 v2rayA 不依赖于该 systemd 服务。<br> <code>systemctl disable xray --now</code></p></li></ol><p>到这里，Xray 的 core 就安装好了，接下来安装 V2rayA 的本体</p><ol start="5"><li><p>同理，去 Github 下载对应 CPU 架构和发行版的安装包，上传到服务器<br> <code>https://github.com/v2rayA/v2rayA/releases</code><br> 我用的是 Ubuntu，所以直接下载 Debian 的就行。包名如下：<code>installer_debian_amd64_1.5.7.deb</code></p></li><li><p>安装，自行替换 deb 包所在的实际路径<br> <code>apt install /path/download/installer_debian_xxx_vxxx.deb</code> </p></li><li><p>指定 v2rayA 调用的 Xray_core。Xray 一键安装的脚本安装的文件路径如下：</p> <pre class="line-numbers language-none"><code class="language-none">installed: &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;xray.serviceinstalled: &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;xray@.serviceinstalled: &#x2F;usr&#x2F;local&#x2F;bin&#x2F;xray  &#x2F;&#x2F; 记下这个路径installed: &#x2F;usr&#x2F;local&#x2F;etc&#x2F;xray&#x2F;*.jsoninstalled: &#x2F;usr&#x2F;local&#x2F;share&#x2F;xray&#x2F;geoip.datinstalled: &#x2F;usr&#x2F;local&#x2F;share&#x2F;xray&#x2F;geosite.datinstalled: &#x2F;var&#x2F;log&#x2F;xray&#x2F;access.loginstalled: &#x2F;var&#x2F;log&#x2F;xray&#x2F;error.log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> 新建文件夹 <code>/etc/systemd/system/v2raya.service.d</code>，然后新建一个 <code>xray.conf</code> 的文件，添加以下内容，后面的路径根据Xray 实际安装后的来</p> <pre class="line-numbers language-none"><code class="language-none">[Service]Environment&#x3D;&quot;V2RAYA_V2RAY_BIN&#x3D;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;xray&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p> 重启服务<br> <code>systemctl daemon-reload &amp;&amp; sudo systemctl restart v2raya</code></p></li></ol><ol start="8"><li><p>启动 v2rayA 并设置开机自启<br> <code>systemctl start v2raya.service</code><br> <code>systemctl enable v2raya.service</code></p></li><li><p>访问服务器的公网 IP，端口号是 2017。会出现配置的页面，这个前后端分离的设计得给赞，特别适合没有安装桌面环境的系统。之后，你可以创建一个配置节点，如果在 <code>TLS</code> 中出现 <code>xtls</code>，证明 Xray 的核心安装正确并被识别</p></li></ol><p><img src="1.png"></p><ol start="10"><li>按照提示填写对应的参数即可。也有设置可以修改 http 和 socks5 的端口号。</li></ol><p>到这里基本就没什么问题了，对比了去 github clone 东西，简直就是天和地的区别。起飞啰。。。。。。</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><blockquote><p><a href="https://coding.tools/cn/blog/using-proxy-in-linux-ubuntu-with-v2ray-privoxy-proxychains">https://coding.tools/cn/blog/using-proxy-in-linux-ubuntu-with-v2ray-privoxy-proxychains</a><br><a href="https://freesilo.com/?p=1244">https://freesilo.com/?p=1244</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 翻墙 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 配置各种代理</title>
      <link href="/2022/04/24/linux-pei-zhi-ge-chong-dai-li/"/>
      <url>/2022/04/24/linux-pei-zhi-ge-chong-dai-li/</url>
      
        <content type="html"><![CDATA[<p>每次兴致冲冲想在 Linux 实现某种功能，最能浇灭兴致的：无非就是上不了 Google，查不了资料，apt、git 各种卡顿龟速。于是整理了这篇文章，归纳 Linux 各种工具的代理配置。<br>后续会不断更新这篇文章</p><h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><ul><li><p>全局配置（Global）<br>  <code>git config --global http.proxy http://proxyUsername:proxyPassword@proxy.server.com:port</code></p><p>  <code>git config --global http.proxy socks5://127.0.0.1:1080</code></p></li><li><p>local to repository<br>in its <code>.git/config</code> file</p></li></ul><h3 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h3><ul><li><p>To show the current configuration of all <code>http</code> sections<br><code>git config --global --get-regexp http.*</code></p></li><li><p>locally<br><code>git config --get-regexp http.*</code></p></li><li><p>查看 git 配置<br><code>git config --list</code></p></li></ul><h3 id="Unset"><a href="#Unset" class="headerlink" title="Unset"></a>Unset</h3><p><code>git config --global --unset http.proxy</code></p><h3 id="检查代理的是否生效"><a href="#检查代理的是否生效" class="headerlink" title="检查代理的是否生效"></a>检查代理的是否生效</h3><p><code>ssh -T git@github.com</code><br><code>ssh -T -p 443 git@ssh.github.com</code> using an SSH connection made over the HTTPS port</p><h3 id="More"><a href="#More" class="headerlink" title="More"></a>More</h3><p><a href="https://gist.github.com/evantoli/f8c23a37eb3558ab8765">https://gist.github.com/evantoli/f8c23a37eb3558ab8765</a></p><h2 id="apt"><a href="#apt" class="headerlink" title="apt"></a>apt</h2><p>编辑 <code>/etc/apt/apt.conf</code></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Acquire::http::proxy &quot;http:&#x2F;&#x2F;&lt;proxy&gt;&quot;;Acquire::https::proxy &quot;https:&#x2F;&#x2F;&lt;proxy&gt;&quot;;Acquire::ftp::proxy &quot;ftp:&#x2F;&#x2F;&lt;proxy&gt;&quot;;Acquire::socks::proxy &quot;socks:&lt;proxy&gt;&quot;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>Example：<br><code>Acquire:http::proxy &quot;http://192.168.100.100:2333&quot;;</code></p><h2 id="export"><a href="#export" class="headerlink" title="export"></a>export</h2><p>直接在用户根目录下的 <code>.bashrc</code> 或者 <code>.zshrc</code> 文件追加下面内容</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">http代理的：export http_proxy&#x3D;&quot;http:&#x2F;&#x2F;localhost:port&quot;export https_proxy&#x3D;&quot;http:&#x2F;&#x2F;localhost:port&quot;socks5 代理的：export http_proxy&#x3D;&quot;socks5:&#x2F;&#x2F;127.0.0.1:1080&quot;export https_proxy&#x3D;&quot;socks5:&#x2F;&#x2F;127.0.0.1:1080&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后刷新一下<br><code>source ~/.bashrc</code></p><p><strong>注意，这种方法对 apt 这个命令并不生效</strong></p><h2 id="Github-的-git-与-https"><a href="#Github-的-git-与-https" class="headerlink" title="Github 的 git 与 https"></a>Github 的 git 与 https</h2><p>这里说下两种方法的区别</p><ul><li><p>https<br>  链接样式：<a href="https://github.com/shenqizhi/blog.git">https://github.com/shenqizhi/blog.git</a><br>  使用端口：443<br>  可以使用的代理：socks 与 http<br>  认证方法：账号密码认证，token 认证</p></li><li><p>git<br>  链接样式：<a href="mailto:&#x67;&#x69;&#x74;&#x40;&#x67;&#x69;&#116;&#x68;&#x75;&#98;&#46;&#x63;&#x6f;&#109;">&#x67;&#x69;&#x74;&#x40;&#x67;&#x69;&#116;&#x68;&#x75;&#98;&#46;&#x63;&#x6f;&#109;</a>:shenqizhi/blog.git<br>  使用的端口：22，基于 SSH<br>  可以使用的代理：无（本人测试，无法使用 socks 和 http，其他的方法未知）<br>  认证方法：私钥公钥认证</p></li></ul><p>基于以上，建议使用 https 与 GitHub 通信。</p><pre class="line-numbers language-none"><code class="language-none"># 待验证git config --global core.gitproxy &quot;git-proxy&quot;git config --global socks.proxy &quot;localhost:1080&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="knowledge"><a href="#knowledge" class="headerlink" title="knowledge"></a>knowledge</h2><p>SOCKS only supports TCP and UDP, not ICMP packets, which are used by ping and tracert.</p><p>Ping and traceroute make use of lower layer network protocols (ICMP and/or UDP, in particular, which are layer 4 protocols) and will not work over an HTTP (layer 7) tunnel</p><p>A VPN <code>creates a virtual network card</code>, allowing you to use TCP, UDP, ICMP, SSH, FTP, and any other protocol. It gets its own IP address and have its own routing.</p><p>a proxy server acts as a relay. There’s a specific proxy protocol to handle HTTP - it’s called HTTP proxy for this reason. And there’s a SOCKS proxy that can proxy any service that is TCP/IP based (HTTP/HTTPS, SSH, FTP…).</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 翻墙 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux 彩色终端配置</title>
      <link href="/2022/04/24/linux-cai-se-zhong-duan-pei-zhi/"/>
      <url>/2022/04/24/linux-cai-se-zhong-duan-pei-zhi/</url>
      
        <content type="html"><![CDATA[<p>上次在树莓派安装了 Kali，一直对它的终端念念不忘，命令行有色彩区分，而且能自动补全，比原生的黑白不知高到哪里去。</p><p><img src="1.png"></p><p>于是去网上查了下，打算把虚拟的 Debian 系统搞上这个功能。实现过程还是挺简单的，记录一下。</p><p>参考了如下的文章，这个文章还有更多的介绍。我这里只整理我自己需要的东西做记录：</p><blockquote><p><a href="https://www.cnblogs.com/bamanzi/p/colorful-shell.html">https://www.cnblogs.com/bamanzi/p/colorful-shell.html</a></p></blockquote><p><a href="%E5%BD%A9%E8%89%B2%E7%9A%84Shell.html.backup">离线 Archive</a></p><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><p>首先，所有的操作都是基于 zsh 的， 因此我们要替换系统默认的 bash</p><ul><li><p>替换 bash 为 zsh</p><ul><li><p>查看当前系统支持的 shell<br><code>cat /etc/shells</code></p></li><li><p>查看当前的 shell<br><code>env | grep SHELL</code><br><code>echo $SHELL</code></p></li><li><p>安装 zsh<br><code>apt install zsh</code></p></li><li><p>替换为 zsh，需要重新 login 一次<br><code>chsh -s /bin/zsh</code></p></li></ul></li></ul><ul><li><p>使用 zsh 自带的样式</p><p>  zsh 自带一些简单的样式，对于不想大动干戈或者临时使用，可以运行如下的命令：</p><p>  <code>autoload -Uz promptinit</code><br>  <code>promptinit</code><br>  <code>prompt adam2</code></p><p>  用 prompt -l 可以列出所有的提示符配置，有兴趣可以逐个体验</p></li><li><p>安装 zsh 高级样式</p><p>  这里我们使用 Prezto 这个工具，需要从 Github 下载安装</p><ul><li><p>用 git 复制项目到你的电脑，国内需要自己指定一个代理（git config –global http.proxy)<br><code>git clone --recursive https://github.com/sorin-ionescu/prezto.git &quot;$&#123;ZDOTDIR:-$HOME&#125;/.zprezto&quot;</code></p></li><li><p>创建 Zsh 的配置文件</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">setopt EXTENDED_GLOB<span class="token keyword">for</span> <span class="token for-or-select variable">rcfile</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">$&#123;ZDOTDIR<span class="token operator">:-</span>$HOME&#125;</span>"</span>/.zprezto/runcoms/^README.md<span class="token punctuation">(</span>.N<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">do</span><span class="token function">ln</span> -s <span class="token string">"<span class="token variable">$rcfile</span>"</span> <span class="token string">"<span class="token variable">$&#123;ZDOTDIR<span class="token operator">:-</span>$HOME&#125;</span>/.<span class="token variable">$&#123;rcfile<span class="token operator">:</span>t&#125;</span>"</span><span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>如果上面的步骤报错，证明配置文件已经存在，可以追加如下代码到你用户的 <code>.zshrc</code> 文件里，解决上述问题<br><code>source &quot;$&#123;ZDOTDIR:-$HOME&#125;/.zprezto/init.zsh&quot;</code></p></li><li><p>开启 prompt<br><code>autoload -Uz promptinit</code><br><code>promptinit</code></p></li><li><p>重新 login，使主题生效，之后使用 <code>pormpt -l</code>，列出支持的主题，你会发现主题的数目变多了</p></li></ul></li><li><p>安装字体<br>  字体的链接</p><blockquote><p><a href="https://github.com/romkatv/powerlevel10k#fonts">https://github.com/romkatv/powerlevel10k#fonts</a></p></blockquote><p>  如果是本地 termianl，请将字体安装在本地系统。如果是远程 SSH，请将字体安装在执行 SSH 的系统里。Windows 安装好字体之后，直接在 SSH 软件里调用就行，如 git 的 bash 里可以选择字体 <code>MesloLGS NF Regular</code>。</p><p>  <img src="2.png"></p></li><li><p>配置 powerlevel10k</p><p>  添加如下代码到 <code>~/.zpreztorc</code> 文件<br>  <code>zstyle :prezto:module:prompt theme powerlevel10k</code></p><p>  重启 zsh<br>  <code>exec zhs</code></p><p>  此时会自动启动主题的 wizard，如果没有启动，可以自己手动执行下面的命令<br>  <code>p10k configure</code></p></li></ul><ul><li><p>语法高亮</p>  <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> -p ~/.zsh/plugins<span class="token function">git</span> clone https://github.com/zsh-users/zsh-syntax-highlighting.git ~/.zsh/plugins/zsh-syntax-highlighting<span class="token builtin class-name">echo</span> <span class="token string">"source ~/.zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"</span> <span class="token operator">>></span> ~/.zshrc<span class="token builtin class-name">source</span> ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ls 高亮</p><p>  你可以添加 <code>alias ls=&#39;ls --color=auto&#39;</code>到你的 <code>~/.bashrc</code>。 auto 这个值可以确保你将 ls 的输出重定向到一个文件时不会产生问题。</p></li></ul><h2 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h2><h3 id="Linux-安装字体"><a href="#Linux-安装字体" class="headerlink" title="Linux 安装字体"></a>Linux 安装字体</h3><p>这里演示如何在 Linux 里安装字体</p><blockquote><p><a href="https://blog.csdn.net/Yang838020787/article/details/118141643">https://blog.csdn.net/Yang838020787/article/details/118141643</a></p></blockquote><p>添加 <code>mkfontscale</code> 和 <code>mkfontdir</code> 命令：<br><code>apt install ttf-mscorefonts-installer</code></p><p>添加 <code>fc-cache</code>:<br><code>apt install fontconfig</code></p><p>在 <code>/usr/share/fonts</code> 下新建一个目录 test，把字体文件 <code>.ttf</code> 复制到该目录下面，之后进入 test 目录，执行下面的命令。其中 <code>mkfontscale</code> 会生成一个 <code>fonts.scale</code> 的目录，<code>mkfontdir</code> 会生成一个 <code>fonts.dir</code> 的目录。</p><p>然后执行如下命令</p><pre class="line-numbers language-BASH" data-language="BASH"><code class="language-BASH">mkfontscale mkfontdirfc-cache<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Selenium</title>
      <link href="/2022/02/19/selenium/"/>
      <url>/2022/02/19/selenium/</url>
      
        <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>在很多情况下，我们都需要一个能模拟用户在浏览器中行为的工具。可能我们会觉得抓包请求的方式过于复杂且容易被网站的反爬虫机制封杀，而我们很多情况下又不是非常在意性能，此时 Selenium 就是一个适合的选择。</p><p>Selenium 是一个将浏览器自动化的工具，一般所说的 Selenium 指的是 Selenium WebDriver。</p><p>旗下有三套件：</p><ul><li>WebDriver：是一套操作浏览器的 API</li><li>IDE：具体实现就是一款浏览器插件，可以在 Chrome 和 Firefox 上面搜索安装。能够记录浏览器操作的步骤，并导出为编程文件（如 .py)。 可以作为学习 WebDriver 的工具</li><li>Grid：跨平台远程自动操作脚本</li></ul><p>Selenium 还为各类语言提供了客户端使用户可以在各类语言里直接进行调用。</p><p>Selenium最初的目的是为网页提供自动化测试的工具，然而现在更多的被用在爬虫等领域。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>这篇文章使用 Python 作为基础环境。请先安装最新版的 Python 到系统上面。然后执行 <code>pip install selenium</code>，安装 selenium。由于 Selenium 需要对浏览器进行操作，因此除了 Selenium，我们还需要下载浏览器驱动。<strong>注意：驱动需要下载浏览器对应的版本。</strong></p><table><thead><tr><th>Browser</th><th>Download URL</th></tr></thead><tbody><tr><td>Firefox</td><td><a href="https://github.com/mozilla/geckodriver/releases">https://github.com/mozilla/geckodriver/releases</a></td></tr><tr><td>Chrome</td><td><a href="https://chromedriver.chromium.org/downloads">https://chromedriver.chromium.org/downloads</a></td></tr></tbody></table><p>Python 需要调用浏览器的 driver，我们需要指定 driver 的位置。 如果 selenium 找不到 driver， 会报如下错误</p><blockquote><p>raise WebDriverException(selenium.common.exceptions.WebDriverException: Message: ‘geckodriver’ executable needs to be in PATH.)</p></blockquote><ul><li><p>方法 1<br>  以 Windows 10 和 firefox 为例：</p><p>  将 <code>geckodriver.exe</code> 放到下面的路径，不能修改文件名：<br>  <code>C:\Users\Bin\AppData\Local\Programs\Python\Python310\Scripts\</code></p></li><li><p>方法 2<br>  或者，添加到系统路径</p>  <pre class="line-numbers language-bat" data-language="bat"><code class="language-bat">echo %PATH%setx PATH &quot;%PATH%;C:\WebDriver\bin&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>  然后 cmd 运行 <code>chromedriver.exe</code>， 如果有以下提示，代表成功</p>  <pre class="line-numbers language-none"><code class="language-none">Starting ChromeDriver 95.0.4638.54 (d31a821ec901f68d0d34ccdbaea45b4c86ce543e-refs&#x2F;branch-heads&#x2F;4638@&#123;#871&#125;) on port 9515Only local connections are allowed.Please see https:&#x2F;&#x2F;chromedriver.chromium.org&#x2F;security-considerations for suggestions on keeping ChromeDriver safe.ChromeDriver was started successfully.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>方法 3<br>  直接指定 driver 的路径</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python">service <span class="token operator">=</span> Service<span class="token punctuation">(</span>executable_path<span class="token operator">=</span><span class="token string">"/path/to/chromedriver"</span><span class="token punctuation">)</span>driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>service<span class="token operator">=</span>service<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><ul><li><p>Chrome</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>chrome<span class="token punctuation">.</span>options <span class="token keyword">import</span> Options <span class="token keyword">as</span> ChromeOptionsoptions <span class="token operator">=</span> ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>options<span class="token operator">=</span>options<span class="token punctuation">)</span>driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Firefox</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>firefox<span class="token punctuation">.</span>options <span class="token keyword">import</span> Options <span class="token keyword">as</span> FirefoxOptionsoptions <span class="token operator">=</span> FirefoxOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span>options<span class="token operator">=</span>options<span class="token punctuation">)</span>driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>基本操作(8个)</p><p>  基于 Selenium 4.1.0</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python">driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 指定浏览器驱动，Chrome 的写法大小写敏感，Firefox 同样</span>driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.google.com"</span><span class="token punctuation">)</span> <span class="token comment"># take action on browser </span>title <span class="token operator">=</span> driver<span class="token punctuation">.</span>title <span class="token comment"># request browser information, such as browser size/position, cookies</span>driver<span class="token punctuation">.</span>implicitly_wait<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment"># Establish Waiting Strategy. An implicit wait is rarely the best solution, but it's the easiest to demonstrate here, so we'll use it as a placeholder.</span>search_box <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>NAME<span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">)</span> <span class="token comment"># Find an element</span>search_button <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>NAME<span class="token punctuation">,</span> <span class="token string">"btnK"</span><span class="token punctuation">)</span> <span class="token comment"># same as above</span>search_box<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"Selenium"</span><span class="token punctuation">)</span> <span class="token comment"># take action on element</span>search_button<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># same as above </span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>NAME<span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span> <span class="token comment"># request element information</span>driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># end the seesion </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Firefox option</p><p>  firefox set a custom profile</p><blockquote><p><a href="https://www.programcreek.com/python/example/100026/selenium.webdriver.FirefoxProfile">https://www.programcreek.com/python/example/100026/selenium.webdriver.FirefoxProfile</a></p></blockquote>  <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>firefox<span class="token punctuation">.</span>options <span class="token keyword">import</span> Options<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>firefox<span class="token punctuation">.</span>firefox_profile <span class="token keyword">import</span> FirefoxProfile options<span class="token operator">=</span>Options<span class="token punctuation">(</span><span class="token punctuation">)</span>firefox_profile <span class="token operator">=</span> FirefoxProfile<span class="token punctuation">(</span><span class="token punctuation">)</span>firefox_profile<span class="token punctuation">.</span>set_preference<span class="token punctuation">(</span><span class="token string">"javascript.enabled"</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span>options<span class="token punctuation">.</span>profile <span class="token operator">=</span> firefox_profile<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>  OR (旧版本的 selenium 使用，现在 FirefoxProfile 已经弃用)</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverfp <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>FirefoxProfile<span class="token punctuation">(</span><span class="token punctuation">)</span>fp<span class="token punctuation">.</span>set_preference<span class="token punctuation">(</span><span class="token string">"browser.download.dir"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span>firefox_profile<span class="token operator">=</span>fp<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>back &amp; forward &amp; refresh</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python">driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://selenium.dev"</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>back<span class="token punctuation">(</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>forward<span class="token punctuation">(</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>refresh<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>alert</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by <span class="token keyword">import</span> By <span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverdriver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.selenium.dev/documentation/webdriver/browser/alerts/"</span><span class="token punctuation">)</span><span class="token comment"># Click the link to activate the alert</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>LINK_TEXT<span class="token punctuation">,</span> <span class="token string">"See an example alert"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># Wait for the alert to be displayed and store it in a variable</span>alert <span class="token operator">=</span> wait<span class="token punctuation">.</span>until<span class="token punctuation">(</span>expected_conditions<span class="token punctuation">.</span>alert_is_present<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Store the alert text in a variable</span>text <span class="token operator">=</span> alert<span class="token punctuation">.</span>text<span class="token comment"># Press the OK button</span>alert<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># confirm operation </span><span class="token comment"># Click the link to activate the alert</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>LINK_TEXT<span class="token punctuation">,</span> <span class="token string">"See a sample confirm"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># Wait for the alert to be displayed</span>wait<span class="token punctuation">.</span>until<span class="token punctuation">(</span>expected_conditions<span class="token punctuation">.</span>alert_is_present<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Store the alert in a variable for reuse</span>alert <span class="token operator">=</span> driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>alert<span class="token comment"># Store the alert text in a variable</span>text <span class="token operator">=</span> alert<span class="token punctuation">.</span>text<span class="token comment"># Press the Cancel button</span>alert<span class="token punctuation">.</span>dismiss<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># prompt operation </span><span class="token comment"># Click the link to activate the alert</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>LINK_TEXT<span class="token punctuation">,</span> <span class="token string">"See a sample prompt"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># Wait for the alert to be displayed</span>wait<span class="token punctuation">.</span>until<span class="token punctuation">(</span>expected_conditions<span class="token punctuation">.</span>alert_is_present<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Store the alert in a variable for reuse</span>alert <span class="token operator">=</span> Alert<span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token comment"># Type your message</span>alert<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"Selenium"</span><span class="token punctuation">)</span><span class="token comment"># Press the OK button</span>alert<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>cookie</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriverdriver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># Navigate to url</span>driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.example.com"</span><span class="token punctuation">)</span><span class="token comment"># Adds the cookie into current browser context</span>driver<span class="token punctuation">.</span>add_cookie<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">:</span> <span class="token string">"bar"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># Get cookie details with named cookie 'foo'</span><span class="token keyword">print</span><span class="token punctuation">(</span>driver<span class="token punctuation">.</span>get_cookie<span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 注意，是用 ‘foo' 来查找。</span><span class="token comment"># 可以追加多个 cookie，这些 cookie 组成一个列表。</span>driver<span class="token punctuation">.</span>add_cookie<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">:</span> <span class="token string">"cookie1"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>add_cookie<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"test2"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">:</span> <span class="token string">"cookie2"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># Get all available cookies</span><span class="token keyword">print</span><span class="token punctuation">(</span>driver<span class="token punctuation">.</span>get_cookies<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Delete a cookie with name 'test1'</span>driver<span class="token punctuation">.</span>delete_cookie<span class="token punctuation">(</span><span class="token string">"test1"</span><span class="token punctuation">)</span><span class="token comment">#  Deletes all cookies</span>driver<span class="token punctuation">.</span>delete_all_cookies<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>windows &amp; tabs</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python">driver<span class="token punctuation">.</span>current_window_handle <span class="token comment"># 获取当前的 window handle</span>driver<span class="token punctuation">.</span>window_handles <span class="token comment"># 获取所有的 handle, 返回列表</span>driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>window<span class="token punctuation">(</span>window_handle<span class="token punctuation">)</span> <span class="token comment"># 切换到其他 tab</span><span class="token comment"># Opens a new tab and switches to new tab</span>driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>new_window<span class="token punctuation">(</span><span class="token string">'tab'</span><span class="token punctuation">)</span><span class="token comment"># Opens a new window and switches to new window</span>driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>new_window<span class="token punctuation">(</span><span class="token string">'window'</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># close current tab</span>driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># close all the tabs</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>  Quit will:</p><ol><li>Close all the windows and tabs associated with that WebDriver session</li><li>Close the browser process</li><li>Close the background driver process<br>Notify Selenium Grid that the browser is no longer in use so it can be used by another session (if you are using Selenium Grid)</li></ol><p>  auto quit：</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">with</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> driver<span class="token punctuation">:</span>    <span class="token comment"># WebDriver code here...</span>    <span class="token comment"># WebDriver will automatically quit after indentation</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>  <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token comment">#WebDriver code here...</span><span class="token keyword">finally</span><span class="token punctuation">:</span>    driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>window size &amp; position</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python">width <span class="token operator">=</span> driver<span class="token punctuation">.</span>get_window_size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"width"</span><span class="token punctuation">)</span>height <span class="token operator">=</span> driver<span class="token punctuation">.</span>get_window_size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"height"</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>set_window_size<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">768</span><span class="token punctuation">)</span> x <span class="token operator">=</span> driver<span class="token punctuation">.</span>get_window_position<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span>y <span class="token operator">=</span> driver<span class="token punctuation">.</span>get_window_position<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>set_window_position<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>minimize_window<span class="token punctuation">(</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>fullscreen_window<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>screenshot</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python">driver<span class="token punctuation">.</span>save_screenshot<span class="token punctuation">(</span><span class="token string">'./imagetest.png'</span><span class="token punctuation">)</span> <span class="token comment"># 只能截取当前浏览器显示的区域</span>ele <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>CSS_SELECTOR<span class="token punctuation">,</span> <span class="token string">'h1'</span><span class="token punctuation">)</span><span class="token comment"># Returns and base64 encoded string into image</span>ele<span class="token punctuation">.</span>screenshot<span class="token punctuation">(</span><span class="token string">'./image.png'</span><span class="token punctuation">)</span> <span class="token comment"># 截取选中的元素</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>locator</p><p>  这里最好用的当属 <code>XPATH</code>，掌握了这个，其他可以不用滴。后面有关于 XPATH 用法的介绍</p><table><thead><tr><th>Locator</th><th>Description</th></tr></thead><tbody><tr><td>class name</td><td>Locates elements whose class name contains the search value (compound class names are not permitted)</td></tr><tr><td>css selector</td><td>Locates elements matching a CSS selector</td></tr><tr><td>id</td><td>Locates elements whose ID attribute matches the search value</td></tr><tr><td>name</td><td>Locates elements whose NAME attribute matches the search value</td></tr><tr><td>link text</td><td>Locates anchor elements whose visible text matches the search value</td></tr><tr><td>partial link text</td><td>Locates anchor elements whose visible text contains the search value. If multiple elements are matching, only the first one will be selected.</td></tr><tr><td>tag name</td><td>Locates elements whose tag name matches the search value</td></tr><tr><td>xpath</td><td>Locates elements matching an XPath expression</td></tr></tbody></table></li><li><p>find_element 函数用法</p><p>  示例代码：</p>  <pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;ol id&#x3D;&quot;vegetables&quot;&gt;&lt;li class&#x3D;&quot;potatoes&quot;&gt;…&lt;li class&#x3D;&quot;onions&quot;&gt;…&lt;li class&#x3D;&quot;tomatoes&quot;&gt;&lt;span&gt;Tomato is a Vegetable&lt;&#x2F;span&gt;…&lt;&#x2F;ol&gt;&lt;ul id&#x3D;&quot;fruits&quot;&gt;&lt;li class&#x3D;&quot;bananas&quot;&gt;…&lt;li class&#x3D;&quot;apples&quot;&gt;…&lt;li class&#x3D;&quot;tomatoes&quot;&gt;&lt;span&gt;Tomato is a Fruit&lt;&#x2F;span&gt;…&lt;&#x2F;ul&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>  <pre class="line-numbers language-python" data-language="python"><code class="language-python">fruits <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">"fruits"</span><span class="token punctuation">)</span>fruit <span class="token operator">=</span> fruits<span class="token punctuation">.</span>find_elements<span class="token punctuation">(</span>By<span class="token punctuation">.</span>CLASS_NAME<span class="token punctuation">,</span> <span class="token string">"tomatoes"</span><span class="token punctuation">)</span>fruit <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_elements<span class="token punctuation">(</span>By<span class="token punctuation">.</span>CSS_SELECTOR<span class="token punctuation">,</span><span class="token string">"#fruits .tomatoes"</span><span class="token punctuation">)</span>plants <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_elements<span class="token punctuation">(</span>By<span class="token punctuation">.</span>TAG_NAME<span class="token punctuation">,</span> <span class="token string">"li"</span><span class="token punctuation">)</span><span class="token keyword">for</span> e <span class="token keyword">in</span> plants<span class="token punctuation">:</span>     <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>  示例代码：</p>  <pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gLFyf gsfi<span class="token punctuation">"</span></span> <span class="token attr-name">jsaction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>paste:puy29d;<span class="token punctuation">"</span></span> <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2048<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>q<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">aria-autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>both<span class="token punctuation">"</span></span> <span class="token attr-name">aria-haspopup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">autocapitalize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>none<span class="token punctuation">"</span></span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>off<span class="token punctuation">"</span></span> <span class="token attr-name">autocorrect</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>off<span class="token punctuation">"</span></span> <span class="token attr-name">autofocus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>combobox<span class="token punctuation">"</span></span> <span class="token attr-name">spellcheck</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Google 搜索<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>搜索<span class="token punctuation">"</span></span> <span class="token attr-name">data-ved</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0ahUKEwiU6uvQ4_b1AhVjJ0QIHVxJAeAQ39UDCAQ<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>  <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by <span class="token keyword">import</span> Bydriver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.google.com"</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>CSS_SELECTOR<span class="token punctuation">,</span> <span class="token string">'[name="q"]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"webElement"</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>NAME<span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>CLASS_NAME<span class="token punctuation">,</span> <span class="token string">"gLFyf"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"webElement"</span><span class="token punctuation">)</span> <span class="token comment"># 注意，class 有两个：gLFyf gsfi, 中间是个空格分开</span><span class="token comment"># Get attribute of current active element</span>attr <span class="token operator">=</span> driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>active_element<span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span> <span class="token comment"># "Google 搜索" </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>click &amp; sendkey</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>NAME<span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"webdriver"</span> <span class="token operator">+</span> Keys<span class="token punctuation">.</span>ENTER<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>  <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by <span class="token keyword">import</span> Bydriver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># Navigate to url</span>driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.google.com"</span><span class="token punctuation">)</span>    <span class="token comment"># Store 'SearchInput' element</span>SearchInput <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>NAME<span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">)</span>SearchInput<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"selenium"</span><span class="token punctuation">)</span>    <span class="token comment"># Clears the entered text</span>SearchInput<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>查看元素属性</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python">value <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>NAME<span class="token punctuation">,</span> <span class="token string">'btnK'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>is_enabled<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>is_selected<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tag_name <span class="token comment"># 没有括号</span><span class="token punctuation">.</span>is_displayed<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>  <pre class="line-numbers language-python" data-language="python"><code class="language-python">res <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>CSS_SELECTOR<span class="token punctuation">,</span> <span class="token string">"h1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rect <span class="token comment">#返回字典格式的 长宽，左上角的坐标数据</span>cssValue <span class="token operator">=</span> driver<span class="token punctuation">.</span>findElement<span class="token punctuation">(</span>By<span class="token punctuation">.</span>LINK_TEXT<span class="token punctuation">,</span> <span class="token string">"More information..."</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value_of_css_property<span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">)</span> <span class="token comment"># Get CSS Value</span>text <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>CSS_SELECTOR<span class="token punctuation">,</span> <span class="token string">"h1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text <span class="token comment"># get the text </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>Select</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>select <span class="token keyword">import</span> Selectselect_element <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'selectElementID'</span><span class="token punctuation">)</span>select_object <span class="token operator">=</span> Select<span class="token punctuation">(</span>select_element<span class="token punctuation">)</span><span class="token comment"># &lt;select></span><span class="token comment">#  &lt;option value=value1>Bread&lt;/option></span><span class="token comment">#  &lt;option value=value2 selected>Milk&lt;/option></span><span class="token comment">#  &lt;option value=value3>Cheese&lt;/option></span><span class="token comment"># &lt;/select></span><span class="token comment"># Select an &lt;option> based upon the &lt;select> element's internal index</span>select_object<span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># Select an &lt;option> based upon its value attribute</span>select_object<span class="token punctuation">.</span>select_by_value<span class="token punctuation">(</span><span class="token string">'value1'</span><span class="token punctuation">)</span><span class="token comment"># Select an &lt;option> based upon its text</span>select_object<span class="token punctuation">.</span>select_by_visible_text<span class="token punctuation">(</span><span class="token string">'Bread'</span><span class="token punctuation">)</span><span class="token comment"># Return a list[WebElement] of options that have been selected</span>all_selected_options <span class="token operator">=</span> select_object<span class="token punctuation">.</span>all_selected_options<span class="token comment"># Return a WebElement referencing the first selection option found by walking down the DOM</span>first_selected_option <span class="token operator">=</span> select_object<span class="token punctuation">.</span>first_selected_option<span class="token comment"># Return a list[WebElement] of options that the &lt;select> element contains</span>all_available_options <span class="token operator">=</span> select_object<span class="token punctuation">.</span>options<span class="token comment"># Deselect an &lt;option> based upon the &lt;select> element's internal index</span>select_object<span class="token punctuation">.</span>deselect_by_index<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># Deselect an &lt;option> based upon its value attribute</span>select_object<span class="token punctuation">.</span>deselect_by_value<span class="token punctuation">(</span><span class="token string">'value1'</span><span class="token punctuation">)</span><span class="token comment"># Deselect an &lt;option> based upon its text</span>select_object<span class="token punctuation">.</span>deselect_by_visible_text<span class="token punctuation">(</span><span class="token string">'Bread'</span><span class="token punctuation">)</span><span class="token comment"># Deselect all selected &lt;option> elements</span>select_object<span class="token punctuation">.</span>deselect_all<span class="token punctuation">(</span><span class="token punctuation">)</span>does_this_allow_multiple_selections <span class="token operator">=</span> select_object<span class="token punctuation">.</span>is_multiple <span class="token comment"># Finally, some &lt;select> elements allow you to select more than one option. You can find out if your &lt;select> element is one of these by using this</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>基于相对位置的定位</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python">email_locator <span class="token operator">=</span> locate_with<span class="token punctuation">(</span>By<span class="token punctuation">.</span>TAG_NAME<span class="token punctuation">,</span> <span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>above<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">:</span> <span class="token string">"password"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>submit_locator <span class="token operator">=</span> locate_with<span class="token punctuation">(</span>By<span class="token punctuation">.</span>TAG_NAME<span class="token punctuation">,</span> <span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>below<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">:</span> <span class="token string">"email"</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>to_right_of<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">:</span> <span class="token string">"cancel"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>email_locator <span class="token operator">=</span> locate_with<span class="token punctuation">(</span>By<span class="token punctuation">.</span>TAG_NAME<span class="token punctuation">,</span> <span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>near<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">:</span> <span class="token string">"lbl-email"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="wait"><a href="#wait" class="headerlink" title="wait"></a>wait</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>ui <span class="token keyword">import</span> WebDriverWaitdriver<span class="token punctuation">.</span>navigate<span class="token punctuation">(</span><span class="token string">"file:///race_condition.html"</span><span class="token punctuation">)</span>el <span class="token operator">=</span> WebDriverWait<span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">.</span>until<span class="token punctuation">(</span><span class="token keyword">lambda</span> d<span class="token punctuation">:</span> d<span class="token punctuation">.</span>find_element_by_tag_name<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">assert</span> el<span class="token punctuation">.</span>text <span class="token operator">==</span> <span class="token string">"Hello from JavaScript!"</span>WebDriverWait<span class="token punctuation">(</span>driver<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>until<span class="token punctuation">(</span>some_condition<span class="token punctuation">)</span>driver <span class="token operator">=</span> Firefox<span class="token punctuation">(</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://somedomain/url_that_delays_loading"</span><span class="token punctuation">)</span>wait <span class="token operator">=</span> WebDriverWait<span class="token punctuation">(</span>driver<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> poll_frequency<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> ignored_exceptions<span class="token operator">=</span><span class="token punctuation">[</span>ElementNotVisibleException<span class="token punctuation">,</span> ElementNotSelectableException<span class="token punctuation">]</span><span class="token punctuation">)</span>element <span class="token operator">=</span> wait<span class="token punctuation">.</span>until<span class="token punctuation">(</span>EC<span class="token punctuation">.</span>element_to_be_clickable<span class="token punctuation">(</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>XPATH<span class="token punctuation">,</span> <span class="token string">"//div"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="xpath"><a href="#xpath" class="headerlink" title="xpath"></a>xpath</h2><p><a href="https://www.lambdatest.com/blog/complete-guide-for-using-xpath-in-selenium-with-examples/">https://www.lambdatest.com/blog/complete-guide-for-using-xpath-in-selenium-with-examples/</a></p><p> <code>//div[@id=&#39;app&#39;]/div</code> 与 <code>//div[@id=&#39;app&#39;]//div</code> 区别：前者只定位 id 为 app 的 div 的<strong>子代 div</strong>。</p><ul><li><p>绝对路径</p><p>  <code>/html//div/div/div/div[1]/div/a/img</code><br>  <code>/</code>，一个斜杆表示绝对路径，html 后有两个 //， 表示相对路径。相对路径和绝对路径可以混用（个人理解）</p></li><li><p>相对路径</p><p>  <code>//tagname[@Attribute=&#39;Value&#39;]</code><br>  相对路径，两个 <code>//</code><br>  例子：<br>  <code>//a[@class=&#39;googleSignInBtn&#39;]</code><br>  <code>//input[@name=&#39;phone&#39;]</code><br>  <code>//a[@href=&#39;/login&#39;]</code><br>  <code>//input[@placeholder=&#39;Full Name*&#39;]</code>  </p></li><li><p>contains</p><p>  <code>//tagname[contains(@attribute,constantvalue)]</code><br>  constant value: 常量</p><p>  例子：<br>  <code>//button[contains(@class,&#39;submit-btn&#39;)]</code><br>  注意下面的 html 代码，class 有很多个属性，我们使用 contains 就可以只用包含其中的一个</p>  <pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>signup-button<span class="token punctuation">"</span></span> <span class="token attr-name">data-sitekey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>6LceAqQaAAAAAO0LcIgLnXy3gH_M3X5aDrqUihHw<span class="token punctuation">"</span></span> <span class="token attr-name">data-callback</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onSubmit<span class="token punctuation">"</span></span> <span class="token attr-name">data-amplitude</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>R_signup<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-full influ2--goal submit-btn font-semibold  tracking-custom flex items-center xxxl:h-54 xxl:h-47 h-40 bg-black text-white xxxl:text-size-16 xxl:text-size-14 text-size-12 justify-center rounded submit-btn g-recaptcha<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Free Sign Up<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  <code>//a[contains(.,&#39;Ask Question&#39;)]</code><br>  a 标签下有 ‘ask Question’ text，最常用</p><p>  <code>//a[text()=&#39;Ask Question&#39;]</code><br>  与上面的区别：<br>   <a href="https://stackoverflow.com/questions/69909751/why-is-xpath-containstext-substring-not-working-as-expected?noredirect=1&amp;lq=1">https://stackoverflow.com/questions/69909751/why-is-xpath-containstext-substring-not-working-as-expected?noredirect=1&amp;lq=1</a></p><p>  <strong>contains 与 [@Attribute=’Value’] 用法的区别：contains 可以只包含属性中的<code>部分</code>字段，而后者必须全部包含</strong><br>  例如：<code>&lt;span id=&#39;select2-chosen-19&#39;&gt;</code>，后面的 <code>19</code> 是随机生成的，我们在定位的时候，就可以选择 contains，<br>  <code>//span[contains(@id,&#39;select2-chosen&#39;)]</code></p></li><li><p>text()</p><p>  <code>//tagname[text()=&#39;Text of the Web Element&#39;]</code><br>  <code>//span[text()=&#39;Sign up with Google&#39;]</code></p></li><li><p>and &amp; or</p><p>  <code>XPath=//tagname[@attribute1=value1 or @attribute2=value1]</code><br>  <code>XPath=//tagname[@attribute1=value1 and @attribute2=value1]</code><br>  <strong>必须使用小写，不然会报错</strong></p><p>  <code>//input[@name=&quot;email&quot; and contains(@placeholder,&#39;Email&#39;)]</code></p></li><li><p>Starts-With()</p><p>  The Starts-With() method is similar to the Contains() method. It is helpful in the case of web elements whose attribute value can change dynamically.</p><p>  <code>//tagname[starts-with(@attribute,value)]</code><br>  <code>//input[starts-with(@placeholder,&#39;Phone&#39;)]</code></p>  <pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[0-9\+\- ]+<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Phone (+1 555 555 5555)*<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-full tracking-custom xxxl:text-size-18 xxl:text-size-16 text-size-14 placeholder:text-gray-300 text-black rounded-md py-10 xxxl:pl-24 xxl:pl-18 pl-12 pr-75 xxxl:h-54 xxl:h-47 h-40 <span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>index</p><p>  <code>//tagname[@attribute=&#39;value&#39;][Index Number]</code></p><p>  <code>(//div[@class=&#39;form-group&#39;]//select)[2]</code><br>  找到第二个 div 下的 select 元素</p></li><li><p>chained Xpath<br>  <code>//tagname1[@attribute1=value1]//tagname2[@attribute2=value2]</code></p><p>  <code>//label[@name=&#39;i_agree&#39;]//input[@data-amplitude=&#39;R_pp&#39;]</code></p>  <pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>i_agree flex items-center xxxl:text-size-16 xxl:text-size-14 text-size-12 text-black font-normal mb-0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>i-agree<span class="token punctuation">"</span></span> <span class="token attr-name">data-amplitude</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>R_agree<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>i_agree<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span> <span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>samp</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>customcheckbox<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">margin-right</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>samp</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-amplitude</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>R_pp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>I agree to LambdaTest's <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.lambdatest.com/legal/privacy<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-blue-100 hover:underline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Privacy Policy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> <span class="token entity named-entity" title="&amp;">&amp;amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">data-amplitude</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>R_tos<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.lambdatest.com/legal/terms-of-service<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-blue-100 hover:underline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Terms of Service<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h3 id="XPath-axes"><a href="#XPath-axes" class="headerlink" title="XPath axes"></a>XPath axes</h3><p>总结如下，一个图胜过千言万语。</p><p><img src="Xpath_tree.jpg"></p><blockquote><p><a href="https://stackoverflow.com/questions/49966055/difference-between-child-following-and-descendant-in-xpath-axes">https://stackoverflow.com/questions/49966055/difference-between-child-following-and-descendant-in-xpath-axes</a></p></blockquote><p>Following 与 Following-Sibling 区别：前者是当前节点后面所有的节点的总和（范围是整个 DOM），而后者则是同一个 parent 下后面的节点的总和</p><ul><li><p>Following</p><blockquote><p>This can be used when you have a unique attribute of the tag before your actual web element. For example, on using Following, you can have all the elements that <code>follow the current node</code>, and you can simply use <code>Index</code> or another <code>chained XPath</code> to locate your actual web element.</p></blockquote><p>  <code>//tagname[@attribute=&#39;value&#39;]//following::tagname</code></p><p>  <code>//div[contains(@class,&#39;password-group&#39;)]//following::div//input[@type=&#39;phone&#39;]</code></p>  <pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-full custom__border xxxl:mt-23 xxl:mt-20 mt-18 password-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-full relative custom__border <span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Desired Password*<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userpassword<span class="token punctuation">"</span></span> <span class="token attr-name">minlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-full tracking-custom xxxl:text-size-18 xxl:text-size-16 text-size-14 placeholder:text-gray-300 text-black rounded-md py-10 xxxl:pl-24 xxl:pl-18 pl-12 pr-75 xxxl:h-54 xxl:h-47 h-40 <span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>absolute right-0 top-0 flex items-center xxxl:h-54 xxl:h-47 h-40 font-normal cursor-pointer pr-18 uppercase<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">togglePasswordVisibility</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'userpassword'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password-group-text xxxl:text-size-14 xxl:text-size-12 text-size-10 block text-gray-300 tracking-custom<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Show<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-full custom__border xxxl:mt-23 xxl:mt-20 mt-18 <span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[0-9\+\- ]+<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Phone (+1 555 555 5555)*<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-full tracking-custom xxxl:text-size-18 xxl:text-size-16 text-size-14 placeholder:text-gray-300 text-black rounded-md py-10 xxxl:pl-24 xxl:pl-18 pl-12 pr-75 xxxl:h-54 xxl:h-47 h-40 <span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Following-Sibling</p><blockquote><p>As the term signifies, siblings are those nodes that share the same parent or are at the same level. Hence, Following-Sibling will return you the node <code>at the same level</code> and <code>after</code> the current node.</p></blockquote><p>  <code>//tagname[@attribute=&#39;value&#39;]//following-sibiling::tagname</code></p><p>  <code>//option[@value=&#39;Manager&#39;]//following-sibling::option[1]</code><br>  same as<br>  <code>//option[@value=&#39;Manager&#39;]//following-sibling::option[@value=&#39;Director/VP&#39;]</code></p>  <pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value=<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>designation<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>designation<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w-full tracking-custom xxxl:text-size-18 xxl:text-size-16 text-size-14 placeholder:text-gray-300 text-black rounded-md py-10 xxxl:px-24 xxl:px-18 px-12 xxxl:h-54 xxl:h-47 h-40 custom_select<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">selected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selected<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>disabled<span class="token punctuation">"</span></span> <span class="token attr-name">hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Designation/Role<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Student/Freelancer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Student / Freelancer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Developer/Tester<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Developer / Tester<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Manager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Manager<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Director/VP<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Director / VP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Founder/CXO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Founder / CXO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Preceding</p><p>  与 following 相对，寻找当前节点的前的元素</p><blockquote><p>locate all the elements before the current node</p></blockquote><p>  <code>//tagname[@attribute=&#39;value&#39;]//preceding::tagname</code></p></li><li><p>Preceding-Sibling</p><blockquote><p> get all the nodes that are siblings or at the same level but are before your current node.</p></blockquote></li><li><p>Child</p><p>  <code>//tagname[@attribute=&#39;value&#39;]//child::tagname</code></p></li><li><p>Parent</p><p>  <code>//tagname[@attribute=&#39;value&#39;]//parent::tagname</code></p></li><li><p>Descendant</p><blockquote><p>Descendants refer to the child nodes, grandchild nodes, etc.</p></blockquote><p>  <code>//tagname[@attribute=&#39;value&#39;]//descendant::tagname</code></p></li><li><p>Ancestor</p><blockquote><p>Ancestors refer to the parent nodes, grandparent nodes, etc.</p></blockquote><p>  <code>//tagname[@attribute=&#39;value&#39;]//ancestors::tagname</code></p></li><li><p>特殊?  </p><p>   <code>//input[attribute::name = &#39;q&#39;]</code></p></li></ul><h2 id="scroll"><a href="#scroll" class="headerlink" title="scroll"></a>scroll</h2><p><a href="https://www.lambdatest.com/blog/scroll-a-webpage-in-selenium-using-java/">https://www.lambdatest.com/blog/scroll-a-webpage-in-selenium-using-java/</a></p><blockquote><p>JavaScriptExecutor in Selenium is used to execute the code written in Javascript within the Selenium automation framework. This interface has two methods namely <code>ExecuteScript</code> and <code>ExecuteAsyncScript</code> which are used to execute the JavaScript code.</p></blockquote><ul><li><p>scroll down to the bottom of the page</p><p>  移动到网页底部<br>  <code>driver.execute_script(&quot;window.scrollTo(0, document.body.scrollHeight)&quot;)</code></p><p>  移动到网页顶部<br>  <code>(&quot;window.scrollTo(0,0)&quot;)</code></p></li><li><p>scroll by the visibility of WebElement on the page</p>  <pre class="line-numbers language-python" data-language="python"><code class="language-python">test_element <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>By<span class="token punctuation">.</span>XPATH<span class="token punctuation">,</span> <span class="token string">"//a[contains(.,'关于我们')]"</span><span class="token punctuation">)</span>driver<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span><span class="token string">"arguments[0].scrollIntoView();"</span><span class="token punctuation">,</span> test_element<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>scroll down in a page by specified pixels</p><p>  <code>driver.execute_script(&quot;window.scrollBy(0,3000)&quot;)</code>  </p><p>  specify the number of pixels the page has to be scrolled。第一个参数控制左右。正数向右，负数向左。第二个参数控制上下，正数为向下，负数向上。</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 编程 </tag>
            
            <tag> 自动化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IPv6 基础</title>
      <link href="/2021/12/14/ipv6/"/>
      <url>/2021/12/14/ipv6/</url>
      
        <content type="html"><![CDATA[<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><h3 id="APNIC"><a href="#APNIC" class="headerlink" title="APNIC"></a>APNIC</h3><p>亚太互联网信息中心（Asia-Pacific Network Information Centre)</p><p>全球五大区域性互联网注册管理机构之一，成立於1993年，负责亚太地区IP地址、ASN（自治系统号）的分配并管理一部分根域名服务器镜像。總部設於澳洲布里斯本。</p><p>APNIC负责亚洲太平洋区域，包含56个经济體，分為東亞、南亞、東南亞、太平洋、中亞等五區，其中東亞區域包含中國大陸、北韓、香港、日本、澳門、蒙古、南韓及台灣</p><h3 id="IP-地址"><a href="#IP-地址" class="headerlink" title="IP 地址"></a>IP 地址</h3><p>互联网协议地址（Internet Protocol Address）   </p><h3 id="ICANN"><a href="#ICANN" class="headerlink" title="ICANN"></a>ICANN</h3><p>非营利性国际组织，Internet Corporation for Assigned Names and Numbers</p><p>ICANN 将部分 IP 地址 和 AS 号码分配给洲际级的互联网注册机构（Regional Internet Registry，RIR），再由 RIR 负责该地区的 IP 地址和 AS 号码地址分配，登记注册。</p><p>通常 RIR 会将地址进一步分配给区内大的 NIR/LIR，然后由它们进一步分配。   </p><p><img src="ICANN.png" alt="IP 地址分配机构"></p><p>中国情况：1997 年成立的<code>中国互联网络信息中心（CNNIC）</code> 属于中央网络安全和信息化委员会办公室直属事业单位，作为国家注册服务机构（NIR）行使国家互联网信息中心职责，是我国企事业单位首选的 IP 地址分配服务机构。</p><p>同时，根据企事业自身情况，也可在 APNIC、CERNIC、CNISP、中国电信三大运营商等单位获取 IP 地址。</p><h3 id="ISP-ICP-IDC"><a href="#ISP-ICP-IDC" class="headerlink" title="ISP ICP IDC"></a>ISP ICP IDC</h3><ul><li><p>ISP<br>  互联网服务接入提供商（Internet Services Provider)<br>  ISP 向客户提供了网络接入等互联网增值业务。站在用户角度来说就似乎你把上网费交给了谁，谁就是 ISP。国内的 ISP 有：中国电信、中国移动、中国联通、塞尔网络、长城宽带、广电网络等</p></li><li><p>ICP<br>  互联网内容提供商（Internet Content Provider）<br>  ICP 向用户提供了各种各样的服务，例如查询、聊天、游戏、新闻、音乐、购物等。世界知名的 ICP 有亚马逊、腾讯、阿里巴巴、百度、京东等</p></li><li><p>IDC<br>  互联网数据中心服务商（Internet Data Center）<br>  IDC 向 ICP、企业和各类网站提供了大量的地址带宽资源以及相关服务，涉及服务器托管、空间租用、带宽接入服务等。IDC 要具备充足电力、建筑的高抗震承重性、恒温恒湿、光缆连通、24小时监控服务等。<br>  中国的 IDC 有中国电信、中国联通、中国移动、世纪互联、光环新网、鹏博士、中联数据等</p><h3 id="others"><a href="#others" class="headerlink" title="others"></a>others</h3></li></ul><ul><li><p>AS<br>  自治系统（Autonomous System）号码：独立网络的标识，能对网络进行自由的管理，过滤信息，控制网络流量，给使用单位更大的管理权限，是<code>一组 IP 地址的集合</code>，是<code>使用统一内部路由协议的一组网络</code>。如果成员单位的网络路由器准备采用 EGP（Exterior Gateway Protocol）、BGP（Border Gateway Protocol）或 IDRP（OSI Inter-Domain Routing Protocol），可以申请 AS 号码。<br>  简单地说，如果把 IP 比作门牌号，AS 号码就好比是门牌号所在的大街。AS 号码是一组 IP 地址集合的管理</p></li><li><p>物联网<br>  Internet of Things，IoT</p></li></ul><ul><li><p>内容分发网络<br>  Content Delivery Network，CDN。中国的 CDN 有三大基础电信运营商、网宿科技、蓝汛、阿里云、风行极客等。</p></li><li><p>IPv6 相关组织</p><ul><li>IETF   </li><li>ICANN   </li><li>IPv6 论坛（IPv6 Forum）   </li><li>WIDE（Widely Integrated Distributed Environment）   </li><li>3GPP（the 3rd Generation Partnership Project）   </li><li>ITU-T</li></ul></li><li><p>IPv6 地址分类</p><ul><li><p>单播地址<br>  Unicast Address。 IPv6 单播地址功能与 IPv4 地址一样受限于 CIDR，由两部分组成，一部分用来标识网络，一部分用来标识接口<br>  包含四种类型：</p><ul><li>全球单播地址<br>  <code>全球路由前缀 + 子网 ID + 接口 ID</code> 三部分组成<br>  全球路由前缀：global routing prefix，占 48 位，分配给各公司和机构<br>  子网 ID：subnet ID，这是二级地址，占 16 位，用于各公司和机构创建自己的子网<br>  接口 ID：interface ID，这是三级地址，占 64 位，用于指明主机或路由器单个网络接口，这在统一子网内是唯一的   </li></ul><ul><li><p>本地单播地址<br>  类似 IPv4 地址中的局域网专用地址</p></li><li><p>兼容性地址<br>  现阶段，IPv4 与 IPv6 需要共存，在 IPv6 的传输机制中包含一项可以在 IPv4网络上传输的 IPv6 数据包的技术，这些路由器可以同时支持 IPv4 和 IPv6。如果要使用这项技术，就需要给 IPv6 的节点分配一个嵌入 IPv4 地址的 IPv6 地址，这被陈伟 IPv4 兼容地址。<br>  该地址前 80 位都是 0，第 <code>81~96</code> 位是 0000，最后 32 位是 IPv4 地址。 <code>这里使用的 IPv4 地址必须是全球唯一的 IPv4 单播地址</code><br>  还有一种和 IPv4 兼容地址很相似，也似乎嵌入 IPv4 地址的 IPv6 地址，叫做 IPv4 映射地址。它可以把 IPv4 地址映射为 IPv6 地址。只是格式上有些略微不同，第 <code>81~96 </code> 位是 <code>ffff</code></p></li><li><p>特殊地址<br>  包括未指定地址和环回地址。未指定地址（0:0:0:0:0:0:0:0 或 ::）仅用于表示某个地址<code>不存在</code>。等价于 IPv4 中的 <code>0.0.0.0</code><br>  环回地址（0:0:0:0:0:0:0:1 或 ::1），允许节点将数据包发送给自己。等价 IPv4 中的 127.0.0.1</p></li></ul></li><li><p>多播地址<br>  Multicast Address，也叫组播，多点广播或群播。<br>  以 <code>11111111</code> 开头，即 <code>ff</code> 为前缀，4b 的标志位，4b 的组播范围和 112b 的多播组标识符（组 ID）组成。例如：ff23::c156:67de:788b:cf9b   </p><ul><li><p>标志位<br>  其高 3b 位为 0，剩下的低 1b 位用于判断多播地址是 “永久性” 还是 “临时性”的。为 0 则是永久的</p></li><li><p>组播范围<br>  用于定义组播地址的范围类型</p></li></ul></li><li><p>任播地址<br>  Anycast Address，是一种网络寻址和路由的策略，使得数据可以根据路由拓扑来决定送到 “最近” 或 “最好” 的目的地，决定由路由选择协议确定。常使用 BGP 来实现任播</p></li></ul></li><li><p>路由协议 &amp; 可被路由协议<br>  路由协议（Routing Protocols）和 可被路由协议（Routed Protocols）是两个概念。例如，IP 数据报能被路由，因此，IP 协议是一个可被路由的协议</p></li><li><p>无状态地址自动配置协议 &amp; IPv6 动态主机配置协议<br>  IPv6 的自动配置中包含两种技术：<br>  一种是传统的有状态自动配置，典型代表就是与 IPv4 相对应的 <code>DHCPv6</code>；<br>  另一种是无状态的 IPv6 自动配置，典型的代表是 RADVD（路由广播守护（The Router Advertisement Daemon）。</p><p>  在无状态地址自动配置技术中，网络接口接收路由器宣告的全局地址前缀，再结合接口 ID 得到一个可聚集全局单播地址。以 RADVD 为代表的无状态自动配置不需要消耗很多机器资源，也不像传统 DHCP 一样需要维护一个本地数据库来维护地址分配状态，它只是<code>广播前缀地址</code>，客户端收到这种广播后再自己使用 EUI64 算法生成全球唯一 IPv6 地址，进行自我配置。因此 RADVD 不能进行 NTP/DNS（DNS 存疑） 等其他传统 DHCP 服务器所能进行的配置。甚至严格地说，它只进行路由广播，地址都是很客户端自己根据算法和规范进行配置。</p><p>  在有状态地址自动配置技术下，通过采用动态主机配置协议，需要配备专门的 DHCP 服务器，网络接口通过客户端/服务器模式从 DHCP 服务器得到地址配置信息。如果希望为客户端指定更加详细的 DNS 设定，NTP 设定，可以考虑 DHCPv6 + RADVD（stateless）</p></li></ul><ul><li><p>常用的 IPv6 路由协议</p><ul><li><p>RIPng<br>  Routing Information Protocol next generation， RIP 协议下一代。</p></li><li><p>OSPFv3<br>  是专门为 IPv6 设计的，是一种链路状态的路由协议。</p></li><li><p>IS-ISv6<br>  Intermediate System-to-Intermediate System, 中间系统到中间系统</p></li><li><p>BGP4+<br>  为了使 BGP4（Border Gateway Protocol 4）能够支持 IPv6 等多种网络层协议，BGP4 进行了扩展即 BGP4+。<br>  RIPng 和 OSPFv3 协议都是在一个自治系统内部使用，与这两个协议不同，BGP4+ 协议被设计在多个自治系统之间进行路由信息交换</p></li></ul></li></ul><h2 id="过渡技术"><a href="#过渡技术" class="headerlink" title="过渡技术"></a>过渡技术</h2><ul><li><p>双栈技术<br>  指在网络节点上同时运行 IPv4 和 IPv6 两种协议，从而在 IP 网络中形成逻辑上相互独立的两个网络。源地址根据要访问的目的地址的类型，自动选取 IPv4 协议或 IPv6 协议。网络设备则更具网络数据包的协议头类型来选择不同的协议栈进行存储转发。<code>双协议栈实现了 IPv4 和 IPv6 网络共存的问题，但解决不了两者互通的问题，并且双协议栈也无法节约 IPv4 地址</code></p></li><li><p>隧道技术   </p><ul><li>6PE<br>  基于 MPLS 的隧道技术，核心思想是借助成熟的 BGP MPLS VPN 技术平台实现在启用 MPLS 的 IPv4 骨干网上传输 IPv6 数据报文。</li><li>6VPE</li><li>6over4</li><li>DS-lite</li></ul></li><li><p>翻译技术（IPv4/IPv6 协议转换技术）</p><ul><li><p>NAT64<br>  NAT64 是有状态的<code>网络层</code>协议翻译技术。为实现 IPv4 网络和 IPv6 网络的互通，需要将 IPv4 地址和端口号与 IPv6 地址和端口号奖励地址映射表。IVI 和 NAT64 的提出实际上是用于替代 NAT-PT。但由于 IVI 的翻译是一对一的，一个 IPv4 地址转换为一个 IPv6 地址，需要耗费较多 IPv4 地址，而 NAT64 却拥有一个地址池，能够使多个 IPv6 地址对应于一个 IPv4 地址。</p><p>  NAT64 支持 NAT64 的双栈路由器部署在 IPv4 网络和 IPv6 网络的边界上。一个接口运行的是 IPv6，另一个接口上运行的是 IPv4。NAT64 模块将 IPv6 数据报文翻译成 IPv4 数据报文，当流量返回时，模块又根据地址映射表将 IPv4 数据报文翻译成 IPv6 数据报文，使得 IPv4 和 IPv6 节点之间能相互访问</p></li><li><p>464XLAT</p></li><li><p>6RD</p></li></ul></li></ul><p>IPv6 过渡技术总体上可以分为隧道，翻译两个大类。隧道技术采用的是一种协议封装于另外一种协议的方式，他只要求升级隧道的入口和出口设备。但隧道端点需要封装/解封装，转发效率低，也无法实现 IPv4 和 IPv6 的互访。</p><p>3 种翻译技术中， NAT64 支持场景较小，只能实现 IPv6 主机到 IPv4 服务器的单向访问</p><p>未完待续</p>]]></content>
      
      
      
        <tags>
            
            <tag> 网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Fiddler 入门</title>
      <link href="/2021/12/14/fiddler/"/>
      <url>/2021/12/14/fiddler/</url>
      
        <content type="html"><![CDATA[<p>抓包的英文为：sniffer packet 或 packet capture。这篇文章介绍常用的两款软件：Wireshark 和 Fiddler。<br>这两者的主要区别是：</p><ul><li>Wireshark 可以捕捉三四层（TCP/IP)网络包，以及高层的 HTTP、HTTPS 协议（HTTPS 不能解密）。</li><li>Fiddler 专注处理 HTTP 以及 HTTPS，主要用于 WEB 调试。</li></ul><p>本文先介绍 Fiddler，Wireshark 后面抽空再写一篇。另外文本介绍了 HTTP 协议的一些知识，这对了解 Fiddler 和抓包很有必要，请仔细阅读。</p><h2 id="Fiddler"><a href="#Fiddler" class="headerlink" title="Fiddler"></a>Fiddler</h2><p>使用 Fiddler 需要有一些 HTTP 协议的基础。</p><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><blockquote><p><a href="https://www.telerik.com/fiddler/fiddler-classic">https://www.telerik.com/fiddler/fiddler-classic</a></p></blockquote><p>Fiddler 是商业软件，我们下载 <code>classic</code> 版本就行，这个是免费的。<br>Fiddler 是基于 C# 开发的。主要在 Windows 运行。目前的版本是 4。如果是其他系统，需要下载其他的 Fiddler 版本（收费）。</p><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>你打开软件后，Fiddler 会自动添加一个系统代理，端口号为 8888。</p><pre class="line-numbers language-none"><code class="language-none">http&#x3D;127.0.0.1:8888;https&#x3D;127.0.0.1:8888<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>下面两个都是同样</p><p><img src="1.png"><br><img src="2.png"></p><p>端口可以改的，位置如下：</p><p><img src="3.png"></p><p>这里有一个坑，如果你的电脑有翻墙的软件，请注意兼容问题。如果你的代理软件没有开启 <code>系统代理</code>, 但是在 Firefox 和 Chrome 下面都抓不到包的话，请检查你的浏览器设置</p><ul><li><p>Firefox</p><p>  在网络设置里面，请选择 <code>No proxy</code></p><p>  <img src="4.png"></p></li><li><p>Chrome</p><p>  这种情况一般是安装了 <code>SwitchyOmega</code> 等代理插件造成的。请选择 <code>Direct</code> 解决问题</p><p>  <img src="5.png"></p><p>  或者直接开启无痕模式即可</p></li></ul><h3 id="界面"><a href="#界面" class="headerlink" title="界面"></a>界面</h3><p><img src="6.png"></p><ul><li><p>主体的左边是捕获的 http 包。右边是一些工具，其中最常用的是 <code>Inspectors</code>，这个是包的查看器。在这个选项中，可以查看包的头部 Headers 或者直接 Raw 格式查看。右边这一块，分为上下两部分，分别对应 <code>请求报文</code> 和 <code>响应报文</code></p></li><li><p>左边 <code>Body</code> 这一列是 HTTP 响应中包含的字节数（byte）</p></li><li><p>如果右边报文里面出现乱码，请打开 <code>Decode</code> 按钮，然后重启软件<br>  <img src="7.png"></p></li><li><p>点击左下角的 <code>Capturing</code> 可以停止抓包<br>  <img src="8.png"></p></li></ul><h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><h4 id="捕捉-HTTPS-包"><a href="#捕捉-HTTPS-包" class="headerlink" title="捕捉 HTTPS 包"></a>捕捉 HTTPS 包</h4><p>HTTPS 是加密的，我们需要在系统安装 Fiddler 所提供的证书，来实现 HTTPS 解密。<br>关于为啥要安装证书，以及证书的作用及重要性，请自行 Google 查询。很多审计系统，比如深信服，同样需要在客户电脑安装证书之后才能解密 HTTPS，实现监控。</p><p><img src="12.png"></p><h4 id="修改-User-Agent"><a href="#修改-User-Agent" class="headerlink" title="修改 User-Agent"></a>修改 User-Agent</h4><p>Fiddler 可以帮我们修改 User-Agent，这样就能伪装成任何客户端。</p><p><img src="16.png"></p><h4 id="父请求和子请求"><a href="#父请求和子请求" class="headerlink" title="父请求和子请求"></a>父请求和子请求</h4><p>在一个网页中，打开一个网页的过程如下：</p><ol><li>在浏览器输入 URL。</li><li>浏览器会发送第一个 HTTP 请求去获取页面布局的 HTML，这个请求叫做 <code>父请求</code>。然后服务器把 HTTP 响应发回给浏览器。</li><li>浏览器会分析 HTTP 响应中的 HTML。如果发现 HTML 中引用了很多其他文件，比如图片、CSS 文件、JS 文件等，浏览器会自动再次发送很多 HTTP 请求，去获取图片、CSS 文件或者 JS 文件。这些 HTTP 请求叫做 <code>子请求</code>。</li><li>当所有子请求的响应都返回后，浏览器会把 1 个父请求加上多个子请求渲染出来，这样就形成一个页面，网页就在浏览器上显示出来。</li></ol><p><img src="17.png"></p><p>在这里可以筛选出相应的包</p><h4 id="查看响应"><a href="#查看响应" class="headerlink" title="查看响应"></a>查看响应</h4><p>HTTP 响应可能是 HTML 文档，可能是一个图片，也可能是一个 JSON。使用 Raw 选项卡可以查看完整的 HTTP 响应，WebView 可以查看 HTML 文档，ImageView 可以查看图片，JSON 可以通过 JSON tab 来查看</p><p><img src="18.png"></p><h4 id="断点"><a href="#断点" class="headerlink" title="断点"></a>断点</h4><p>Fiddler 本身是一个代理服务器，其可以设置断点，拦截住 HTTP，修改之后再放行。</p><ul><li><p>全局断点<br>  这种方法会拦截所有的会话，位置如下：<code>Rules &gt; Automatic Breakpoint</code></p><p>  <code>Before Requests</code>：修改 HTTP 请求<br>  <code>After Requests</code>： 修改 HTTP 响应</p></li><li><p>单个断点</p></li></ul><p><img src="19.png"></p><p>在软件左下角的 QuickExec 输入 <code>bpu URL</code>（如上图），这种方法只拦截你输入的 URL。要想消除单个断点，可以在命令行中输入 <code>bpu</code>。这种是修改 HTTP 请求</p><p><code>bpafter URL</code> 则是修改 HTTP 响应。同样输入 <code>bpafter</code> 则是取消单个断点。</p><h4 id="TextWizard"><a href="#TextWizard" class="headerlink" title="TextWizard"></a>TextWizard</h4><p>这是一个可以帮助你对字符进行 Encode 和 Decode 的小工具<br><code>Tools &gt; TextWizard</code></p><h4 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h4><p><code>Ctrl + X</code> 删除所有 Session<br><code>Ctrl + A</code> 选择所有 Session<br><code>ESC</code> 不选择任何的 Session<br><code>Ctrl + I</code> 反选 Session<br><code>Delete</code> 删除选择的 Session<br><code>Shift + Delete</code> 删除未选择的 Session<br><code>R</code> 重放选择的 Session （可以多个）<br><code>Shift + R</code> 多次重放选择的 Session（可以重放多个 Session）<br><code>U</code> 无条件地重放选择的 Session（不会发送 If-Modified-Since 和 If-None-Match header）<br><code>Shift + U</code> 多次无条件重放<br><code>P</code> 选择 “当前 Session” 的 “父 Session” （这个功能取决于 Referer Header）<br><code>C</code> 选择 “当前 Session” 的 “子 Session”<br><code>D</code> 选择 “重复的 Session”（有相同 URL 和 method）<br><code>BackSpace 或鼠标上的 “back”</code> 选择 “上次选择的 Session”<br><code>M</code> 给选择的 Session 加注释<br><code>Alt + 鼠标左键</code> 选择相关联的多个 Session<br><code>Alt + Q</code>: 快速将焦点定位到 QuickExec 命令行<br><code>Ctrl + I</code>： 当选择了一个 session 的时候， 可以快速将此 session 的 URL 插入到当前命令行光标处</p><h4 id="QuickExec"><a href="#QuickExec" class="headerlink" title="QuickExec"></a>QuickExec</h4><p>Fiddler 左下角有一个命令行工具，可以直接输入命令。常用的命令如下：</p><ul><li><code>help</code> 打开官方的使用页面介绍，所有命令都会列出来</li><li><code>cls</code> 清屏，Ctrl + X 同样效果</li><li><code>select</code> 选择会话的命令</li><li><code>?.png</code> 用来选择 .png 后缀的图片</li><li><code>bpu</code> 截获 request</li><li><code>urlreplace www.test.com www.test-dev.com</code> 替换掉 host。（最初发送给 A 站点的 HTTP 请求，都被 Fiddler 转发到 B 站点，而在浏览器中毫无感觉，测试或者 debug 中经常有这种需求）</li></ul><p>具体命令请参考：<br><a href="https://www.fiddlerbook.com/fiddler/help/quickexec.asp">https://www.fiddlerbook.com/fiddler/help/quickexec.asp</a></p><h4 id="Fiddler-插件"><a href="#Fiddler-插件" class="headerlink" title="Fiddler 插件"></a>Fiddler 插件</h4><p>下载地址：<br><a href="https://www.telerik.com/fiddler/add-ons">https://www.telerik.com/fiddler/add-ons</a></p><ul><li><p>JavaScript Formatter<br>格式化 JavaScript 代码</p></li><li><p>Gallery 插件<br>选择很多图片的会话后，Gallery 插件可以显示这些图片的缩略图</p></li></ul><h4 id="AutoResponder"><a href="#AutoResponder" class="headerlink" title="AutoResponder"></a>AutoResponder</h4><p>Fiddler 可以替换自动返回的一个伪造的 HTTP 响应。跟下断点修改 HTTP 响应差不多，只不过 AutoResponder 是自动的。</p><ol><li><p>拖动左边的 Session 到 AutoResponder 中<br><img src="20.png"></p></li><li><p>然后我们选择 <code>Find a file...</code>，将其替换。</p></li></ol><p><img src="21.png"></p><ol start="3"><li><p>选中 <code>Enable rules</code>，激活规则。选中 <code>Unmatched requests passthrough</code>，放行不匹配的 HTTP 请求。单击 <code>Save</code></p></li><li><p>这样文件就会自动替换成我们选择的文件。</p></li></ol><h4 id="手机抓包"><a href="#手机抓包" class="headerlink" title="手机抓包"></a>手机抓包</h4><p>Fiddler 可以捕获 iOS、Android 等远程设备的包。</p><p>原理：安装 Fiddler 的电脑与手机设备处于同一个局域网。Fiddler 作为代理服务器。我们只需在手机指定 proxy server（fiddler 所在电脑的 IP 地址） 的地址即可。当然，如果你想查看加密的 HTTPS 流量，需要在手机设备安装 Fiddler 的证书。</p><p>首先，我们需要打开 Fiddler 的设置</p><p><img src="22.png"></p><p>然后下载生成证书的插件，手机安装证书的操作自行 Google 吧</p><p><img src="23.png"></p><p>这里可以选择要捕获的设备</p><p><img src="24.png"></p><h4 id="Composer"><a href="#Composer" class="headerlink" title="Composer"></a>Composer</h4><p>这个组件可以用来发送 HTTP。</p><p><img src="25.png"></p><p>Composer 有两种编辑模式，<code>Parsed</code> 和 <code>Raw</code></p><h3 id="局限"><a href="#局限" class="headerlink" title="局限"></a>局限</h3><p>可以抓取支付宝、淘宝等手机 APP 的信息, 不过有些手机走的是 <code>HTTP2</code> 协议，所以抓不到，这种情况就得用 wireshark 抓包了，不过抓取后，<code>解密是个问题</code>。</p><ol><li><p>Fiddler 并不支持全部协议，目前已知的有 <code>HTTP2</code>、<code>TCP</code>、<code>UDP</code>、<code>WebSocket</code> 等，如果应用走了这些协议，那么 iddler 肯定是抓不到的</p></li><li><p>证书写死在 APP 中，Fiddler 不能抓取。也就是说，APP 不信任 Fiddler 颁发的证书，而只信任自己的证书</p></li></ol><h2 id="HTTP-协议"><a href="#HTTP-协议" class="headerlink" title="HTTP 协议"></a>HTTP 协议</h2><p>HTTP协议采用了请求/响应模型。客户端向服务器发送一个请求报文，请求报文包含请求的方法、URL、协议版本、请求头部和请求数据。服务器以一个状态行作为响应，响应的内容包括协议的版本、成功或者错误代码、服务器信息、响应头部和响应数据。</p><p><strong>HTTP 协议采用请求/响应模型。客户端向服务器发送一个请求报文，服务器以一个状态作为响应。</strong></p><h3 id="请求报文-Request"><a href="#请求报文-Request" class="headerlink" title="请求报文 Request"></a>请求报文 Request</h3><p><img src="9.png"></p><p>一个 HTTP 请求报文由请求行（Request line）、请求头部（Header）、空行和请求数据 4 个部分组成</p><ul><li><p>Request line</p><p>  报文第一行（示例中因为 URL 太长，导致了换行，其实只有一行）<br>  Post 表示请求方法（Method），常见的还有 Get。（具体参考本文的 [HTTP 请求方法])</p><p>  请求方法后面接请求的 URL。 之后的 <code>HTTP/1.1</code> 表示使用的 HTTP 版本。</p></li><li><p>Header</p><p>  Cookie 也是 Header 中的一部分</p></li><li><p>Body</p><p>  报文的实体，这个部分在 Get 方法里面是没有的。<br>  <strong>在 Header 和 Body 之间需要空出一行。</strong></p></li></ul><blockquote><p>首先声明，HTTP协议没有对传输的数据大小进行限制，HTTP协议规范也没有对URL长度进行限制。 而在实际开发中存在的限制主要有：<br>GET: 特定浏览器和服务器对URL长度有限制，例如IE对URL长度的限制是2083字节(2K+35)。对于其他浏览器，如Netscape、FireFox等，理论上没有长度限制，其限制取决于操作系统的支持。<br>POST: 由于不是通过URL传值，理论上数据不受限。但实际各个WEB服务器会规定对post提交数据大小进行限制，Apache、IIS6都有各自的配置。</p></blockquote><h4 id="HTTP-请求方法"><a href="#HTTP-请求方法" class="headerlink" title="HTTP 请求方法"></a>HTTP 请求方法</h4><p>常见的有：<code>GET | POST | PUT | DELETE</code>。可以理解为：对某个资源分别进行 <code>查 | 改 | 增 | 删</code> 四个操作。参见的 GET 和 POST</p><p>还有一个 <code>HEAD</code>，类似于 GET 请求，只不过服务器返回的响应中没有具体的内容，用于获取报头。</p><ul><li><p>GET</p><p>  是最常见的方法，用于获取资源，常用于向服务器查询某些信息。</p><p>  带参数的 Get:<br>  浏览器可以在 GET 方法中把数据传送给服务器，如下</p><p>  问号后面是数据，这种叫做<code>查询字符串（Query String)</code><br>  查询字符串以 <code>名=值</code> 这样的形势出现，多个名值之间用字符 <code>&amp;</code> 隔开。这种方式不适合传送私密数据。另外，由于不同的浏览器对地址的字符限制也有所不同，一般最多只能识别1024个字符，所以如果需要传送大量数据的时候，也不适合使用GET方式。</p><p>  <img src="10.png"></p></li><li><p>POST</p><p>  POST 允许客户端给服务器提供更多的信息。</p><p>  <img src="11.png"></p><p>  图中红框部分即为 POST 的内容，同样也是 <code>名=值</code> 这样的形势出现，多个名值之间用字符 <code>&amp;</code> 隔开。</p></li><li><p>PUT</p><p>  从客户端向服务器传送的数据取代指定文档的内容</p></li><li><p>DELETE</p><p>  请求服务器删除指定的页面</p></li></ul><h3 id="响应报文-Response"><a href="#响应报文-Response" class="headerlink" title="响应报文 Response"></a>响应报文 Response</h3><p><img src="13.png"></p><p>响应报文由响应行（Response line）、响应首部（Response header）、空行、主体（Body）组成</p><p>同样，<strong>在 Header 和 Body 之间需要空出一行。</strong></p><ul><li><p>Response line<br>  第一行，由 HTTP 协议版本号、状态码、状态消息 3 部分组成。如下：</p>  <pre class="line-numbers language-none"><code class="language-none">HTTP&#x2F;1.1 200 OK<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h4 id="HTTP-状态码"><a href="#HTTP-状态码" class="headerlink" title="HTTP 状态码"></a>HTTP 状态码</h4><p>状态码用来告诉 HTTP 客户端， web 服务器是否产生了什么响应</p><p>分 5 大类</p><ul><li><p>1XX</p><p>  100 ~ 101<br>  信息提示，表示请求已被成功接收，继续处理</p></li><li><p>2XX</p><p>  200 ~ 206<br>  成功</p><p>  200（OK）<br>  最常见的，成功响应的状态码</p><p>  204（No Content，没有内容）<br>  返回的 HTTP 响应只有一个状态行和 一些 Header，没有实体内容（Body）<br>  作用如下：</p><ul><li><p>在不获取资源的情况下了解资源的情况，比如判断其类型</p></li><li><p>查看某个对象是否存在</p></li><li><p>测试资源是否被更改</p><p>206（Partial Content，部分内容）<br>服务器已经成功处理了部分 GET 请求<br>作用如下：</p></li><li><p>迅雷或者 HTTP 下载工具都是使用 206 状态码来实现断点续传的</p></li><li><p>将一个大文档分解为多个下载段同时下载，比如在线看视频<br><img src="14.png"></p></li></ul></li><li><p>3XX</p><p>  300 ~ 305<br>  重定向。要完成请求，必须进行更进一步的处理</p><p>  301（Moved Permanently)<br>  表示请求的网页已经永久性地转移到另一个地址<br>  作用如下：</p><ul><li><p>防止用户输错域名。比如 Goolge 担心用户输错域名，就把其他类似的域名买下来，比如 go0gle.com，然后重定向到 <code>www.google.com</code>。</p></li><li><p>网站更换域名。一些网站壮大后，会换个更好的域名。比如京东以前的域名是 <code>www.360buy.com</code>，现在的域名是 <code>www.jd.com</code>。</p></li><li><p>有多个权重不错的域名，需要把所有的权重都传递到新域名上，这就需要 301 重定向了。**如果不设置 301，多个域名绑定在一个主机头上，会被搜索引擎认为是两个相同的站点，不利于网站的排名。绑定的域名越多，内容重复度也就越高，排名越低。</p><p>302（Found）<br>当我们访问一个 URL 的时候，服务器要我们访问另一个资源，这时候浏览器会继续发一个 HTTP，请求访问<code>新的资源</code>。比如：有些需要登陆才能查看的页面，我们会被服务器返回 302，跳转到登录页面。</p><p>301 和 302 区别：两者语法上是一摸一样的，都是在 Location 中返回新的 URL。具体区别在：</p></li><li><p>301 表示旧地址的资源已经被<code>永久移除了</code>（这个资源不可访问了），搜索引擎会把权重算到新的地址；</p></li><li><p>302 表示旧地址的资源还在（仍然可以访问），这个重定向只是临时从旧地址跳转到新地址。</p><p>304（Not Modified）<br>表示上次的文档已经缓存了，还可以继续使用。304 的响应是没有 Body 的</p></li></ul></li><li><p>4XX</p><p>  400 ~ 415<br>  客户端错误，请求有语法错误或请求无法实现</p><p>  400（Bad Request）<br>  表示客户端请求有语法错误（如表单错误、Cookie 错误），不能被服务器所理解。</p><p>  401（Unauthorized）<br>  未授权错误。有些网页采用的是 HTTP 基本认证（Basic Authentication），需要在 HTTP 请求上带上 Authorization Header，否则服务器会返回状态码 401。</p><p>  403（Forbidden）<br>  表示 Web 客户端发送的请求被 Web 服务器拒绝了。如果服务器想说明为什么拒绝请求，可以在 Body 中描述原因。<strong>但是这个状态码通常表示服务器不想说明拒绝原因</strong></p><p>  404（Not Found）<br>  当你访问一个 URL，这个 URL 的域名是正确的，但是定位的资源不存在，服务器就会返回 404，告诉浏览器资源不存在（意味 URL 输入错误）</p></li><li><p>5XX</p><p>  500 ~ 505<br>  服务器错误，服务器未能实现合法的请求</p><p>  500（Internal Server Error）<br>  服务器内部错误。原因很多，比如代码错误、数据库连接语句出错、程序内部抛出异常、空指针错误等。</p><p>  503（Server Unavailable）<br>  表示服务器暂时不可用。由于服务器维护或过载，服务器当前无法处理请求。这个状况是临时的，并且将在一段时间后恢复。</p></li></ul><h3 id="HTTP-版本"><a href="#HTTP-版本" class="headerlink" title="HTTP 版本"></a>HTTP 版本</h3><blockquote><p><a href="https://juejin.cn/post/6844903923136856078">https://juejin.cn/post/6844903923136856078</a><br><a href="https://www.jianshu.com/p/52d86558ca57">https://www.jianshu.com/p/52d86558ca57</a></p></blockquote><pre class="line-numbers language-none"><code class="language-none">HTTP 0.9 -&gt; HTTP 1.0 -&gt; HTTP 1.1 -&gt; HTTP 2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>HTTP 1.1 是在 1.0 发布之后的半年就推出了，完善了 1.0 版本。目前也还有很多的互联网项目基于 HTTP 1.1 在向外提供服务。</p><blockquote><p>虽然在2015年，HTTP 2 就发布了，但是目前互联网的服务中，使用 HTTP 1.x 版本的服务不在少数，其中可能很大的一个原因是在当前的主流浏览器比如 chrome、Firefox 它们只支持基于 TLS 部署的 HTTP 2 协议，也就是说需要你的网站先升级为 HTTPS 才可以。然而 HTTPS 是需要申请证书的。<br>当然如果你的网站已经升级过 HTTPS 了，那么想升级 HTTP 2 就非常容易了。</p></blockquote><h3 id="HTTP-Content-type"><a href="#HTTP-Content-type" class="headerlink" title="HTTP Content-type"></a>HTTP Content-type</h3><blockquote><p><a href="https://tool.oschina.net/commons">https://tool.oschina.net/commons</a></p></blockquote><p>链接记录了各种文件后缀在 HTTP 里的表达。如：</p><table><thead><tr><th>后缀</th><th>表示</th></tr></thead><tbody><tr><td>.html</td><td>text/html</td></tr><tr><td>.mp3</td><td>audio/mp3</td></tr><tr><td>.pdf</td><td>application/pdf</td></tr><tr><td></td><td></td></tr></tbody></table><h3 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h3><p><img src="15.png"></p><p>上图框选的都是 Header</p><p>HTTP 请求和 HTTP 响应中都有很多用于缓存的 Header。HTTP 缓存是指当 Web 请求抵达缓存时，如果本地有“已缓存的”副本，就可以从本地存储设备而不是原始服务器中提取这个文档。</p><ul><li><p>Cookies  </p></li><li><p>*Cookie 是一种 HTTP Header**。 它由 key = value 的形式组成。有多个 key value 值，用 <code>;</code> 分隔。<br>浏览器把 Cookie 通过 HTTP 请求中的 “Cookie：头部内容” 发送给 Web 服务器，Web 服务器通过 HTTP 响应中的 “Set-Cookie：头部内容” 把 Cookie 发送给浏览器。</p></li><li><p>Accept<br>表示浏览器客户端可以接受的媒体类型。<br>例如：<code>Accept：text/html</code> 代表浏览器可以接受服务器返回 html。<br>通配符 <code>*</code> 代表任意类型，例如： <code>Accept: text/html,*/*;q=0.8</code> 代表浏览器可以处理所有的类型。一般浏览器客户端给 Web 服务器发送的都是这个。</p></li><li><p>Accept-Encoding<br>这个跟压缩有关，告诉服务器，浏览器所支持的压缩类型</p></li><li><p>Accept-Language<br>浏览器声明自己接受的语言。如下：<br><code>Accept-Language: en-US;q=0.8,zh-CN;q=0.6,zh;q=0.4,zh-TW;q=0.2</code></p></li><li><p>User-Agent<br>作用时浏览器用来告诉服务器，客户端使用的操作系统及版本、cpu 类型、浏览器及版本、浏览器的渲染引擎、浏览器的语言、浏览器插件等。</p></li><li><p>Referer<br>主要让服务器判断来源页面，即用户是从哪个页面来的。网站通常用其来统计用户来源，看用户是从搜索页面来的，还是其他网站链接过来的，或是从书签等访问的。<br>有时也被用作防盗链，即下载时判断来源地址是不是在网站域名之内，否则就不能下载或显示。</p></li><li><p>Connection<br>从 HTTP/1.1 起，系统默认都开启了 <code>Connection：Keep-Alive</code>，保持连接特性。它有一个保持时间，可以在不同的服务器软件中设定这个时间。</p></li><li><p>Host<br>这个 Header 是必须的，它的作用是指定被请求的主机和端口号，它通常从 HTTP URL 中提取出来。</p></li><li><p>缓存有关的 Header</p><ul><li><p>HTTP 请求相关<br><code>Cahce-Control: max-age=0</code>：以秒为单位<br><code>If-Modified-Since: Mon,19 Nov 2012 08:38:01 GMT</code>：缓存文件的最后修改时间<br><code>If-None-Match: &quot;0693f67a67cc1:0&quot;</code>：缓存文件的 Etag 值<br><code>Cache-Control：no-cache</code>：不使用缓存<br><code>Pragma: no-cache</code>：不使用缓存</p></li><li><p>HTTP 响应相关<br><code>Cache-Control: public</code>：响应被缓存，并且在多用户间共享<br><code>Cache-Control: private</code>：响应只能作为私有缓存，不能再用户之间共享<br><code>Cache-Control: no-cache</code>：提醒浏览器要从服务器提取文档进行验证<br><code>Cache-Control: no-store</code>：绝对禁止缓存（用于机密，敏感文件）<br><code>Cache-Control: max-age=60</code>：60s 之后缓存过期（相对时间）<br><code>Date: Mon, 19 Nov 2021 80:39:00 GMT</code>：当前响应发送的时间<br><code>Expires: Mon, 19 Nov 2021 08:40:01 GMT</code>：缓存过期的时间（绝对时间）<br><code>Last-Modified: Mon, 19 Nov 2012 08:38:01 GMT</code>：服务器端文件的最后修改时间<br><code>ETag: &quot;20b1add7ec1cd1:0&quot;</code>：服务器端文件的 ETag 值<br><strong>浏览器优先使用 cache-control，之后才是 Expires</strong></p></li></ul></li></ul><h3 id="HTTP-压缩"><a href="#HTTP-压缩" class="headerlink" title="HTTP 压缩"></a>HTTP 压缩</h3><p>HTTP 采用通用的压缩算法，比如用 gzip 来压缩 HTML、JavaScript、CSS 文件，能大大减少网络传输的数据量，提高了用户显示网页的速度。但是会增加服务器的开销。<br>压缩的过程：</p><ol><li>浏览器发送 HTTP 请求给 Web服务器，请求中的 Header: <code>Accept-Encoding: gzip, deflate</code>。（告诉服务器，浏览器支持 gzip 压缩）</li><li>Web 服务器接到 HTTP 请求后，生产原始的 HTTP 响应，其中有原始的 Content-Type 和 Content-Length。</li><li>Web 服务器通过 gzip 来对 HTTP 响应进行编码，编码后 Header 中有 Content-Type 和 Content-Lenght（压缩后的大小），并且增加了    <code>Content-Encoding: gzip</code>，然后把 HTTP 响应发送个浏览器。</li><li>浏览器接收到 HTTP 响应后，根据 Content-Encoding: gzip 来对 HTTP 响应进行解码，获取到原始 HTTP 响应后显示出网页。</li></ol><p>可以使用的编码有：</p><ul><li>gzip，实体采用 GNU zip 编码</li><li>compress， 实体采用 UNIX 的文件压缩程序</li><li>deflate，采用 zlib 的格式压缩的</li><li>identity，表示没有对实体进行编码；当没有 Content-Encoding header 时，默认就是这种情况。</li></ul><h3 id="URL-Encode"><a href="#URL-Encode" class="headerlink" title="URL Encode"></a>URL Encode</h3><p>URL 编码就是把所有非英文字幕、数字字符都替换成百分号后加两位十六进制数，如空格的编码为 <code>%20</code>。</p><h3 id="HTTP-认证"><a href="#HTTP-认证" class="headerlink" title="HTTP 认证"></a>HTTP 认证</h3><ul><li><p>基本认证<br>一些网站和 Web 服务使用的是 HTTP 基本认证。有些桌面应用程序也通过 HTTP 协议 跟 Web 服务器交互，桌面应用程序一般不会使用 Cookie，而是把 “用户名 + 冒号 + 密码” 用 Base64 编码放在 HTTP 请求中的 Header <code>Authorization</code> 中发送给服务端，这种方法叫 HTTP 基本认证（Basic Authentication）  </p><p>  缺点:</p><ul><li>HTTP 协议是无状态的，同一个客户端对服务器的每个请求都需要认证。</li><li>Base64 是一种可逆编码，非常容易破解</li><li>使用基本认证登录后，除非关闭浏览器或清除历史记录，否则将无法登出</li><li>无法防止重放攻击。</li></ul></li><li><p>摘要认证</p><blockquote><p><a href="https://www.cnblogs.com/xiaohuochai/p/6189065.html">https://www.cnblogs.com/xiaohuochai/p/6189065.html</a></p></blockquote></li></ul><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><blockquote><p><a href="https://www.jianshu.com/p/a2c4ede32d11">https://www.jianshu.com/p/a2c4ede32d11</a><br><a href="https://zhuanlan.zhihu.com/p/141205398">https://zhuanlan.zhihu.com/p/141205398</a><br><a href="https://www.cnblogs.com/biyeymyhjob/archive/2012/07/28/2612910.html">https://www.cnblogs.com/biyeymyhjob/archive/2012/07/28/2612910.html</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 抓包 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Build a mysql of docker env</title>
      <link href="/2021/07/28/build-a-mysql-of-docker-env/"/>
      <url>/2021/07/28/build-a-mysql-of-docker-env/</url>
      
        <content type="html"><![CDATA[<h2 id="安装-Docker"><a href="#安装-Docker" class="headerlink" title="安装 Docker"></a>安装 Docker</h2><p>这里我用虚拟机里的 Debian 系统演示，这里我没有安装 Sudo<br>更加详细的信息可以参考官方的说明</p><blockquote><p><a href="https://docs.docker.com/engine/install/debian/">https://docs.docker.com/engine/install/debian/</a></p></blockquote><ul><li><p>升级<br>  <code>apt update </code></p></li><li><p>安装必要软件<br>  <code>apt-get install apt-transport-https ca-certificates curl gnupg lsb-release</code></p></li><li><p>添加官方 GPG Key（后面的 –socks5 是指定代理，视自己网络环境添加）<br>  <code>curl -fsSL https://download.docker.com/linux/debian/gpg --socks5 192.168.100.133:23333 |  gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</code></p></li><li><p>添加官方 docker 安装源</p>  <pre class="line-numbers language-none"><code class="language-none">echo \&quot;deb [arch&#x3D;amd64 signed-by&#x3D;&#x2F;usr&#x2F;share&#x2F;keyrings&#x2F;docker-archive-keyring.gpg] https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;debian \$(lsb_release -cs) stable&quot; | tee &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;docker.list &gt; &#x2F;dev&#x2F;null<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>再次 update<br>  <code>apt update</code></p></li><li><p>安装（如果安装过程缓慢，请参考下面的 proxychains 解决方案，或换个时间段再试试）<br>  <code>apt install docker-ce docker-ce-cli containerd.io</code></p></li><li><p>验证安装<br>  <code>docker -v</code></p></li></ul><h2 id="添加-MySQL"><a href="#添加-MySQL" class="headerlink" title="添加 MySQL"></a>添加 MySQL</h2><ul><li><p>查找 MySQL<br>  <code>docker search mysql</code></p></li><li><p>下载官方最新的镜像<br>  <code>docker pull mysql:latest</code></p></li><li><p>查看本地镜像<br>  <code>docker images</code></p></li><li><p>运行 MySQL 容器</p>  <pre class="line-numbers language-none"><code class="language-none">docker run -d --name mysql-test -p 3307:3306 -e MYSQL_ROOT_PASSWORD&#x3D;123456 -v &#x2F;mydocker&#x2F;mysql&#x2F;conf:&#x2F;etc&#x2F;mysql&#x2F;conf.d -v &#x2F;mydocker&#x2F;mysql&#x2F;logs:&#x2F;var&#x2F;log&#x2F;mysql -v &#x2F;mydocker&#x2F;mysql&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  <code>-d</code>: 后台运行<br>  -p 3307:3306：将主机的 3307 端口映射到 docker 容器的 3306 端口(<code>第一个是主机端口号，第二个是容器端口号</code>)<br>  <code>--name mysql</code>：运行服务名字<br>  <code>-v /mydocker/mysql/conf:/etc/mysql/conf.d</code>：将主机/mydocker/mysql录下的conf/my.cnf 挂载到容器的 /etc/mysql/conf.d<br>  <code>-v /mydocker/mysql/logs:/var/log/mysql</code>：将主机/mydocker/mysql目录下的 logs 目录挂载到容器的 /logs。<br>  <code>-v /mydocker/mysql/data:/var/lib/mysql</code> ：将主机/mydocker/mysql目录下的data目录挂载到容器的 /var/lib/mysql<br>  <code>-e MYSQL_ROOT_PASSWORD=123456</code>：初始化 root 用户的密码<br>  <code>--character-set-server=utf8mb4</code> ：设置字符集<br>  <code>--collation-server=utf8mb4_unicode_ci</code>：设置校对集</p></li><li><p>进入 MySQL 终端</p><p>  <code>docker exec -it  529a4d9afd8e /bin/bash</code></p><p>  <img src="3.png"></p><p>  <code>-it</code>：启动交互界面<br>  529a4d9afd8e：可以是 ID 或是容器名称</p></li><li><p>开始使用 MySQL<br>  <code>mysql -u root -p12345</code></p><p>  <img src="2.png"></p><p>  你没看错，<code>-p</code> 参数和密码是连在一起的。如果你分开输入，会要求你再输入一次密码</p><p>  <img src="1.png"></p></li></ul><h2 id="Docker-一些基本操作"><a href="#Docker-一些基本操作" class="headerlink" title="Docker 一些基本操作"></a>Docker 一些基本操作</h2><ul><li><p>查看运行的容器<br>  <code>docker ps</code></p></li><li><p>停止容器<br>  <code>docker stop 容器id</code></p></li><li><p>强制停止容器<br>  <code>docker kill 容器id</code></p></li><li><p>删除容器<br>  <code>docker rm -f 容器ID</code></p></li></ul><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="apt-代理问题"><a href="#apt-代理问题" class="headerlink" title="apt 代理问题"></a>apt 代理问题</h3><p>原因：<br><font color=purple size=5>Aptitude will not use the HTTP Proxy environment variables</font></p><p><a href="https://www.serverlab.ca/tutorials/linux/administration-linux/how-to-set-the-proxy-for-apt-for-ubuntu-18-04/">详细</a></p><h3 id="VIM-操作"><a href="#VIM-操作" class="headerlink" title="VIM 操作"></a>VIM 操作</h3><pre class="line-numbers language-none"><code class="language-none">1. 选定文本块。使用v进入可视模式，移动光标键选定内容。2.复制的命令是y，即yank（提起） ，常用的命令如下：    y    在使用v模式选定了某一块的时候，复制选定块到缓冲区用；    yy   复制整行（nyy或者yny ，复制n行，n为数字）；    y^   复制当前到行头的内容；    y$   复制当前到行尾的内容；    yw   复制一个word （nyw或者ynw，复制n个word，n为数字）；    yG   复制至档尾（nyG或者ynG，复制到第n行，例如1yG或者y1G，复制到档尾）    3. 剪切的命令是d，即delete，d与y命令基本类似，所以两个命令用法一样，包括含有数字的用法.     d     剪切选定块到缓冲区；    dd    剪切整行    d^    剪切至行首    d$    剪切至行尾    dw    剪切一个word    dG    剪切至档尾    4. 粘贴的命令式p，即put（放下）    p     小写p代表贴至游标后（下），因为游标是在具体字符的位置上，所以实际是在该字符的后面    P     大写P代表贴至游标前（上），整行的复制粘贴在游标的上（下）一行，非整行的复制则是粘贴在游标的前（后）注：     在正则表达式中，^表示匹配字符串的开始位置，$表示匹配字符串的结束位置。     命令前面加数字表示重复的次数，加字母表示使用的缓冲区名称。使用英文句号&quot;.&quot;可以重复上一个命令。     在复制粘贴时，另一组常用的命令是u（撤销操作），U（撤销某一行最近所有修改），Ctrl+R（重做），这些功能主要是vim中的，vi中略有差别————————————————原文链接：https:&#x2F;&#x2F;blog.csdn.net&#x2F;lanxinju&#x2F;article&#x2F;details&#x2F;5727262<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="curl-使用方法"><a href="#curl-使用方法" class="headerlink" title="curl 使用方法"></a>curl 使用方法</h3><blockquote><p><a href="https://www.jianshu.com/p/fc0eb6c60816">https://www.jianshu.com/p/fc0eb6c60816</a><br><a href="https://itbilu.com/linux/man/4yZ9qH_7X.html">https://itbilu.com/linux/man/4yZ9qH_7X.html</a></p></blockquote><ul><li><p>verbose 模式，显示详细的连接信息<br>   <code>curl -v www.baidu.com</code></p></li><li><p>保存网页<br>  <code>curl -o [文件名] google.com</code></p></li><li><p>代理<br>  <code>--socks5 192.168.100.133:23333</code></p></li></ul><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><blockquote><p><a href="https://blog.csdn.net/J080624/article/details/104297654">https://blog.csdn.net/J080624/article/details/104297654</a><br><a href="https://www.runoob.com/docker/docker-install-mysql.html">https://www.runoob.com/docker/docker-install-mysql.html</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>脊椎的一些事</title>
      <link href="/2021/05/22/ji-zhui-de-yi-xie-shi/"/>
      <url>/2021/05/22/ji-zhui-de-yi-xie-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>因为平时坐姿的问题，加上办公室久坐，导致脊椎出现一系列的问题。恰巧看到酷安上的一篇<a href="https://www.coolapk.com/feed/26625105?shareKey=NGUwZmZhMDM5YmYxNjBhODVmZGE~&shareUid=696698&shareFrom=com.coolapk.app_2.6.4">文章</a>，里面有一本书 <code>麦肯基疗法 7步告别颈椎腰椎烦恼</code>，看了一遍做了个总结。这个酷友还分享了一系列的软件（仅限 Android，苹果用户可以去 App Store 根据名字搜索下载。），大家可以安装试用看看。我这里转载一下，里面资源还是挺多的。有需要可以直接点击下载</p><p><a href="liveLoger.7z">文档</a><br><a href="BackExercises.apk">BackExercises</a><br><a href="eyeExercises.apk">eyeExercises</a></p><h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><h3 id="脊椎"><a href="#脊椎" class="headerlink" title="脊椎"></a>脊椎</h3><p><a href="https://bonebro.com/spine-structuretest/">脊椎的結構與功能</a></p><p><img src="1-%E8%84%8A%E6%A4%8E%E7%B5%90%E6%A7%8B-696x696.jpg"></p><h3 id="不良姿势"><a href="#不良姿势" class="headerlink" title="不良姿势"></a>不良姿势</h3><p><img src="21.png"></p><p><img src="22.png"><br><img src="23.png"><br><img src="24.png"></p><h3 id="疼痛的位置"><a href="#疼痛的位置" class="headerlink" title="疼痛的位置"></a>疼痛的位置</h3><p>疼痛的第一次发作时，位置通常在颈部附近，靠近中心（10.9）或位于一侧（10.10）。通常情况下，疼痛会在几天内减弱。疼痛再次发作时，则可能就会延伸到肩部（10.11），甚至到达肩胛（10.12）。反复多次发作后，疼痛可能会一直延伸到上臂外侧和后侧，并一直向下到达肘部（10.13），甚至可能蔓延到手腕或手掌（10.14）。由于颈部的问题，有些人还会感觉到头痛。这种头痛通常都位于颈部上端、大脑后部单侧或两侧（10.15）。有时，疼痛也会越过头顶从后部一直蔓延到眼后（单侧或者两侧）</p><p><img src="25.png"></p><h2 id="如何形成腰椎前凸"><a href="#如何形成腰椎前凸" class="headerlink" title="如何形成腰椎前凸"></a>如何形成腰椎前凸</h2><h3 id="坐姿"><a href="#坐姿" class="headerlink" title="坐姿"></a>坐姿</h3><p>让自己尽可能佝偻起来（4.8），保持几秒钟，然后直立起身体，尽可能突出脊椎前凸，正确坐姿的极端状态就是这样了（4.9）。保持这个姿势几秒钟，然后在回到放松的姿态（4.8）。</p><p><img src="2.png"></p><p>想要长时间保持 4.9 的坐姿是不可能的，因为脊椎会感受到很大的压力，长时间保持这个姿势甚至会导致疼痛。<code>想要做的既正确又舒适，不需要挺得那么直</code>。你可以先做成上门那种极端姿势，然后将脊椎前凸收到的压力减小约10%，并注意不要勾腰（4.10）</p><p><img src="3.png"></p><p>可以使用 <code>腰部支撑卷</code> 来辅助改善坐姿</p><p><img src="4.png"></p><h3 id="站姿"><a href="#站姿" class="headerlink" title="站姿"></a>站姿</h3><p>有些人站立太长实践 也会感到下背部疼痛，就好像久坐时一样。久坐时，支撑脊柱的肌肉感到疲劳并放松下来，使我们容易变得弯腰驼背。而在我们放松地战力的时候，腰椎前凸却会过分向前弯曲，达到另一个极端。</p><p>这种姿势与驼背的坐姿完全相反。想要长时间这样站立也是不可能的，因为这种腰椎前凸极度扩张的姿势也会使腰椎受到很大的压力。</p><p><code>长时间站立时，必须保持正确的站姿。挺直后背，并经常提醒自己，不要使腰椎前凸过分弯曲</code></p><p><img src="5.png"></p><h3 id="睡姿"><a href="#睡姿" class="headerlink" title="睡姿"></a>睡姿</h3><p><img src="6.png"></p><p>请使用 <code>夜间专用型的腰部支撑卷</code> 来改善睡眠姿势<br><img src="7.png"></p><h2 id="引起颈痛的原因"><a href="#引起颈痛的原因" class="headerlink" title="引起颈痛的原因"></a>引起颈痛的原因</h2><ul><li><p>久坐<br>我们在走动时（尤其是快步走动德时候）都会自然而然地保持比较挺拔德姿势。在走路时，我们的头部会回缩到脊椎的正上面以便获得最大程度德支撑。而当我们坐在椅子里休息时，头部和颈部就会慢慢地突出，因为支撑头颈部德肌肉会慢慢变得疲劳。肌肉疲劳后，你就会想要放松，随后德坐姿就会变得不正确。</p><p><img src="26.png"></p><p>长时间保持这种头部突出德姿势会导致韧带过度拉伸。很容易引起椎间盘髓核变形。</p></li></ul><h2 id="坐式头部回缩运动"><a href="#坐式头部回缩运动" class="headerlink" title="坐式头部回缩运动"></a>坐式头部回缩运动</h2><p>每组做 15 到 20 次，每天早中晚各做 1 组。<br>练习时每个动作的幅度都应该做到最大。当你将头部尽量回缩后，你就做出了“头部回缩”的姿势。这个姿势就是头颈部正确姿势的极端状态</p><p><img src="27.png"></p><p>长期保持头部回缩的极端姿势是不可能的，这个姿势颈椎会受到很大压力。你可以将动作幅度减小约 10%，这个就是正确的姿势了。</p><h2 id="麦肯基疗法-–-背部"><a href="#麦肯基疗法-–-背部" class="headerlink" title="麦肯基疗法 – 背部"></a>麦肯基疗法 – 背部</h2><h3 id="练习-1-–-俯卧"><a href="#练习-1-–-俯卧" class="headerlink" title="练习 1 – 俯卧"></a>练习 1 – 俯卧</h3><p><code>不适用颈部疼痛患者</code>。</p><p><img src="8.png"></p><p>这个练习主要用于治疗急性的背痛（近期发生的、较为剧烈的疼痛，与长期的，若隐若现的疼痛相对应）。这个可以说是麦肯基疗法中的急救措施</p><h3 id="练习-2-–-俯卧伸展运动"><a href="#练习-2-–-俯卧伸展运动" class="headerlink" title="练习 2 – 俯卧伸展运动"></a>练习 2 – 俯卧伸展运动</h3><p>将手肘放在垂直于肩膀之下的地方，使上半身支撑在前臂之上。首先 深呼吸几次，然后尽量完全放松下背部的肌肉。保持这一姿势 2 到 3 分钟。</p><p><img src="9.png"></p><p>主要用于急性下背部疼痛的治疗，如同练习 1 一样，练习 2也是麦肯基疗法中的急救练习。对于慢性和复发性疼痛患者，也可以有不错的效果。</p><p><code>每组练习中应该做一次练习 2， 如同练习 1 一样， 请每 2 小时做一次</code></p><p>如果你在练习中感觉到突发的疼痛加剧，请<code>增大双臂手肘之间的距离</code>，使上半身倾斜的角度降低到你可以忍受的程度</p><h3 id="练习-3-–-卧式伸展运动"><a href="#练习-3-–-卧式伸展运动" class="headerlink" title="练习 3 – 卧式伸展运动"></a>练习 3 – 卧式伸展运动</h3><p>需要先做练习1 和练习 2</p><p>继续保持俯卧的姿势，面向前方。将双手放在肩膀之下，摆出准备做俯卧撑的姿势。接下来就可以做练习 3 了</p><p><img src="10.png"></p><p>伸直手臂，在疼痛可以忍受的前提下尽量撑起上半身 —- 盆骨以上的部分。在做这个动作的同时，注意完全放松髋部、臀部和双腿，使背部尽量伸展。此时髋关节会自然向后移动。</p><p>将这个姿势保持一两秒钟，然后在回到开始时的姿势。每次重复这一动作时，尽量使运动的幅度比上一次更大一些，以便在一组练习结束时，你的背部能伸展到最大的程度，手臂也能尽量地伸直。</p><p>每次伸直手臂时，记住要<code>保持这一姿势一两秒的时间</code>, 这是本项练习的关键。如果你感觉到疼痛减弱或者发生集中（或者两者都有），你可以将这一姿势再多保持一段时间。每组做 10 次。同样，每天应该练习 6 到 8 组。</p><p><img src="11.png"></p><h3 id="练习-4-–-站立伸展运动"><a href="#练习-4-–-站立伸展运动" class="headerlink" title="练习 4 – 站立伸展运动"></a>练习 4 – 站立伸展运动</h3><p>发生急性下背部疼痛时，如果条件不容许你躺下了，那么你可以用练习 4 来代替练习 3。不过，这项练习没有 3 那么有效。依旧是每组 10 次， 每天 6 到 8 组。</p><p>一旦你完全康复，不再患有下背部疼痛，练习 4 就是你最佳的预防病痛复发的工具。作为预防措施使用时，你可以再每次弯腰工作一段时间后就做一次练习 4。<code>记住一定要在疼痛产生之前进行此项练习</code></p><p><img src="12.png"></p><h3 id="练习-5-–-平躺弯曲运动"><a href="#练习-5-–-平躺弯曲运动" class="headerlink" title="练习 5 – 平躺弯曲运动"></a>练习 5 – 平躺弯曲运动</h3><p><img src="13.png"></p><p>使两膝靠近胸部。抱住双腿，在疼痛可以忍受的前提下轻柔而缓慢地将两膝尽量靠近胸部。保持这个姿势 1 到 2 秒，然后放开双腿回到开始时的姿势。在进行本项练习时记住不要抬起头颈部，还有放下双腿时<code>不要</code>将腿伸直</p><p><img src="14.png"></p><p>每组仅重复 5 到 6 次， 每天 3 到 4 组。</p><p>当膝盖靠近胸部时，你的腰椎前凸就消失了。因此，为了消除可能由此产生的关节变形，进行完弯曲练习后(练习 5、6、7)，<code>一定要再做一组练习 3</code></p><h3 id="练习-6-–-坐式弯曲运动"><a href="#练习-6-–-坐式弯曲运动" class="headerlink" title="练习 6 – 坐式弯曲运动"></a>练习 6 – 坐式弯曲运动</h3><p>无论练习 5 是否对缓解你的背部疼痛和僵硬有效，请在连续练习 5 一周后再开始练习 6。</p><p><img src="15.png"><br><img src="16.png"></p><p>每组只需做 5 到 6 次， 每天 3 到 4 组。<code>在做过练习 6 后必须马上做练习 3</code></p><h3 id="练习-7-–-站立式弯曲运动"><a href="#练习-7-–-站立式弯曲运动" class="headerlink" title="练习 7 – 站立式弯曲运动"></a>练习 7 – 站立式弯曲运动</h3><p>无论练习 6 是否对缓解你的背部疼痛和僵硬有效，请在连续练习 6 两周后再开始练习 7。</p><p><img src="17.png"></p><p>每组只需做 5 到 6 次， 每天 1 到 2 组。<code>在做过练习 7 后必须马上做练习 3</code>。</p><p>完全摆脱疼痛 3 个月之后，请千万不要在一天的头 4 个小时内做练习 7 。</p><h3 id="没有反应或没有改善"><a href="#没有反应或没有改善" class="headerlink" title="没有反应或没有改善"></a>没有反应或没有改善</h3><ul><li><p>疼痛集中于单侧</p><p>  将臀部扭向身体比较不痛的那一侧。</p><p>  <img src="18.png"><br>  <img src="19.png"></p></li><li><p>盆骨部分没有保持在较低的位置。</p><p>  降低盆骨的位置有两个方法：      </p><ul><li>让另一个人压住你的下背部</li><li>或者：<br>  <img src="20.png"></li></ul></li></ul><h2 id="麦肯基疗法-–-颈部"><a href="#麦肯基疗法-–-颈部" class="headerlink" title="麦肯基疗法 – 颈部"></a>麦肯基疗法 – 颈部</h2><p>分为 7 个部分.每组练习中最多只会用到 1 到 2 项。</p><p>随着练习的继续，如果原来位于脊椎一侧、扩散到肩膀或手臂的疼痛转移到了颈部的中部，即疼痛移动并发生了集中，这是一个好现象。</p><p>刚开始练习时，疼痛可能会有所增加。</p><p><img src="28.png"></p><h3 id="练习-1-–-坐式头部回缩运动"><a href="#练习-1-–-坐式头部回缩运动" class="headerlink" title="练习 1 – 坐式头部回缩运动"></a>练习 1 – 坐式头部回缩运动</h3><p>头部回缩指的是将头部向后拉</p><p>坐在椅子或凳子上，平视前方，并完全放松。此时你的头部会微微伸出（12.2）。缓慢且平稳地向后移动你的头部，直到不能再向后为止（12.3）。在做这个动作时，<code>不要将下巴翘起</code>。换句话说，<code>请一直平视前方，不要让头部向后倾斜，也不要向上看</code>。当你的头部向后移动到最大幅度后，你就做出了头部回缩的姿势（12.3）。请保持这个姿势几秒钟，然后放松，这时你的头部和颈部就会在此恢复自然突出的姿势。在重复这一动作时，请确保你的动作幅度达到了最大。</p><p>你可以将双手放在下巴上，并将头部慢慢地进一步向后推，这样可以使练习更加有效（12.4）</p><p><img src="29.png"></p><ul><li><p>本项练习主要用于对颈部疼痛的治疗，而不是预防。</p></li><li><p>在治疗颈部疼痛时，本项练习应当每天做 6 到 8 组，每组 10 次。</p></li><li><p>如果在练习的同时感觉到突发的疼痛，你可以用练习 3 代替。</p></li><li><p>如果用于预防，你应当在感觉需要的时候就做 5 到 6 次（看个人情况决定）。</p></li></ul><h3 id="练习-2-–-坐式颈部伸展运动"><a href="#练习-2-–-坐式颈部伸展运动" class="headerlink" title="练习 2 – 坐式颈部伸展运动"></a>练习 2 – 坐式颈部伸展运动</h3><p>伸展就是向后弯曲。</p><p>在做本项练习之前请先做练习1。</p><p>抬起下巴，头部后仰，就像要仰望星空一样（12.6）。做这个动作时不要向前移动脖子。尽量后仰头部，并不断地将头部稍稍左右转动（转动约 2 厘米，12.7、12.7a），预测同时，进一步向后仰头。几秒钟后，恢复到开始时的姿势。每次练习时都请确保将动作尽可能做到最大幅度。</p><p><img src="30.png"></p><ul><li>这项练习既可以用于治疗，也可以用于预防。</li><li>练习 2 应当每天做 6 到 8 组，每组 10 次。</li><li>如果感觉疼痛难忍，可以用练习 3 代替</li><li>可以将练习 1 和 练习 2 合并一起做</li></ul><h3 id="练习-3-–-平躺头部回缩运动"><a href="#练习-3-–-平躺头部回缩运动" class="headerlink" title="练习 3 – 平躺头部回缩运动"></a>练习 3 – 平躺头部回缩运动</h3><p>仰卧在床上，头部放在床边，不要靠在床头上。放松头部和肩膀，不要使用枕头。</p><p>使用头部的力量（不要用手）尽量将头部向床垫上压，同时收回下颚（12.9）。也就说，你要在直视天花板的同时尽量将头部向后移动。保持这一姿势几秒钟，然后放松。此时你的头部和颈部会自然恢复到开始的姿势。每次练习都请确保你的头部和颈部已经向后移动到了最大幅度。</p><p><img src="31.png"></p><p>本项练习主要用于急性颈部疼痛的治疗。在做完十次头部回缩的动作后，你必须评估一下这个练习对你颈部疼痛症状的影响。如果疼痛集中或强度减轻，那么你可以放心继续进行本项练习。在这种情况下，你应当每天练习 6-8 组，每组 10 次。</p><p>如果疼痛显著加重并蔓延到了离脊椎较远的位置，或者手指有针刺感和麻木感，请立即停止练习并向专家咨询。</p><h3 id="练习-4-–-平躺颈部伸展运动"><a href="#练习-4-–-平躺颈部伸展运动" class="headerlink" title="练习 4 – 平躺颈部伸展运动"></a>练习 4 – 平躺颈部伸展运动</h3><p>做本项练习之前，你必须先做练习 3。</p><p>仰卧在床上，用一只手支撑住头部，慢慢移动，使你的头、脖子和肩膀都露在床沿外。</p><p><img src="32.png"></p><p>在用一只手支撑住头部的同时，缓慢地仰头（12.11）。然后逐步把手移开（12.12），并尽可能地看地板，将头部的动作幅度做到最大。保持这一姿势的同时不断地将头稍稍左右转动（12.13），并继续努力后仰。颈部伸展的幅度达到最大之后，保持这个姿势放松 2 - 3 秒。</p><p><img src="33.png"><br><img src="34.png"></p><p>将头托在脑后，慢慢使头部恢复到水平的位置，然后移动身体，使头部再次完全靠到床上，回到休息的状态。在做完这项练习后，记得一定要平躺在床上休息几分钟然后再起来，休息的时候不要 用枕头。</p><p>每组练习中练习 4 只需做一次。</p><p>除了练习时身体的姿势不同之外，练习 1 与练习 3、练习 2 与练习 4 其实是一样的</p><h3 id="练习-5-–-颈部侧弯运动"><a href="#练习-5-–-颈部侧弯运动" class="headerlink" title="练习 5 – 颈部侧弯运动"></a>练习 5 – 颈部侧弯运动</h3><p>做在椅子上，重复做几次练习 1，然后保持头部回缩的姿势（12.14），准备开始练习 5。</p><p><img src="35.png"></p><p>将颈部向一侧弯曲，然后继续向感到疼痛的一侧弯曲头部（12.15）。也就是，平视前方，让一只耳朵靠近肩膀（不要转动头部）。<code>做这个动作时头部一定要保持回缩的姿势</code>。你也可以将手放在头部一侧，轻轻地将头部进一步向疼痛的一侧扳，这样将使练习更加有效（12.16）。保持这个姿势几秒钟，然后恢复到开始的姿势。</p><p><img src="36.png"></p><p>这项练习对单侧疼痛或者偏向一侧的疼痛特别有效。</p><p>每天做 6 到 8 组，每组 10 次。直到疼痛发生集中为止。</p><h3 id="练习-6-–-颈部转动运动"><a href="#练习-6-–-颈部转动运动" class="headerlink" title="练习 6 – 颈部转动运动"></a>练习 6 – 颈部转动运动</h3><p>转动指的是从一侧转到另一侧</p><p>坐在椅子上，做几遍练习 1 ，然后保持头部回缩的姿势，准备开始练习 6。</p><p>将头部从一侧转到另一侧，尽量将转动的幅度做到最大（12.18），同时保持头部回缩的姿势。如果你在转向一侧时感觉到的疼痛比转向另一侧时大，你可以只做转向疼痛一侧的动作。随着练习的继续，这种疼痛应该会集中到中部，或者逐渐消退。</p><p><img src="37.png"></p><p>如果疼痛加重，或者疼痛没有发生集中，那么请改为只做转向疼痛较轻一侧的动作。</p><p>等到转向一侧的疼痛与转向另一侧相当时，或者转动头部不会感觉到疼痛的时候，你就可以继续从一侧转向另一侧的练习了。</p><p>在转动时使用双手慢慢地进一步加大头部的运动的幅度会使练习更加有效（12.19、12.19a）。将转动到最大幅度的姿势保持几秒钟，然后恢复到开始的状态。</p><p><code>本项练习既可以用来治疗颈部疼痛，又可以用来预防颈部疼痛。</code></p><p>用作治疗时，需要每天做 6 到 8 组，每组 10 次。无论疼痛有没有集中，有没有减缓，<code>练习 6 只能在做过练习 1 和 练习 2 之后才能做。</code></p><p>用作预防颈部疼痛时，请每隔 2 到 3 天做一组，每组 5 到 6 次。</p><h3 id="练习-7-–-坐式颈部弯曲运动"><a href="#练习-7-–-坐式颈部弯曲运动" class="headerlink" title="练习 7 – 坐式颈部弯曲运动"></a>练习 7 – 坐式颈部弯曲运动</h3><p>弯曲指的时向前弯曲颈部</p><p>坐在椅子上，目视前方，并完全放松，准备练习 7</p><p>低头含胸，让下巴尽量靠经胸部（12.21）。双手交叠于脑后（12.22）。放松双臂，手肘指向地面。此时，双臂的重量将进一步下拉你的头部，使下巴进一步靠近胸部（12.23）。</p><p>双手微微用力将头部进一步向下来将本项练习更加有效。保持头部最接近胸部的姿势 2 - 3 秒，然后恢复到开始时的姿势。</p><p>本项练习主要用于治疗头痛，并对急性发作恢复之后残留的颈部疼痛和僵硬也有一定的效果。无论哪种情况，本项练习都应当每天做 6 - 8 组，每组 2 - 3 次。</p><p><img src="39.png"><br><img src="40.png"></p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>书里面提到的支撑卷，我在某宝关键字 <code>麦肯基 支撑卷</code>，出来的结果要不价格太高，便宜的卖家还不发货。看评论也就一块泡沫棉加个外套，还卖 50 几。<br>个人推荐买网易严选那个靠枕，个人用起来还行。乳胶的，外套摸起来很舒服。（我趁活动下单的，好东西值这个价）</p><p><img src="41.png"></p><p>还有一个睡觉用的支撑卷，目前我试了这个。同样也是乳胶内芯。千万不要贪便宜，我在 PDD 下单的那个，乳胶都裂开了，然后退了。</p><p><img src="42.png"></p><p>这个都是事后的治理方案，在自己还没有问题的时候，多起来动动。注意自己的坐姿。每天抽出时间去跑步，让身体留点汗。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 养生 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记一次看病经历</title>
      <link href="/2021/04/23/ji-yi-ci-kan-bing-jing-li/"/>
      <url>/2021/04/23/ji-yi-ci-kan-bing-jing-li/</url>
      
        <content type="html"><![CDATA[<h2 id="经过"><a href="#经过" class="headerlink" title="经过"></a>经过</h2><p>刚开始的一周，右下腹隐隐作痛，自己并没有当回事。到了第二周，疼痛还在继续，终于意识到不对劲，我就开始慌了。</p><h3 id="第一次挂号-amp-检查"><a href="#第一次挂号-amp-检查" class="headerlink" title="第一次挂号 &amp; 检查"></a>第一次挂号 &amp; 检查</h3><p>于是我想起以前去体检的时候，检查出胆内有结石。于是马上挂了个肝胆外科的号（03-19）。问诊当天，我拿我以前的体检的彩超报告给医生看。但是看不出什么问题（坑 1-1）。然后开了一张单让我再去做一次彩超，说是医院外边的体检中心报告不行。如下是医生打的彩超体检单。</p><img src="1.png" alt="" width="30%" height="30%"><p>做彩超的时间是 03-25（坑 1-2）。做完彩超做完后，等 1 个小时就可以拿到纸质报告。帮我检查的是一个刚工作的医生（女生），说右下腹是阑尾的地方，并不是胆（教训）。说阑尾炎最好还是做 CT 效果更好，做超声检查不出问题（坑 2-1）。检查结果和我在体检中心的结果差不多，但是详细了一点。因为彩超检查不出问题，我又已经等了一周，肯定不想继续拖延下去，于是就有了下面去做 CT 的事情。</p><h3 id="第二次检查"><a href="#第二次检查" class="headerlink" title="第二次检查"></a>第二次检查</h3><p>做 CT 不是在医院的，彩超都要等一个星期，我不想继续干等下去。就去了一家私人医学影像诊断中心（要有门路）。不得不说，这效率是真的高，下午预约，5点就能做（03-25）。而且人不多，服务比医院不要好太多！但是，费用会比医院贵一点，做一个螺旋 CT 平扫 500 人民币。而且，这里并没有专业医生给你建议，只有一个引导员（坑 3-1）。你只能凭你在医院医生的建议或自己的直觉来决定你自己要做什么检查。对了，这个影像中心前台清一色 iMac。检查完，等半个小时，就能拿胶片。但是结果要明天才出。</p><p>下面是检查的结果，注意 <code>请结合临床</code>。在报告出现这些字眼，可以说这个报告没检查出什么问题。是该松一口气，还是为下面还要继续检查叹气？</p><img src="2.png" alt="" width="30%" height="30%"><p>在这期间，开始吃一些抗生素（阿莫西林），但是没见效果。</p><h3 id="第二次-amp-第三次挂号"><a href="#第二次-amp-第三次挂号" class="headerlink" title="第二次 &amp; 第三次挂号"></a>第二次 &amp; 第三次挂号</h3><p>CT 结果出来，可是中山一医那边挂不到号。于是，我换了一家比较小的医院，挂了消化内科门诊（03-27）。把最近的检查都给医生看，也没得出什么结果，继续让我口服抗生素，换了头孢克肟。</p><p>其实到这里，我就应该转换一下思路，或许不是什么大问题，也许不是阑尾有问题，而是其他地方。但是我这个一根筋，害。。。</p><p>把医生开的药吃完后，疼痛还在继续，而且更疼了。没办法，又挂了一个号（03-31）。这回这个医生检查就比较仔细，但是看报告也不能确定什么问题。在他的问答之下，我才发现我一直排便是不正常的，黑色。医生说可能是血便（教训）。于是建议我住院，然后做<code>肠镜</code>和<code>胃镜</code>。到这里，我已经怀疑是不是肿瘤问题了。当时医院快要下班了（一般 5 点半），医生让我快点，不然可能这星期安排不上检查。我匆匆交完做核酸的费用，做完核酸检测后，准备办理入院。谁知，要缴纳按金 2000 多，还不支持支付宝等。需要银行卡转账。当时身边只有医保卡。无奈只得作罢。</p><h3 id="第四次挂号"><a href="#第四次挂号" class="headerlink" title="第四次挂号"></a>第四次挂号</h3><p>在入院做肠胃镜失败后，我在中山医挂到号了（04-01）。这个医生一边喝咖啡，就看了几下我的报告，也没多问啥，又开了一张检查单，这回是 x 射线检查。这回不会像彩超那样要等很久了，明天就可以做检查</p><p>这个是检查单<br><img src="3.png" alt="" width="30%" height="30%"></p><p>在做这个之前，需要先服用钡餐。其主要成分是硫酸钡。开药的人告诉我和水按照一比一的比例混合，服用半包（250g）。喝起来有点水果味，也不是很难喝。</p><p>下面是一些做钡剂照影的知识和免责声明：</p><img src="5.png" alt="知识" width="30%" height="30%"><img src="6.png" alt="免责声明" width="30%" height="30%"><p>检查做完检查第二天就可以拿报告</p><img src="4.png" alt="" width="30%" height="30%"><p>又是 <code>请结合临床</code>。奔溃</p><h3 id="第五次挂号"><a href="#第五次挂号" class="headerlink" title="第五次挂号"></a>第五次挂号</h3><p>到这里，我已经被折腾很累了。在 04-02 刚好挂到一个号，但是同样以前的那些报告医生说没用！需要再重新检查。这个医生也怀疑是肿瘤，说我前面做的 CT 平扫是检查不出肿瘤的，如果做的是增强就可以。 然后给我开了个肠镜的检查的单，让我去预约。也开了一点药。</p><img src="7.png" alt="辅助检查的药" width="30%" height="30%"><img src="8.png" alt="泻药" width="30%" height="30%"><img src="9.png" alt="知情书" width="30%" height="30%"><img src="10.png" alt="肠镜检查须知" width="30%" height="30%"><img src="11.png" alt="温馨提醒" width="30%" height="30%"><h3 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h3><p>这次的检查比较戏剧性，因为检查也要等几天。这几天内，老家寄了一些草药还有肠炎药（肠炎宁，整肠生，诺氟沙星胶囊），吃完排便症状有些改善。自己紧张的心情也有所缓解。于是冷静想了下，去买了一些<code>阿本达唑</code>。这个是治肠道寄生虫的，我要把这个因素也排除。吃了一阵，但是疼痛还在继续。这个期间，因为一些原因，我推迟了肠镜的检查，一方面是情况有所好转，另一方面，是肠镜检查有点麻烦，所以打算找个机会跟胃镜一起做了。我清楚自己的消化道是有点问题的，但是一直没有重视去检查。</p><p>讽刺的是，后来这个疼痛的问题我自己找到了。一次洗澡时候，去搓后背，发现 <code>尾椎</code> 那里有些疼痛。按下去，很酸痛。到此，我确定问题并不是右下腹，肠道发炎估计在吃完那些药之后，应该是缓解了，而是后背尾椎。难怪这个疼痛的位置一直捉摸不定。</p><p>最近几天，开始贴膏药了。虽然且消化道还是有点问题，但是没有以前那么严重，只能慢慢调节了。</p><h2 id="吐槽"><a href="#吐槽" class="headerlink" title="吐槽"></a>吐槽</h2><p>各种坑：</p><ul><li><p>一般医生每天要接上百个号，不可能有那么多时间耐性给你仔细检查。本人内向加上对自己身体认识匮乏，对一些问题，比如什么程度算疼？哪里疼？可能都不能准确回答。这些因素就导致医生不能准确诊断</p></li><li><p>我下腹疼了两个星期，还要让我等 6 天才能做检查。可见医疗资源紧张。这个也怪我本人当初太天真，定了一个热门医院的点。我试图去让医院的人帮我调整体检的时间，但是给出的答案：医生帮你安排的就是最早的时间。这里要指出一点：医生只帮你问诊，给出建议。有些事情（比如彩超检查的时间）是后台系统帮你安排的，这个你回去找医生也没用，或许你加钱走急诊通道能搞定？</p></li><li><p>到这里，可见门诊的医生和检查的医生建议是不一样的。一个彩超，一个 CT。而且，在做彩超时，这个检查医生很多都是不确定的，经常要问身边另一个医生（是她的师姐）。我的理解是，门诊的医生要排除右下腹其他器官的问题，但是我体检的报告该有的都有了，为什么还要我再检查一遍，是信不过外边私人机构的检查？</p></li><li><p>在不清楚状况下，自己随便做检查。劳财伤身。比如 CT 有平扫和增强之分，你知道哪个适合你吗。我当时是不知道的。</p></li><li><p>后来才了解到，阑尾炎也有急性和慢性之分。</p></li><li><p>这个中间有个小插曲。因为医院预约不到号，我想先去社区医院开点药先缓解一下。我拿着超声和 CT 的检查报告给医生看，他直接叫我去大医院看。连进一步的诊断都没有，就把我打发走了。估计看我拿了一堆报告，以为是大病，他搞不定吧。</p></li></ul><p>教训：</p><ul><li>只能怪自己无知，连胆的位置都不清楚。以前中学学习生物课程的热情随着人的成长，都被磨没了吧！知识都还老师了</li><li>又一次认识到自己的无知。对自己身体的认知真的很缺乏。</li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li><p>定点不要选择一些热门的医院。年轻人还年轻，一般不会出现什么大问题，大定点选择一个离自己比较近的三甲医院就行。像中山医这种专业性强，里面的医生平时接诊的都是重病的患者，小病也会被当成大病来对待诊断。试想一个普通的肠炎，被上升到阑尾炎，肿瘤的程度，能不吓人吗</p></li><li><p>医院里的医生，平时工作的强度大，生死离别可能也看多了，一般都是比较冷漠的，你要自己多问几句，不然辛辛苦苦等上的号，可能就一分钟的对话就结束了。</p></li><li><p>对自己的身体要有一定的认知，不要哪里痛，痛的是什么位置都不知道就去医院问诊，这样医生都帮不了你</p></li><li><p>如果身体出了问题，一定要引起重视。但是重视不意味着慌忙跑医院。看病要从小到大的顺序来。先自己预估问题所在，能在药店买点药解决，就先试试。不行先到社区医院，然后再到大医院。一有异样就跑大医院，浪费医疗资源不说，自己还费钱费力。</p></li><li><p>不要太相信医生。有时候受限于自己的表达，或医生的经验，极有可能误诊。要减低误诊的概率，你可以在不同医院，挂两三个号，多问一些医生。然后自己进行判断</p></li><li><p>不要在自己不了解某项检查的作用的情况下，冒然去做检查。即使医生建议，你也应该要去了解一下该项检查的作用。</p></li><li><p>身体出现问题，可以告知家人朋友，让他们帮你出主意。有时候经验比检查有用</p></li><li><p>以前我是一个坚定的西医支持者，经过怎么一轮折腾下来，我也能理解为什么有些人会选择中医进行治疗。有些病，有时候挖根掘底想要找出问题所在，是不可能的。中国的医疗已经不是匮乏能形容的。看个病，你得先挂号，能不能挂到号是一回事。号挂到了，医生检查询问一下，开出一张检查单，让你去检查。什么时候能安排检查还得看运气。检查结果出了，又得挂个号，再去问医生。。。。。。这一套操作下来，能不累吗</p></li><li><p>以前看到医生抗议罢工，我是支持的。那是我没有站在患者的角度来考虑。如果真得了病，又没有医生救援，真的不是滋味。周末医院不接诊，从效益来说，真的很浪费。 一个什么样的系统，就会孕育出什么样的人</p></li><li><p>平时多注意自己的身体。这次爆发的原因估计就是下午经常点外卖，然后吃了不卫生的。吃完就躺在椅子上午休。久坐是肠道的敌人，顺带压迫到了脊椎，才造成了这次的灾难。</p></li></ul><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>被医疗问题困扰的，绝对不止我一个</p><p><img src="12.png"><br><a href="https://twitter.com/waylybaye/status/1376765809062637568">Twitter link</a></p><p>收款单，可以看到医保的扣费情况<br><img src="13.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 养生 </tag>
            
            <tag> 看病 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenWrt 入门</title>
      <link href="/2021/04/06/openwrt-ru-men/"/>
      <url>/2021/04/06/openwrt-ru-men/</url>
      
        <content type="html"><![CDATA[<p>最近弄到了一个斐讯 K2，打算刷个 OpenWrt 来作为主路由，中间折腾了些，写篇博文记录一下。</p><h2 id="刷机"><a href="#刷机" class="headerlink" title="刷机"></a>刷机</h2><p>K2 这台路由器的刷机资源是很丰富的，从 OpenWrt 官网支持的情况可以看出。有如下的固件可以挑选</p><blockquote><p>华硕的老毛子 Padavan、纯净的华硕 Padavan、Tomato Phoenix 不死鸟固件、PandoraBox 潘多拉盒子、OpenWRT</p></blockquote><p>下载的时候，需要注意版本：</p><blockquote><p>A版是K2固件，官方说明：<a href="https://openwrt.org/toh/hwdata/phicomm/phicomm_k2_psg1218%EF%BC%8C%E6%A0%B9%E6%8D%AE%E8%AF%B4%E6%98%8EA%E7%89%88%E6%9C%895%E4%B8%AAEthernet">https://openwrt.org/toh/hwdata/phicomm/phicomm_k2_psg1218，根据说明A版有5个Ethernet</a> ports，对应K2。<br>B版是K2C固件，官方说明：<a href="https://openwrt.org/toh/hwdata/phicomm/phicomm_k2_psg1218_rev.b%EF%BC%8C%E6%A0%B9%E6%8D%AE%E8%AF%B4%E6%98%8EB%E7%89%88%E6%9C%894%E4%B8%AAEthernet">https://openwrt.org/toh/hwdata/phicomm/phicomm_k2_psg1218_rev.b，根据说明B版有4个Ethernet</a> ports，对应K2C。</p></blockquote><p><img src="1.png"></p><p>我拿到的这个已经刷好 breed 和 潘多拉固件。可能第一次接触路由器刷机的人不知道 breed 是啥。通俗解释就是：相当于安卓机上的 recovery。（看到有人说是 bootloader，但我个人习惯理解成 recovery）</p><blockquote><p>Breed 是由 huzibbs 开发的一个号称“刷不死”的引导加载器，相当于手机上的 bootloader。</p></blockquote><p>刷机的教程可以参考如下链接。Ps：我个人是很不喜欢这个 breed 的，网上的教程基本都是围绕这个东西来的。我没找到像手机那样线刷的教程，无奈。。。而且，那个方便你刷入 breed 的助手软件 Windows 会报毒。后面有时间找找用救砖的方式，能不能实现线刷</p><blockquote><p><a href="https://post.smzdm.com/p/awx0k9qk/">https://post.smzdm.com/p/awx0k9qk/</a></p></blockquote><p>有些固件，像 OpenWrt，可以直接在里面刷其他的固件，而不需要通过 breed。但是有些就不行，像老毛子的 Padavan。</p><h2 id="OpenWrt-系统摸索"><a href="#OpenWrt-系统摸索" class="headerlink" title="OpenWrt 系统摸索"></a>OpenWrt 系统摸索</h2><p>OpenWrt 相对于其他系统没有预置太多的功能，界面也很简单，适合喜欢折腾的人。</p><ul><li>系统默认是英文的。这几天摸索下来，已经习惯了，不打算换中文了。网上有换中文的教程</li><li>网页界面有防错机制，每当应用了新的修改后，有 90 秒倒计时。如果不能在此时间内再次访问 Web 管理界面，设置会自动回滚到修改前。人性化的设置。但是也有一点要注意：如果修改了 lan 的网段，请记得动作要迅速一点，用新的网段地址访问，不要用旧的地址不停刷新 Web 管理界面了！</li></ul><h3 id="Interface"><a href="#Interface" class="headerlink" title="Interface"></a>Interface</h3><p>这个项目下面主要有 <code>WAN</code> <code>LAN</code> 两个子块。顾名思义，这两个就是设置你外网和内网的</p><p><img src="2.png"></p><h3 id="WAN"><a href="#WAN" class="headerlink" title="WAN"></a>WAN</h3><p>WAN 这一块，是设置如何连接上级网络的。如果你路由器直接连接光猫，光猫设置了桥接模式，那这个我们可以用路由器直接拨号（如下图）。拨号我们直接在 WAN 下进行就行，那个 WAN_6 暂时可以不用管。协议选 <code>PPPoE</code>。然后填写运营商的账号和密码。</p><p><img src="3.png"></p><p>如果你家里已经有一个路由器了，你打算扩展网络，这里的协议你可以选择 DHCP。</p><p>在 Physical Settings，Interfac 我们选择 <code>eth0.2</code>。这个因人而异。其实这个 <code>eth0.2</code> 是一个 VLAN，后面我会介绍一下它。这个就是绑定WAN 这个配置到具体的物理接口。</p><p><img src="4.png"></p><h3 id="LAN"><a href="#LAN" class="headerlink" title="LAN"></a>LAN</h3><p>这块是配置你内网用的，我们可以在这里修改我们内网的网段。一般光猫或其他路由器会占用 192.168.1.0/24 这个网段，我尽量避免冲突，这里设置了 192.168.101.0/24 这个网段。</p><p>下图 <code>192.168.101.1</code> 是这个路由器 LAN 的网关地址。子网掩码我们默认就行 <code>255.255.255.0</code>。</p><p><img src="5.png"></p><p>同样，我们在 Interface 选择需要绑定的接口，这里我选择了路由器后面的网线接口，2.4G 无线，5G 无线这三个接口。</p><p><img src="6.png"></p><p>DHCP 的某些设置也是在 LAN 这个块里。</p><h3 id="Wireless"><a href="#Wireless" class="headerlink" title="Wireless"></a>Wireless</h3><p>这块你可以设置路由器的无线模块。</p><h4 id="2-4G-amp-5G-相同的-SSID"><a href="#2-4G-amp-5G-相同的-SSID" class="headerlink" title="2.4G &amp; 5G 相同的 SSID"></a>2.4G &amp; 5G 相同的 SSID</h4><p>引用恩山论坛的结论：</p><blockquote><p><a href="https://www.right.com.cn/forum/thread-451408-1-1.html">https://www.right.com.cn/forum/thread-451408-1-1.html</a></p></blockquote><blockquote><p>WIFI名字改成一样的，然后在无线安全里把802.11r 快速切换打开就行了。只要是支持802.11r 就没问题</p></blockquote><p>一些扩展：<a href="https://koolshare.cn/thread-162916-1-1.html">关于Wi-Fi漫游的一些Tips</a></p><h3 id="Switch"><a href="#Switch" class="headerlink" title="Switch"></a>Switch</h3><p>这里可以设置路由器的 VLAN，详细可以参考下面的文章。我就不重复造轮子了。</p><p><a href="https://blog.msm.moe/multiple-wan-configuration-on-openwrt/">OpenWrt 多WAN口以及扩展WAN口详细配置教程</a></p><p>上面连接访问不了，点击浏览离线版本：<br><a href="1.zip">离线版本</a></p><h3 id="Bugs"><a href="#Bugs" class="headerlink" title="Bugs"></a>Bugs</h3><ul><li><p>OpenWRT 一开始死活拨不上号，一直报下面的错误。后来给 WAN 绑定了另一个小米牌子路由器的 Mac 地址，奇迹般的可以了，也不知道是为啥。电信送的小米的 3C 路由器。。。</p><p>  <img src="7.png"></p><p>  绑定的方法：<a href="https://www.v2ex.com/t/219380">https://www.v2ex.com/t/219380</a></p></li><li><p>无线连接突然无法获取 IP 地址。最终解决方法是：打上 Force 的勾，然后重启 LAN 服务</p><p>  <img src="8.png"></p></li></ul><h2 id="电信拨号的一点小常识"><a href="#电信拨号的一点小常识" class="headerlink" title="电信拨号的一点小常识"></a>电信拨号的一点小常识</h2><h3 id="猫的默认账号密码"><a href="#猫的默认账号密码" class="headerlink" title="猫的默认账号密码"></a>猫的默认账号密码</h3><p>贴在光猫底下的 <code>useradmin</code>，只能改改 WiFi 之类的设置，很是鸡肋。如果要改动物理网口的连接模式，还需要进入超级管理员界面。我这边很幸运，用的是默认的密码。如果不是，自己 Google 破解的方法或跟安装师傅要。</p><p>实测 TEWA-600AGM 可行。<br>    超级用户：telecomadmin<br>    密码：nE7jA%5m</p><h3 id="获取外网地址"><a href="#获取外网地址" class="headerlink" title="获取外网地址"></a>获取外网地址</h3><p>一般电信会分配给你 100 打头的 IP 地址，那个是内网地址来的，具体可以参考<a href="https://www.cnblogs.com/gzxbkk/p/9120909.html">这篇文章</a>。如果需要外网地址，又不想打电话投诉之类的，有个简单的方法，<br>账号名加上 <code>pub</code> 或 <code>vip</code>。如下： </p><p><code>gzDSLxxxxxxxx@163.gd</code> 变成 <code>gzDSLxxxxxxxx@pub.163.gd</code> 即可</p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://iyzm.net/openwrt/478.html">爱一枝梅</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021 年的番茄教程</title>
      <link href="/2021/01/31/2021-nian-de-fan-qie-jiao-cheng/"/>
      <url>/2021/01/31/2021-nian-de-fan-qie-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<p>距离上次的翻墙教程已经快一年多了，现在又有新的翻墙姿势，要跟上时代的步伐，于是今天水了这篇。</p><p>上次用的是 <code>WebSocket + TLS + Web</code> 的方法。我在搬瓦工搭建后的使用效果并不是很理想，每到特殊日子就定期抽风。于是打算试试其他的，后面试过 Torjan，最近也不是很给力。最后就先试试 Xray 这种方法</p><h2 id="Xray-介绍"><a href="#Xray-介绍" class="headerlink" title="Xray 介绍"></a>Xray 介绍</h2><p>关于 Xray 的介绍，可以参考这个作者的文章</p><blockquote><p><a href="https://tlanyan.me/xray-tutorial/">https://tlanyan.me/xray-tutorial/</a></p></blockquote><h2 id="Xray-的一键部署脚本"><a href="#Xray-的一键部署脚本" class="headerlink" title="Xray 的一键部署脚本"></a>Xray 的一键部署脚本</h2><p>网上有很多的部署脚本，我这里就不像上次一样班门弄斧了。<del>（其实是懒）</del><br>具体可以参考下面的教程，真的很方便。这个脚本很详细，有多种协议方法可以挑选，连 BBR 都帮你考虑到了。感谢作者</p><blockquote><p><a href="https://www.jamesdailylife.com/xray-core-xray-vless-tcp-xtls">https://www.jamesdailylife.com/xray-core-xray-vless-tcp-xtls</a></p></blockquote><pre class="line-numbers language-none"><code class="language-none">wget -N --no-check-certificate &quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;mack-a&#x2F;v2ray-agent&#x2F;master&#x2F;install.sh&quot; &amp;&amp; chmod 700 &#x2F;root&#x2F;install.sh &amp;&amp; &#x2F;root&#x2F;install.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>温馨提示：CentOS 已经接近淘汰的状态，虽然 CentOS 7 还有几年的支持时间，但是大势已去。而且用上面的脚本还会提示 “系统版本过低”。于是我选择 Debian 替代 CentOS。（你们啊，不要老想用 Ubuntu，哪天它也做出像 Redhat 一样的决定，啧啧啧。。。）</p><h2 id="V2ray-的客户端"><a href="#V2ray-的客户端" class="headerlink" title="V2ray 的客户端"></a>V2ray 的客户端</h2><p>这里有一些各个平台的 V2ray 客户端汇总，个人推荐 Windows 目前用 <code>v2rayN</code>。以前因为兼顾 Linux，我选了 <code>Qv2ray</code>，但是目前 Windows 版本上的 Pre 版本有莫名奇妙的 Bug，暂时先弃用。</p><blockquote><p><a href="https://tlanyan.me/v2ray-clients-download/">https://tlanyan.me/v2ray-clients-download/</a></p></blockquote><h2 id="VPS-推荐"><a href="#VPS-推荐" class="headerlink" title="VPS 推荐"></a>VPS 推荐</h2><p>Hostdare, 这个目前使用还行，虽然专业比不上搬瓦工。但是不像搬瓦工那样被 GFW 盯得那么紧。<br>目前看 Youtube 能流畅 1080 P, 也没有像以前那样晚高峰抽风</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些总结</title>
      <link href="/2021/01/28/zui-jin-yi-xie-zong-jie/"/>
      <url>/2021/01/28/zui-jin-yi-xie-zong-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="博客现状"><a href="#博客现状" class="headerlink" title="博客现状"></a>博客现状</h2><p>正如我的 slogan，只要我还能折腾，这个博客就会更新下去，即使没有人看。</p><p>距离这个博客成立有 2 年多了，它的前身 2019 年初是我在 WordPress 上搭建的一个试验网站，从此喜欢把自己折腾的经历写成东西。不但给我这个记性不好的人参考，老了之后来看看自己年轻的坑也挺好的。</p><p>自从博客迁移 Hexo 后，逛 GayHub 成了日常，也看了很多志同道合的人写的一些个人博客，很能开拓视野，学习了很多。最近懒癌又发作，没写多少东西，而且都是半成的，后面要把这些博文的坑填完。博客新增了一个 【实验室】 的功能，里面有一些自己实验共享出来的东西，感兴趣的人可以试试。然后自己搭了个代号为 “SEKAI” 的 jsproxy 反代程序，留给自己备用，当然，你要知道地址，也是可以用的。(<em>^_^</em>)</p><p>后续等时间精力充足，再继续优化下去吧。当然，我侧重点是内容，后面偶尔搞搞博文的封面图，每篇一张路人惠图，绝不重样。<del>二次元驱动我</del></p><p><img src="megumi.jpg"></p> <img src="p.jpg" alt="你看不见我" width="3%" height="3%"><h2 id="最近收获"><a href="#最近收获" class="headerlink" title="最近收获"></a>最近收获</h2><ul><li><p>最近无意看到一篇文章，关于排版的，受益良多。是关于标点符号如何排版的。发现我以前的标点符号使用确实有问题，后续会改进。</p><blockquote><p><a href="https://tingtalk.me/style-guide/">https://tingtalk.me/style-guide/</a></p></blockquote></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 废话 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>最近装机折腾</title>
      <link href="/2021/01/23/zui-jin-zhuang-ji-zhe-teng/"/>
      <url>/2021/01/23/zui-jin-zhuang-ji-zhe-teng/</url>
      
        <content type="html"><![CDATA[<audio id="audio" controls="" autoplay="true" loop="true" volume="0.5">      <source id="mp3" src="1.mp3" ></audio><p>最近因为服役的笔记本性能已经遇到瓶颈，新装了一台新的台式机。上次用台式还是大学那会。虽然 AMD Yes ，但我还是选择了 Intel。（精神股东，滑稽）</p><p>这台电脑预计服役 5 年，后续还要考虑小升级的情况。主要用来跑跑 Adobe 全家桶，还有折腾一些系统。关键，数据文件存储就靠它了。</p><p>一定要是 ITX<br>一定要是 ITX<br>一定要是 ITX</p><h2 id="配置单"><a href="#配置单" class="headerlink" title="配置单"></a>配置单</h2><pre class="line-numbers language-none"><code class="language-none">2021-01- 机箱 【307,狗东】    乔思伯（JONSBO）U3         * 主板：24.5 24.5        * 硬盘 3.5：2个        * 散热器： 175mm        * 支持水冷 120        * 显卡：260mm- CPU 【CPU + 主板、散热 1729+69，某宝】    i5-10600KF         * 6&#x2F;12         * 125w          * DDR4-2666         * 4.10&#x2F;4.80 GHz         * PCI 3.0  - 主板    技嘉 B460M AORUS PRO     * 24.4 24.4     * M.2 NVMe SATA     * 双通道  4内存    * 自带 M.2 无线 Wi-Fi 接口- 散热    玄冰400 - 电源 【369，某宝】    长城 V5 金牌全模组电源         * 500W        * 金牌        * 全模组- 内存 【218 + 210，某宝】    SAMSUNG        * 8G x 2        * DDR4 2666 - 硬盘 【695，某宝】    希捷 ST4000VN008         * 酷狼 4T        * CMR- 固态 【509，某宝】    凯侠 RD10        * 带缓存 512M        * TLC- 显卡 【150，某宝】    丽台 Q2000 花费：4256---------------------------------旧硬件：- 1T 机械硬盘- 500G MLC SATA M.2 盘<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="理由"><a href="#理由" class="headerlink" title="理由"></a>理由</h2><ul><li><p>自己用的电脑，在电源和机箱我不想缩预算。这两件套就算其他硬件过时了，还是可以继续拿来别的机器使用。机箱我选了低调的铝合金 ITX 机箱，适合我这种不喜欢光污染的人，简简单单很好看。电源是长城的，买的是全模组的，机箱空间有限，后面如果散热不行，可以定制线来剩下一些空间。一直用这个牌子，没出问题就不换牌子了</p></li><li><p>CPU + 主板 + 散热器，淘宝一家直接搞定。这个价格，CPU 还是盒装的，我有点怀疑是不是散片自己加个包装的，但这个无伤大雅。主板是小雕的 PRO 版本，不得不说，PRO 还是有点可取的，起码那个散热片的重量就让我直呼好家伙。但是除了散热马甲，看其它评测，貌似和普通的版本没什么区别。官网渠道购买，有无马甲价格差了 100，不是很值得购买。但是淘宝是个神奇的地方，我买的这家还挺便宜的。这家顺带下单玄冰反人类，69，只要69，还要啥自行车。本来还想试试利民的散热器的，罢了，罢了</p></li><li><p>这个机箱可以容下两块 3.5 寸盘，我两个盘位都用了。买了一个酷狼来体验，希望稳一点</p></li><li><p>内存没啥说的，最近也涨价。我问了很多店，基本金手指都有痕迹。京东的回答是这样的：</p><p>  <img src="1.png"></p><p>  我分开两家店买，两条都有轻微的划痕，这个真的不好判断是不是二手。。。</p></li><li><p>一提显卡就心累，加价五六百还要抢购。挑这个时候装机，选了个 10 年前上市的丽台亮机卡。先用着吧</p></li><li><p>固态挑了很多评测推荐的 凯侠（东芝） RD10。这年头 MLC 难找。就算找到了，那个价格，啧啧啧（没错，我就说你三星）。妥协用了 TLC。</p></li></ul><h2 id="不足"><a href="#不足" class="headerlink" title="不足"></a>不足</h2><ul><li><p>淘宝购买方式<br>  狗东的服务态度还是物流，都是淘宝不能比及的。但是你架不住它每件商品能给你便宜一点（至于为什么便宜，这个很值得考量）。为了省那个几十块，你在淘宝需要花精力去辨别这个产品是不是翻新的、有瑕疵的。</p><p>  我在购买那个希捷的硬盘时，狗东原价接近 800 的硬盘。在淘宝你能找到 400，500，600 等价位的商家。你知道我看到 400 价位时差点剁手吗？比较了两三家 400-500 价位的商家，评论都看了几遍。基本都是正常，没翻车。直到我看到一个买家评论了：用膝盖想想都知道是翻新的。我刹住车了。我也没法验证那些低价硬盘的质量，只得折中选了个国行盒装的，价格比京东低。买回来，包装盒和硬盘上的 SN 号一致，软件查看 SN 也一样。到这里，我只能认为是全新正品。我没有去希捷官网查看 SN，这个 SN 号伪造应该不难吧？现在中国的造假仿制技术修改硬盘信息都不是问题。我买的那个硬盘，实测拷贝了 2T 的数据，速度不错，几天体验下来，没啥问题。后续再继续观望吧</p><p>   <img src="2.png"></p><p>   我就问你，看到这个价格，能不心动吗？关键淘宝很多这个价位是没有标注翻新二手之类的字样！淘宝的信息不对称，加上自己喜欢贪便宜（不排除有些没税的商家嘛），我觉得以我的购物趋向，在淘宝买到劣质商品的比例可能要高过拼多多了。所以机器能点亮装系统之后，第一件事就是运行各种硬件测试工具。</p><p>   另一个比较窝心的事：那个长城的电源也是便宜 30 块买的，结果模组线包装是拆过的，少了一条 SATA 电源线。我用不到那么多 SATA，就没计较，不过差评是少不了的。还是信息不对称和贪便宜造成的。。。。。</p><p>  还是那句话，一分钱一分货。千万别贪便宜</p><p>  还有一个问题，这个也不能称得上是问题，淘宝第一次遇到，纪念一下</p>  <img src="6.jpg" width="50%" height="50%"></li><li><p>散热器割手<br>  从第一个玄冰 400 开始，估计已经用了五六个了，每次手都避免不了被割几个划痕，对得起反人类 400 这个称号</p></li><li><p>主板</p><p>  这个才是我这回装机的大坑。买的是技嘉的主板，这货居然把 CSM disable 了。搞得我那个亮机卡识别不了，买的又是无核显的 CPU。主板一直报错。这个问题一开始不确定问题所在，把能卸的硬件全都拆了，来回折腾了几次。你要知道这个是 ITX 机箱啊，那个心情。。。</p><p>  刚开始报错是蜂鸣器短响五下，查了下，CPU 错误。我擦，坏的 CPU 都能让我买到，我可以去买乐透了。但后面问了卖家，是显卡的锅，准确来说，是主板的  BIOS 的设置认不出这个亮机卡。现在的主板上面带有指示灯可以查看是哪个部件出问题（以前一直不知道这些灯的作用，现在懂了排错还是挺有用的，赞一个）</p>  <img src="3.jpg" width="50%" height="50%">  <img src="4.jpg" width="50%" height="50%"><p>  更多的信息，可以参考知乎的这个帖子，感谢大佬指路。</p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/36530184">https://zhuanlan.zhihu.com/p/36530184</a></p></blockquote></li><li><p>显卡<br>  10年前的亮机卡，<del>只能支持到 1080p</del>（之前测试条件有限，现在买了个 2K 的显示器，DP 直连，完美 2K)，而且只有 DVI 和 DP 口。</p></li></ul><h2 id="后续升级"><a href="#后续升级" class="headerlink" title="后续升级"></a>后续升级</h2><ul><li><p>显卡<br>  听说英伟达 2020 的销售额完成了，发布的新卡都成了空气卡。英伟达的崛起就靠你们矿老板了！只能等矿热之后价格减下来再说了。</p></li><li><p>内存<br>  后面降价再买两条 8G。这个不难。</p></li><li><p>存储</p><ul><li>后续加一个 2.5 寸 SATA 盘，安装黑苹果或 Linux。</li><li>继续堆机械硬盘，目前 4T + 1T 的配置估计半年就告急，后面淘汰 1T，换成 6T 的</li></ul></li><li><p>无线<br>  考虑黑苹果，或者有网络的限制，加个 PCI 或 M.2 的无线网卡</p></li><li><p>TPM 2.0<br>  Windows 11 来了，但是这个主板不带 TPM。可以淘宝买一个，看了下，80 软妹币，坑爹。</p></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>差价不上 30 的，以后都狗东买算了。淘宝心累</li><li>主板 CPU 套装 可以无脑淘宝。</li><li>存储之类的，我就认命，买来测试没问题就行。靠金手指来判断已经行不通了。</li></ul><p>附上几张照片吧，没多拍</p><img src="7.jpg" width="50%" height="50%"><img src="8.jpg" width="50%" height="50%"><img src="9.jpg" width="50%" height="50%"><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>如果有四个内存插槽，内存顺序怎么安排？</p><img src="5.jpg" width="50%" height="50%"><img src="10.jpg" width="50%" height="50%"><p>如果只有两条内存组成双通道，那就用 A2 和 B2 口</p>]]></content>
      
      
      
        <tags>
            
            <tag> 硬件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VBS 实战</title>
      <link href="/2020/12/12/vbs-shi-zhan/"/>
      <url>/2020/12/12/vbs-shi-zhan/</url>
      
        <content type="html"><![CDATA[<p>会有今天这篇文章，就要说起 <code>Microsoft Support for Office Deployment</code> 写的这个一万多行的VBS脚本。本来想自己写一个统计 Office 版本的脚本，但是网上搜了一圈，都无法判断出 2016 和 365 的，只能看版本号。。。咬牙继续搜，就看到这个玩意。慢慢解剖分析消化吧</p><blockquote><p><a href="https://gallery.technet.microsoft.com/office/68b80aba-130d-4ad4-aa45-832b1ee49602">https://gallery.technet.microsoft.com/office/68b80aba-130d-4ad4-aa45-832b1ee49602</a></p></blockquote><p>我把 VBS 复制下来，有需要可以直接下载：</p><p><a href="Robust_Office_Inventory_Scan_Tool.vbs">点我下载</a></p><p>然后，介绍一个网站，可以查一些函数，方法的介绍。输入关键词就行</p><blockquote><p><a href="https://www.devguru.com/content/site/search.html">https://www.devguru.com/content/site/search.html</a></p></blockquote><h2 id="一些总结"><a href="#一些总结" class="headerlink" title="一些总结"></a>一些总结</h2><p>这些是对上面那个脚本的一些分析，我做了截取分析，添加了一些备注，可以下来运行一下。(中文乱码请<code>下载</code>后用UTF-8打开)</p><p><a href="checkIfFolderExist.vbs">判断Folder是否存在</a><br><a href="checkScriptRunMultiTime.vbs">判断同一个脚本是否重复运行</a><br><a href="getDesktopPath.vbs">获取当前用户的桌面路径</a><br><a href="getRegKeyValue.vbs">获取某个注册表Key的Value</a><br><a href="getThisScriptName.vbs">获取当前运行脚本的名称(文件名)</a><br><a href="reg_key_IF_boolean.vbs">判断注册表Key是否存在</a></p><hr><p>下面这些是以前的借鉴的一些脚本，也放上来备份吧。给大家一些建议，重要的东西记得备份好，不然哪天突然消失了，后悔都来不及；可执行程序不要随便命名。 <del>（说的就是用test做文件名的我。整理的时候，误点了test.vbs，整个文件夹都没了。MD，里面有 rm 命令。。。）</del></p><p>放张图压压惊</p><p><img src="1.png"></p><h2 id="excel操作"><a href="#excel操作" class="headerlink" title="excel操作"></a>excel操作</h2><ul><li><p>对象 (class):</p><ul><li>Application (Excel应用程序本身)</li><li>Workbooks</li><li>Worksheets</li><li>Range (单元格)</li></ul></li><li><p>方法 (members):</p><ul><li>Open</li><li>Close</li></ul></li><li><p>属性: </p><ul><li>Author</li></ul></li></ul><pre class="line-numbers language-none"><code class="language-none">Dim (Dimension 尺寸)Dim i As Integer &#39;整数类型变量Dim i As StringDim i As Range &#39;单元格对象Dim i As Workbook &#39;工作簿Dim i As Worksheet &#39;工作表<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Workbooks：所有excel当前打开的工作簿（即所有打开的excel文件）<br>Workbook：Workbooks的成员<br>ActiveWorkbook：当前工作簿<br>ThisWorkbook：当前VB正在运行的工作簿<br>Worksheets：所有工作表。</p><p>可以通过下标或者名字引用Worksheet<br>例如引用第一个：<code>Worksheets(1)</code>，最后一个: <code>Worksheets.Count</code>，引用指定的：<code>Worksheets(&quot;shee1&quot;)</code></p><p>Worksheet：Worksheets的成员<br>ActiveWorksheet：当前worksheet</p><p><code>Cells：Cells(row,column)</code>代表单个单元格。</p><p>例如Cells(1,1),Cells(10,4)分别代表A1,D10</p><pre class="line-numbers language-none"><code class="language-none">获取单元格的行号,列号(待测试)Cells(1, 1) &#x3D; Selection.Row    Cells(1, 2) &#x3D; Selection.Column     selection &#x3D; Range(&#39;b2&#39;).row<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ActiveCell：活动工作簿的活动单元格，或指定工作表的活动单元格<br>Range：指定区域，例如Range(“A1:H8”)</p><p>或者[A1],[A1:C5]的中括号形式</p><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><h3 id="获取外网IP地址-并邮件通知"><a href="#获取外网IP地址-并邮件通知" class="headerlink" title="获取外网IP地址,并邮件通知"></a>获取外网IP地址,并邮件通知</h3><p>这个脚本产生的背景是这样的:有一个条网线,有外网地址,但是不是固定.想要远程回里面内网的PC,于这个脚本产生了,让它定时提醒新的IP地址</p><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">    &#39;Set Wshshell &#x3D; CreateObject(&quot;Wscript.shell&quot;)    times &#x3D; 1Do    Set ie&#x3D;CreateObject(&quot;InternetExplorer.Application&quot;)    ie.Visible&#x3D;false    ie.navigate &quot;http:&#x2F;&#x2F;ip.cn&#x2F;&quot; &#39;从ip.cn获取IP地址信息    Do        WSH.Sleep 500    Loop Until ie.readyState&#x3D;4    str &#x3D; replace(ie.Document.getElementByID(&quot;result&quot;).innertext,vbCrLf,&quot; &quot;)    &#39;msgbox str    Set reg &#x3D; New RegExp &#39;这里设置一个正则,用来提取出ip.cn返回信息中的ip地址    reg.Pattern &#x3D; &quot;(\d+\.)&#123;3&#125;\d+&quot;    ip &#x3D; reg.Execute(str)(0)    &#39;CreateObject(&quot;wscript.Shell&quot;).run &quot;mshta vbscript:ClipBoardData.setData(&quot;&quot;Text&quot;&quot;,&quot;&quot;&quot;&amp;ip&amp;&quot;&quot;&quot;)(window.close)&quot;, 0, true &#39;这里是将ip地址复制到剪贴板,这里并不需要    &#39;msgbox  &quot;IP: &quot; &amp; ip &amp; &quot; Copy to Clipboard done!&quot;    ie.quit &#39;这里退出前面打开的ie    ipTemp &#x3D; &quot;127.0.0.1&quot;    if ip &lt;&gt; ipTemp then         call sendMail()    end if     ipTemp &#x3D; ip    WScript.Sleep 18800000    times &#x3D; times + 1Loop Until times &gt; 1000function sendMail ()        Set objEmail      &#x3D; CreateObject(&quot;CDO.Message&quot;)    objEmail.From     &#x3D; &quot;xxxx@outlook.com&quot;    objEmail.To       &#x3D; &quot;xxxx@gmail.com&quot;    objEmail.Subject  &#x3D; &quot;The External IP had been changed!&quot;    sendmsg &#x3D; &quot;New IP: &quot; &amp; ip &amp; chr(13) &amp; _             &quot;&lt;br&#x2F;&gt; Update Time: &quot; &amp; now()        objEmail.Htmlbody &#x3D; sendmsg  &#39;htmlbody 是发送HTML格式的文本.         &#39;下面是配置smtp服务器的信息,这里我以outlook为例.(默默说一句,微软对自家的东西兼容真心laji)        with objEmail.Configuration.Fields     .Item (&quot;http:&#x2F;&#x2F;schemas.microsoft.com&#x2F;cdo&#x2F;configuration&#x2F;sendusing&quot;)        &#x3D; 2     .Item (&quot;http:&#x2F;&#x2F;schemas.microsoft.com&#x2F;cdo&#x2F;configuration&#x2F;smtpserver&quot;)       &#x3D; &quot;smtp.office365.com&quot;     .Item (&quot;http:&#x2F;&#x2F;schemas.microsoft.com&#x2F;cdo&#x2F;configuration&#x2F;smtpserverport&quot;)   &#x3D; 25     .Item (&quot;http:&#x2F;&#x2F;schemas.microsoft.com&#x2F;cdo&#x2F;configuration&#x2F;smtpauthenticate&quot;) &#x3D; 1     .Item (&quot;http:&#x2F;&#x2F;schemas.microsoft.com&#x2F;cdo&#x2F;configuration&#x2F;sendusername&quot;)     &#x3D; &quot;xxxx@outlook.com&quot;     .Item (&quot;http:&#x2F;&#x2F;schemas.microsoft.com&#x2F;cdo&#x2F;configuration&#x2F;sendpassword&quot;)     &#x3D; &quot;xxxxx&quot;     &#39;.Item (&quot;http:&#x2F;&#x2F;schemas.microsoft.com&#x2F;cdo&#x2F;configuration&#x2F;sendtls&quot;)          &#x3D; True     .Item (&quot;http:&#x2F;&#x2F;schemas.microsoft.com&#x2F;cdo&#x2F;configuration&#x2F;smtpconnectiontimeout&quot;) &#x3D; 60     .Item(&quot;http:&#x2F;&#x2F;schemas.microsoft.com&#x2F;cdo&#x2F;configuration&#x2F;smtpusessl&quot;) &#x3D; True     .Update    end with    objEmail.Sendend function    &#39;vbs 目前 outlook 账号只能用ssl, 现在没有找到问题所在. 但是再outlook app 里面,可以指定使用 STARTTL,端口为587,所以上面那个tls注释掉了    &#39;https:&#x2F;&#x2F;www.tachytelic.net&#x2F;2018&#x2F;12&#x2F;email-vbscript-vba-office-365&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Outlook-自动发送邮件"><a href="#Outlook-自动发送邮件" class="headerlink" title="Outlook 自动发送邮件"></a>Outlook 自动发送邮件</h3><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">&#39;sdt 为今日日期的字符串，比如 &#39;2010-12-9&#39;，可用于附件名字里sdt &#x3D; FormatDateTime(Date)&#39; 注意：以单引号&#39;开头的行为注释&#39; receiptions 为收件人列表，多个收件人之间用分号隔开&#39; Subject 为邮件标题&#39; Body 为邮件正文&#39; Attachments 为附件列表，每个附件都需附带路径。&#39; autoSend 设置是否直接发送，设置为False时将停留在最后窗口，需手动按Outlook的发送按钮进行发送receiptions &#x3D; &quot;xxxx@xxx.com; xxxx@gmail.com&quot; &#39;接收人Subject &#x3D; &quot;This is a auto send email test &quot; &amp; sdtBody &#x3D; &quot;Hi, team &lt;br&#x2F;&gt;&quot; &amp;  _    &quot;&amp;emsp; This is  another line! &lt;br&#x2F;&gt;&quot; &amp; _    &quot;another line&quot; &#39;&lt;br&#x2F;&gt; 换行   &amp;emsp 空格&#39;Attachments &#x3D; Array(&quot;D:\report &quot; &amp; sdt &amp; &quot;.docx&quot;, &quot;D:\report &quot; &amp; sdt &amp; &quot;.pdf&quot;)autoSend &#x3D; False&#39; 以下代码无需修改Dim xOutLookDim xMailOn Error Resume NextSet xOutLook &#x3D; GetObject(, &quot;Outlook.Application&quot;)If xOutLook Is Nothing Then    Set xOutLook &#x3D; CreateObject(&quot;Outlook.Application&quot;)End IfSet xMail &#x3D; xOutLook.CreateItem(olMailItem)With xMail    .Display    Dim signature    signature &#x3D; .HTMLBody    .To &#x3D; receiptions    .Subject &#x3D; Subject    .HTMLBody &#x3D; Body    .Importance &#x3D; olImportanceNormal    &#39; 设置优先级, olImportanceHigh为高优先级    If IsArray(Attachments) Then        Dim attachment        For Each attachment In Attachments            .Attachments.Add attachment        Next    End If&#39;-----------------------------------------------------------------------&#39;添加附件的其他演示set ofs &#x3D; createobject(&quot;scripting.filesystemobject&quot;)set ofolder &#x3D; ofs.getfolder(&quot;C:\Users\bingfeng\Pictures\test&quot;)set ofiles &#x3D; ofolder.files for each ofile in ofiles&#39;ofile &#x3D; chr(34) &amp; ofiles(i) &amp; chr(34)msgbox ofile.path  xmail.Attachments.Add ofile.path &#39;一定要加 path 属性next &#39;-----------------------------------------------------------------------    .HTMLBody &#x3D; .HTMLBody &amp; signature    If autoSend Then        .Send    Else        .Display    End IfEnd With<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="判断用户是否有管理员权限"><a href="#判断用户是否有管理员权限" class="headerlink" title="判断用户是否有管理员权限"></a>判断用户是否有管理员权限</h3><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">call checkIFAdmin()msgbox checkifadmin()Function checkIFAdmin()On Error Resume Nextset wshshell &#x3D; createobject(&quot;wscript.shell&quot;)set fso &#x3D; wscript.createobject(&quot;scripting.filesystemobject&quot;)mySystemRoot &#x3D; wshShell.ExpandEnvironmentStrings(&quot;%SystemRoot%&quot;)testFolder &#x3D; mySystemRoot &amp; &quot;\test&quot; &#39;msgbox testfolderFso.CreateFolder(testFolder) Wscript.sleep 2000if fso.FolderExists(testFolder) thencheckIFAdmin &#x3D; truefso.deletefolder(testFolder)elsecheckIFAdmin &#x3D; false end ifEnd Function<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="创建快捷方式"><a href="#创建快捷方式" class="headerlink" title="创建快捷方式"></a>创建快捷方式</h3><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">set WshShell&#x3D;WScript.CreateObject(&quot;WScript.Shell&quot;) &#39;第一行创建了一个Windows脚本宿主壳对象,strDesktop&#x3D;WshShell.SpecialFolders(&quot;AllUsersStartup&quot;) &#39;第二行获取到桌面路径，set oShellLink&#x3D;WshShell.CreateShortcut(strDesktop &amp; &quot;\myShortCut.lnk&quot;) &#39;第三行创建快捷方式lnk文件，oShellLink.TargetPath&#x3D;&quot;C:\temm\sum.vbs&quot; &#39;第四行设定快捷方式的目标路径，&#39;oShellLink.WindowStyle&#x3D;1 &#39;第五行设定快捷方式打开窗口的风格，&#39;oShellLink.Hotkey&#x3D;&quot;CTRL+SHIFT+E&quot;  &#39;第六行设定该快捷方式的快捷键，&#39;oShellLink.IconLocation&#x3D;&quot;c:\mydocumentfolder\icon.ico,0&quot; &#39;第七行设定快捷方式的图标，&#39;oShellLink.Description&#x3D;&quot;my shortcut descriptiion&quot; &#39;第八行设定快捷方式的描述信息，&#39;oShellLink.WorkingDirectory&#x3D;strDesktop &#39;第九行设定快捷方式的工作路径，oShellLink.Save  &#39;第十行保存快捷方式。&#39;https:&#x2F;&#x2F;blog.csdn.net&#x2F;MAILLIBIN&#x2F;article&#x2F;details&#x2F;47110843<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> 编程 </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UWP 离线安装</title>
      <link href="/2020/12/07/uwp-chi-xian-an-zhuang/"/>
      <url>/2020/12/07/uwp-chi-xian-an-zhuang/</url>
      
        <content type="html"><![CDATA[<p>很多公司电脑都是禁用Windows Store，我本人也不是很喜欢这个东西 （有些app需要加一层代理，体验不是很好。而且就微软那个网络，快可以10几兆，慢的话基本没速度。。。）</p><p>但是有些用户习惯了一些app，比如 Sticky Note（便签）。而且，Store里面不乏有一些优秀的应用。然后像我，用的LTSC的，连 Windows Store 都没有，那只能用离线安装的方法了。</p><p>下面演示如何离线下载安装 Sticky Note</p><h2 id="开启开发者模式"><a href="#开启开发者模式" class="headerlink" title="开启开发者模式"></a>开启开发者模式</h2><p>如下图标识，下面箭头所指的两种模式都可以</p><p><img src="1.png"></p><h2 id="下载-Appx-文件"><a href="#下载-Appx-文件" class="headerlink" title="下载 Appx 文件"></a>下载 Appx 文件</h2><p>访问微软的网站，找到你要下载app的web链接，如下是便签的链接</p><blockquote><p><a href="https://www.microsoft.com/en-us/p/microsoft-sticky-notes/9nblggh4qghw">https://www.microsoft.com/en-us/p/microsoft-sticky-notes/9nblggh4qghw</a></p></blockquote><p>注意：链接格式一定是上面那样的，微软会将上面的链接跳转成另外一个很长格式的。如果使用Google搜索的，可以f12查看所有跳转的链接(具体方法Google查)</p><p>前往下面的网站，输入上面的网址链接</p><blockquote><p><a href="https://store.rg-adguard.net/">https://store.rg-adguard.net/</a></p></blockquote><p><img src="2.png"></p><p><strong>注意</strong>：有时候你会发现你输入的链接是对的，但是搜索不出什么结果。你等个几天再回来搜搞不好就有了，我就是这样的。</p><p>搜出来有很多文件，一般下载版本号最新的，然后后缀是<code>appxbundle</code>的文件就行</p><p><img src="3.png"></p><h2 id="安装-Appx文件"><a href="#安装-Appx文件" class="headerlink" title="安装 Appx文件"></a>安装 Appx文件</h2><p>查了些资料，很多都是直接双击安装就行。但是我这边两台电脑均失败。只能用Powershell来安装</p><pre class="line-numbers language-none"><code class="language-none">add-appxpackage c:\test\*.appxbundle<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>这个是 Windows10 Sticky Note 信息存储的位置，可能不一定是这个文件夹，但是有<code>Microsoft.MicrosoftStickyNotes</code>字样就不会错</p><blockquote><p>C:\Users\用户名\AppData\Local\Packages\Microsoft.MicrosoftStickyNotes_8wekyb3d8bbwe</p></blockquote><p>偶然看到微软提供的离线下载渠道，只限企业和教育版的账号，测试不了，先mark，后面有机会再测试</p><blockquote><p><a href="https://docs.microsoft.com/en-us/microsoft-store/distribute-offline-apps">https://docs.microsoft.com/en-us/microsoft-store/distribute-offline-apps</a></p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote><p><a href="https://blog.csdn.net/qq_16118075/article/details/88809464">https://blog.csdn.net/qq_16118075/article/details/88809464</a></p></blockquote><blockquote><p><a href="https://techdevian.com/zh-cn/2020/1/26/%E5%A6%82%E4%BD%95%E5%9C%A8windows-10%E4%B8%8A%E5%AE%89%E8%A3%85.appx%E6%88%96.appxbundle%E8%BD%AF%E4%BB%B6/">https://techdevian.com/zh-cn/2020/1/26/%E5%A6%82%E4%BD%95%E5%9C%A8windows-10%E4%B8%8A%E5%AE%89%E8%A3%85.appx%E6%88%96.appxbundle%E8%BD%AF%E4%BB%B6/</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>易混英文单词汇总</title>
      <link href="/2020/11/30/yi-hun-ying-wen-dan-ci-hui-zong/"/>
      <url>/2020/11/30/yi-hun-ying-wen-dan-ci-hui-zong/</url>
      
        <content type="html"><![CDATA[<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=26123904&auto=1&height=66"></iframe><br><font color=purple  face="微软雅黑" size=5><p>colleague | college<br>partner | parents | patient<br>investment | investigation<br>several | severe | serial<br>feat | fear<br>fake | fate<br>generic  | genetic<br>interpret | interrupt<br>invert | invest<br>brand | band<br>transition |<br>collaboration | cooperation<br>escalation | elevate<br>evaluation | evolution<br>desired | deserved<br>pray | prey<br>exit | exist<br>intranet | internet<br>assess | access<br>content | contact | context<br>attack | attract<br>specific | superficial<br>propose | purpose<br>the latest | the last | late<br>sushi | sauce<br>struck | stuck<br>cute | cue<br>session | section<br>hall | hell | holy<br>physical | psychological<br>army | enemy<br>invest | inventory<br>impose | import<br>example | sample | temple<br>Easter | east<br>diversity | deliver<br>monitor | minority<br>liquidate | liquid<br>exclaim | explain<br>evaluate | evacuate<br>contract | contrast<br>negative | navigate<br>medium | media<br>particle | practice<br>forth | fourth<br>plant | planet<br>frost | fog | forest<br>invest | invent | invert<br>consumer | customer<br>branch | brand<br>opportunity | opponent<br>halt | half<br>robber | rubber<br>debt | debut<br>blind | bind<br>exempt | example<br>achieve | archive<br>retain | detain<br>eclipse | ellipse<br>needle | noodles<br>explosion | exposition<br>crush | cash<br>caption | captain<br>shallow | shadow<br>role | rope<br>wizard | witch<br>possess  | process<br>salvage | slave<br>chief | thief<br>steam | stream<br>barge | badge | budget<br>grant | giant<br>support | suppose<br>ticket | trick<br>idol | idiot<br>heat | heart<br>butter | buffer<br>religious | regional<br>execute | exclusive<br>dial | diag<br>abroad | broad<br>breach | branch | beach | bitch| brand<br>span | scam | spam<br>unified | uniform<br>classified | classical<br>improve | increase<br>delay | relay</p><p>revolve<br>draft </p><p>treassurer</p><p>very | ultra | super | extremely | tremendously </p></font>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 英文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown语法</title>
      <link href="/2020/11/16/markdown-yu-fa/"/>
      <url>/2020/11/16/markdown-yu-fa/</url>
      
        <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>Markdown是一种轻量级标记语言，它以纯文本形式(易读、易写、易更改)编写文档，并最终以HTML格式发布。</p><p>这个语法的创始人的人生很传奇，感兴趣可以<a href="https://en.wikipedia.org/wiki/Aaron_Swartz">看看</a></p><ul><li><p>一种<code>轻量级</code>的标记语言</p><p>  与 HTML （HyperText Markup Language）相对（Markdown）。2004 年创建，它允许人们使用易读易写的纯文本格式编写文档，然后转换成有效的XHTML（或者HTML）文档</p></li><li><p>官网</p><p>  <a href="https://commonmark.org/">CommonMark</a></p></li><li><p>作者</p><p>  John Gruber &amp; <a href="https://zh.wikipedia.org/wiki/%E4%BA%9A%E4%BC%A6%C2%B7%E6%96%AF%E6%B2%83%E8%8C%A8">Aaron Swartz</a></p></li><li><p>其他标记文档</p><p>  <a href="https://zh.wikipedia.org/wiki/ReStructuredText">reStructuredText</a> (RST，ReST，reST)</p><p>  是另一种用于文本数据的文件格式，主要用于 Python 编程语言社区的技术文档</p></li><li><p>演示</p><p>  <a href="https://www.hi-linux.com/posts/50201.html">点我</a></p></li><li><p>优点<br>  不要被「语言」、「标记」等字样吓住，Markdown 不是 PHP 或 Python，它的语法十分简单，也不涉及任何数学或编程知识，几乎可以称得上零门槛。</p><p>  <strong>Markdown 的语法特性让人们在写作的过程中只需要专注于文字内容而并不需要特别在意排版，不让思路被打断。</strong></p><ul><li>易读（看起来舒服）、易写（语法简单）、易更改纯文本。处处体现着极简主义的影子。</li><li>兼容HTML，可以转换为HTML格式发布。</li><li>跨平台使用。</li><li>越来越多的网站支持Markdown。</li><li>更方便清晰地组织你的电子邮件。（Markdown-here, Airmail）</li><li>在某种程度上摆脱Word</li></ul></li><li><p>使用者<br>  由于在阅读和预览上的便利性，Markdown 逐渐流行，受到码农和写作者的欢迎。</p><ul><li><p>支持网站 </p><ul><li>GitHub</li><li>StackOverflow</li><li>Reddit</li><li>CSDN</li><li>Segmentfault</li><li>Hexo</li><li>博客园</li><li>知乎</li><li>掘金</li><li>简书</li></ul></li><li><p>笔记工具</p><ul><li>印象笔记</li><li>有道云笔记</li><li>为知笔记</li></ul></li><li><p>文档 &amp; 知识库</p><ul><li>语雀</li><li>Gitbook</li><li><a href="https://docsify.js.org/#/">docsify</a></li></ul></li></ul><p>  例子：</p><p>  <a href="https://vuepress.mirror.docker-practice.com/">Docker 入门</a></p><p>  <a href="https://github.com/yangyangwithgnu/the_new_world_linux">美丽新世界：linux 下的惬意生活</a></p><p>  <a href="https://github.com/xiaolai/regular-investing-in-box">定投改变命运</a></p></li></ul><h2 id="编辑器"><a href="#编辑器" class="headerlink" title="编辑器"></a>编辑器</h2><p>写作Markdown，其实用一般的文本编辑器就可以，但是为了更高效的写作，可以使用一些编辑器进行写作。</p><p>在不熟悉语法的情况，有些编辑器提供一边写，一边预览结果的功能。不过，在我们熟悉了之后，预览的功能就不需要了。</p><p>Markdown 文档的后缀是 <code>.md</code>，我们可以用下面提及的工具来打开浏览以及编辑</p><ul><li><p>Visual Studio Code</p><p>  很强大的一款工具，微软开源的。当编辑一个md后缀的文件，会自动高亮，右侧可以打开预览的窗口。</p><p>  <img src="1.png"></p></li><li><p>Typora</p><p>  这是一个所见即所得的编写工具，免费。Windows 和 Linux 平台均可安装此软件。安装插件后，可以导出为PDF，HTML，图片等格式</p><p>  <img src="2.png"></p></li><li><p>Cmd Markdown</p><p>  在线Web写作平台，可以编写预览，导出需要注册帐号。可以作为临时渲染使用。</p><blockquote><p><a href="https://www.zybuluo.com/mdeditor#">https://www.zybuluo.com/mdeditor#</a></p></blockquote></li><li><p>Stackedit &amp; Dillinger</p><p>  这两个是国外免费的，部分高级功能付费使用，但是导出不需要注册，很方便。</p><blockquote><p><a href="https://dillinger.io/">https://dillinger.io/</a><br><a href="https://stackedit.io/app#">https://stackedit.io/app#</a></p></blockquote></li></ul><h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><p>前面说过，Markdown是很简洁的一个工具，所以上手并不难。自己先看看然后动手练练写一篇文章估计就能掌握了</p><p>Markdown语法主要分为如下几大部分： 标题，段落，区块引用，代码区块，强调，列表，分割线，链接，图片，反斜杠 \ ，符号 `</p><h3 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h3><p><code>#</code>代表标题的级别，一级标题是最大的。<br><strong>请在井号和标题文本之间添加一个空格</strong></p><pre class="line-numbers language-none"><code class="language-none"># 一级标题## 二级标题### 三级标题#### 四级标题##### 五级标题###### 六级标题<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>很多渲染器根据标题来生成outline的</p><p><img src="4.png"></p><h3 id="段落"><a href="#段落" class="headerlink" title="段落"></a>段落</h3><p>段落的前后要有空行，所谓的空行是指没有文字内容。<strong>若想在段内强制换行的方式是使用两个以上空格加上回车</strong>（引用中换行省略回车）</p><p>为了兼容性，请在行尾添加HTML 的 <code>&lt;br&gt;</code> 标签来实现换行。</p><h3 id="区块引用"><a href="#区块引用" class="headerlink" title="区块引用"></a>区块引用</h3><p>在段落的每行或者只在第一行使用符号 <code>&gt;</code>， 还可使用多个嵌套引用，如：</p><pre class="line-numbers language-none"><code class="language-none">&gt; 区块引用&gt;&gt; 嵌套引用<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>例子：</p><blockquote><p>其实全部都是我说的  ——鲁迅</p></blockquote><h3 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h3><p>这个是Markdown的一大特色，毕竟是给程序员用的。在代码块里面的内容都会按照你编写的样式显示，不会进行任何改动。<br>你可以加上代码所属的语言，渲染后会自动代码高亮。</p><p>使用方法如下：</p><p><img src="5.png"></p><p>效果如下：</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include &lt;iostream&gt;using namespce std;int main()    &#123;        cout &lt;&lt; &quot;Hello World!&quot; &lt;&lt; endl;    &#125;return 0;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="强调"><a href="#强调" class="headerlink" title="强调"></a>强调</h3><p><img src="6.png"></p><p>效果如下： </p><p><em>斜体</em></p><p><strong>粗体</strong></p><p><code>标记</code></p><h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><p>列表分为无序和有序列表，</p><p>使用<code>*</code>，<code>+</code>，<code>-</code>标记无序列表。</p><p>有序列表的标记方式是将上述的符号换成<code>数字</code>,并辅以<code>.</code></p><p>符号和文字之间有空格。序列中还能继续嵌套序列</p><p><img src="7.png"></p><p>效果如下：</p><ol><li>无序列表<ul><li>蔬菜<ul><li>白菜</li><li>菠菜</li></ul></li><li>水果<ul><li>葡萄</li><li>苹果</li></ul></li></ul></li><li>有序列表</li></ol><h3 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h3><p>三个或三个以上 <code>*</code> ，<code>_</code> ， <code>-</code></p><h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><p>格式如下：</p><pre class="line-numbers language-none"><code class="language-none">[Google](https:&#x2F;&#x2F;www.google.com&#x2F;)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>效果：</p><p><a href="https://www.google.com/">Google</a></p><h3 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h3><p>格式和链接部分差不多，多加一个 <code>!</code> 就行</p><pre class="line-numbers language-none"><code class="language-none">![点我查看图片](https:&#x2F;&#x2F;233.fi&#x2F;images&#x2F;2018&#x2F;05&#x2F;13&#x2F;8fb918507932369504a9bcf7280b6136.md.jpg)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果是本地图片，一般将图片放在MD文档的同目录下面，直接引用</p><pre class="line-numbers language-none"><code class="language-none">![本地图片](10.png)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>调整图片大小，可以用html的语法</p><pre class="line-numbers language-none"><code class="language-none">&lt;img src&#x3D;&quot;2.png&quot; width &#x3D; &quot;100&quot; height &#x3D; &quot;100&quot;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>代办列表: 表示列表是否勾选状态（注意：[ ] 前后都要有空格）</p><p>并不是所有的渲染器都支持</p><pre class="line-numbers language-none"><code class="language-none">- []  不勾选- [x] 勾选<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="不足"><a href="#不足" class="headerlink" title="不足"></a>不足</h2><p>每个东西都有它的优缺点。Markdown 也不例外。</p><ul><li><p>版本众多，语法可能有所不同</p><p>  <img src="3.png"></p></li><li><p>每个软件(渲染器)解释不一样，最后出来的效果(HTML)样式也不一样</p></li><li><p>在需要复杂(自定义)功能时，可能无法提供。例如：改变字体颜色，只能借助HTML语法</p></li></ul><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote><p><a href="https://juejin.im/post/6844903683365289991">https://juejin.im/post/6844903683365289991</a><br><a href="https://www.ifanr.com/1318978">https://www.ifanr.com/1318978</a><br><a href="https://juejin.im/post/6844903683365289991#heading-1">https://juejin.im/post/6844903683365289991#heading-1</a><br><a href="https://github.com/younghz/Markdown">https://github.com/younghz/Markdown</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Adobe 我跟你没完</title>
      <link href="/2020/11/12/adobe-wo-gen-ni-mei-wan/"/>
      <url>/2020/11/12/adobe-wo-gen-ni-mei-wan/</url>
      
        <content type="html"><![CDATA[<blockquote><p>这辈子不可能不用Adobe的软件。开源的又不会用，只有白嫖才能维持得了生活这样子。Creative Cloud 里面的软件个个都是神器，统一又好用，喔唷——超喜欢Adobe！</p></blockquote><p>玩笑归玩笑。虽然Adobe好用，但是店大欺客，对国内的用户也不是很友好。而且最近打击盗版得力度加强了<del>(盗版太多了，人家也烦)</del><br>听说思杰马克丁也代理了Adobe的软件了。。。。。。</p><p>算了，该用破解还是得用。等哪天有钱了，我就去购买Affinity的产品。<del>不要打我</del></p><h2 id="破解"><a href="#破解" class="headerlink" title="破解"></a>破解</h2><p>写这篇文章，Adobe已经出了2021版本，但是破解的程序还没跟上，只能用2020来暂时救火</p><p>但是，很尴尬的一个：Adobe已经不提供离线安装包的下载链接了。唯一的安装的方法只有先下载 Creative Cloud App，然后登录Adobe账号，在里面下载PS，AI等软件。</p><p>如果非要离线下载，网上看到一个小方法：<code>官网联系Adobe客服，让他们发离线下载链接给你</code>。<br>但是我试过了，失败了。提到我已经试用过2020的版本了，我需要订阅他们的服务(先给钱)，他才给我下载链接。这个订阅是可以7天内免费取消的。但是，我感觉事情不是那么简单。。。就不理会了，自己去网上找资源。</p><p>我其实是有强迫症的，非官网的软件不用。但是现在Adobe封死了这条路，没办法，只能冒险去试试网上的其他资源。如果其他的资源我都看不上，我想我硬盘上面的2019能用到天荒地老了。</p><h3 id="软件下载"><a href="#软件下载" class="headerlink" title="软件下载"></a>软件下载</h3><p>这个是放在 Google Drive，目前试了PS和AI，还行，扫毒能过去。</p><pre class="line-numbers language-none"><code class="language-none">Adobe Photoshop 2020 http:&#x2F;&#x2F;bit.ly&#x2F;OrsZ215faAdobe Illustrator 2020: http:&#x2F;&#x2F;bit.ly&#x2F;2O5LfMzAdobe InDesign 2020: http:&#x2F;&#x2F;bit.ly&#x2F;3367WV4Adobe Premiere Pro 2020: http:&#x2F;&#x2F;bit.ly&#x2F;2Oafr433gAdobe After Effect 2020: http:&#x2F;&#x2F;bit.ly&#x2F;2OsL32Fz来自Github：https:&#x2F;&#x2F;github.com&#x2F;Cratobi&#x2F;adobe2020<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="破解程序"><a href="#破解程序" class="headerlink" title="破解程序"></a>破解程序</h3><blockquote><p><a href="https://www.cybermania.ws/software/adobe-cc-2019-2020-genp-universal-patch-v-2-5/">https://www.cybermania.ws/software/adobe-cc-2019-2020-genp-universal-patch-v-2-5/</a></p></blockquote><h2 id="替代"><a href="#替代" class="headerlink" title="替代"></a>替代</h2><p>目前先整理一下可以替代Adobe的软件。但是目前弃用Adobe是不可能，首先学习成本就摆在这里。其次，目前没有哪个厂商，能像Adobe产品线这么广的，Adobe每个产品界面逻辑都很类似，了解一个之后，去上手另一个没多大问题。</p><p>注意：下面的替代方案看似很多很美好，但是能不能经得起考验还有待研究。毕竟，平面设计Adobe排第二，这世界上可能没人敢说第一。</p><p>这个大佬整理的部分可以替代Adobe的软件：</p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/70057680">https://zhuanlan.zhihu.com/p/70057680</a></p></blockquote><blockquote><p><a href="https://www.patreon.com/posts/adobe-software-26834357">https://www.patreon.com/posts/adobe-software-26834357</a></p></blockquote><p>图里面都是可以替代的软件：<br>蓝色是免费的<br>黄色是单次买断的(长期用比Adobe的订阅付费简直不要太良心)</p><p><img src="1.png"></p><h2 id="后话"><a href="#后话" class="headerlink" title="后话"></a>后话</h2><p>Adobe，我求求你做个人吧</p>]]></content>
      
      
      
        <tags>
            
            <tag> 破解 </tag>
            
            <tag> 设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RFID相关</title>
      <link href="/2020/10/23/rfid-xiang-guan/"/>
      <url>/2020/10/23/rfid-xiang-guan/</url>
      
        <content type="html"><![CDATA[<p>声明：本文仅作爱好研究使用，本人不对任何任何设备或软件使用后果负责</p><h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><h3 id="卡片的基本知识"><a href="#卡片的基本知识" class="headerlink" title="卡片的基本知识"></a>卡片的基本知识</h3><img src="10.jpg" width="50%" height="50%"><p><strong>卡的类型跟外观没有绝对关系的</strong>，下面两张卡都是IC卡(协议标准：ISO 14443A)</p><img src="11.jpg" width="50%" height="50%"><p>目前我将卡的类型简单分为 IC(高频) 和 ID(低频) 卡。当然，卡的种类肯定比这个复杂，但是在日常中够用了。</p><p>可以参考这个博客 <a href="https://lzy-wi.github.io/2018/07/26/proxmark3/">Lzywi’Blog</a></p><p>简单区分的方法：</p><ul><li>光照法<br>  看卡里面的线圈，圆形大多是ID卡，方形大多是IC卡</li><li>NFC法<br>  拿一部带有NFC功能的手机打开NFC，卡片靠近手机会响的是IC卡，不会响的是ID卡</li></ul><p>当然，像挂钥匙扣那种的卡，我是直接怼到PM3上去辨别的</p><h4 id="高频卡"><a href="#高频卡" class="headerlink" title="高频卡"></a>高频卡</h4><p>频率：13.56MHZ</p><ul><li><p>Mifare S50(简称M1)<br>  协议标准：ISO 14443A<br>  每张卡有独一无二的UID号，可保存修改数据,常见学生卡，饭卡，公交卡，门禁卡</p><p>  M1卡科储存的数据大小为8k，分为<strong>16</strong>个扇区，每个扇区分<strong>4</strong>个块，每个块为16个字节，以块为存取单位。每个扇区都有独立的一组密码及访问控制，每张卡有唯一的一个32位的序列号。每个扇区的0,1,2块为数据块，用来存储数据，第3块为控制块，包括了密A、存取控制、密码B</p><p>  <strong>每张卡的第0扇区的第0块用来存放厂商代码，不可更改</strong></p>  <pre class="line-numbers language-none"><code class="language-none">   扇区0   03332801198804008500b42ef0bb6aa8 块0 &#x2F;&#x2F;厂商代码，不可更改00000000000000000000000000000000 块1 &#x2F;&#x2F;数据块00000000000000000000000000000000 块2 &#x2F;&#x2F;数据块ffffffffffffff078069ffffffffffff 块3 &#x2F;&#x2F;密码A（6字节），存储控制（4字节），密码B(6字节)   扇区1   00000000000000000000000000000000 块4 &#x2F;&#x2F;除了第0扇区稍有不同，其他15个扇区结构完全一样00000000000000000000000000000000 块500000000000000000000000000000000 块6ffffffffffffff078069ffffffffffff 块7        .        .        .      扇区15   00000000000000000000000000000000 块6000000000000000000000000000000000 块6100000000000000000000000000000000 块62ffffffffffffff078069ffffffffffff 块63<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Mifare UltraLight（简称M0）<br>  低成本卡，出厂固化UID，可储存修改数据，常见地铁卡，公交卡</p></li><li><p>Mifare UID（简称UID卡）<br>  M1卡的变异版本，可修改UID，国外叫做<code>中国魔术卡</code>，可以用来克隆<code>M1 S50</code>的数据。<em>一般S50卡是不允许修改卡号的，但是在我大天朝，还有什么不行，于是UID卡出现了</em></p><p>  M1 UID卡是针对M1 S50卡特制的变种卡，用起来和M1 S50完全一样，只是多了一个功能，就是0扇区块的数据可以随意修改。因此UID号也可以随意修改，厂家信息也可以随意修改。UID卡修改0扇区0块数据是靠指令进入工厂模式，可以直接对全卡任何数据编辑，不需要密码即可读写卡，同时不怕写坏卡，即使写错0块，写坏扇区控制字，也可以随时修复回来，不影响后续使用。</p></li><li><p>FUID卡<br>  FUID卡是针对UID卡做的优化。新的读卡系统，通过检测卡片对特殊指令的回应，可以检测出UID卡，因此可以来拒绝UID卡的访问，来达到屏蔽复制卡的功能。FUID可以修改0块，但只可以修改一次，写错也没办法更改，也不能重复利用。修改后和M1卡完全一样，很难被屏蔽检测</p></li><li><p>CUID卡<br>  CUID卡是针对FUID卡做的优化。CUID卡可以重复修改0块，但是它和UID卡的区别是，UID卡是通过指令修改0块，CUID使用的是常规密码验证的方法写0块，其他扇区和标准M1卡相同。缺点是，还是有可能会被检测出来，而且如果不小心写错了UID号的校验位导致无法读卡，没办法修复只能报废。</p></li></ul><h4 id="低频卡"><a href="#低频卡" class="headerlink" title="低频卡"></a>低频卡</h4><p>频率：125KHZ</p><ul><li>EM4XX（简称ID卡）<br>  常用固化ID卡，出厂固化ID，只能读不能写（低成本门禁卡，小区门禁卡，停车场门禁卡）<br>  ID卡是我们的俗称，内部芯片的全名叫做EM4100或EM41XX。每张卡出厂就有独一无二的ID号，不可改写。</li></ul><ul><li><p>T5577（简称可修改ID卡）<br>  可用来克隆ID卡，出厂为空卡</p><p>  T5577 卡是一种可以写入数据可以加密的低频卡。最特别之处是，写入ID号可以变身成为ID卡，写入HID号可以变身HID卡，写入Indala卡号，可以变身Indala卡。T5577一共有8个块，每个块只能存8位数。第0块是用来设置卡片类型和调制方式的，决定了卡片是ID卡还是HID卡，如果随意修改会导致读不到卡。<strong>第 7 块最后一个块，在没有加密时是数据区，加密后，其数据就变成了密码。</strong>结构如下</p>  <pre class="line-numbers language-none"><code class="language-none">0x00148040  00000000000101001000000001000000 [0]0xFF94C004  11111111100101001100000000000100 [1]0xA5464942  10100101010001100100100101000010 [2]0xFFFFF808  11111111111111111111100000001000 [3]0x0001C000  00000000000000011100000000000000 [4]0x0001C000  00000000000000011100000000000000 [5]0x0001C000  00000000000000011100000000000000 [6]0x0001C000  00000000000000011100000000000000 [7]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>  0块: <code>00148040</code> 无密； <code>00148050</code> 加密；</p></li></ul><ul><li>HID ProxⅡ（简称HID卡）<br>  美国常用的低频卡，可擦写，不与其他卡通用<br>   0块: <code>00107060</code> 无密； <code>00107070</code> 加密；</li></ul><h3 id="Proxmark3"><a href="#Proxmark3" class="headerlink" title="Proxmark3"></a>Proxmark3</h3><p>关于 proxmark 的作用，自己 Google 一下就行，资料很多的。这个东西简称 <code>PM3</code></p><h4 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h4><p>下图是<code>Proxmark3 Easy</code>, 读卡分为高频区和低频区<br><img src="1.jpg" width="40%" height="40%"></p><p>高频卡推荐放设备后面：<br><img src="2.png" width="40%" height="40%"></p><h4 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h4><h5 id="Firmware-Client-Drive-下载"><a href="#Firmware-Client-Drive-下载" class="headerlink" title="Firmware + Client + Drive 下载"></a>Firmware + Client + Drive 下载</h5><p>访问下面的论坛，大神已经把东西准备好了，而且2020年还在更新，点赞！</p><blockquote><p><a href="http://www.proxmark.net/forum/viewtopic.php?id=3975">http://www.proxmark.net/forum/viewtopic.php?id=3975</a></p></blockquote><p>Official 和 Iceman 都行(32和64我估计也是没有区别的)。挑自己喜欢的吧</p><p><img src="5.png"></p><p>东西是放在Google Drive的，准备好梯子。下载20几兆那个就行，挑日期最近的</p><p><img src="6.png"></p><p>下载后，驱动，固件，软件都在压缩包了。</p><p>先更新驱动，一般Windows Update 能搞定，搞不定，自己在设备管理器里指定<code>inf</code>文件的位置即可。</p><p>然后，升级固件</p><h5 id="Windows-驱动安装"><a href="#Windows-驱动安装" class="headerlink" title="Windows 驱动安装"></a>Windows 驱动安装</h5><p>对于<code>Windows10</code>，无需自己手动安装驱动，Windows Update 会自动帮你搞定</p><blockquote><p>For windows 8 and above you are done, the auto installed Microsoft driver should be fine</p></blockquote><p>Windows 其他版本，请参考官方说明<del>(还在用Win7，是多大的情怀啊)</del></p><blockquote><p><a href="https://github.com/Proxmark/proxmark3/wiki/Windows">https://github.com/Proxmark/proxmark3/wiki/Windows</a></p></blockquote><p>驱动安装好后，在设备管理器可以看到<code>COM5</code>(一般是这个)这个设备已经准备就绪</p><p><img src="3.png"></p><h5 id="更新PM3固件"><a href="#更新PM3固件" class="headerlink" title="更新PM3固件"></a>更新PM3固件</h5><blockquote><p>After downloading and extracting a precompiled build you need to flash your Proxmark3 with the correct firmware. This is done by first adjusting the com port inside “FLASH - All.bat” and then running it.</p></blockquote><p>直接双击解压后的<code>FLASH - All.bat</code>文件。注意，不要中断PM3的连接，刷过机的都知道，有几率变砖的。。。。。。 看到提示“成功”字样的英文，那就是可以了</p><img src="7.png" width="40%" height="40%"><p><img src="12.png"></p><p>查看固件版本，固件版本是根据固件的日期来看的</p><pre class="line-numbers language-none"><code class="language-none">hw version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="测试PM3是否连接正常"><a href="#测试PM3是否连接正常" class="headerlink" title="测试PM3是否连接正常"></a>测试PM3是否连接正常</h5><p>请注意，如果你的设备管理器中PM3的COM口不是5，请在<code>Go.bat</code>文件中修改该端口，修改哪边都行，确保bat文件的COM口和设备管理器里的COM编号是一样的</p><p><img src="4.png"></p><p>直接双击<code>Go.bat</code>打开命令行终端。我这里是Iceman的固件，成功连接是有一大段提示的。如果有<code>failed</code>字样，再检查是不是哪里搞错了。</p><p>放一张高频或低频卡在对应的读写区，然后<code>hf search</code> 或 <code>lf search</code>,测试连接的正确性</p><p><img src="8.png"></p><p>或者，测试高低频的电压(测试天线的谐振电压时，天线周围不能放置卡片或者金属，否则测量结果会偏低)<br>天线的电压丝毫不影响任何操作和功能，实际上高频超过 5V，低频超过 10V 就可以正常使用。只是电压越高读卡距离越远。</p><p><img src="9.png"></p><h3 id="破解"><a href="#破解" class="headerlink" title="破解"></a>破解</h3><h4 id="低频卡-1"><a href="#低频卡-1" class="headerlink" title="低频卡"></a>低频卡</h4><p>思路：低频卡一般是没有密码。直接拷贝复制就行</p><h5 id="方法-1"><a href="#方法-1" class="headerlink" title="方法 1"></a>方法 1</h5><ul><li><p>读取低频卡 ID<br>  <code>lf em4x em410xwatch</code>   OR<br>  <code>lf em em410xwatch</code><br>  <strong>专用读ID卡</strong>，灵敏度高，适合读不出ID的卡片。注意，这个指令会<strong>一直</strong>搜索卡片直到读出ID为止，如果没有放卡或者不是ID卡，会无法停止，需要重新插拔PM3<br>  <strong>先执行命令后放卡</strong>。记录 ID 的同时需要注意记录 clock rate 的值，一般都是 64。<br>  小知识：em4x 是大部分固定 ID 低频卡的芯片型号，一般卡片上印有一串数字的就是固定 ID 卡，出厂固化独一无二的 ID 号码，不可修改。</p></li><li><p>写<br>  写 ID卡 是单向的，无法得知是否成功<br>  <code>lf em4x em410xwrite 12345bcdef 1 64</code> OR<br>  <code>lf em em410xwrite 12345bcdef 1 64</code><br>  把 ID 号写入 T5577 卡中，长度是 10 位 hex ，示例中 12345bcdef 是 ID，后面“1”是 T55X7 的卡片类型，64 是 clock rate</p></li></ul><h5 id="方法-2"><a href="#方法-2" class="headerlink" title="方法 2"></a>方法 2</h5><ul><li><p>查看ID<br>  <code>lf search</code>，记下 <code>EM TAG ID </code><br>  这个可以找到固定ID的卡片类型，主要是 ID，HID，Indala这三种，如果是加密的5577还有加密的4305卡是读不到的。</p></li><li><p>复制<br>  <code>lf hid clone 0000001450</code></p></li></ul><h5 id="5577-卡"><a href="#5577-卡" class="headerlink" title="5577 卡"></a>5577 卡</h5><p><code>lf t55xx detect</code> 检测卡片<br><code>lf t66xx dump</code>  读取卡片数据<br>注意，如果是加密 5577 是无法检测配置，或者读出的块全部都是一样的数据。</p><p>取消5577卡的加密<br><code>lf t55xx wr 0 001480040 00000000</code><br>    0：代表写0块，0块是控制是否加密的控制块<br>    001480040： 这个是写入0块的信息，这个代码是不加密的意思<br>    00000000： 这个是卡片第7块的密码<br>写卡是单向的，无法看出是否成功</p><h4 id="高频卡-1"><a href="#高频卡-1" class="headerlink" title="高频卡"></a>高频卡</h4><p>思路：一般要先知道16个扇区中的一个密码(一般是0扇区的密钥)，然后用漏洞获取全部扇区的密码和数据</p><h5 id="求一密"><a href="#求一密" class="headerlink" title="求一密"></a>求一密</h5><ul><li><p>用PM3内置的默认密码尝试破解<br>  <code>hf mf chk *1 ? t</code></p></li><li><p>不是默认密码可以尝试PRNG漏洞获取0扇区密钥，过程可能有点久。不一定能成功<br>  <code>hf mf mifare</code><br>  某些卡运行这个命令，运行结果每条都是 <code>Mifare: Can&#39;t select card</code> 这种提示，相当恶心，很大几率失败。偶尔过程中会提示英文“Can’tselect card” 这是 BUG 提示，请忽视。如果运行中 ABCD 在<strong>不断闪烁</strong>，表示可以破解，等待结果即可。对于不支持的卡片，无论如何调整卡片位置，LED <strong>都不会有变化</strong>，最终 PM3 会出现复位掉线。</p></li><li><p>上面两种方法都不行，那就用嗅探方法试试。<br>  <strong>需要去现场</strong>，把天线置于卡片和读卡机之间嗅探通讯数据，解出一个扇区密匙。<br>  嗅探获得密码不能指定，是读卡机访问了卡片的哪个扇区，才可以获得那个扇区的密码。在无法获得其他密码的时候，只需复制这几个扇区的数据即可使用，不需要复制整张卡片的数据。</p><p>  M1 卡在读卡机和卡片交互数据和密码时，使用了 crapto1 算法。即便同一张卡，同样的密码，嗅探得到交互数据也是随机的，但是只要获得后面提到的四组随机数组，以及 UID，就可以反解出密匙。</p><p>  <code>hf mf sniff</code></p><p>  点击开始嗅探之后，PM3 高频读卡区夹在卡片和读卡机之间，然后刷卡。三者之间都不能贴的太近，两边不能有金属遮挡。<br>  <img src="17.png"></p><p>  如上图，刷一次卡后，拿开等待几秒，电脑会返回嗅探到的数据。<br>  注意寻找 60 或者 61 开头的数据，60 含义是使用 A 密码访问，61 是使用 B 密码。<br>  开头是 RDR 的是读卡机发出的指令，TAG 则是卡片发出的指令。<br>  红圈中表示读卡机访问了第 21 个块。21 是十六进制，转换成十进制是 33 块<br>  第一个方框“b2a6de1d”是卡片 UID<br>  第二个方框“f80eee3c”是 tag challenge(卡片挑战数)<br>  第三个方框“4ec88403”是 reader challenge(读卡器挑战数)<br>  第四个方框“d2dd5180”是 reader respones(读卡器响应数)<br>  第五个方框“2bb17b5e”是 tag respones(卡片回应数)</p><p>  然后，用<a href="crapto1gui.exe">这个软件</a>，计算出密码</p><p>  <img src="18.png"></p><p>  去现场嗅探，是迫不得已的情况下使用的。带着笔记本，连接PM3，然后在读卡机地点不停的尝试，保安不注意你都难。。。。<br>  PM3 有个<code>离线</code>嗅探的功能，能让PM3暂时断开笔记本的连接，然后进行嗅探</p>  <pre class="line-numbers language-none"><code class="language-none">hf 14a snoophf list 14a http:&#x2F;&#x2F;pm3.echo.cool&#x2F;index.php&#x2F;2018&#x2F;08&#x2F;21&#x2F;pm3%E7%A6%BB%E7%BA%BF%E5%97%85%E6%8E%A2%E8%AF%B4%E6%98%8E&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>  （待续）</p></li><li><p>还有一种方法<br>  <strong>需要去现场</strong> ，把天线模拟成 M1 卡，诱发读卡机读卡，并且捕捉读卡机发出的验证密匙，不能离线操作，监听完按按钮退出。<br>  <code>hf mf eclr</code>清除缓存 在无卡监听读卡器之前，务必要清除缓存。<br>  <code>hf mf sim x</code> </p>  <pre class="line-numbers language-none"><code class="language-none">1.读卡器使用固定密码读取某一扇区直接使用&quot;hf mf sim i x&quot;即可使PM3进入嗅探模式。当PM3采集了足够的数据之后即可自动计算出密码2.读卡器通过UID实现一卡一密使用&quot;hf mf sim u xxxxxxxx i x&quot;(xxxxxxxx此次使用的UID)来获得某一UID下的读卡密码。这样就可以进行选择明文攻击，对于破解一些简单的一卡一密算法还是很有帮助的https:&#x2F;&#x2F;www.cnblogs.com&#x2F;wh201906&#x2F;p&#x2F;12838573.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>  （待续）</p></li></ul><p><strong>验证检测出的密码正确性。现场嗅探之后，切记一定要用下面的命令检查密码的正确性。</strong> 别问为什么检查，问就是被坑过<br> <code>hf mf chk 0 A ffffffffffff</code> ， “ffffffffffff” 是检测出的密码</p><p> 如果提示 <code>No valid keys found.</code>，有可能是破解出的密码错误，或者是 <code>存储控制</code> 不是默认的 <code>ff078069</code>。</p><h5 id="知一密求全密"><a href="#知一密求全密" class="headerlink" title="知一密求全密"></a>知一密求全密</h5><p><code>hf mf nested 1 0 A ffffffffffff</code>     //使用 nested 时注意要选择正确的卡片容量。1代表1K卡，可选1-4K；0是0扇区，A密钥，然后加上上一步破解出的密码</p><p><img src="13.png"></p><p>看到这个结果，你就基本成功<del>可以偷笑</del>了</p><p>RES 结果如果为1，代表密码正确； 如果是0，代表密码无效<br>一般B密码不正确不影响数据的读取，A密码不正确，则会影响。A密码不正确，可以再 nested 一遍<br>有极少的卡片不支持一密求多密的操作，需要依靠嗅探的步骤。</p><h5 id="导出密码"><a href="#导出密码" class="headerlink" title="导出密码"></a>导出密码</h5><p>导出后会在根目录生成一个dumpkeys.bin的文件，里面存放了16个扇区的密钥（16进制）<br><code>hf mf nested 1 0 A ffffffffffff d</code></p><p><img src="14.png"></p><h5 id="导出数据"><a href="#导出数据" class="headerlink" title="导出数据"></a>导出数据</h5><p>上面只是导出密码而已，还有数据我们也要导出<br><code>hf mf dump</code></p><p><img src="15.png"></p><h5 id="转换成eml格式"><a href="#转换成eml格式" class="headerlink" title="转换成eml格式"></a>转换成eml格式</h5><p>生成的 <code>bin</code> 文件可以中支持十六进制的软件打开。<br><a href="BinaryViewer.7z">附一个二进制查看器下载</a></p><p>而Proxmark3不能识别、使用bin文件，需要转换成eml格式。 eml格式的文件可以Notepad直接打开查看<br><code>script run dumptoemul.lua</code><br>命令运行后，会直接在根目录下生成一个 eml 文件</p><h5 id="复制原卡数据到新的UID卡上"><a href="#复制原卡数据到新的UID卡上" class="headerlink" title="复制原卡数据到新的UID卡上"></a>复制原卡数据到新的UID卡上</h5><p><code>hf mf cload  84EAC416</code> ，84EAC416 是上面步骤生成的eml文件名称，不加后缀<br>兼容性好的UID卡，写入成功会返回消息<br>兼容性不好的，写入会有错误提示，但是不影响使用</p><p><img src="16.png"></p><p>写卡是没有回显的，只能通过读取的方式查看有没有读取成功，我是通过<code>hf search</code> 查看两张卡的UID，如果一致，那就是成功了。或者直接读取扇区的数据，查看是否一致。</p><h3 id="修改IC卡数据"><a href="#修改IC卡数据" class="headerlink" title="修改IC卡数据"></a>修改IC卡数据</h3><p>先占个坑位，后续有时间补上</p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul><li><p>官方旧版GUI软件说明<br>  <img src="19.png"></p></li><li><p>固件版本<br>  固件从老到新排列：r486→756→816→848→852→1.0.0→2.0.0→2.5.0<br>  2.5 大概是15年的了<br>  现在2020已经到3.1了</p></li><li><p>修改 UID 卡的 UID<br>  <code>hf mf csetuid 1234bcdf</code><br>  修改 UID 卡的 UID 为 1234bcdf，UID 是四个字节。</p></li><li><p>复制5577卡后加密锁卡</p><p>  <img src="20.jpg"></p></li><li><p>能看到最后，就放一个我的Clients，里面有几个GUI客户端。Windows Security 扫描过了，放心用。<br>  <a href="official-32-20200804.7z">下载</a><br>  <img src="21.png"></p></li><li><p>一些命令</p></li></ul><pre class="line-numbers language-none"><code class="language-none">hf mf （MIFARE卡的相关命令...）help显示帮助dbg设置默认调试模式rdbl读取MIFARE classic卡的区块数据rdsc读取MIFARE classic卡的扇区数据dump导出MIFARE classic卡的数据到二进制文件restore从二进制文件恢复数据到空白的MIFARE classic卡wrbl改写MIFARE classic卡的区块数据chk测试MIFARE classic卡的各个区块KEY A&#x2F;Bmifare基于PRNG漏洞，执行mifare “DarkSide”攻击操作nested测试嵌套认证漏洞，基于一个已知Key，获取都有扇区Keyssniff嗅卡片与读写器之间的通讯(等同于hf 14a snoop)sim模拟一个MIFARE卡片eclr清除仿真内存的各区块数据eget获取仿真内存的各区块数据eset设置仿真内存的各区块数据eload从导出的文件加载仿真数据esave导出保存仿真数据到文件ecfill利用仿真器的keys来填补仿真内存ekeyprn打印输出仿真内存中的keyscsetuid直接设置可改UID卡的UIDcsetblk把对应区块数据写入UID卡cgetblk读取UID卡对应区块数据cgetsc读取UID卡对应扇区数据cload写入dump数据到UID卡。注意csave保存UID卡数据到文件或者仿真内存<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><h3 id="PM3-类型"><a href="#PM3-类型" class="headerlink" title="PM3 类型"></a>PM3 类型</h3><p>下面两篇文章写得很好，大家可以参考一下：</p><blockquote><p><a href="https://ulyc.github.io/2020/01/18/%E5%B8%B8%E8%A7%81RFID%E5%8D%A1%E7%89%87%E4%BB%8B%E7%BB%8D-%E7%A0%B4%E8%A7%A3%E6%80%9D%E8%B7%AF-%E5%8F%8A-Proxmark3%E7%AE%80%E4%BB%8B/">https://ulyc.github.io/2020/01/18/%E5%B8%B8%E8%A7%81RFID%E5%8D%A1%E7%89%87%E4%BB%8B%E7%BB%8D-%E7%A0%B4%E8%A7%A3%E6%80%9D%E8%B7%AF-%E5%8F%8A-Proxmark3%E7%AE%80%E4%BB%8B/</a></p></blockquote><p>快照备份：<a href="1.htm.test">点我下载</a></p><blockquote><p><a href="https://www.wasyoung.com/2019/11/30/337/">https://www.wasyoung.com/2019/11/30/337/</a></p></blockquote><p>快照备份：<a href="2.html.test">点我下载</a></p><p>目前国内最常见的 Easy 的版本，但是大佬都在用最新的 rdv4，导致我后面编译和破解挖了不少坑，都是穷惹得祸。。。</p><h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p>最近要破解一张电梯 IC 卡，但是入门里面的方法不奏效，想去实地嗅探又没办法，于是有了这个 【进阶】的部分。（虽然最后还是没有搞出密码）</p><p>这里我们尝试在 Kali 里编译冰人的 RRG 固件。Kali 是运行在虚拟机的。</p><p>下面是 repo 的地址，里面的说明文档把基本的都提到了。</p><blockquote><p><a href="https://github.com/RfidResearchGroup/proxmark3">https://github.com/RfidResearchGroup/proxmark3</a></p></blockquote><p>编译可以直接按照说明文档来。</p><blockquote><p><a href="https://github.com/RfidResearchGroup/proxmark3/blob/master/doc/md/Installation_Instructions/Linux-Installation-Instructions.md">https://github.com/RfidResearchGroup/proxmark3/blob/master/doc/md/Installation_Instructions/Linux-Installation-Instructions.md</a></p></blockquote><blockquote><p><a href="https://github.com/RfidResearchGroup/proxmark3/blob/master/doc/md/Use_of_Proxmark/0_Compilation-Instructions.md">https://github.com/RfidResearchGroup/proxmark3/blob/master/doc/md/Use_of_Proxmark/0_Compilation-Instructions.md</a></p></blockquote><p>其实已经有开发者提供预先编译好的固件，但是我的设备是 Easy 版本，flash 只有 256k，预编译的不适合，刷不进去，然后一直是 Offline 状态。</p><p><img src="23.png"></p><p><strong>重要：如果你也是 256k 闪存的 PM3，在编译前要修改一下配置文件。</strong> 如下：</p><blockquote><p><a href="https://github.com/RfidResearchGroup/proxmark3/blob/master/doc/md/Use_of_Proxmark/4_Advanced-compilation-parameters.md#256kb-versions">https://github.com/RfidResearchGroup/proxmark3/blob/master/doc/md/Use_of_Proxmark/4_Advanced-compilation-parameters.md#256kb-versions</a></p></blockquote><p>在 <code>Makefile.platform</code> 文件中， 添加如下内容</p><pre class="line-numbers language-none"><code class="language-none">PLATFORM&#x3D;PM3GENERICPLATFORM_SIZE&#x3D;256STANDALONE&#x3D;SKIP_HITAG&#x3D;1SKIP_FELICA&#x3D;1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后，编译的命令不是简单的 <code>make</code> 或者 <code>make all</code>, 请使用 <code>make PLATFORM=PM3GENERIC</code>.<br>编译完成之后，就可以使用 flash 等命令刷入固件</p><h3 id="无法连接情况的解决方法"><a href="#无法连接情况的解决方法" class="headerlink" title="无法连接情况的解决方法"></a>无法连接情况的解决方法</h3><p>有时候由于刷入错误的固件等原因，导致 PM3 连接电脑没有反应，识别不出。这时不要慌。<br>先把 USB 连接线断开，然后按住 PM3 上面的按钮，然后再接入 usb 线，按住按钮直到电脑识别出来。</p><blockquote><p><a href="https://forum.dangerousthings.com/t/proxmark3-easy-flash-issues/7889/9">https://forum.dangerousthings.com/t/proxmark3-easy-flash-issues/7889/9</a></p></blockquote><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>这里有所有命令的使用方法，这些命令跟官方的使用有些不同，遇到不确定的用法，后面加个 <code>-h</code> 参数来查看用法，很详细的。</p><blockquote><p><a href="https://github.com/RfidResearchGroup/proxmark3/blob/master/doc/commands.md">https://github.com/RfidResearchGroup/proxmark3/blob/master/doc/commands.md</a></p></blockquote><p>但是我现在还没有找到官方固件中常用的 <code>mifare</code>、 <code>snoop</code> 等命令。后面再继续研究吧。</p><h3 id="一种没有漏洞-IC-卡破解思路"><a href="#一种没有漏洞-IC-卡破解思路" class="headerlink" title="一种没有漏洞 IC 卡破解思路"></a>一种没有漏洞 IC 卡破解思路</h3><p>这张 IC 卡 只有 1，2 两个扇区加密，其他都是默认密码，用 nested 破解不出。于是试着从 windows 转战 Linux 平台。Windows 用官方的固件，到 Linux 用了 RRG 的固件。但是 Kali 里面也是一样破解不出，后来在 RRG 的 issues 里看到这个：</p><blockquote><p><a href="https://github.com/RfidResearchGroup/proxmark3/issues/133">https://github.com/RfidResearchGroup/proxmark3/issues/133</a></p></blockquote><blockquote><p><a href="https://github.com/Proxmark/proxmark3/issues/899">https://github.com/Proxmark/proxmark3/issues/899</a></p></blockquote><p>作者是这样形容这种卡的</p><blockquote><p>There has been in the wild some clones, like Fudan and some uid changeable card which doesn’t have the NACK bug and they use somewhat odd a fixed nonce. Rendering all current Mifare classic attacks useless.</p></blockquote><p>如果你有幸遇到这种卡，用 <code>hf 14a info</code> 命令看是这样的：</p><p><img src="24.png"></p><p>作者为这种卡开发了一个新的命令来破解：<code>hf mf staticnested</code>。但在我的机器上也是破解不出，运气太不好了。</p><h3 id="搞大事情"><a href="#搞大事情" class="headerlink" title="搞大事情"></a>搞大事情</h3><p>后面计划用树莓派安装 Kali，然后接上 PM3 来搞现场嗅探，就不用带笔记本这个笨大件了。<br>一个充电宝，一个派，一个PM3，然后 SSH 连接派来操作，想法可以。再挖个坑，后续更新</p>]]></content>
      
      
      
        <tags>
            
            <tag> 破解 </tag>
            
            <tag> RFID </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>假装Windows在更新</title>
      <link href="/2020/10/21/jia-zhuang-windows-zai-geng-xin/"/>
      <url>/2020/10/21/jia-zhuang-windows-zai-geng-xin/</url>
      
        <content type="html"><![CDATA[<audio id="audio" controls="" autoplay="true" loop="true" volume="0.5">      <source id="mp3" src="我们能不能不分手.mp3" ></audio><p>今天逛其他博客，发现了一个很好玩的东西。</p><p><img src="1.png"></p><p>第一眼以为我Windows在更新。回过神来，我用的Linux，哪来的更新。。。。。。不得佩服这个作者的脑洞。</p><p>这么好的东西，我写不出来，只能白嫖了。所以，F12大法启动，把源代码和转圈的<code>woff</code>文件嫖了过来。</p><h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><p>下面是源代码，记得把<code>woff文件</code>放在同一个目录下<br>woff文件下载： <a href="Win8Boot.woff">woff文件</a></p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- saved from url=(0018)https://myheod.cn/ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zh-cn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Content-Type<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/html; charset=UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shortcut icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://myheod.cn/favicon.ico<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>网站已迁移<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">        <span class="token atrule"><span class="token rule">@keyframes</span> bgcolor</span> <span class="token punctuation">&#123;</span>        <span class="token comment">/* main code            0%   &#123;background-color: #000000;  &#125;            10%  &#123;background-color: #4080c4;  &#125;            20%  &#123;background-color: #4040c4;  &#125;            30%  &#123;  background-color: #8040c4; &#125;            40%  &#123; background-color: #c44080;&#125;            50%  &#123;background-color: #c44040;  &#125;            60%  &#123; background-color: #c48040;  &#125;            70%  &#123; background-color: #80c440;&#125;            80%  &#123;background-color: #40c440; &#125;            90%  &#123; background-color: #40c480;   &#125;            100% &#123;background-color: #000000;  &#125;        */</span>            <span class="token selector">0%</span>   <span class="token punctuation">&#123;</span><span class="token property">background-color</span><span class="token punctuation">:</span> #000000<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>            <span class="token selector">50%</span>  <span class="token punctuation">&#123;</span><span class="token property">background-color</span><span class="token punctuation">:</span> #4080c4<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>            <span class="token selector">100%</span> <span class="token punctuation">&#123;</span><span class="token property">background-color</span><span class="token punctuation">:</span> #000000<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">html</span> <span class="token punctuation">&#123;</span>            <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">body</span> <span class="token punctuation">&#123;</span>            <span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased<span class="token punctuation">;</span>            <span class="token property">animation-delay</span><span class="token punctuation">:</span> 0s<span class="token punctuation">;</span>            <span class="token property">animation-duration</span><span class="token punctuation">:</span> 30s<span class="token punctuation">;</span>            <span class="token property">animation-iteration-count</span><span class="token punctuation">:</span> infinite<span class="token punctuation">;</span>            <span class="token property">animation-name</span><span class="token punctuation">:</span> bgcolor<span class="token punctuation">;</span>            <span class="token property">background-color</span><span class="token punctuation">:</span> #FFFFFF<span class="token punctuation">;</span>            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>            <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Segoe UI"</span><span class="token punctuation">,</span> <span class="token string">"Microsoft Yahei UI"</span><span class="token punctuation">;</span>            <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>            <span class="token property">margin</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>            <span class="token property">cursor</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token comment">/*禁止鼠标光标*/</span>                        <span class="token comment">/*禁止选中文字*/</span>            <span class="token property">-moz-user-select</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> <span class="token comment">/*火狐*/</span>            <span class="token property">-webkit-user-select</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> <span class="token comment">/*webkit浏览器*/</span>            <span class="token property">-ms-user-select</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> <span class="token comment">/*IE10*/</span>            <span class="token property">-khtml-user-select</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> <span class="token comment">/*早期浏览器*/</span>            <span class="token property">user-select</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">&#123;</span>            <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Windows 8 Boot"</span><span class="token punctuation">;</span>            <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"Win8Boot.woff"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">.content</span> <span class="token punctuation">&#123;</span>            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>            <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>            <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">#animation</span> <span class="token punctuation">&#123;</span>            <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Windows 8 Boot"</span><span class="token punctuation">;</span>            <span class="token property">font-size</span><span class="token punctuation">:</span> 32pt<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">#description</span> <span class="token punctuation">&#123;</span>            <span class="token property">margin-top</span><span class="token punctuation">:</span> 18pt<span class="token punctuation">;</span>            <span class="token property">font-size</span><span class="token punctuation">:</span> 18pt<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>animation<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>正在更新您的Windows<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>请不要关闭系统<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">                <span class="token keyword">const</span> firstCode <span class="token operator">=</span> <span class="token number">0xe052</span><span class="token punctuation">;</span>                <span class="token keyword">const</span> lastCode <span class="token operator">=</span> <span class="token number">0xe0cc</span><span class="token punctuation">;</span>                <span class="token keyword">const</span> frameRate <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>                <span class="token keyword">const</span> startTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">const</span> <span class="token function-variable function">updateFrame</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">const</span> <span class="token function-variable function">getCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>startTime<span class="token punctuation">)</span><span class="token operator">*</span>frameRate<span class="token operator">/</span><span class="token number">1000</span><span class="token operator">%</span><span class="token punctuation">(</span>lastCode<span class="token operator">-</span>firstCode<span class="token punctuation">)</span><span class="token operator">+</span>firstCode<span class="token punctuation">;</span>                    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"animation"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>updateFrame<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>                <span class="token function">updateFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"> <span class="token comment">/*禁止鼠标右键*/</span>                document<span class="token punctuation">.</span><span class="token function-variable function">oncontextmenu</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p>在线Demo：<br><a href="../../../../Other/updateWindows/1.html">点我</a></p><p><img src="2.gif"></p><p>把界面全屏就行了，又可以有借口摸鱼了</p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul><li><p>woff文件的介绍如下：</p><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/WOFF">https://developer.mozilla.org/zh-CN/docs/WOFF</a></p></blockquote></li><li><p>woff文件打开方式：<br>  百度还是有些良心的应用</p><blockquote><p><a href="http://fontstore.baidu.com/static/editor/index.html">http://fontstore.baidu.com/static/editor/index.html</a></p></blockquote></li><li><p>woff转tif</p><blockquote><p><a href="https://convertio.co/zh/woff-ttf/">https://convertio.co/zh/woff-ttf/</a></p></blockquote></li><li><p>其他的实现方法：<br>  纯 HTML/CSS 高仿 Win10 加载动画</p><blockquote><p><a href="https://www.cnblogs.com/henrylin/p/13124866.html">https://www.cnblogs.com/henrylin/p/13124866.html</a></p></blockquote></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>优秀的个人博客及网站</title>
      <link href="/2020/10/16/you-xiu-de-ge-ren-bo-ke-ji-wang-zhan-shou-cang/"/>
      <url>/2020/10/16/you-xiu-de-ge-ren-bo-ke-ji-wang-zhan-shou-cang/</url>
      
        <content type="html"><![CDATA[<h2 id="IT技术"><a href="#IT技术" class="headerlink" title="IT技术"></a>IT技术</h2><ul><li><p>如有乐享</p><p>  简评：资本家的羊毛薅起来</p><blockquote><p><a href="https://51.ruyo.net/">https://51.ruyo.net/</a></p></blockquote></li><li><p>similarsites</p><p>  简评：找类似的网站，以一寻百。拓展自己的认知</p><blockquote><p><a href="https://cn.similarsites.com/">https://cn.similarsites.com/</a></p></blockquote></li></ul><h2 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h2><h3 id="综合网站"><a href="#综合网站" class="headerlink" title="综合网站"></a>综合网站</h3><p>这些网站可以帮助你获取设计灵感</p><ul><li><p>Behance</p><p>  简评：Adobe旗下的设计师交流网站，里面大神是少不了的。要梯子，有点小卡</p><blockquote><p><a href="https://www.behance.net/">https://www.behance.net</a></p></blockquote></li><li><p>Dribbble</p><p>  简评：要梯子，有点小卡</p><blockquote><p><a href="https://dribbble.com/">https://dribbble.com/</a></p></blockquote></li><li><p>Deviantart</p><p>  简评：从名字就能看出很不一样，很新奇，画风我很喜欢</p><blockquote><p><a href="https://www.deviantart.com/">https://www.deviantart.com/</a></p></blockquote><p>  <img src="7.png"></p></li><li><p>设计达人</p><p>  简评：中文设计网站，有很多教程</p><blockquote><p><a href="https://www.shejidaren.com/">https://www.shejidaren.com/</a></p></blockquote></li></ul><h3 id="素材"><a href="#素材" class="headerlink" title="素材"></a>素材</h3><ul><li><p>flaticon</p><p>  简评：各种png，图标，甚至简历模板都能在这里找到，关键很多都是免费的。</p><blockquote><p><a href="https://www.flaticon.com/">https://www.flaticon.com/</a></p></blockquote></li><li><p>freepik</p><p>  简评：类似上面那个，我怀疑这两家有PY交易。里面东西也很不错</p><blockquote><p><a href="https://www.freepik.com/">https://www.freepik.com/</a></p></blockquote></li><li><p>nounproject</p><p>  简评：清一色的ICON图标，但是完全免费，可以下载SVG然后自己编辑，点赞</p><blockquote><p><a href="https://thenounproject.com/">https://thenounproject.com/</a></p></blockquote></li></ul><ul><li><p>pngimg</p><p>  简评：没有背景的PNG图片</p><blockquote><p><a href="http://pngimg.com/">http://pngimg.com/</a></p></blockquote></li></ul><h3 id="配色"><a href="#配色" class="headerlink" title="配色"></a>配色</h3><ul><li><p>渐变色配色</p><p>  简评：好看的渐变色配色例子网站。这个博客的渐变色就是来自这个网站</p><blockquote><p><a href="https://webgradients.com/">https://webgradients.com/</a></p></blockquote></li><li><p>Adobe官方配色工具</p><p>  简评：Adobe 官方出品，免费使用，后台有一堆大神调好的sample可以直接用</p><blockquote><p><a href="https://color.adobe.com/zh/create/color-wheel">https://color.adobe.com/zh/create/color-wheel</a></p></blockquote></li></ul><h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><ul><li><p>文字云</p><p>  简评：老牌，功能强大</p><blockquote><p><a href="https://wordart.com/">https://wordart.com/</a></p></blockquote><p>  <img src="5.png"></p></li><li><p>地图素材</p><p>  简评：有时候需要用到地图轮廓的素材，这个网站能下载全世界的轮廓，有多种格式样式可以保存。</p><blockquote><p><a href="https://d-maps.com/index.php?lang=zh">https://d-maps.com/index.php?lang=zh</a></p></blockquote><p>  <img src="6.png"></p></li></ul><h2 id="导航"><a href="#导航" class="headerlink" title="导航"></a>导航</h2><p>有了这些，那些流氓导航首页可以洗洗睡了</p><h3 id="虫部落·快搜"><a href="#虫部落·快搜" class="headerlink" title="虫部落·快搜"></a>虫部落·快搜</h3><p>简评：很稳的一个搜索集合，实不相瞒，我喜欢它的搜图功能。嘿嘿</p><blockquote><p><a href="https://search.chongbuluo.com/">https://search.chongbuluo.com/</a></p></blockquote><p><img src="2.png"></p><h3 id="狼牌工作网址导航"><a href="#狼牌工作网址导航" class="headerlink" title="狼牌工作网址导航"></a>狼牌工作网址导航</h3><p>简评：简直一个大杂烩。软件，设计相关的收藏导航都有，简直我的福音。</p><p><a href="https://www.volf.club/">https://www.volf.club</a></p><p><img src="1.png"></p><h3 id="老司机导航"><a href="#老司机导航" class="headerlink" title="老司机导航"></a>老司机导航</h3><p>简评：如名字，值得看看，能找到那个啥的</p><blockquote><p><a href="http://www.giffox.com/">http://www.giffox.com/</a></p></blockquote><p><img src="3.png"></p><h2 id="读书"><a href="#读书" class="headerlink" title="读书"></a>读书</h2><ul><li><p>sobooks</p><p>  简评：推荐的书都很好，而且能直接下载。一个靠爱发电的网站</p><blockquote><p><a href="https://sobooks.cc/">https://sobooks.cc/</a></p></blockquote><p>  <img src="9.png"></p></li></ul><h2 id="二次元"><a href="#二次元" class="headerlink" title="二次元"></a>二次元</h2><ul><li><p>蜜柑计划</p><p>  简评：新出的番剧基本能下载，老番去动漫花园吧</p><blockquote><p><a href="https://mikanani.me/">https://mikanani.me/</a></p></blockquote></li><li><p>mangapanda</p><p>  简评：用英文看漫画吧，一边娱乐一边学习英语</p><blockquote><p><a href="http://www.mangapanda.com/">http://www.mangapanda.com/</a></p></blockquote><p>  <img src="10.png"></p></li><li><p>toomics</p><p>  简评：个人作者的连载漫画，部分收费，可以猎奇看看。</p><blockquote><p><a href="https://toomics.com/en/">https://toomics.com/en/</a></p></blockquote><p>  <img src="11.png"></p></li></ul><h2 id="猎奇"><a href="#猎奇" class="headerlink" title="猎奇"></a>猎奇</h2><ul><li><p>减压</p><p>  简评：没事敲敲键盘，减减压</p><blockquote><p><a href="http://magickeyboard.io/">http://magickeyboard.io/</a></p></blockquote><p>  <img src="4.png"></p></li><li><p>射击打字</p><p>  简评：可以联系敲键盘的速度，啪啪啪，青轴走起</p><blockquote><p><a href="https://zty.pe/">https://zty.pe/</a></p></blockquote><p>  <img src="8.png"></p></li></ul><h2 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h2><ul><li><p>肌肉百科</p><p>  简评：身体每块肌肉的锻炼方法</p><blockquote><p><a href="https://musclewiki.com/">https://musclewiki.com/</a></p></blockquote><p>  <img src="12.png"></p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 网站 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Samba</title>
      <link href="/2020/10/08/samba/"/>
      <url>/2020/10/08/samba/</url>
      
        <content type="html"><![CDATA[<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>现在问题还没有解决，只用了临时的配置顶用先。</p><p>参考文章：</p><blockquote><p><a href="https://cshihong.github.io/2018/10/18/Samba%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%85%8D%E7%BD%AE/">https://cshihong.github.io/2018/10/18/Samba%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%85%8D%E7%BD%AE/</a></p></blockquote><pre class="line-numbers language-none"><code class="language-none">[global] #全局参数。        workgroup &#x3D;MYGROUP           #设定Samba Server所要加入的工作组或域        security &#x3D; user#安装验证方式，总共有四种        passdb backend &#x3D; tdbsam        #定义用户后台类型，总共有三种        printing &#x3D; cups        printcap name &#x3D; cups        load printers &#x3D; yes        #设置在Samba服务启动时是否共享打印机设备        cups options &#x3D; raw        #打印机的选项[homes]        comment &#x3D; Home Directories #描述信息        valid users &#x3D; %S, %D%w%S  #有效访问用户        path &#x3D; ~         #文件路径        browseable &#x3D; No   #指定共享信息是否在“网上邻居”中可见        read only &#x3D; No    #是否只读        inherit acls &#x3D; Yes [printers]        comment &#x3D; All Printers        path &#x3D; &#x2F;var&#x2F;tmp #共享文件的实际路径。        printable &#x3D; Yes        create mask &#x3D; 0600        browseable &#x3D; No[print$]        comment &#x3D; Printer Drivers        path &#x3D; &#x2F;var&#x2F;lib&#x2F;samba&#x2F;drivers        write list &#x3D; root        create mask &#x3D; 0664        directory mask &#x3D; 0775<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">server string &#x3D; samVer %v  #可以不填， %v 表示显示 Samba 的版本号netbios name &#x3D; sambaServer #samba 服务器的名称interfaces &#x3D; lo eth0 192.168.12.2&#x2F;24 192.168.13.2&#x2F;24 # 设置samba监听那些网卡，可以写网卡名，也可以是IP地址hosts allow &#x3D; 127.193.168.1 192.168.10.1 #多个参数空格隔开，可以一个IP，或整个网段hosts allow &#x3D; 172.17.2.0&#x2F;255.255.0.0 #整个网段hosts allow &#x3D; @example.comlog file &#x3D; &#x2F;var&#x2F;log&#x2F;samba&#x2F;log.%m # %m 表示主机名，表示对每台访问SambaServer的机器都单独记录一个日志文件。如果pc1、pc2访问过SambaServer，就会在&#x2F;var&#x2F;log&#x2F;samba目录下留下log.pc1和log.pc2两个日志文件。max log size &#x3D; 50 #单位KB，0表示不限制secruity &#x3D; user #验证方式，四种# - share: 不需要提供用户名和口令，已弃用# - user: 共享目录只能被授权用户访问，由Samba Server负责检查账号和密码的正确性。账号和密码要在本Samba Server中建立# - server: 依靠其他Windows NT&#x2F;2000或SambaServer来验证用户的账号和密码,是一种代理验证。此种安全模式下,系统管理员可以把所有的Windows用户和口令集中到一个NT系统上,使用 Windows NT进行Samba认证, 远程服务器可以自动认证全部用户和口令,如果认证失败,Samba将使用用户级安全模式作为替代的方式# - domain: 域安全级别,使用主域控制器(PDC)来完成认证。passdb backend &#x3D; tdbsam #passdb backend就是用户后台的意思.目前有三种后台：smbpasswd、tdbsam和ldapsam。sam应该是security account manager（安全账户管理）的简写# - smbpasswd: 过时# - tdbsam: 该方式则是使用一个数据库文件来建立用户数据库。数据库文件叫passdb.tdb，默认在&#x2F;etc&#x2F;samba目录下. 可以使用  pdbedit 命令来建立Samba账户    pdbedit –a username：新建Samba账户    pdbedit –x username：删除Samba账户。    pdbedit –L：列出Samba用户列表，读取passdb.tdb数据库文件。    pdbedit –Lv：列出Samba用户列表的详细信息。# - ldapsam：该方式则是基于LDAP的账户管理方式来验证用户。首先要建立LDAP服务，然后设置“passdb backend &#x3D; ldapsam:ldap:&#x2F;&#x2F;LDAP Server  encrypt passwords &#x3D; yes&#x2F;no #说明：是否将认证密码加密。因为现在windows操作系统都是使用加密密码，所以一般要开启此项。不过配置文件默认已开启。username map &#x3D; &#x2F;etc&#x2F;samba&#x2F;smbusers #说明：用来定义用户名映射，比如可以将root换成administrator、admin等。不过要事先在smbusers文件中定义好。比如：root &#x3D; administrator admin，这样就可以用administrator或admin这两个用户来代替root登陆Samba Server，更贴近windows用户的习惯。guest account &#x3D; nobody # 设置guest用户名<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">[共享名]    comment &#x3D; anyComment    path &#x3D; &#x2F;home&#x2F;share    browseable &#x3D; yes&#x2F;no  #browseable用来指定该共享是否可以浏览    writable &#x3D; yes&#x2F;no #writable用来指定该共享路径是否可写    available &#x3D; yes&#x2F;no #available用来指定该共享资源是否可用    admin users &#x3D;  #该共享的管理者,多个用户或者组中间用逗号隔开    valid users &#x3D; #许访问该共享资源的用户    invalid users &#x3D; #禁止访问该共享的用户    public &#x3D; yes&#x2F;no #public用来指定该共享是否允许guest账户访问    guest ok &#x3D; yes&#x2F;no #同public<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改samba密码<br><code>smbpasswd 用户名</code></p><h2 id="manjaro-上的问题"><a href="#manjaro-上的问题" class="headerlink" title="manjaro 上的问题"></a>manjaro 上的问题</h2><p>我添加了一个新的User，但是在Windows上用这个账户一直提示无权限，只有用回Manjaro初始的第一个账号才可以。我已经把新的用户帐号添加进系统初始帐号的组里，还是一样报错。</p><p>我的是 NTFS 的外挂磁盘，不知是不是这个原因，还是Manjaro系统本身的问题？</p><h2 id="smb-conf-配置文件"><a href="#smb-conf-配置文件" class="headerlink" title="smb.conf 配置文件"></a>smb.conf 配置文件</h2><p>留个样板，方便以后使用</p><pre class="line-numbers language-none"><code class="language-none"># This is the main Samba configuration file. You should read the# smb.conf(5) manual page in order to understand the options listed# here. Samba has a huge number of configurable options (perhaps too# many!) most of which are not shown in this example## For a step to step guide on installing, configuring and using samba, # read the Samba-HOWTO-Collection. This may be obtained from:#  http:&#x2F;&#x2F;www.samba.org&#x2F;samba&#x2F;docs&#x2F;Samba-HOWTO-Collection.pdf## Many working examples of smb.conf files can be found in the # Samba-Guide which is generated daily and can be downloaded from: #  http:&#x2F;&#x2F;www.samba.org&#x2F;samba&#x2F;docs&#x2F;Samba-Guide.pdf## Any line which starts with a ; (semi-colon) or a # (hash) # is a comment and is ignored. In this example we will use a ## for commentry and a ; for parts of the config file that you# may wish to enable## NOTE: Whenever you modify this file you should run the command &quot;testparm&quot;# to check that you have not made any basic syntactic errors. ##&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Global Settings &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;[global]# workgroup &#x3D; NT-Domain-Name or Workgroup-Name, eg: MIDEARTH   workgroup &#x3D; workgroup# server string is the equivalent of the NT Description field   server string &#x3D; Samba Server# Server role. Defines in which mode Samba will operate. Possible# values are &quot;standalone server&quot;, &quot;member server&quot;, &quot;classic primary# domain controller&quot;, &quot;classic backup domain controller&quot;, &quot;active# directory domain controller&quot;.## Most people will want &quot;standalone server&quot; or &quot;member server&quot;.# Running as &quot;active directory domain controller&quot; will require first# running &quot;samba-tool domain provision&quot; to wipe databases and create a# new domain.   server role &#x3D; standalone server# This option is important for security. It allows you to restrict# connections to machines which are on your local network. The# following example restricts access to two C class networks and# the &quot;loopback&quot; interface. For more examples of the syntax see# the smb.conf man page;   hosts allow &#x3D; 192.168.1. 192.168.2. 127.# Uncomment this if you want a guest account, you must add this to &#x2F;etc&#x2F;passwd# otherwise the user &quot;nobody&quot; is used;  guest account &#x3D; pcguest# this tells Samba to use a separate log file for each machine# that connects   log file &#x3D; &#x2F;usr&#x2F;local&#x2F;samba&#x2F;var&#x2F;log.%m# Put a capping on the size of the log files (in Kb).   max log size &#x3D; 50# Specifies the Kerberos or Active Directory realm the host is part of;   realm &#x3D; MY_REALM# Backend to store user information in. New installations should # use either tdbsam or ldapsam. smbpasswd is available for backwards # compatibility. tdbsam requires no further configuration.;   passdb backend &#x3D; tdbsam# Using the following line enables you to customise your configuration# on a per machine basis. The %m gets replaced with the netbios name# of the machine that is connecting.# Note: Consider carefully the location in the configuration file of#       this line.  The included file is read at that point.;   include &#x3D; &#x2F;usr&#x2F;local&#x2F;samba&#x2F;lib&#x2F;smb.conf.%m# Configure Samba to use multiple interfaces# If you have multiple network interfaces then you must list them# here. See the man page for details.;   interfaces &#x3D; 192.168.12.2&#x2F;24 192.168.13.2&#x2F;24 # Where to store roving profiles (only for Win95 and WinNT)#        %L substitutes for this servers netbios name, %U is username#        You must uncomment the [Profiles] share below;   logon path &#x3D; \\%L\Profiles\%U# Windows Internet Name Serving Support Section:# WINS Support - Tells the NMBD component of Samba to enable it&#39;s WINS Server;   wins support &#x3D; yes# WINS Server - Tells the NMBD components of Samba to be a WINS Client#Note: Samba can be either a WINS Server, or a WINS Client, but NOT both;   wins server &#x3D; w.x.y.z# WINS Proxy - Tells Samba to answer name resolution queries on# behalf of a non WINS capable client, for this to work there must be# at least oneWINS Server on the network. The default is NO.;   wins proxy &#x3D; yes# DNS Proxy - tells Samba whether or not to try to resolve NetBIOS names# via DNS nslookups. The default is NO.   dns proxy &#x3D; no # These scripts are used on a domain controller or stand-alone # machine to add or delete corresponding unix accounts;  add user script &#x3D; &#x2F;usr&#x2F;sbin&#x2F;useradd %u;  add group script &#x3D; &#x2F;usr&#x2F;sbin&#x2F;groupadd %g;  add machine script &#x3D; &#x2F;usr&#x2F;sbin&#x2F;adduser -n -g machines -c Machine -d &#x2F;dev&#x2F;null -s &#x2F;bin&#x2F;false %u;  delete user script &#x3D; &#x2F;usr&#x2F;sbin&#x2F;userdel %u;  delete user from group script &#x3D; &#x2F;usr&#x2F;sbin&#x2F;deluser %u %g;  delete group script &#x3D; &#x2F;usr&#x2F;sbin&#x2F;groupdel %g#&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Share Definitions &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;;[homes];   comment &#x3D; Home Directories;   browseable &#x3D; no;   writable &#x3D; yes# Un-comment the following and create the netlogon directory for Domain Logons; [netlogon];   comment &#x3D; Network Logon Service;   path &#x3D; &#x2F;usr&#x2F;local&#x2F;samba&#x2F;lib&#x2F;netlogon;   guest ok &#x3D; yes;   writable &#x3D; no;   share modes &#x3D; no# Un-comment the following to provide a specific roving profile share# the default is to use the user&#39;s home directory;[Profiles];    path &#x3D; &#x2F;usr&#x2F;local&#x2F;samba&#x2F;profiles;    browseable &#x3D; no;    guest ok &#x3D; yes# NOTE: If you have a BSD-style print system there is no need to # specifically define each individual printer[printers]   comment &#x3D; All Printers   path &#x3D; &#x2F;usr&#x2F;spool&#x2F;samba   browseable &#x3D; no# Set public &#x3D; yes to allow user &#39;guest account&#39; to print   guest ok &#x3D; no   writable &#x3D; no   printable &#x3D; yes# This one is useful for people to share files;[tmp];   comment &#x3D; Temporary file space;   path &#x3D; &#x2F;tmp;   read only &#x3D; no;   public &#x3D; yes# A publicly accessible directory, but read only, except for people in# the &quot;staff&quot; group;[public];   comment &#x3D; Public Stuff;   path &#x3D; &#x2F;home&#x2F;samba;   public &#x3D; yes;   writable &#x3D; no;   printable &#x3D; no;   write list &#x3D; @staff# Other examples. ## A private printer, usable only by fred. Spool data will be placed in fred&#39;s# home directory. Note that fred must have write access to the spool directory,# wherever it is.;[fredsprn];   comment &#x3D; Fred&#39;s Printer;   valid users &#x3D; fred;   path &#x3D; &#x2F;homes&#x2F;fred;   printer &#x3D; freds_printer;   public &#x3D; no;   writable &#x3D; no;   printable &#x3D; yes# A private directory, usable only by fred. Note that fred requires write# access to the directory.;[fredsdir];   comment &#x3D; Fred&#39;s Service;   path &#x3D; &#x2F;usr&#x2F;somewhere&#x2F;private;   valid users &#x3D; fred;   public &#x3D; no;   writable &#x3D; yes;   printable &#x3D; no# a service which has a different directory for each machine that connects# this allows you to tailor configurations to incoming machines. You could# also use the %U option to tailor it by user name.# The %m gets replaced with the machine name that is connecting.;[pchome];  comment &#x3D; PC Directories;  path &#x3D; &#x2F;usr&#x2F;pc&#x2F;%m;  public &#x3D; no;  writable &#x3D; yes# A publicly accessible directory, read&#x2F;write to all users. Note that all files# created in the directory by users will be owned by the default user, so# any user with access can delete any other user&#39;s files. Obviously this# directory must be writable by the default user. Another user could of course# be specified, in which case all files would be owned by that user instead.;[public];   path &#x3D; &#x2F;usr&#x2F;somewhere&#x2F;else&#x2F;public;   public &#x3D; yes;   only guest &#x3D; yes;   writable &#x3D; yes;   printable &#x3D; no# The following two entries demonstrate how to share a directory so that two# users can place files there that will be owned by the specific users. In this# setup, the directory should be writable by both users and should have the# sticky bit set on it to prevent abuse. Obviously this could be extended to# as many users as required.;[myshare];   comment &#x3D; Mary&#39;s and Fred&#39;s stuff;   path &#x3D; &#x2F;usr&#x2F;somewhere&#x2F;shared;   valid users &#x3D; mary fred;   public &#x3D; no;   writable &#x3D; yes;   printable &#x3D; no;   create mask &#x3D; 0765[mSHARE]        comment &#x3D; Test        path &#x3D; &#x2F;run&#x2F;media&#x2F;bing&#x2F;storagedisk&#x2F;mine_share&#x2F;public &#x3D; yesvalid users &#x3D; bing        writeable &#x3D; yes         browseable &#x3D; yes create mask &#x3D; 0777   directory mask &#x3D; 0777<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OneNote逃离2</title>
      <link href="/2020/06/13/onenote-tao-chi-2/"/>
      <url>/2020/06/13/onenote-tao-chi-2/</url>
      
        <content type="html"><![CDATA[<h2 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a>Centos</h2><h3 id="新安装-无法联网"><a href="#新安装-无法联网" class="headerlink" title="新安装 无法联网"></a>新安装 无法联网</h3><p>今天在VMware虚拟机中安装好centos7后，发现centos默认是不联网的，联网修改设置如下：<br>进入目录：</p><p><code>cd /etc/sysconfig/network-scripts/</code></p><p>找到网卡配置文件名，这个网卡配置文件可以通过ifconfig命令查看，我虚拟机的网卡名称为ens3</p><p>编辑 <code>ifcfg-ens33</code> 文件的最后一行，将 <code>ONBOOT=no</code> 改为 <code>ONBOOT=yes</code></p><p>保存并退出，再重启一下 network：<br><code>service network restart</code><br>搞定</p><h3 id="更改启动模式"><a href="#更改启动模式" class="headerlink" title="更改启动模式"></a>更改启动模式</h3><p>命令行中：<br><code>vi /etc/inittab</code><br>centos仍然只有两种启动模式：</p><ul><li><code>multi-user.target</code>: analogous to runlevel 3 #命令行模式</li><li><code>graphical.target</code>: analogous to runlevel 5 #图形模式</li></ul><p> 通过 <code>systemctl get-default</code> 命令获取当前模式：<br>（注意：这里是：systemctl 是字母“l”,不是数字1）</p><p>由上面结果可知，当前为命令行模式<br>通过 <code>systemctl set-default graphical.target </code>命令，修改启动模式<br><strong>前提是：你安装了图形界面</strong></p><p>链接：<a href="https://www.jianshu.com/p/65bda1fcae52">https://www.jianshu.com/p/65bda1fcae52</a></p><h3 id="centos-防火墙"><a href="#centos-防火墙" class="headerlink" title="centos 防火墙"></a>centos 防火墙</h3><p>现在centos用的是 firewall-cmd, iptables 貌似淘汰了</p><h4 id="firewall-cmd"><a href="#firewall-cmd" class="headerlink" title="firewall-cmd"></a>firewall-cmd</h4><p>查看防火墙状态<br><code>firewall-cmd --state</code></p><p>停止<br><code>systemctl stop firewalld.service</code></p><p>禁止 firewall 开机启动<br><code>systemctl disable firewalld.service</code></p><p>查看已经开放的端口<br><code>firewall-cmd --list-ports</code></p><p>开启端口<br><code>firewall-cmd --zone=public --add-port=80/tcp --permanent</code><br><code>--zone</code>： 作用域<br><code>--permanent</code>： 永久生效，没有此参数重启后失效</p><p>重启防火墙<br><code>firewall-cmd --reload</code><br><code>firewall-cmd --remove-port=9998/udp --permanent</code></p><p>来自 <a href="https://blog.csdn.net/zj_jim/article/details/53841516">https://blog.csdn.net/zj_jim/article/details/53841516</a> </p><h4 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h4><p>查看是否安装<br><code>rpm qa | grep iptables</code></p><p>查看是否运行<br><code>service iptables status</code></p><p>停止 iptables 服务<br><code>/etc/init.d/iptables stop</code> 或<br><code>service iptables start</code></p><p>列出 iptables 规则<br><code>iptables -L</code></p><p>检查 iptables 开机自启情况<br><code>chkconfig | grep iptables</code></p><p>关闭自启服务<br><code>chkconfig iptables off</code></p><p>删除 自启服务<br><code>chkconfig --del iptables</code><br>再次检查<br><code>chkconfig | grep iptables</code></p><p>清除 iptables 规则<br><code>iptables -F</code></p><p>删除某条 iptables 规则， 输入 <code>iptables -d  xxxx</code></p><p><a href="https://jingyan.baidu.com/article/8cdccae946963f315413cdef.html">https://jingyan.baidu.com/article/8cdccae946963f315413cdef.html</a></p><p><a href="https://blog.csdn.net/banqgg/article/details/78297790">https://blog.csdn.net/banqgg/article/details/78297790</a></p><h3 id="rpm-用法"><a href="#rpm-用法" class="headerlink" title="rpm 用法"></a>rpm 用法</h3><p>参看包的完整名称<br><code>rpm -q </code></p><p>查询系统中已经安装的软件<br><code>rpm -qa </code></p><p>查询一个已经安装的文件属于哪个软件包；<br><code>rpm -qf 文件名的绝对路径</code></p><p>查询已安装软件包都安装到何处；<br>软件名定义是:rpm包去除平台信息和后缀后的信息<br><code>rpm -ql 软件名</code></p><p>查询一个已安装软件包的信息<br><code>rpm  -qi 软件名</code></p><p>查看一下已安装软件的配置文件<br><code>rpm -qc 软件名</code></p><p>查看一个已经安装软件的文档安装位置<br><code>rpm -qd 软件名</code></p><p>查看一下已安装软件所依赖的软件包及文件<br><code>rpm -qR 软件名</code></p><ul><li><p>对于未安装的软件包信息查询<br>  查看一个软件包的用途、版本等信息；<br>  <code>rpm -qpi rpm文件</code></p><p>  查看一件软件包所包含的文件；<br>  <code>rpm -qpl rpm文件</code></p><p>  查看软件包的文档所在的位置；<br>  <code>rpm -qpd rpm文件</code></p><p>  查看一个软件包的配置文件；<br>  <code>rpm -qpc rpm文件</code></p><p>  查看一个软件包的依赖关系<br>  <code>rpm -qpR rpm文件</code></p></li><li><p>软件包的安装、升级、删除等<br>  安装或者升级一个rpm包<br>  <code>rpm -ivh rpm文件</code> 安装<br>  <code>rpm -Uvh rpm文件</code> 更新</p><p>  删除一个 rpm 包<br>  <code>rpm -e 软件名   </code><br>  如何需要不管依赖问题，强制删除软件，在如上命令其后加上 <code>--nodeps</code></p></li><li><p>签名导入<br><code>rpm --import 签名文件 rpm --import RPM-GPG-KEY</code> </p></li></ul><p>来自 <a href="http://blog.csdn.net/iamhuanggua/article/details/60140867">http://blog.csdn.net/iamhuanggua/article/details/60140867</a> </p><h3 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h3><p>yum命令是在Fedora和RedHat以及SUSE中基于rpm的软件包管理器，它可以使系统管理人员交互和自动化地更细与管理RPM软件包，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软体包，无须繁琐地一次次下载、安装。<br>yum提供了查找、安装、删除某一个、一组甚至全部软件包的命令，而且命令简洁而又好记。<br>语法<br>yum(选项)(参数)<br>选项<br>    -h：显示帮助信息；<br>    -y：对所有的提问都回答“yes”；<br>    -c：指定配置文件；<br>    -q：安静模式；<br>    -v：详细模式；<br>    -d：设置调试等级（0-10）；<br>    -e：设置错误等级（0-10）；<br>    -R：设置yum处理一个命令的最大等待时间；<br>    -C：完全从缓存中运行，而不去下载或者更新任何头文件。<br>参数<br>    install：安装rpm软件包；<br>    update：更新rpm软件包；<br>    check-update：检查是否有可用的更新rpm软件包；<br>    remove：删除指定的rpm软件包；<br>    list：显示软件包的信息；<br>    search：检查软件包的信息；<br>    info：显示指定的rpm软件包的描述信息和概要信息；<br>    clean：清理yum过期的缓存；<br>    shell：进入yum的shell提示符；<br>    resolvedep：显示rpm软件包的依赖关系；<br>    localinstall：安装本地的rpm软件包；<br>    localupdate：显示本地rpm软件包进行更新；<br>    deplist：显示rpm软件包的所有依赖关系。<br>实例</p><p>部分常用的命令包括：<br>    • 自动搜索最快镜像插件：<code>yum install yum-fastestmirror </code><br>    • 安装yum图形窗口插件：<code>yum install yumex</code><br>    • 查看可能批量安装的列表：<code>yum grouplist</code></p><p>安装<br>yum install              #全部安装<br>yum install package1     #安装指定的安装包package1<br>yum groupinsall group1   #安装程序组group1</p><p>更新和升级<br>yum update               #全部更新<br>yum update package1      #更新指定程序包package1<br>yum check-update         #检查可更新的程序<br>yum upgrade package1     #升级指定程序包package1<br>yum groupupdate group1   #升级程序组group1</p><p>查找和显示<br>yum info package1      #显示安装包信息package1<br>yum list               #显示所有已经安装和可以安装的程序包<br>yum list package1      #显示指定程序包安装情况package1<br>yum groupinfo group1   #显示程序组group1信息yum search string 根据关键字string查找安装包</p><p>删除程序<br>yum remove &#124; erase package1   #删除程序包package1<br>yum groupremove group1             #删除程序组group1<br>yum deplist package1               #查看程序package1依赖情况</p><p>清除缓存<br>yum clean packages       #清除缓存目录下的软件包<br>yum clean headers        #清除缓存目录下的 headers<br>yum clean oldheaders     #清除缓存目录下旧的 headers</p><p>来自 <a href="http://man.linuxde.net/yum">http://man.linuxde.net/yum</a> </p><h3 id="无线网卡"><a href="#无线网卡" class="headerlink" title="无线网卡"></a>无线网卡</h3><p><code>iwlist wifi-name scanning</code><br>wifi-name : 无线网卡名字 </p><p>显示出来的ESSID项的值即为无线网络的名字</p><p>来自 <a href="http://blog.csdn.net/qq_21949217/article/details/42642449">http://blog.csdn.net/qq_21949217/article/details/42642449</a> </p><p><code>ip link set &lt;设备名&gt; up</code></p><p>• iw - 仅支持 nl80211 标准，不支持老的 WEXT (Wireless EXTentions) 标准。如果 iw 没有显示网卡，可能是这个原因。<br>• wireless_tools - 已经过时，但是依然广泛使用。WEXT 设备使用此工具。<br>• wpa_supplicant - 提供 WPA/WPA2 加密支持，同时支持 nl80211 和 WEXT。</p><p>来自 <a href="https://wiki.archlinux.org/index.php/Wireless_network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">https://wiki.archlinux.org/index.php/Wireless_network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)</a> </p><table><thead><tr><th>iw命令</th><th>wireless_tools命令</th><th>描述</th></tr></thead><tbody><tr><td>iw dev wlan0 link</td><td>iwconfig wlan0</td><td>获取连接状态</td></tr><tr><td>iw dev wlan0 scan</td><td>iwlist wlan0 scan</td><td>扫描可用热点</td></tr><tr><td>iw dev wlan0 set type ibss</td><td>iwconfig wlan0 mode ad-hoc</td><td>设置操作模式为 ad-hoc</td></tr><tr><td>iw dev wlan0 connect your_essid</td><td>iwconfig wlan0 essid your_essid</td><td>连接到开放网络</td></tr><tr><td>iw dev wlan0 connect your_essid 2432</td><td>iwconfig wlan0 essid your_essid freq 2432M</td><td>连接到开放网络的一个频道</td></tr><tr><td>iw dev wlan0 connect your_essid key 0:your_key</td><td>iwconfig wlan0 essid your_essid key your_key</td><td>用16进制加密密码访问 WEP 加密网络</td></tr><tr><td>iw dev wlan0 connect your_essid key 0:your_key</td><td>iwconfig wlan0 essid your_essid key s:your_key</td><td>用 ASCII 密码访问 WEP 加密网络</td></tr><tr><td>iw dev wlan0 set power_save on</td><td>iwconfig wlan0 power on</td><td>启用省电模式</td></tr><tr><td></td><td></td><td></td></tr><tr><td>来自 <a href="https://wiki.archlinux.org/index.php/Wireless_network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">https://wiki.archlinux.org/index.php/Wireless_network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)</a></td><td></td><td></td></tr></tbody></table><p>• WPA/WPA2</p><pre class="line-numbers language-none"><code class="language-none">wpa_supplicant -i interface -c &lt;(wpa_passphrase your_SSID your_key)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>来自 <a href="https://wiki.archlinux.org/index.php/Wireless_network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">https://wiki.archlinux.org/index.php/Wireless_network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)</a></p><p>获取 IP 地址</p><p>使用 DHCP：<br><code># dhcpcd wlan0</code><br>静态 IP：<br><code># ip addr add 192.168.0.2/24 dev wlan0</code><br><code># ip route add default via 192.168.0.1</code></p><p>来自 <a href="https://wiki.archlinux.org/index.php/Wireless_network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">https://wiki.archlinux.org/index.php/Wireless_network_configuration_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)</a> </p><h3 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h3><p>netstat可以查看linux系统中正在使用的服务和端口情况<br>netstat [-选项]<br>netstat各选项参数说明： <br>-a : 列出所有连接，服务监听，Socket信息 <br>-c : 持续列出网络状态 #每隔一秒输出网络信息 <br>-t : 显示TCP端口 <br>-u : 显示UDP端口 <br>-l : 列出当前监听服务，只显示监听端口 <br>-p : 显示PID（进程号）和进程名称 <br>-n : 直接使用ip地址，而不通过域名服务器(加速输出，因为不用进行比对查询) <br>-s : 显示网络工作信息统计表 <br>-r : 显示路由表信息</p><p>From <a href="https://blog.csdn.net/xuemeilu/article/details/52329671">https://blog.csdn.net/xuemeilu/article/details/52329671</a> </p><p>netstat -ntlp  //查看当前所有tcp 端口<br>netstat -ntulp | grep 80   //查看所有80 端口使用情况<br>netstat -an | grep 3305   // 查看所有3306 端口使用情况\</p><p>安装  netstat<br><code>yum install net-tools</code></p><h3 id="解决CentOS-7上yum-update时出现的Error-Multilib-version-problems-found"><a href="#解决CentOS-7上yum-update时出现的Error-Multilib-version-problems-found" class="headerlink" title="解决CentOS 7上yum update时出现的Error: Multilib version problems found."></a>解决CentOS 7上yum update时出现的Error: Multilib version problems found.</h3><p>查看更新出错的提示是哪个组件重复<br><code>rpm -q  组件名称</code>  #查询有多少个，以及多余那个<br><code>yum remove 组件全称</code>  # 移除多余的那个</p><h3 id="yum-安装找不到软件的解决方法"><a href="#yum-安装找不到软件的解决方法" class="headerlink" title="yum 安装找不到软件的解决方法"></a>yum 安装找不到软件的解决方法</h3><ol><li><p>查看是否安装EPEL, 如果没有安装，请安装<br> <code>yum -y install epel-release</code><br> <strong>EPEL 是yum的一个软件源,里面包含了许多基本源里没有的软件</strong><br> 安装后，在/etc/yum.repos.d/ 文件中会出现 <code>epel.repo</code> 和 <code>epel-testing.repo</code> 文件</p></li><li><p>安装了，还是不能下载，请移除目前的 epel ，然后重新下载安装</p></li><li><p>接下来更新源<br> <code>yum clean all &amp;&amp; yum makecache</code></p></li></ol><p>From <a href="https://blog.csdn.net/w670328683/article/details/51673757">https://blog.csdn.net/w670328683/article/details/51673757</a> </p><h3 id="Centos-7-禁用fastestmirror-插件"><a href="#Centos-7-禁用fastestmirror-插件" class="headerlink" title="Centos 7 禁用fastestmirror 插件"></a>Centos 7 禁用fastestmirror 插件</h3><p><code>vi  /etc/yum/pluginconf.d/fastestmirror.conf</code><br><code>enable = 1 </code> #  1 改為 0，禁用插件</p><h3 id="Linux-后台不间断运行进程"><a href="#Linux-后台不间断运行进程" class="headerlink" title="Linux 后台不间断运行进程"></a>Linux 后台不间断运行进程</h3><ul><li><p>命令 加 <code>＆</code><br>退出终端后，后台进程也失效</p></li><li><p><code>nohup</code> 加 命令 加 <code>＆</code><br>退出终端后，不失效</p></li><li><p><code>yum install  screen  -y</code></p></li></ul><h3 id="开启ssh"><a href="#开启ssh" class="headerlink" title="开启ssh"></a>开启ssh</h3><ol><li><p>切换到 <code>／etc／ssh</code> ， 找到配置文件 <code>sshd＿config</code>， 将文件中的监听端口，监听地址前面的＃号去掉</p></li><li><p>允许远程登陆<br><code>permitRootlogin yes</code></p></li><li><p>开启用户名密码认证登陆<br><code>PasswordAuthentication yes</code></p></li><li><p>启动服务<br><code>service sshd start</code></p></li><li><p>开机自启<br><code>systemctl enable sshd.service</code></p></li></ol><h2 id="树莓派"><a href="#树莓派" class="headerlink" title="树莓派"></a>树莓派</h2><h3 id="树莓派静态ip"><a href="#树莓派静态ip" class="headerlink" title="树莓派静态ip"></a>树莓派静态ip</h3><ol><li><p>使用 ssh 登陆，使用以下命令设置静态 ip。<br><code>sudo nano /etc/dhcpcd.conf</code></p></li><li><p>在 <code>dhcpcd.conf</code> 后添加以下内容：</p><pre class="line-numbers language-none"><code class="language-none">interface eth0static ip_address&#x3D;10.12.8.124&#x2F;24static routers&#x3D;10.12.8.1static domain_name_servers&#x3D;202.102.152.3 114.114.114.114<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>保存后重启树莓派。<br><code>sudo reboot</code></p></li></ol><p>作者：科技爱好者<br>链接：<a href="https://www.jianshu.com/p/b0e6d066d6b6">https://www.jianshu.com/p/b0e6d066d6b6</a></p><h3 id="WiFi-静态IP"><a href="#WiFi-静态IP" class="headerlink" title="WiFi 静态IP"></a>WiFi 静态IP</h3><ol><li><p>确认wlan0 网卡是否激活, 如果没有激活,即使配置了wifi也不能连上网.</p><p> 扫描wifi:<br> <code>sudo iwlist wlan0 scan</code></p><blockquote><p>wlan0 Interface doesn’t support scanning : Network is down</p></blockquote><p> 如果显示这样表示你的网卡处于关闭状态<br> 此时需激活网卡 <code>sudo ifconfig wlan0 up</code></p><p> 如果出现以下错误：</p><blockquote><p>sudo ifconfig wlan0 up SIOCSIFFLAGS: Operation not possible due to RF-kill<br> 则：</p></blockquote><p> <code>sudo rfkill unblock wifi</code><br> <code>sudo rfkill unblock all</code><br> <code>sudo rfkill list</code></p><p> 再次扫描wifi 此时应该能收到wifi</p></li><li><p>设置wifi名称及密码</p><p> WiFi 名称密码等信息：<br> <code>sudo nano /etc/wpa_supplicant/wpa_supplicant.conf</code></p><p> 设置静态消息：<br> <code>sudo nano /etc/dhcpcd.conf</code></p><p> interface eth0 设置的是有线静态ip<br> interface wlan0 设置的是无线静态ip</p></li></ol><blockquote><p><a href="https://askubuntu.com/questions/62166/siocsifflags-operation-not-possible-due-to-rf-kill">https://askubuntu.com/questions/62166/siocsifflags-operation-not-possible-due-to-rf-kill</a></p></blockquote><blockquote><p><a href="https://www.jianshu.com/p/b437558dd028">https://www.jianshu.com/p/b437558dd028</a></p></blockquote><h3 id="WiFi-连接-操作"><a href="#WiFi-连接-操作" class="headerlink" title="WiFi 连接 操作"></a>WiFi 连接 操作</h3><p><a href="https://www.jianshu.com/p/e22331d62a16">https://www.jianshu.com/p/e22331d62a16</a></p><p>iwconfig</p><p>如果出现了wlan0，那说明网卡已经正常工作了。</p><p>如果这里的显示不正常，请安装连接wifi必要的包</p><p><code>sudo apt-get install wireless-tools wpasupplicant firmware-realtek</code></p><p>设置wifi</p><p>输入如下命令可以搜索附近所有可连接的 Wifi AP：</p><p><code>pi@raspberrypi:~ $ iwlist wlan0 scan | grep SSID</code></p><p>确定树莓派可以检测到你建立的Wifi AP之后，按照如下方法配置</p><p>使用如下命令获得 wifi 设置 wpa_passphrase 的 SSID名称和密码。回显如下：<br>pi@raspberrypi:~$ wpa_passphrase SSID password</p><pre class="line-numbers language-none"><code class="language-none">network&#x3D;&#123;        ssid&#x3D;&quot;SSID&quot;        #psk&#x3D;&quot;password&quot;        psk&#x3D;2f6a0beddf2f0588ee426b0c3a0e3d9a523bb07a05cb857f85d826da80fa75c4&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>复制这段回显并保存到自己的配置文件中：<br><code>pi@raspberrypi:~$ sudo vi /etc/wpa_supplicant/wpa_supplicant.conf</code> </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">ctrl_interface</span><span class="token operator">=</span>DIR<span class="token operator">=</span>/var/run/wpa_supplicant <span class="token assign-left variable">GROUP</span><span class="token operator">=</span>netdev<span class="token comment">#ap_scan=1</span><span class="token assign-left variable">network</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>       <span class="token assign-left variable">ssid</span><span class="token operator">=</span><span class="token string">"ssid"</span>       <span class="token assign-left variable">scan_ssid</span><span class="token operator">=</span><span class="token number">1</span>       <span class="token assign-left variable">psk</span><span class="token operator">=</span><span class="token string">"密码"</span>       <span class="token assign-left variable">priority</span><span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token assign-left variable">network</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>       <span class="token assign-left variable">ssid</span><span class="token operator">=</span><span class="token string">"ssid"</span>       <span class="token assign-left variable">psk</span><span class="token operator">=</span><span class="token string">"密码"</span>       <span class="token assign-left variable">priority</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ap_scan = 1</code> 是默认值，因此我注掉了</p><p>1：这个模式下总是先连接可见的 WiFi，如果扫描完所有可见的网络之后都没有连接上，则开始连接隐藏 WiFi。<br>2：会按照network定义的顺序连接WiFi网络，遇到隐藏的将立刻开始连接，因此在这个模式下连接顺序不受priority影响<br>ctrl_interface:这个文件夹里面存的是一个当前使用的interface的socket文件，可以供其他程序使用读取WiFi状态信息<br>network：是一个连接一个WiFi网络的配置，可以有多个，wpa_supplicant会按照priority指定的优先级（数字越大越先连接）来连接，当然，在这个列表里面隐藏WiFi不受priority的影响，隐藏WiFi总是在可见WiFi不能连接时才开始连接。</p><p><code>ssid</code>：网络的ssid<br><code>psk</code>：密码<br><code>priority</code>：连接优先级，越大越优先<br><code>scan_ssid</code>：连接隐藏WiFi时需要指定该值为1</p><p>修改完成后，使用以下命令重启网络：</p><pre class="line-numbers language-none"><code class="language-none">pi@raspberrypi:~$ sudo systemctl restart networking  #重启网卡pi@raspberrypi:~$ sudo ifdown wlan0   pi@raspberrypi:~$ sudo ifup wlan0     pi@raspberrypi:~$ wpa_cli status      #查看连接状态<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="检查网络情况"><a href="#检查网络情况" class="headerlink" title="检查网络情况"></a>检查网络情况</h3><p>路由表:<br><code>netstat -r</code></p><p>查看DNS:<br><code>cat /etc/resolv.conf</code></p><p>网关:<br><code>traceroute baidu.com</code><br>第一行就是自己的网关</p><h2 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h2><h3 id="debian中查找已安装软件及卸载软件"><a href="#debian中查找已安装软件及卸载软件" class="headerlink" title="debian中查找已安装软件及卸载软件"></a>debian中查找已安装软件及卸载软件</h3><p><code>dpkg -l | grep -i name</code><br><code>apt-get remove name</code></p><p><code>sudo apt-get autoremove --purge</code><br><code>autoremove</code>：告诉 apt-get 我们所要做的操作是移除软件 <br><code>--purge</code>：注意这前面是两个短划线，这个参数是告诉他们要完整的干净的彻底的移除</p><p>From <a href="https://blog.csdn.net/sinat_30603081/article/details/69389188">https://blog.csdn.net/sinat_30603081/article/details/69389188</a> </p><h3 id="使用apt-cache-policy列出软件的所有来源"><a href="#使用apt-cache-policy列出软件的所有来源" class="headerlink" title="使用apt-cache policy列出软件的所有来源"></a>使用apt-cache policy列出软件的所有来源</h3><p>policy列出的信息比policy详细一点。</p><p><code>apt-cache policy vim</code></p><pre class="line-numbers language-none"><code class="language-none">vim:  Installed: 2:7.4.1689-3ubuntu1.2  Candidate: 2:7.4.1689-3ubuntu1.2  Version table: *** 2:7.4.1689-3ubuntu1.2 100        100 &#x2F;var&#x2F;lib&#x2F;dpkg&#x2F;status     2:7.3.547-7 500        500 http:&#x2F;&#x2F;mirrors.163.com&#x2F;debian wheezy&#x2F;main amd64 Packages12345678910<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>policy是一个apt-cache子命令，可以通过man apt-cache查询更多用法。</p><h3 id="移动硬盘部分ntfs分区无法打开"><a href="#移动硬盘部分ntfs分区无法打开" class="headerlink" title="移动硬盘部分ntfs分区无法打开"></a>移动硬盘部分ntfs分区无法打开</h3><p>使用指令进行修复： <br>sudo ntfsfix /dev/sdaX(无法挂载的硬盘分区)</p><p>From <a href="https://blog.csdn.net/u014157776/article/details/79621063">https://blog.csdn.net/u014157776/article/details/79621063</a> </p><h3 id="开启-SSH"><a href="#开启-SSH" class="headerlink" title="开启 SSH"></a>开启 SSH</h3><ol><li>修改sshd_config 文件</li><li>启动 SSH 服务  ， 命令为  <code>/etc/init.d/ssh start</code> 或 <code>service ssh start</code></li><li>验证SSH 服务状态 ， 命令为 ： <code>/etc/init.d/ssh status </code></li><li>添加开机自启动： <code>update-rc.d ssh enable </code></li></ol><p>关闭则为 ： <code>update-rc ssh disabled</code></p><h3 id="安装中文输入法"><a href="#安装中文输入法" class="headerlink" title="安装中文输入法"></a>安装中文输入法</h3><p><code>aptitude install locales</code>：没有 aptitude 的话可以先安装 <code>apt-get insall aptitude </code><br><code>dpkg-reconfigure locales</code>： 进入选择： zh_CN GB2312 zh_CN.GBK GBK ;zh_CN.UTF-8 UTF-8  ; en_US.UF8 <br><code>vim /etc/default/locale</code>： 设置 LANG=en_US.UTF-8</p><p>安装中文字库：<br><code>sudo apt-get install ttf-wqy-zenhei</code></p><p>安装基于 Fcitx 输入法框架的 Google 拼音输入法：</p><p><code>sudo apt-get install fcitx fcitx-googlepinyin fcitx-module-cloudpinyin fcitx-sunpinyin</code></p><p>From <a href="https://www.immortalt.com/archives/271">https://www.immortalt.com/archives/271</a> </p><p>之后  打开  fcitx configuration， 设置相关输入法的顺序，可能需要重启一下，打开的方法是在软件列表内打开</p><p>Debian 9 将图标隐藏在左下角下面的收</p><h3 id="安全移除移动硬盘"><a href="#安全移除移动硬盘" class="headerlink" title="安全移除移动硬盘"></a>安全移除移动硬盘</h3><p>首先卸载所有挂载点<br><code>umount /media/bingfeng/* </code> （后面路径为移动硬盘分区挂载点)</p><p>之后断掉硬盘的电<br><code>udisksctl power-off -b /dev/sd?</code></p><h3 id="重新命名网卡的名称"><a href="#重新命名网卡的名称" class="headerlink" title="重新命名网卡的名称"></a>重新命名网卡的名称</h3><p><code>ip link set enp4s0f1 down</code> //关闭网卡<br><code>ip link set enp4s0f1 name eth0</code> //重命名为eth0<br><code>ip link set eth0 up</code> //启用eth0<br>你可以使用ifconfig或者ip link show来查看修改后的结果</p><p>作者：小星星<br>链接：<a href="https://www.zhihu.com/question/45796677/answer/316701878">https://www.zhihu.com/question/45796677/answer/316701878</a></p><h3 id="Debian安装-cpu-温控"><a href="#Debian安装-cpu-温控" class="headerlink" title="Debian安装 cpu 温控"></a>Debian安装 cpu 温控</h3><p><code>Apt-get install lm-sensors</code><br><code>Sensors-detect</code><br><code>Service kmod start</code><br><code>Sensors</code></p><p>然后一路 yes</p><h3 id="添加用户到某个组"><a href="#添加用户到某个组" class="headerlink" title="添加用户到某个组"></a>添加用户到某个组</h3><p><code>usermod -g root bingfeng</code><br>添加bingfeng 这个用户到root 组</p><p><code>id bingfeng</code> 查看 bingfeng这个用户的权限<br><code>who </code> 查看当前用户</p><h3 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h3><p><code>/n</code><br><code>/r/n</code></p><p><code>\r</code> 就是”回到行首”，<code>\n</code> 就是”到下一行”<br>即:\r 是回车，\n 是换行，前者使光标到行首，后者使光标下移一格。<br>通常用的Enter是两个加起来的，即 \r\n<br>• Unix系统里，每行结尾只有“&lt;换行&gt;”，即“\n”；<br>• Windows系统里面，每行结尾是“&lt;换行&gt;&lt;回车&gt;”，即“\n\r”；<br>• Mac系统里，每行结尾是“&lt;回车&gt;”。</p><p>/n   enter<br>/r return</p><p>一个直接后果是，Unix/Mac系统下的文件在Windows里打开的话，所有文字会变成一行；而Windows里的文件在Unix/Mac下打开的话，在每行的结尾可能会多出一个^M符号。</p><p>From <a href="https://www.jianshu.com/p/23804b0b03c8">https://www.jianshu.com/p/23804b0b03c8</a> </p><h3 id="连接蓝牙"><a href="#连接蓝牙" class="headerlink" title="连接蓝牙"></a>连接蓝牙</h3><p>配置文件位置<br>/etc/bluetooth</p><p>/etc/init.d/bluetooth stop<br>/etc/init.d/bluetooth start</p><p>hciconfig</p><p>hciconfig hci0 up</p><p>hcitool scan</p><h3 id="Apt-update-出错"><a href="#Apt-update-出错" class="headerlink" title="Apt update 出错"></a>Apt update 出错</h3><blockquote><p>gpg error signatures couldn’t be verified<br>gpg: keyserver receive failed: No dirmngr</p></blockquote><p>From <a href="https://unix.stackexchange.com/questions/401547/gpg-keyserver-receive-failed-no-dirmngr">https://unix.stackexchange.com/questions/401547/gpg-keyserver-receive-failed-no-dirmngr</a> </p><p>解决方法：<br><code>apt-get install  dirmngr</code><br><code>sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys KEYNUMBER</code></p><p><a href="https://chrisjean.com/fix-apt-get-update-the-following-signatures-couldnt-be-verified-because-the-public-key-is-not-available/">https://chrisjean.com/fix-apt-get-update-the-following-signatures-couldnt-be-verified-because-the-public-key-is-not-available/</a></p><h3 id="如何在-Linux-系统中添加桌面图标"><a href="#如何在-Linux-系统中添加桌面图标" class="headerlink" title="如何在 Linux 系统中添加桌面图标"></a>如何在 Linux 系统中添加桌面图标</h3><p>在 <code>/usr/shared/applications/</code> 目录下，添加 xxx.desktop 文件（xxx为应用程序名），填写相关信息，保存即可。以 eclipse.desktop 为例说明：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>Desktop Entry<span class="token punctuation">]</span><span class="token assign-left variable">Version</span><span class="token operator">=</span><span class="token number">1.0</span><span class="token assign-left variable">Name</span><span class="token operator">=</span>eclipse<span class="token assign-left variable">Exec</span><span class="token operator">=</span>/home/root/soft/eclipse/eclipse<span class="token assign-left variable">Icon</span><span class="token operator">=</span>/home/root/soft/eclipse/icon.xpm<span class="token assign-left variable">Terminal</span><span class="token operator">=</span>false<span class="token assign-left variable">Type</span><span class="token operator">=</span>Application<span class="token assign-left variable">Categories</span><span class="token operator">=</span>Development<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://blog.csdn.net/lu_embedded/article/details/52224442">https://blog.csdn.net/lu_embedded/article/details/52224442</a></p><h3 id="删除软件"><a href="#删除软件" class="headerlink" title="删除软件"></a>删除软件</h3><p>apt-get 的卸载相关的命令有 remove/purge/autoremove/clean/autoclean 等。具体来说：</p><p><code>apt-get purge / apt-get --purge remove</code><br>删除已安装包（不保留配置文件)。<br>如软件包a，依赖软件包b，则执行该命令会删除a，而且不保留配置文件</p><p><code>apt-get autoremove</code><br>删除为了满足依赖而安装的，但现在不再需要的软件包（包括已安装包），保留配置文件。</p><p><code>apt-get remove</code><br>删除已安装的软件包（保留配置文件），不会删除依赖软件包，且保留配置文件。</p><p><code>apt-get autoclean</code><br>APT的底层包是dpkg, 而dpkg 安装Package时, 会将 *.deb 放在 /var/cache/apt/archives/中，apt-get autoclean 只会删除 /var/cache/apt/archives/ 已经过期的deb。</p><p><code>apt-get clean</code><br>使用 apt-get clean 会将 /var/cache/apt/archives/ 的 所有 deb 删掉，可以理解为 <code>rm /var/cache/apt/archives/*.deb</code>。</p><p>那么如何彻底卸载软件呢？<br>具体来说可以运行如下命令：</p><p>删除软件及其配置文件<br><code>apt-get --purge remove &lt;package&gt;</code></p><p>删除没用的依赖包<br><code>apt-get autoremove &lt;package&gt;</code></p><p>此时dpkg的列表中有“rc”状态的软件包，可以执行如下命令做最后清理：<br><code>dpkg -l |grep ^rc|awk &#39;&#123;print $2&#125;&#39; |sudo xargs dpkg -P</code></p><hr><p>原文：<a href="https://blog.csdn.net/get_set/article/details/51276609">https://blog.csdn.net/get_set/article/details/51276609</a> </p><h3 id="debian-命令行-配置网络"><a href="#debian-命令行-配置网络" class="headerlink" title="debian 命令行 配置网络"></a>debian 命令行 配置网络</h3><ul><li><p>/etc/network/interfaces （设置网卡和IP地址等）</p>  <pre class="line-numbers language-none"><code class="language-none"># The loopback network interfaceauto lo                   #网卡开机自动挂载 iface lo inet loopbackauto eth0                 #网卡开机自动挂载，连接网络iface eth0 inet static    #static表示使用静态&#x2F;固定ip（需两条用于设  置）,dhcp表示使用动态ip（忽略以下两条）address 192.168.0.123     #设置ip地址netmask 255.255.255.0     #设置子网掩码gateway 192.168.0.1       #设置网关dns-nameservers 8.8.8.8   #设置DNS还可以设置第二个虚拟IP地址auto eth0:1iface eth0:1 inet staticaddress  x.x.x.xnetmask  x.x.x.xnetwork x.x.x.xbroadcast x.x.x.x gateway x.x.x.x             &#x2F;etc&#x2F;resolv.conf （设置DNS服务器）nameserver x.x.x.x # 首选DNSnameserver x.x.x.x # 备选DNSsortlist #对返回的域名进行排序<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>/etc/hosts （设置域名解析的IP）</p><p>  设置IP和主机域名</p><p>  DNS生效顺序：hosts文件 &gt; interfaces中DNS &gt; resolv.conf中DNS<br>  相关配置文件/etc/hosts.conf</p></li><li><p>查看网卡驱动信息</p>  <pre class="line-numbers language-none"><code class="language-none">$ ethool -i eth0 # eth0是网卡驱动名    &gt; driver: igb    &gt; version: xx    &gt; firmware-version: xx    &gt; bus-info: 0000:0a:00.0$ dmesg |  grep  eth0$ modinfo  igb # igb是上述命令中显示的的驱动名$ lspci | grep Ethernet<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ul><li><p>Linux驱动管理<br>  $ lsmod | grep igb# 查看驱动<br>  $ rmmod igb &amp;&amp; make clean modules</p><blockquote><p><a href="https://www.jianshu.com/p/334296e50fcc">https://www.jianshu.com/p/334296e50fcc</a></p></blockquote></li></ul><p><code>lspci | grep -i &#39;eth&#39;</code> 或 <code>lspci | grep -i net</code> 命令：可列出每个 pci 总线上的设备，通过grep过滤后可得到网卡设备列表，</p><p><a href="https://blog.csdn.net/willhuo/article/details/79610260">https://blog.csdn.net/willhuo/article/details/79610260</a></p><p>判断网卡 状态<br><a href="https://blog.csdn.net/xinew/article/details/4862231">https://blog.csdn.net/xinew/article/details/4862231</a></p><p>mii-tool<br><code>mii-tool -v</code></p><p>link-ok<br>no-link</p><h2 id="鸟哥的Linux"><a href="#鸟哥的Linux" class="headerlink" title="鸟哥的Linux"></a>鸟哥的Linux</h2><h3 id="查找资料"><a href="#查找资料" class="headerlink" title="查找资料"></a>查找资料</h3><p><a href="http://linux.vbird.org/linux_basic/0120howtolinux/0120howtolinux_1.php">http://linux.vbird.org/linux_basic/0120howtolinux/0120howtolinux_1.php</a><br>网络的进修</p><p>查找文档:<br>Linux 自己的文件数据库: <code>/usr/share/doc </code></p><p>The Linux Documentation Project:<br><a href="http://www.tldp.org/">http://www.tldp.org/</a><br>几乎列出了所有Linux上面可以看到的文献书籍. </p><h3 id="硬件对应的文档"><a href="#硬件对应的文档" class="headerlink" title="硬件对应的文档"></a>硬件对应的文档</h3><p>/dev/sd[a-p]    SCSI / STAT /USB<br>/dev/vd[a-p]    虚拟机 中 的 硬盘 , 云端机器  的虚拟机 一般就是这种</p><p>/dev/lp[0-2]      25 针打印机<br>/dev/usb/lp[0-15]    usb  界面  的打印机</p><p>/dev/input/mouse[0-15]    通用 的鼠标<br>/dev/psaux       ps/2  鼠标<br>/dev/mouse    当前 鼠标</p><p>/dev/scd[0-1]        通用 的 CD<br>/dev/sr[0-1]    通用  , centos  常见<br>/dev/cdrom   当前   CDrom</p><p>/dev/ht0     磁带机   IDE  界面<br>/dev/st0    SATA /  SCSI  界面<br>/dev/tape    当前磁带</p><p>/dev/hd[a-d]    IDE  磁盘</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VMware</title>
      <link href="/2020/06/12/vmware-xi-lie/"/>
      <url>/2020/06/12/vmware-xi-lie/</url>
      
        <content type="html"><![CDATA[<h2 id="VMware-各个文件的作用"><a href="#VMware-各个文件的作用" class="headerlink" title="VMware 各个文件的作用"></a>VMware 各个文件的作用</h2><p>虚拟机的文件管理由 VMware Workstation 来执行，一个虚拟机一般以一系列文件的形式储存在宿主机中，这些文件一般在由 workstation 为虚拟机所创建的那个目录中</p><p>这里列出了这些关键文件及其扩展名。在以下说明例子中，[vmname] 表示创建的虚拟机名字</p><ul><li><p><code>.log</code> 文件<br>  文件类型说明：文本文件</p><p>  [vmname].log or vmware.log<br>  该文件记录了VMware Workstation对虚拟机调试运行的情况<br>  当碰到问题时，这些文件对我们做出故障诊断非常有用</p></li><li><p><code>.nvram</code> 文件<br>  文件类型说明：VMware virtual machine BIOS</p><p>  [vmname].nvram<br>  该文件储存虚拟机BIOS状态信息</p></li><li><p><code>.vmx</code> 文件<br>  文件类型说明：VMware virtual machine configuration</p><p>  [vmname].vmx<br>  该文件为虚拟机的配置文件，储存着根据虚拟机向导或虚拟机编辑器对虚拟机进行的所有配置<br>  有时需要手动更改配置文件以达到对虚拟机硬件方面的更改。可使用文本编辑器进行编辑<br>  如果宿主机是Linux，使用VM虚拟机，这个配置文件的扩展名将是.cfg</p></li><li><p><code>.vmdk</code> 文件<br>  文件类型说明：VMware virtual disk file</p><p>  [vmname].vmdk or [vmname]-s###.vmdk<br>  这是虚拟机的磁盘文件，它储存了虚拟机硬盘驱动器里的信息<br>  一台虚拟机可以由一个或多个虚拟磁盘文件组成</p><p>  如果在新建虚拟机时指定虚拟机磁盘文件为单独一个文件时，系统将只创建一个 [vmname].vmdk文件。该文件包括了虚拟机磁盘分区信息，以及虚拟机磁盘的所有数据，随着数据写入虚拟磁盘，虚拟磁盘文件将变大，但始终只有这一个磁盘文件</p><p>  如果在新建虚拟机时指定为每2GB单独创建一个磁盘文件的话，虚拟磁盘总大小就决定了虚拟磁盘文件的数量。系统将创建一个[vmname].vmdk文件和多个[vmname]-s###.vmdk文件（s###为磁盘文件编号），其中[vmname].vmdk文件只包括磁盘分区信息，多个[vmname]-s###.vmdk文件存储磁盘数据信息。随着数据写入某个虚拟磁盘文件，该虚拟磁盘文件将变大，直到文件大小为2GB，然后新的数据将写入到其他s###编号的磁盘文件中</p><p>  如果在创建虚拟磁盘时已经把所有的空间都分配了，那么这些文件将在初始时就具有最大尺寸并且不再变大了。如果虚拟机是直接使用物理硬盘而不是虚拟磁盘的话，虚拟磁盘文件则保存着虚拟机能够访问的分区信息<br>  早期版本的VMware产品用 .dsk 扩展名来表示虚拟磁盘文件</p><p>  [vmname]-[######].vmdk<br>  当虚拟机有一个或多个快照时，就会自动创建该文件。该文件记录了创建某个快照时，虚拟机所有的磁盘数据内容<br>  [######]为数字编号，根据快照数量自动增加</p></li><li><p><code>.vmsd</code> 文件<br>  文件类型说明：VMware snapshot metadata</p><p>  [vmname].vmsd<br>  该文件储存了虚拟机快照的相关信息和元数据</p></li><li><p><code>.vmsn</code> 文件<br>  文件类型说明：VMware virtual machine snapshot</p><p>  [vmname]-Snapshot[##].vmsn<br>  当虚拟机建立快照时，就会自动创建该文件。有几个快照就会有几个此类文件<br>  这是虚拟机快照的状态信息文件，它记录了在建立快照时虚拟机的状态信息<br>  [##]为数字编号，更具快照数量自动增加</p></li><li><p><code>.vmem</code> 文件<br>  文件类型说明：VMEM</p><p>  [vmname]-[uuid].vmem<br>  该文件为虚拟机内存页面文件，备份了客户机里运行的内存信息<br>  这个文件只有在虚拟机运行时或崩溃后存在</p></li><li><p><code>.vmss</code> 文件<br>  文件类型说明：VMware suspended virtual machine state</p><p>  [vmname].vmss<br>  该文件用来储存虚拟机在挂起状态时的信息<br>  一些早期版本的VM产品用.std来表示这个文件</p></li><li><p><code>.vmtm</code> 文件<br>  文件类型说明：VMware team configuration</p><p>  [vmname].vmtm<br>  该文件为虚拟机组Team的配置文件。通常存在于虚拟机组Team的文件夹里</p></li><li><p><code>.vmxf</code> 文件<br>  文件类型说明：VMware team member</p><p>  [vmname].vmxf<br>  该文件为虚拟机组team中的虚拟机的辅助配置文件<br>  当一个虚拟机从虚拟机组team中移除的时候，此文件还会存在</p></li></ul><h2 id="网络互通总结"><a href="#网络互通总结" class="headerlink" title="网络互通总结"></a>网络互通总结</h2><p><img src="1.jpg"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 虚拟化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux笔记</title>
      <link href="/2020/06/12/linux-bi-ji/"/>
      <url>/2020/06/12/linux-bi-ji/</url>
      
        <content type="html"><![CDATA[<h2 id="help-man-info"><a href="#help-man-info" class="headerlink" title="help | man | info"></a>help | man | info</h2><h3 id="help"><a href="#help" class="headerlink" title="help"></a>help</h3><p>指令 <code>-help</code> 用在协助你查询你曾经用过的指令所具备的选项与参数而已.<br>如果你要使用的是从来没有用过的指令，或者你要查询的根本就不是指令，而是文件的格式时，那就要用 <code>man</code> page.</p><h3 id="man"><a href="#man" class="headerlink" title="man"></a>man</h3><p>空格键向下翻页， q 离开 man 环境</p><p>man page：</p><p><code>NAME</code>  简短的指令、数据名称说明<br><code>SYNOPSIS</code> 简短的指令下达语法（syntax）简介<br><code>DESCRIPTION</code> 较为完整的说明<br><code>OPTIONS</code> 针对 SYNOPSIS 部分中，有列举所有可用的选项说明<br><code>FILES</code>  这个程序或数据所使用或参考或连接到的某些文件<br><code>SEE ALSO</code>  可以参考的，跟这个指令或数据有相关的其他说明！<br><code>EXAMPLE</code>  一些可以参考的范例</p><p>man 中数字的含义：</p><p><code>1</code> 用户在shell 环境中可以操作的指令或可执行的文件<br><code>2</code> 系统核心可呼叫的函数与工具等<br><code>3</code> 一些常用的函数(function) 与函数库(library)，大部分为C的函数库(libc)<br><code>4</code> 装置文件的说明，通常在/dev下的文件<br><code>5</code>  配置文件或者是某些文件的格式<br><code>6</code> 游戏<br><code>7</code> 惯例与协议等，例如linux文件系统 网络协议 ASCII code 等等的说明<br><code>8</code> 系统管理员可用的管理命令<br><code>9</code> 跟kernel 有关的文件</p><p>在man page 中，输入/之后，光标就会移动到屏幕的最下面一行，等待你输入搜索的字符串了。<br><code>/</code> 关键字 向下搜寻<br><code>?</code> 关键字向上搜寻<br><code>n / N</code>  可以用n来搜索下一个，N是上一个</p><p>man -f 关键字<br>man -k 关键字    含有关键字就会显示出来<br>whatis [指令或数据]  相当于 man -f  简单概述命令的作用。<br>apropos [指令或数据]   相当于 man -k 可以通过使用手册反查到某个命令</p><p><code>whatis</code> 和 <code>apropos</code> 必须要有建立 whatis 数据库才行，这个数据库的建立需要以 root 的身份下达如下的指令:<br><code>mandb</code> </p><h3 id="info"><a href="#info" class="headerlink" title="info"></a>info</h3><p>在所有的 Unix Like系统当中，都可以利用 man 来查询指令或者是相关文件的用法; 在Linux里面则又额外提供了一种在线求助的方法，那就是info</p><p>info与man的用途其实差不多，都是用来查询指令的用法或者是文件格式的。但info page则是将文件数据拆成一个个段落，每个段落</p><p>用法:    info 关键词<br>file: 代表这个info page 的资料是来自xxxx文件提供的<br>node: 代表目前的这个页面是属于xxx节点.意思是file内含有很多信息，而xxx仅是file文件内的一个节点内容而已</p><p>next: 下一个节点，  可以按 N 到下个节点去<br>prev:  前一个节点，  可以按 P 到达<br>up: 回到上一层节点总览画面， 按 U<br>按下 H ， 可以提供一些基本功能介绍</p><p><strong>/usr/share/doc 这个目录有很多说明文件</strong></p><h2 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h2><p>格式化 ，其实应该称为 建置文件系统(make filesystem)，所以可以使用指令mkfs来格式化fs.</p><pre class="line-numbers language-none"><code class="language-none">mkfs.xfs [-b bsize] [-d parms] [-i parms] [-l parms] [-L label] [-f] [-r parms]  装置名称<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>关于单位: 只要是数值，没有加单位则为<code>bytes</code>，也可以用 k，m，g，t，p (小写)等来解释. s 指的是<code>sector</code>的个数.<br><code>-b</code>： 后面接block容量，可由512到64k，不过最大容量限制为linux的4k<br><code>-d</code>： 后面接的是data section的相关参数值，</p><p>*.sh : 脚本或批处理文件(scripts)，因为批处理文件为使用shell写成的，所以扩展名就编成 .sh</p><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><ul><li><p><code>who</code> 查看登录用户情况</p></li><li><p><code>ps -aux</code>  后台执行程序</p><p>  VSZ  进程占用的虚拟内存大小<br>  RSS  内存中页的数量 （页是管理内存到单位， 在PC上通常是4k）<br>  TTY  进程所在终端到ID 号</p><p>  STAT 进程状态，常用字母代表的含义如下：<br>  R 正在运行/可运行<br>  D 睡眠中（不可唤醒，通常是在等待到I/O 设备）<br>  S 睡眠中（可以被唤醒）<br>  T 停止 （由于收到信号或被跟踪）<br>  Z  僵进程 （已经结束而没有被释放系统资源的进程）<br>  常用到附加标识有：<br>  &lt;  进程拥有比普通优先级高的优先级<br>  N   进程拥有比普通优先级低的优先级<br>  L  有些页面被锁在内存中<br>  s   会话的先导进程</p><p>  TIME  进程已经占用的cpu 时间</p></li><li><p><code>top</code> 用于即时跟踪当前系统中到进程的情况。命令显示到信息会占满一页，使用命令 q 退出程序</p></li><li><p><code>lsof</code> 查看某个特定的文件正被哪些进程使用。 lsof 能够提供包括 PID 在内的各种进程信息。</p></li><li><p><code>kill -l</code> </p><p>  显示所有信号及其编号  信号名的前缀 SIG 是可以省略到。<br>  0  EXIT  程序退出时收到该信号<br>  1  HUP   挂起<br>  2  INT    中断    CTRL + C<br>  3   QUIT   退出<br>  9  KILL   杀死<br>  11  SEGV  段错误<br>  15 TERM 软件终止<br>  ?(取决于硬件体系)  USR1  用户定义  </p><p>  上述信号可能对某些软件不起作用。（除去9） 有一个信号永远不能被程序所捕捉和忽略，这就是KILL 信号。 可以在内核级别“杀死”一个进程。<br>  kill -KILL pid<br>  kill -SIGKILL PID<br>  kill -9   pid</p><p>  有一些进程 连KILL 信号都不能影响到他们。 这些情况通常是由于一些退化到I/O 虚假锁定造成到。此时，重启系统是解决问题的唯一方法。</p></li><li><p><code>nice</code><br>  命令可以在启动程序时设置谦让度。高谦让度意味着低优等级。低谦让度（特别是那些谦让度为负）的程序能够占用更多的CPU时间。谦让度值在-20 ～ +19 之间。</p><p>  <code>nice -n 2 bc </code>设置bc程序 以谦让度 增量 为 2 启动<br>  不带-n 参数到nice 会将程序的谦让度增量设置为10</p><p>  <code>renice</code> 命令可以在进程运行时调整其谦让度。</p><p>  <code>renice +12 -p pid</code>  （将 进程号为 pid 的程序 谦让度调整为 12）</p><p>  <code>nice</code> 查看默认的 谦让度</p></li><li><p><code>sync</code> 将数据同步写入硬盘中， 一般账号用户只能同步自己的数据，root 可以同步系统全部数据（一般关机前使用）</p></li><li><p>rm<br><code>rm -f</code>  不提示　直接删除<br><code>rm -r</code>　递归删除目录下所有文件及目录</p></li><li><p>shutdown 关机<br>  shutdown -h now 现在关机<br>  shutdown -h 20:25<br>  shutdown -h +10 十分钟后关机<br>  shutdown -r now 现在重启<br>  shutdown -r +30 ‘the system will reboot’   再过30分钟重启，并显示后面的讯息给所有在线的使用者<br>  shutdown -k now ‘this system will reboot’  发出警告信息，但不会真的关机!</p></li><li><p>reboot  重启</p></li><li><p>cp 来源文件 目标文件     </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> .bashrc  .bashrc_test复制<span class="token punctuation">(</span>cp<span class="token punctuation">)</span>会复制执行者的属性和权限<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>增加路径<br>  PATH=”${PATH}:路径”  </p></li><li><p>mkdir 建立新目录</p></li><li><p>权限<br>  chgrp : 改变文件所属群组<br>  chown : 改变文件拥有者<br>  chmod : 改变文件的权限</p><p>  u (文件属主)<br>  g (group)<br>  o (other)<br>  a (all) </p><p>  <code>r， w， x</code><br>  <code>+ ，- ，=</code> </p></li><li><p>basename +路径<br>  获取文件名<br>  dirname +路径<br>  获取目录名</p></li><li><p>cat 由第一行开始显示文件内容(concatenate)<br>  cat -n 显示行号</p></li><li><p>tac 从最后一行开始显示</p></li><li><p>more  一页一页 显示文件内容</p></li><li><p>less 与more类似，但比more更好，可以往前翻页<br>  less -M  显示文件信息　　<br>  空格: 下一页　　<br>  B: 上一页　　　<br>  ／：在　less 中查找</p></li><li><p>head  只有头几行</p></li><li><p>tail 末几行</p></li><li><p>od  以二进制方式读取文件内容</p></li><li><p>touch<br>  -a 仅更改access time;<br>  -c  仅修改文件的时间，若文件不存在则不建立新文件;<br>  -d  后面可以接欲修改的日期而不用目前的日期，也可以使用 –date=”日期或时间”<br>  -m  仅修改mtime;<br>  -t  后面可以接欲修改的时间而不是用目前的时间，格式为[YYYYMMDDhhmm]</p><p>  touch 后面接有存在文件，则该文件的三个时间(atime/ctime/mtime)都会更新为目前的时间.若文件不存在，则会主动建立一个新的空文件.</p><p>  复制一个文件时，复制所有属性，但也没有办法复制ctime这个属性.<br>  touch 只能修改mtime 和atime</p></li><li><p>umask 改变默认权限</p></li><li><p>df : 列出文件系统的整体磁盘使用量<br>  -a :　列出所有文件系统，包括系统特有的 /proc等文件系统;<br>  -k /m :　以KBytes/MBytes的容量显示各文件系统<br>  -h : 以GBytes，MBytes，KBytes等格式自行显示;<br>  -H : 以M=1000k 取代M=1024K的进位方式;<br>  -T :  连同该Partition 的filesystem 名称也列出来(如xfs);<br>  -i : 不用磁盘容量，而以inode的数量来显示;<br>  后面可以接路径，从而看清还有多少容量.  </p><p>  df -hl 查看磁盘剩余空间</p></li><li><p>du: 评估文件系统是磁盘使用量<br>  -a 列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已<br>  -h  以(G/M)容量格式显示<br>  -s 列出总量而已，而不列出每个个别的目录占用容量.<br>  -S 不包括子目录下的总计，与-s有点差别</p><p>  du -sh filename (= du -sh * )   显示当前目录下所有文件及其大小，如果要排序再再后面加上 | sort -n<br>  <code>du -sm * | sort -n</code> 统计当前目录大小并按大小排序， 返回该文件夹总 M 数</p></li><li><p>lsblk [-dfimpt] [device]<br>  -d : 仅列出磁盘本身，不会列出该磁盘的分区数据<br>  -f : 同时列出该磁盘内的文件系统名称<br>  -i : 使用ASCII的线段输出，不要使用复杂的编码<br>  -m: 同时输出该装置在 /dev 底下的权限数据(rwx的数据)<br>  -p : 列出该装置的完整文件名，而不是仅列出最后的名字而已<br>  -t : 列出该磁盘装置的详细数据，包括磁盘阵列机制\预读写的数据量大小等.</p></li><li><p><code>iconv --list</code><br>  iconv -f 原编码 -t 新编码 filename [-o newfile]<br>  –list : 列出iconv 支持的语系数据<br>  -f : from，   后接原本的编码格式<br>  -t : to ， 后面接新的编码格式<br>  -o file : 如果要保留原本的文件， 那么使用-o 新文件名，可以建立新的文件.</p></li><li><p>alias: 查看目前的命令的自定义<br>  可以直接下达来改动 :  <code>alias lm=&#39;ls -al&#39;</code></p></li><li><p>type [-tpa] name<br>  不加任何选项与参数，type 会显示 name 是外部指令还是 bash 内建指令<br>  <code>-t</code>： type 会将 name 以底下这些字眼显示出他的意义:</p><ul><li>file: 表示为外部指令;</li><li>alias: 表示指令为命令别名所设定的名称;</li><li>builtin: 表示该指令为bash内建的指令功能;</li></ul><p>  -p： 如果后面接的name为外部指令时，才会显示完整的文件名<br>  -a： 会由PATH变量定义的路径中，将所有含name的指令都列出来，包含alias.</p></li><li><p>histroy [n] : n为数字，列出最近n比命令<br>history [-c] : 将目前的shell中所有history内容全部清除<br>histroy [-raw] histfiles<br>  -a : 将目前新增的history指令新增入histfiles中，若没有加histfiles，则预设写入 ~/ .bash_history .<br>  -r : 将 history 等等内容读到目前这个shell的history 记忆中<br>  -w : 将目前的history记忆内容写入histfiles 中.</p></li></ul><h2 id="输入-输出"><a href="#输入-输出" class="headerlink" title="输入 | 输出"></a>输入 | 输出</h2><p>标准输入 (stdin): 0，使用 &lt; 或 &lt;&lt;<br>标准输出 (stdout) : 1，使用 &gt; 或 &gt;&gt;<br>标准错误输出 (stderr) : 2， 使用2&gt;或2&gt;&gt;</p><p>如: ll 路径 &gt; 路径/文件名<br>再用 cat 查看文件<br>ll 路径 &gt;&gt; 路径/文件名   在已存在的文件继续写入.</p><p>/dev/null 可以屏蔽不想显示的信息，  如: <code>find /home -name .bashrc 2&gt; /dev/null  </code> </p><p>将正确与错误的数据写入同一个文件.<br><code>find /home -name .bashrc &gt; list 2&gt; list </code> (错误，此时两种数据同时写入同一个文件，会交叉，造成次序错乱.)</p><h2 id="文件查找"><a href="#文件查找" class="headerlink" title="文件查找"></a>文件查找</h2><p>file 查看文件类型<br>file 文件路径</p><p>which 寻找执行档<br>which [-a] command</p><p>文件名的搜寻<br>whereis  只找系统中某些特定目录底下的文件而已<br>locate 则是利用数据库来搜寻文件名，比较快，而find 速度慢，也耗硬盘.</p><p>whereis [-bmsu] 文件或目录名<br>    -l :可以列出whereis 会去查询的几个主要目录而已<br>    -b: 只找binary格式的文件<br>    -m : 只找在说明文件manual 路径下的文件<br>    -s 只找source 来源文件<br>    -u 搜寻不在上述三个项目当中的其他特殊文件<br>whereis 只找几个特定的目录而已，并没有全系统去查询.whereis主要针对/bin/sbin底下的执行档，以及/usr/share/man 底下的 man page 文件.</p><p><code>whereis -l</code> 确认 whereis 查看的目录</p><p>local [-ir] keyword<br>    -i 忽略大小写的差异<br>    -c 不输出文件名，仅计算找到的文件数量<br>    -l  仅输出几行的意思，如五行， -l 5<br>    -S 输出locate 所使用的数据库文件的相关信息，包括该数据库记录的文件/目录数量等.<br>    -r  后面可接正规表示法的显示方式</p><p>locate 寻找的数据是由已建立的数据库 /var/lib/mlocate/ 里面的数据所搜寻的，所有没有直接在硬盘搜寻.<br>有时会找不到文件，这是数据库没有更新，输入 <code>updatedb</code>， updatedb指令会去读取 /etc/updatedb.conf 这个配置文件的设定，然后再去硬盘里面进行搜寻文件名的动作， 此动作可能会耗时几分钟.</p><p>find<br>与时间有关的选项:有 -atime，-ctime，-mtime，以 -mtime 为例</p><p>-mtime n: n为数字，意义为在n天之前的[一天之内]被更动过内容的文件;<br>-mtime +n : 列出在n 天之前(不含n天本身)被更动文件内容的文件名<br>-mtime -n: 列出在n天之内(含n天本身)被更动的文件<br>-newer file : file为一个存在的文件，列出比file还要新的文件名.</p><p>如<br>    find / -mtime 0    (0代表目前的时间，所以，从现在开始到24小时前)<br>    find / -mtime 3  (三天前的24小时内)<br>    find /etc -newer /etc/passwd</p><p>find 路径 -user name(指用户名)  找出此用户的所有文件</p><p>-name filename :搜寻文件名为filename的文件<br>-size [+-]SIZE : 搜寻比SIZE还要大(+)或小(-)的文件，这个SIZE的规格有:  c:代表byte，   k :代表1024bytes. 所以，要找比50KB还要大的文件，就是  { -size +50k }<br>-type TYPE :  搜寻文件的类型为TYPE的，类型主要有:一般正规文件(f)，装置文件(b，c)，目录(d)，链接文件(l)，socket(s)，FIFO(p).<br>-perm mode :搜寻文件权限等于mode的文件 ，mode类似chmod的属性值，如-rwsr-xr-x的属性为4755.<br>-perm -mode  : 搜寻文件权限必须要全部囊括mode的权限的文件，如:<br><code>-rwsr-xr-x </code>包括 <code>-rwxr--r--</code>.<br>-perm /mode   搜寻文件权限包含任一mode的权限的文件</p><p>find / -name “<em>passwd</em>“   找出有含”passwd”词的文件<br>find /run -type s  </p><p>b 块设备文件　<br>f 普通文件　　<br>c 字符设备文件　　<br>p 命名管道　　　<br>d 目录文件<br>l 符号链接</p><ul><li>ls -F  　<br>  目录后加<code>／</code>　<br>  可执行文件加<code>*</code><br>  在链接文件后加<code>＠</code></li><li>ls<br>  目录为蓝色<br>  普通文件为黑色（白色）　<br>  可执行为绿色。</li></ul><h2 id="常用文件"><a href="#常用文件" class="headerlink" title="常用文件"></a>常用文件</h2><p>/etc/passwd   root 和其他使用者的账号相关的信息<br>/etc/shadow   记录个人密码<br>/etc/group   所有组</p><p>/proc 目录下存放着内核有关系统状态到各种信息。在系统运行时，内核会随时向这个目录写入数据。这是操作系统向用户提供的一条通往内核到道路，用户甚至可以通过向/proc 目录下 文件 写入数据来修改操作系统参数。</p><p><strong>在linux底下，文件能否执行，取决于是否具有X权限，跟文件后缀没有关系.</strong><br><strong>当你对一个文件具有W权限时，你可以具有写入/编辑/新增/文件内容的权限，但是并不具备有删除该文件本身的权限!</strong></p><p>linux的文件是<strong>没有</strong>所谓的扩展名的</p><p>-l 实体链接(hard link)<br>-s 符号链接(symbolic link)</p><h3 id="SUID"><a href="#SUID" class="headerlink" title="SUID"></a>SUID</h3><p>当s这个标志出现在文件拥有者的x权限上时，此时就被称为 Set UID ，简称SUID.<br>SUID要求:<br>SUID 权限仅对二进制程序(binary program)有效;<br>执行者对于该程序需要有x的可执行权限;<br>仅在执行程序过程中有效;<br>执行者将具有该程序拥有者(owner)的权限</p><p>SUID仅可用在binary program上，不能够用在shell script 上 ， 这是因为shell script 只是将很多binary执行文件叫进来执行而已! SUID 对于目录也是无效的.</p><p>当s标志在群组的x时称为Set GID，SGID. 可以针对文件或目录来设定!<br>SGID<br>SGID对二进制程序有用;<br>程序执行者对于改程序来说，需具备x权限;<br>执行者在执行的过程中将会获得该程序群组的支持!</p><p>当一个目录设定SGID的权限之后，将具有以下功能:<br>用户若对此目录有r与x的权限时，该用户能够进入该目录;<br>用户在此目录下的有效群组(effective group)将会变成该目录的群组;<br>用途: 若用户在此目录下具有w的权限(可以新建文件)，则使用者所建立的新文件，该新文件的群组与此目录的群组相同;</p><p>Sticky Bit，SBIT目前只针对目录有效，对于文件已经无效.<br>作用如下: 当甲这个用户于A目录是具有群组或其他人的身份，并且拥有该目录w的权限，这表示甲用户对该目录内任何人建立的目录或文件均可进行”删除/更名/搬移”等操作.不过，如果将A目录加上了SBIT的权限项目时，则甲1只能针对自己建立的文件或目录进行删除之类的动作，而无法删除他人的文件.</p><p>SUID 4<br>SGID 2<br>SBIT 1</p><h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><p>LVM 与 软件磁盘阵列(software raid)，可以将一个分区盘格式化为多个文件系统，也能够将多个分区盘合成一个文件系统</p><p>通常我们可以称呼一个可被挂载的数据为一个文件系统而不是一个分区盘</p><p>较新的操作系统的文件数据除了文件实际内容外，通常含有非常多的属性.  文件系统通常会将这两部分的数据分别放在不同的区块，权限与属性放置到inode中，至于实际数据则放置到data block 区块中. 还有一个超级区块(superblock)会记录整个文件系统的整体信息，包括inode与block的总量\使用量\剩余量等.</p><p>inode: 记录文件的属性，一个文件占用一个inode，同时记录此文件的数据所在的block号码;<br>block  : 实际记录文件的内容，若文件太大，会占用多个block</p><p>文件系统一开始就将inode 与block规划好了，除非重新格式化(或者利用resize2fs 等指令变更文件系统的大小)，否则inode 与block固定后就不再变动.</p><p>文件系统一般有多个区块群组(block  group)，每个区块群组都有独立的inode/block/superblock系统.</p><p>inode记录的文件数据: 该文件的读取模式: 该文件的拥有者与群组;  该文件的容量;  该文件建立或状态改变的时间; 最近一次的读取时间:<br>最近修改的时间; 定义文件特性的旗标(flag)，如 SetUID…;<br>该文件真正内容的指向(pointer);</p><p>每个inode 大小均为固定为128bytes(新的ext4 与xfs可设定到256bytes)<br>每个文件都仅会占用一个inode而已<br>系统读取文件时需要找到inode，并分析inode所记录的权限与用户是否符合，若符合才能够开始实际读取block的内容.</p><p>Superblock是记录整个filesystem相关信息的地方，主要记录<br>block 与inode的总量;<br>未使用与已使用的inode/block数量;<br>block 与inode的大小1(block 为1，2，4K，inode为128bytes或256bytes)<br>filesystem 的挂载时间\最近一次写入数据的时间\最近一次检验磁盘的时间等文件系统的相关信息<br>一个valid bit 数值，若此文件系统已被挂载，则valid bit 为0，若未被挂载，则valid bit 为 1.</p><p>superblock 为1024bytes.  一个文件系统应该仅有一个superblock而已， 事实上除了第一个blockgroup 内会含有superblock之外，后续等等block group 不一定含有superblock，而若有superblock则该superblock主要是作为第一个block group 内superblock </p><p>当我们在Linux下建立一个目录时，文件系统会分配一个inode与至少一块block给该目录.  其中，inode记录该目录的相关权限与属性，并可记录分配到的block号码;而block则是纪录在这个目录下的文件名与该文件名占用的inode号码数据.</p><p>用 <code>ll /</code>时，出现的目录几乎都是1024的倍数，，因为每个block的数量都是1K，2K，4K!</p><p>在目录底下的文件数如果太多而导致一个block无法容纳下面所有的档名与inode对照表，linux会给予该目录多一个block.</p><p>我们将inode table 与 data block 称为数据存放区域， 至于其他如superblock\block bitmap\inode bitmap 等区段就被称为metadata(中介资料).</p><p>传统文件系统 : ext2/ minix /MS-DOS / FAT(用vfat模块) /iso9660;<br>日志式文件系统:  ext3/ ext4 /ReiserFS / Windows’NTFS /IBM’s JFS/<br>SGI’s XFS / ZFS<br>网络文件系统 :　NFS / SMBFS</p><p>查看linux 支持的文件系统有哪些: ls -l  /lib/modules/$(uname -r)/kernel/fs</p><p>系统目前已加载到内存中的支持的文件系统有:  cat /proc/filesystems</p><p>xfs 在资料的分布上，主要划分为三个部分，资料区(data section)\一个文件系统活动登录区(log section)以及一个实时运作区(realtime section).</p><p>与ext不同的是，xfs的block与inode 有多种不同的容量可供设定，block容量可由512bytes-64K调配，不过，Linux的环境下，由于内存控制的关系(页面文件pagesize的容量之故)，因此最高可以使用的block大小为4K.至于inode容量可由256bytes到2M.</p><p>xfs 的数据区的存储区群组(allocation groups， AG)，可以认为相当与ext的block群组(block groups) ，只是inode与block是动态产生.</p><p>当有文件要被建立时，xfs会在这个区段里面找一个到数个的extent区块，将文件放置在这个区块内，等到分配完毕后，再写入到data section 的inode与block. .这个extent区块的大小得要在格式化的时候就先指定，为4K-1G.一般非磁盘阵列默认64k容量，而具有类似磁盘阵列的stripe情况下，则建议extent设定为与stripe一样大最好，</p><p>UUID : 全局单一标识符(universally unique identifier) ，Linux 会将系统内所有的装置都给予一个独一无二的标识符，这个标识符可以拿来作为挂载或者是使用这个装置/文件系统用了.</p><blockquote><p>blkid : 显示UUID</p></blockquote><blockquote><p>parted device_name print : 列出磁盘信息</p></blockquote><p>hard link :如果将任何一个文件名删除，其实inode与block都还是存在的.  无论使用哪个文件名来编辑，最终的结果都会写入到相同的inode与block中，均能进行数据的修改.</p><p>hard link 仅能在单一文件系统中进行，不能跨文件系统， 也不能link 目录</p><p>ln [-sf] 来源文件 目标文件<br>-s 如果不加任何参数就进行连接，那就是hard link ，加 -s 就是symbolic link .<br>-f  如果目标文件 存在时， 就主动的将目标文件直接移除后再建立.</p><h2 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h2><p>gdisk 新建分区  ，文件系统ID ， 一般Linux是8200/8300/8e00 三种， windows几乎都用0700 .<br>可以在gdisk内 输入[ L ]来显示文件系统ID.</p><p>partprobe : 更新Linux核心的分区表信息</p><p>MBR 分区表请使用fdisk分区，GPT分区表请使用gdisk分区.不要在MBR分区上使用gdisk，也不要在GPT上面使用fdisk!!!!</p><p>gdisk 装置名称     如: gdisk /dev/vda</p><p>格式化，也称 建置文件系统(make filesystem)， 所以使用指令mkfs，以格式化fs<br>xfs 用 mkfs.xfs    ext4 用 mkfs.ext4</p><p>mkfs.xfs [-b bsize] [-d parms] [-i parms] [-l parms] [-L label] [-f] [-r parms] 装置名称<br>(底下只要涉及数值是，默认单位bytes，可以用k，m，g，t，p(小写)来解释)，而s表示是sector的个数)<br>    -b :　后面接的是block容量，可由512到64k，不过linux最大限制4k.<br>    -d : 后面接data section 的相关参数值，主要有:<br>    agcount = :设定需要几个存储群组的意思(AG)，通常与CPU有关<br>    agsize = : 每个AG设定为多少容量的意思<br>    file : 指的是 格式化的装置是个文件而不是个装置<br>    size : data section的容量<br>    su : 当有RAID 时，stripe数值的意思，与sw搭配使用<br>    sw : 当有RAID是，用于存储数据磁盘数量<br>    sunit : 与su相当，不过单位使用的是 几个sector<br>    swidth : su*sw的数值，但是以几个sector大小来设定<br>    -f 如果装置内已经有文件系统，只需要-f 来强制格式化<br>    -i : 与inode 有较相关的设定，主要有<br>        size : 最小 256bytes，最大2k ，一般256就足够了<br>        internal=[0/1] : log装置是否为内建? 预设为1 内建<br>        logdev=device : log装置为后面接的那个装置，需设定internal =0<br>        size : 指定这块登录区的容量，通常最小512，通常2M以上<br>    -L : 后面接这个文件系统的标头名称 Label name<br>    -r : 指定realtime section的相关设定值，<br>        extsize: extent数值，一般不须设定，但有RAID时，最好设定与swidth的数值相同，最小为4k ，最大为1G</p><p>磁盘阵列(RAID)就是通过将文件先细分为数个小型的分区区块(stripe)之后，然后将众多的stripes分别放到磁盘阵列里面的所有磁盘，所以一个文件时被同时被到多个磁盘去.<br>为了文件的完整性，所以在这些磁盘里面，会保留数个(与磁盘阵列的规划有关)备份磁盘(parity disk)，以及可能会保留一个以上的备用磁盘(spare disk)， 这些区块基本会占用掉磁盘阵列的总容量，<br>stripe 的大小大多介于4k 到1m之间，这与你磁盘阵列卡支持的项目有关.当系统大多是大型文件时，stripe可以设定大一些，这样磁盘阵列读/写的频率会减低，效能会提升.如果用于系统，那么小文件比较多的情况下，sripe建议大约在64K左右，</p><p>mkfs.ext4 [-b size] [-L label] 装置名称<br>-b : 设定block大小，有1k ，2k ， 4k 的容量.<br>-L : 后面接这个装置的名称</p><p>xfs_respair [-fnd] 装置名称<br>-f : 后面的装置其实是个文件而不是实体装置<br>-n: 只检查并不修改文件系统的任何数据<br>-d : 通常用在单人维护模式底下，针对根目录进行检查与修复的动作，很危险.</p><p>xfs_repair 可以检查/修复文件系统，但是修复时该文件系统不能被挂载.但是根目录无法被卸载，如果根目录出现问题，这时得进入单人维护或者救援模式，然后透过-d 这个选项来处理</p><p>fsck.ext4 是个综合指令，如果针对ext4 ，建议直接使用fsck.ext4来检查</p><p>fsck.ext4 [-pf] [-b superblock] 装置名称<br>-p : 当文件系统在修复时，若有需要回复Y的动作时，自动执行Y<br>-f : 强制检查!  一般来说，如果fsck没有发现任何unclean 的旗标，不会主动进入细部检查的，<br>-D : 针对文件系统下的目录进行优化配置<br>-b : 后面接superblock 的位置， 一般来说这个选项用不到，但是如果你的superblock因故损毁是，透过这个参数即可利用文件系统内备份的superblock来尝试救援.一般来说，superblock 备份在: 1k block放在8193，<br>2k放在16384， 4k block 放在32768</p><p>单一文件系统不应该被重复挂载在不同的挂载点(目录)中;<br>单一目录不应该重复挂载多个文件系统<br>要作为挂载点的目录，理论上应该都是空目录才是.</p><p>如果你要用来挂载的目录里并不是空的，那么挂载了文件之后，原目录下的东西就会暂时的消失.</p><p>mount -a 依照配置文件/etc/fstab的数据将所有未挂载的磁盘都挂载上来<br>mount  -l   只输入mount会显示目前挂载的信息.加上 -l 可增列label名称!<br>-t : 可以加上文件系统种类来指定欲挂载的类型.<br>-o: 后面可以接一些挂载是额外加上的参数:<br>    async，sync:此文件系统是否使用同步写入(sync)或异步(async)的内存机制，预设为async.<br>    atime，noatime:是否修订文件的读取时间(atime).为了效能，某些时刻可使用noatime<br>    ro，rw: 挂载文件系统成为只读(ro)，或可擦写(rw)<br>    auto，noauto : 允许此filesystem被以mount -a 自动挂载(auto)<br>    dev，nodev : 是否允许此filesystem上，可建立装置文件<br>    suid， nosuid : 是否允许filesystem含有suid/sgid 的文件格式<br>    exec，noexec : 是否允许此filesystem上拥有可执行binary文件<br>    user，nouser : 是否允许此filesystem上任何使用者执行mount.一般来说，mount仅有root可以执行，但下达user参数，则可让一般user也能够对此partition进行mount.<br>    defaults : 默认值为: rw ，suid ， dev， exec，auto，nouser，async<br>    remount : 重新挂载</p><p>Linux  中有两类设备文件：字符设备文件和块设备文件。字符设备又称 顺序访问设备  ，如：磁带，串行电路。<br>块设备又称 随机访问设备，如：磁盘。</p><p>拥有某个设备文件并不意味一定有一个相对应的硬件设备存在，只是表明Linux有处理设备的“潜能”.<br>设备文件可以用 mknod 命令来创建</p><p>umount [-fn] 装置文件或挂载点<br>    -f : 强制卸除，可用在类似网络文件系统(NFS)无法读取的情况下;<br>    -l : 立刻卸载文件系统，比-f还强<br>    -n : 不更新/etc/mtab 情况下卸除</p><p>mknod 装置文件名 [bcp] [Major] [Minor]<br>-b : 设定装置名称为一个周边存储设备文件，如硬盘<br>-c: 设定装置名称为一个周边输入设备文件，如鼠标<br>-p: 设定装置名称为一个FIFO文件;<br>Major : 主要装置代码<br>Minor: 次要装置代码</p><p>xfs_admin [-lu] [-L label] [-U uuid] 装置文件名<br>-l : 列出这个装置的label name<br>-u: 列出这个装置的UUID<br>-L: 设定这个装置的Label name<br>-U: 设定这个装置的UUID</p><p>tune2fs [-l] [-L Label] [-U uuid] 装置文件名<br>-l : 类似dumpe2fs -h 的功能 ， 将superblock内的数据读出来<br>-L : 修改LABEL name<br>-U: 修改UUID </p><p>系统挂载的一些限制:<br>根目录/ 是必须挂载的 ， 而且一定要先于其他 mount point 被挂载进来.</p><p>其他 mount point 必须 为已建立的目录，可任意指定，但一定要遵守必须的系统目录架构原则(FHS)</p><p>所有mount point 在同一时间内，只能挂载一次</p><p>所有partition在同一时间内，只能挂载一次</p><p>如若进行卸载，你必须先将工作目录移到 mount point(及其子目录)之外</p><p>/etc/fstab (filesystem table) 就是利用mount指令进行挂载是 ， 将所有的选项与参数写入到这个文件中.</p><p>remount: 重新挂载，在系统出错，或重新更新参数时.</p><p>文件系统或磁盘的装置文件名，如 /dev/vda2<br>文件系统的UUID名，如UUID =xxx<br>文件的LABEL 名称 ，如 LABEL =xxx</p><p>mount -o loop /<strong>/</strong>/**.iso(iso文件路径) 挂载路径<br>可以透过loop来挂载iso文件.</p><p>parted [装置] [指令 [参数]]<br>新增分区: mkpart [primary | logical | extended] [ext4 | vfat | xfs] 开始 结束<br>显示分区: print<br>删除分区: rm [partition]</p><p>parted [装置] mklabel gpt      转化分区表格式</p><h2 id="压缩相关"><a href="#压缩相关" class="headerlink" title="压缩相关"></a>压缩相关</h2><p>*.Z   compress 程序压缩的文件<br>*.zip  zip程序压缩的文件<br>*.gz    gzip程序压缩的文件<br>*.bz2   bzip2程序压缩的文件<br>*.xz   xz 程序压缩的文件<br>*.tar    tar程序打包的数据，并没有压缩过<br>*tar.gz    tar程序打包过得文件，其中并且经过gzip的压缩<br>*tar.bz2   tar程序打包过的文件，经过bzip2的压缩<br>*tar.xz  tar程序的包的文件，经过xz的压缩</p><p>gzip [-cdtv#] 文件名<br>    -c : 将压缩的数据显示在屏幕上， 可透过数据流重导向来处理;<br>    -d : 解压缩的参数;<br>    -t : 可以用来检验压缩文件的一致性，看文件有无错误;<br>    -v : 可以显示出原文件/压缩文件的压缩比等信息<br>    -#:  #为数字， 代表压缩等级， -1最快，但是压缩比最差，-9最慢，但是压缩比最好.预设是-6.</p><p>在预设的状态下原本的文件会被压缩为.gz的文件，源文件就不在存在.<br>gzip压缩的文件，在windows中，可以被WinRAR/7zip等软件解压缩.</p><p>与gzip相反，gzip -z会将原本的.gz删除，恢复到原本的文件.</p><p>保留源文件<br>gzip -c  文件名 &gt; 文件名.gz</p><p>zcat 压缩文件  (查看压缩的文本文档)<br>zgrep -n ‘keyword’   压缩文件.gz     在压缩文件中查找关键词</p><p>使用znew 可以将.Z的文件转成gzip的格式</p><p>bzip2 [-cdkzv#] 文件名<br>    -c:将压缩的过程产生的数据显示到屏幕.<br>    -d : 解压缩的参数<br>    -k: 保留源文件，而不会删除<br>    -z: 压缩的参数(默认值，可以不加)<br>    -v: 可以显示源文件/压缩文件的压缩比等信息.<br>    -#: 与gzip同样，都是在计算压缩的参数，-9最佳，-1最快</p><p>对于大文件，bzip2压缩时间比gzip要久的多.</p><p>xz [-dtlkc#] 文件名<br>-d : 解压缩<br>-t: 测试压缩文件的完整性，<br>-l : 列出压缩文件的相关信息<br>-k : 保留原来的文件不删除<br>-c : 就是将数据输出到屏幕<br>-#: </p><p>windows 中的 WinRAR 支持 . tar.gz 文件的解压缩</p><p>tar [-z| -j| -J] [cv] [-f 待建立的新文件名] 要被压缩打包的目录或文件       (打包与压缩)<br>tar [-z | -j | -J] [tv] [-f 已有的tar文件名]          (查看档名)<br>tar [-z | -j | -J] [xv] [-f 已有的tar文件名] [-C 目录]    (解压缩)</p><p>-c : 建立打包文件<br>-t : 查看打包文件的内容含有哪些文件<br>-x : 解打包或解压缩， 可以搭配 -C 在特定的目录解开</p><p>(-c ， -t ， -x 不可同时出现在一串指令中.)</p><p>-z : 透过gzip 进行压缩/解压缩，此时文件名最好为*.tar.gz  .<br>-j : 透过bzip2 进行        ， *.tar.bz2<br>-J : 透过xz      ，    * .tar.xz<br>(-z ， -j ， -J 不可同时出现在同一指令列中.)</p><p>-v : 在压缩/解压缩的过程中，将正在处理的文件名显示出来.<br>-f filename : -f 后面要接被处理的文件名<br>-C : 在解压缩是，要在特定的目录解压缩.</p><p>-p : 保留备份数据的原本权限与属性<br>-P :保留绝对路径</p><p>压缩 : tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称<br>查询 : tar -jtv -f  filename.tar.bz2<br>解压缩 : tar -jxv -f filename.tar.bz2 -C 要解压缩的目录<br>filename.tar.bz2是自己取得名字， tar并不会自动产生文件名.如果不加[-z | -j | -J ] 的话，文件名最好取 *.tar . </p><p>解压文件中的一个文件:<br>tar -jxv -f 压缩文件名.tar.bz2  待解压的文件</p><h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><p>vim 中忽略 查找字符大小写<br>:set ignorecase<br>重新开启大小写敏感<br>:set noignorecase</p><p>：syntax on  打开语法高亮功能。</p><p>:set autoindent   自动缩进</p><p>一个TAB 键 缩进 8 个空格数  （也就是一个制表符代表8个空格）， 可以通过 set shiftwidth  ， 改变空格数<br>如：   ：set shiftwidth=4.</p><p>vim 的配置文件叫做vimrc， 通常位于/etc/vim 目录下。 </p><p>vim 中文乱码<br>1.Linux默认支持的语言数据，这与 /etc/locale.conf有关;<br>2.你的终端界面(bash)的语言，这与LANG，LC_ALL这几个变量有关:<br>3.你的文件原本的编码;<br>4.开启终端机的软件，例如在GNOME底下的窗口接口;</p><h2 id="FHS"><a href="#FHS" class="headerlink" title="FHS"></a>FHS</h2><p><a href="FHS.pdf">点击下载</a></p><h2 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h2><h3 id="IP-设置-配置文件"><a href="#IP-设置-配置文件" class="headerlink" title="IP 设置 配置文件"></a>IP 设置 配置文件</h3><blockquote><p> /etc/network/interfaces</p></blockquote><pre class="line-numbers language-none"><code class="language-none">auto eth0iface eth0 inet static&#x2F;dhcpaddress 192.168.0.116gateway 192.168.0.1netmask 255.255.255.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="DNS-配置文件"><a href="#DNS-配置文件" class="headerlink" title="DNS 配置文件"></a>DNS 配置文件</h3><blockquote><p>/etc/resolv.con</p></blockquote><pre class="line-numbers language-none"><code class="language-none">nameserver 8.8.8.8nameserver 114.114.114.114<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="临时IP地址（电脑重启后失效）"><a href="#临时IP地址（电脑重启后失效）" class="headerlink" title="临时IP地址（电脑重启后失效）"></a>临时IP地址（电脑重启后失效）</h3><p>自动获取IP</p><blockquote><p>dhclient eth0</p></blockquote><p>手动获得IP</p><blockquote><p>ifconfig eth0 192.168.1.10/24</p></blockquote><h2 id="重启网络"><a href="#重启网络" class="headerlink" title="重启网络"></a>重启网络</h2><blockquote><p>service networking restart</p></blockquote><blockquote><p>systemctl restart networking.service </p></blockquote><h3 id="network-manager"><a href="#network-manager" class="headerlink" title="network-manager"></a>network-manager</h3><p>这是一套网络管理软件</p><pre><code>`sudo apt install networkmanager`安装NetworkManager包后，命令行中多出两个命令，一个是nmcli纯命令的网络配置工具，一个是nmtui的终端图形配置工具。确定在文件/etc/network/interfaces中没有手动配置过网络，如果有，里面的内容应该删掉nmtui打开图形界面，直接配置就好，当然也可以在这里设置无线连接的。sudo systemctl restart NetworkManager.service 重启服务</code></pre><h3 id="无线网络"><a href="#无线网络" class="headerlink" title="无线网络"></a>无线网络</h3><h4 id="配置无线网络"><a href="#配置无线网络" class="headerlink" title="配置无线网络"></a>配置无线网络</h4><blockquote><p> vim /etc/network/interfaces</p></blockquote><pre class="line-numbers language-none"><code class="language-none">auto wlan0iface wlan0 inet dhcppre-up ip link set wlan0 uppre-up iwconfig wlan0 essid ssidwpa-ssid ssidwpa-psk password<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><a href="https://wenqixiang.com/linux-wireless-configuration-in-terminal-command-line/">https://wenqixiang.com/linux-wireless-configuration-in-terminal-command-line/</a></p></blockquote><p>而Debian系列的系统现在已经没有/etc/wpa.conf文件了，配置这个文件并不能生效还会照成网卡无法使用，折腾了老半天才知道应该配置的是/etc/wpa_supplicant/wpa_supplicant.conf</p><h4 id="静态ip"><a href="#静态ip" class="headerlink" title="静态ip"></a>静态ip</h4><blockquote><p>vim /etc/network/interfaces</p></blockquote><pre class="line-numbers language-none"><code class="language-none"># 第一个网卡auto wlan0allow-hotplug wlan0           # 允许热插拔（非必须配置） iface wlan0 inet static       # 采用静态IP分配的方式address  192.168.199.249      # 为树莓派设置的ip （详见下面介绍）netmask  255.255.255.0        # 子网掩码 （详见下面介绍）gateway  192.168.199.1        # 网关地址 （详见下面介绍）wpa-ssid  yourssid            # 你要连接的wifi名称wpa-psk   yourpassword        # 你要连接的wifi密码作者：fangle链接：https:&#x2F;&#x2F;juejin.im&#x2F;post&#x2F;592259d72f301e006b18584e来源：掘金<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="多个网络"><a href="#多个网络" class="headerlink" title="多个网络"></a>多个网络</h4><blockquote><p>vim /etc/wpa_supplicant/wpa_supplicant.conf</p></blockquote><pre class="line-numbers language-none"><code class="language-none">ctrl_interface&#x3D;DIR&#x3D;&#x2F;var&#x2F;run&#x2F;wpa_supplicant GROUP&#x3D;netdevupdate_config&#x3D;1country&#x3D;CN<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none"># 第一个无线连接network&#x3D;&#123;    ssid&#x3D;&quot;xxxx&quot;      # wifi 名称    psk&#x3D;&quot;xxxx&quot;       # wifi 密码    key_mgmt&#x3D;WPA-PSK # 加密方式&#125;# 第二个无线连接network&#x3D;&#123;    ssid&#x3D;&quot;xxxx&quot;    psk&#x3D;&quot;xxxx&quot;    key_mgmt&#x3D;WPA-PSK &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">priority&#x3D;999  # priority指连接优先级，数字越大优先级越高（不可以是负数）scan_ssid&#x3D;1  # 如果你的无线接入点是隐藏的，该配置就是必须的<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h4><blockquote><p>ifup wlan0</p></blockquote><blockquote><p>ifdown wlan0</p></blockquote><blockquote><p>iwlist wlan0 scan </p></blockquote><blockquote><p>iwlist wlan0 scan | grep ESSID</p></blockquote><h2 id="开机启动"><a href="#开机启动" class="headerlink" title="开机启动"></a>开机启动</h2><p>很多新版本系统都没有rc.local文件了，比如Debian 9、Ubuntu 17.10、Ubuntu 18.04。这时候就需要我们手动设置下。</p><blockquote><p><a href="https://www.moerats.com/archives/623/">https://www.moerats.com/archives/623/</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Manjaro 使用初始化</title>
      <link href="/2020/05/25/manjaro-shi-yong-chu-shi-hua/"/>
      <url>/2020/05/25/manjaro-shi-yong-chu-shi-hua/</url>
      
        <content type="html"><![CDATA[<p>在一年以前就听说了<code>Manjaro</code>，所以现在想用它来替代日常使用的windows系统。实际体验下来，还是不错的。</p><p>在以前，我用过 Debian。老实说，体验不是很好。这次下载的是 Manjaro XFCE 桌面版本。我个人不推荐用Gnome，XFCE 是 Manjaro 的旗舰版本，在稳定和外观上不输于 Gnome。</p><p><img src="1.png"></p><p>看一下这个桌面，amazing，awesome，wonderful 。。。<del>逃</del></p><p><img src="2.png"></p><h2 id="更新源"><a href="#更新源" class="headerlink" title="更新源"></a>更新源</h2><p>安装完系统之后的第一件事，切换为国内源</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> pacman-mirrors -i -c China -m rank<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>升级一下系统</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> pacman -Syyuu<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后我们安装一个新的包管理软件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">\</span><span class="token punctuation">\</span>安装yay$ <span class="token function">sudo</span> pacman -S yay<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="科学上网"><a href="#科学上网" class="headerlink" title="科学上网"></a>科学上网</h2><p>这个是生活必需品，这里我们使用 <code>Qv2ray</code>。这个是一个兼容 Windows 和 Linux 的工具，开发的大佬很积极，有什么问题可以去他们的 Github 主页提 Issue </p><p><img src="3.png"></p><p>直接使用 <code>pacman</code> 或 <code>yay</code> 来安装 qv2ray , 可能会面对包找不到或安装速度过慢的问题，这里我们先添加 arch 的软件源可解决这些问题</p><blockquote><p><a href="https://deali.gitee.io/Linux/Manjaro%E9%85%8D%E7%BD%AE/">https://deali.gitee.io/Linux/Manjaro配置/</a></p></blockquote><p>首先添加 <code>Archlinuxcn软件源</code>，不然很多包是没有的</p><p>编辑<code>/etc/pacman.conf</code>文件，在文件的末尾添加以下内容：</p><pre class="line-numbers language-none"><code class="language-none">[archlinuxcn]Server &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;archlinuxcn&#x2F;$arch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>附社区镜像列表：<a href="https://github.com/archlinuxcn/mirrorlist-repo">https://github.com/archlinuxcn/mirrorlist-repo</a></p><p>然后执行如下命令：</p><pre class="line-numbers language-none"><code class="language-none">sudo pacman -Sy archlinuxcn-keyring havegedsudo systemctl enable havegedsudo systemctl start havegedsudo pacman-key --initsudo pacman-key --populate manjarosudo pacman-key --populate archlinuxsudo pacman-key --populate archlinuxcn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>之后，开始安装qv2ray：<br><code>pacman -S qv2ray</code></p><p>然后，安装v2ray核心：<br><code>sudo pacman -S v2ray</code></p><p>搞定，顺便说下，这个qv2ray是支持trojan协议的，你可以到github下找到补丁安装使用。</p><p>如果你安装完Qv2ray,配置什么的没有错误.还是没有办法上网,请检查你的DNS是否被污染…(亲身经历,痛)</p><p>解决DNS污染的方法(Firefox):</p><p>把 <code>Proxy DNS when using SOCKS v5</code> 选项的勾打上</p><p><img src="4.png"></p><h2 id="Windows远程桌面"><a href="#Windows远程桌面" class="headerlink" title="Windows远程桌面"></a>Windows远程桌面</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> pacman -Syu remmina freerdp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="7.png"></p><h2 id="中文输入法"><a href="#中文输入法" class="headerlink" title="中文输入法"></a>中文输入法</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> pacman -S fcitx-rime<span class="token function">sudo</span> pacman -S fcitx-im<span class="token function">sudo</span> pacman -S fcitx-configtool<span class="token punctuation">\</span><span class="token punctuation">\</span>然後編輯一個文件<span class="token function">sudo</span> gedit ~/.xprofile<span class="token punctuation">\</span><span class="token punctuation">\</span>在末尾添加<span class="token builtin class-name">export</span> <span class="token assign-left variable">GTK_IM_MODULE</span><span class="token operator">=</span>fcitx<span class="token builtin class-name">export</span> <span class="token assign-left variable">QT_IM_MODULE</span><span class="token operator">=</span>fcitx<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">XMODIFIERS</span></span><span class="token operator">=</span><span class="token string">"@im=fcitx"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>重啓系統，进入设置</p><p><img src="5.png"></p><p>先添加中文输入法，然后</p><p>configure &gt; Appearance &gt; Font Size<br>这里面的设置默认是 <code>0</code>， 简直坑爹，我改成了 13, 才能看到输入框。</p><h2 id="pacman-用法"><a href="#pacman-用法" class="headerlink" title="pacman 用法"></a>pacman 用法</h2><p>pacman -S [name] 安裝軟件<br>pacman -Syu 升級系統</p><p>➔ pacman -R 包名：该命令将只删除包，保留其全部已经安装的依赖关系<br>➔ pacman -Rs 包名：在删除包的同时，删除其所有没有被其他已安装软件包使用的依赖关系</p><p>➔ pacman -Ss 关键字：在仓库中搜索含关键字的包。<br>➔ pacman -Qs 关键字： 搜索已安装的包。<br>➔ pacman -Qi 包名：查看有关包的详尽信息。<br>➔ pacman -Ql 包名：列出该包的文件。</p><h2 id="启动网络服务"><a href="#启动网络服务" class="headerlink" title="启动网络服务"></a>启动网络服务</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl start NetworkManager.service<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="安装-VSCode"><a href="#安装-VSCode" class="headerlink" title="安装 VSCode"></a>安装 VSCode</h2><p>手动安装：</p><blockquote><p><a href="https://linuxhint.com/install_visual_studio_code_arch_linux/">https://linuxhint.com/install_visual_studio_code_arch_linux/</a></p></blockquote><p>上面的太麻烦，后来才知道，在Manjaro下有个<code>code-OSS</code><br><img src="9.png"></p><p>直接在<code>Package Manager</code>里面搜索下载，或者命令行安装<br><code>pacman -S code</code></p><h2 id="添加锁屏快捷键"><a href="#添加锁屏快捷键" class="headerlink" title="添加锁屏快捷键"></a>添加锁屏快捷键</h2><p>在Windows中,我们可以使用 <code>Win + L</code> 来快速锁屏.<br>Manjaro 同样可以. 我们在键盘快捷键添加如下命令</p><p><code>xflock4</code> 或 <code>dm-tool lock</code></p><p><img src="6.png"></p><h2 id="以管理员启动文件管理器"><a href="#以管理员启动文件管理器" class="headerlink" title="以管理员启动文件管理器"></a>以管理员启动文件管理器</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> thunar<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="双系统时间冲突"><a href="#双系统时间冲突" class="headerlink" title="双系统时间冲突"></a>双系统时间冲突</h2><p>如果你在同一台机器上安装有 Windows 和 Linux 两个系统,那么你的时间很可能会冲突,具体见下面</p><pre class="line-numbers language-none"><code class="language-none">sudo ln -sf &#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F;Asia&#x2F;Shanghai &#x2F;etc&#x2F;localtime设置时区的一种方式，注意：&#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F; 这个目录<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p><a href="https://mogeko.me/2019/062/">https://mogeko.me/2019/062/</a></p></blockquote><ul><li><p>查看时间设置情况：<br><code>timedatectl status</code></p></li><li><p>列出可用的时区：<br><code>timedatectl list-timezones</code></p></li><li><p>设置时区(根据上一步的时区进行设置)：<br><code>sudo timedatectl set-timezone Australia/Sydney</code></p></li><li><p>启动NTP:<br>  首先需要配置一下 <code>/etc/systemd/timesyncd.conf</code>，取消 <code>#NTP=</code> 的注释。然后填上 NTP 服务器的地址</p><p>  以下是苹果的NTP：</p>  <pre class="line-numbers language-none"><code class="language-none">NTP&#x3D;time1.apple.com time2.apple.com time3.apple.com time4.apple.com time5.apple.com time6.apple.com time7.apple.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  开启NTP<br>  <code>timedatectl set-ntp true</code></p></li><li><p>查看时间同步的情况：<br>timedatectl timesync-status</p></li><li><p>手动设置时间<br><code>sudo timedatectl set-time &quot;2013-08-11 23:56:16&quot;</code></p></li></ul><h2 id="更改锁屏壁纸"><a href="#更改锁屏壁纸" class="headerlink" title="更改锁屏壁纸"></a>更改锁屏壁纸</h2><p><code>sudo lightdm-gtk-greeter-settings</code></p><h2 id="Bugs"><a href="#Bugs" class="headerlink" title="Bugs"></a>Bugs</h2><h3 id="“This-session-is-locked”"><a href="#“This-session-is-locked”" class="headerlink" title="“This session is locked”"></a>“This session is locked”</h3><p>有时候你离开电脑一段时间，打开屏幕，就会出现下图的情况：<br><img src="8.jpg"></p><p>这时，你可以使用 <code>Alt + Ctrl + F6</code> 来调出其他终端窗口，登录你的用户，然后输入下面命令解锁</p><pre class="line-numbers language-none"><code class="language-none">loginctl list-sessions列出所有的 sessions，找到对应的 IDloginctl unlock-session [id]解锁对应 ID 的 session<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="实际体验"><a href="#实际体验" class="headerlink" title="实际体验"></a>实际体验</h2><p>感觉能满足大部分日常需要,毕竟现在基本是一个浏览器走天下.不得不说,Arch的社区驱动做的真好,软件该有的都有了.<br>Manjaro给我一个很良好的印象就是: 安装系统后就能使用,而不是像Debian那样,还需要去找一些硬件的驱动.</p><p>相见恨晚.</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.jianshu.com/p/ea651cdc5530">https://www.jianshu.com/p/ea651cdc5530</a></p><p><a href="https://mrswolf.github.io/zh-cn/2019/05/24/manjaro%E8%B8%A9%E5%9D%91%E8%AE%B0/">https://mrswolf.github.io/zh-cn/2019/05/24/manjaro%E8%B8%A9%E5%9D%91%E8%AE%B0/</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>女朋友来查你手机了!</title>
      <link href="/2020/04/29/shou-ji-shu-ju-yin-si-chu-tan/"/>
      <url>/2020/04/29/shou-ji-shu-ju-yin-si-chu-tan/</url>
      
        <content type="html"><![CDATA[<audio id="audio" controls="" autoplay="true" loop="true" volume="0。5">      <source id="mp3" src="1。mp3" ></audio><p>免责声明: 这一篇只是总结我这些年的使用安卓手机的一些经验，并不一定准确。有不足之处，恳请指正<br>这里演示使用的是 <code>安卓手机</code>， 并且系统是<code>魔趣安卓9.0</code></p><h2 id="手机全加密"><a href="#手机全加密" class="headerlink" title="手机全加密"></a>手机全加密</h2><p>首先，无论怎样，首先第一件事: <code>加密你的手机</code><br>我不知道第三方的安卓手机厂商，有没有启用安卓系统的加密功能。但是，建议检查一下，并开启。<br>魔趣默认没有开启加密。</p><p>开启加密的好处</p><ul><li><p>开机必须用<code>键盘密码</code>解锁，无法使用指纹解锁<br>  (这个好处就不需要说明了吧，睡觉前重启一下手机。就算女朋友趁你睡了用你的手来解锁，也没用)</p></li><li><p>在不知道密码的情况下，无法通过第三方recovery来获取手机的数据<br>  (手机丢了，数据别人也看不到)</p></li></ul><p>加密的坏处:</p><ul><li>在开机后未解锁，无法正常使用SIM卡，<strong>闹钟无法工作</strong></li><li>如果要升级系统，可能需要先解密DATA分区，要求你的第三方recovery必须具备解密功能</li><li>一堆莫名奇妙的bugs。 (因为我是用的魔趣社区的包，老实说，稳定性欠佳)</li><li>开机速度会有一点慢。但是进入系统后，跟普通使用场景并无二样(个人体验)</li><li>开启加密后，是不可逆的。 意味着，手机无法再回到加密前的状态</li></ul><p>尽管开启加密有很多小毛病，但是我还是要使用加密的功能。单单<code>安全</code>这个因素，缺陷我可以视而不见。</p><p>一般在 setting 里面， 有个 encryption 的选项，按照提示操作就行，确保手机电量充足<br><img src="1.png" width="30%" height="30%"></p><h2 id="隐藏图库某些图片"><a href="#隐藏图库某些图片" class="headerlink" title="隐藏图库某些图片"></a>隐藏图库某些图片</h2><p>这个就不需要我说明了，谁也不想打开图库，有一堆不想让别人看见的相片。<br>有时候，看一个人的电脑桌面或者一个人的手机图库。就能大概知道他/她是一个什么样的人。 所以我平时桌面图标都是隐藏的，只有一张壁纸。</p><img src="2.png" width="50%" height="50%"><p>说了一些废话，下面就说说怎么隐藏你手机图库的图片</p><img src="3.png" width="30%" height="30%"><p>看到上图， 里面有一个 <code>.nomedia</code> 的文件<br>没错，如果你的这个文件夹里面的图片不想出现在图库里，添上这一个文件即可。这个文件的作用是告知系统，不需要扫描这个文件夹下的文件，没扫描到，自然不会出现在图库里</p><h2 id="手机多开用户"><a href="#手机多开用户" class="headerlink" title="手机多开用户"></a>手机多开用户</h2><p>说这个功能之前，先看下面的图片，虽然可能有些双标的意思，但是你能了解到多用户是很有用的</p><img src="4.png" width="50%" height="50%"><p>现在安卓的多用户功能基本是标配。 魔趣的多用户，用起来没有上图说的那么方便(不知国内其他ROM厂商优化情况是怎样)<br>这个功能我也不怎么用，因为两个账号肯定会多占用更多的硬件资源，管理起来更麻烦，而且我也没有搞清楚它具体的原理，哪些权限是共用的? 不要因为有多账户，就开一个用户给他人用你的手机，这个是很危险的!</p><p>下图是增加用户的方法<br><img src="5.png" width="30%" height="30%"><br><img src="6.png" width="30%" height="30%"></p><h2 id="百度云手机"><a href="#百度云手机" class="headerlink" title="百度云手机"></a>百度云手机</h2><p>百度最近发布了一项新的云服务，具体报道如下</p><blockquote><p><a href="https://tech.sina.com.cn/i/2020-04-15/doc-iircuyvh7940769.shtml">https://tech.sina.com.cn/i/2020-04-15/doc-iircuyvh7940769.shtml</a></p></blockquote><p>简单理解: 就是你在云上多了一台手机</p><p>官网地址:</p><blockquote><p><a href="https://cloud.baidu.com/product/bac.html">https://cloud.baidu.com/product/bac.html</a></p></blockquote><p>我看了一下，申请试用的网页都打不开，还需要备案，国内传统陋习。 我就告辞了，有需要自己去研究，应该不难。<br>只要百度不倒闭，你钱包资金充足，这完全是个优秀的解决方案</p><h2 id="防窥膜"><a href="#防窥膜" class="headerlink" title="防窥膜"></a>防窥膜</h2><p>在朋友的苹果机上见过，防偷窥效果相当出色，只有在特定的角度能看清楚屏幕，显示效果也可以接受。 在其他角度，完全是黑麻麻一片。但是这个方案我也没用过，我喜欢裸奔。。。</p><h2 id="物理隔离-多个设备"><a href="#物理隔离-多个设备" class="headerlink" title="物理隔离(多个设备)"></a>物理隔离(多个设备)</h2><p>我觉得更好的方法是，不同的设备做不同的事。<br>譬如 iPad 来娱乐， 手机用来微信， PC 用于日常事务处理。甚至你可以整一个诺基亚，专门用来短信电话，你懂我意思不?<br><img src="7.jpg" width="30%" height="30%"></p><p>手机里面内置了一堆的传感器，相比于 PC，毫无安全性可言。 有一条就是针对<code>微信步数</code>来的。<br>要是你 かのじょ 问你：</p><blockquote><p>大晚上的，干嘛去了？</p></blockquote><p><strong>说要早睡，结果微信步数蹭蹭上涨，不是梦游就是绿了</strong></p><p>如今的很多人，所有的事情都交给手机，无论是获取资讯，还是沟通交流，甚至编辑 excel。我是很佩服最后一种，在一小块屏幕里指指点点，居然能忍受得了。</p><p>如果使用 PC，你能使用得骚操作就多了。 隐私窗口，虚拟机，文件隐藏。 有能力的整个 Ubuntu，一般女生哪里能操作？</p><h2 id="使用匿名通讯软件"><a href="#使用匿名通讯软件" class="headerlink" title="使用匿名通讯软件"></a>使用匿名通讯软件</h2><p>骚年，你可知道 <code>telegram</code> <code>snapchat</code> 这类加密，阅后即焚软件?<br>什么，你说无法访问？ 你的姿势水平还不够高啊</p><p><img src="8.jpg"></p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p><del>好，废话说了怎么多，那问题来了，女朋友去哪里领?</del></p><p>写这篇的目的，只是图大家一个欢乐而已，同时希望各位的安全意识能够提高一点。 还有其他的招，像查看美团，支付宝，滴滴的记录。 这里，有多个账号的优势就体现出来了。 但是，我要说但是了，作为一名绅士，你出门不带个钱包吗？你钱包没有现金的吗？你可知现金是很难追踪来源和花费的，要不怎么有人家里屯了上亿的现金？</p><p>你们要明白，想查看你手机的人，不仅有 かのじょ，还有无处不在的 <code>Big Brother</code></p><p><strong>安全与便利不可兼得，一味图便利，根本毫无安全可言</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> 安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Raspberry安装Kali</title>
      <link href="/2020/04/22/raspberry-an-zhuang-kali/"/>
      <url>/2020/04/22/raspberry-an-zhuang-kali/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>手头有一个raspi,一直在吃灰.最近打算弄个Kali来用用.<br>我打算用U盘取代内存卡来安装系统,听说内存卡突然断电很容易损坏.<br><del>Kali学得好,监狱进得早</del></p><h2 id="从U盘启动系统"><a href="#从U盘启动系统" class="headerlink" title="从U盘启动系统"></a>从U盘启动系统</h2><p>查看树莓派得型号,貌似只有一些比较晚生产的型号可以从U盘启动.具体请Google</p><blockquote><p><a href="https://www.jianshu.com/p/ed327a4a6275">https://www.jianshu.com/p/ed327a4a6275</a></p></blockquote><pre class="line-numbers language-none"><code class="language-none">$ cat &#x2F;sys&#x2F;firmware&#x2F;devicetree&#x2F;base&#x2F;modelRaspberry Pi 3 Model B Rev 1.2r<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>先用内存卡刷入官方的系统,用没有桌面环境的包就行.启动系统之后,在命令行输入</p><blockquote><p><a href="https://www.jianshu.com/p/2ed5f1c6367b">https://www.jianshu.com/p/2ed5f1c6367b</a></p></blockquote><pre class="line-numbers language-none"><code class="language-none">$ echo program_usb_boot_mode&#x3D;1 | sudo tee -a &#x2F;boot&#x2F;config.txt   &#x2F;&#x2F;该命令在终端执行，会在config.txt末尾添加program_usb_boot_mode&#x3D;1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>然后,重启系统.再次进入系统之后,输入如下命令确认</p><pre class="line-numbers language-none"><code class="language-none">$ vcgencmd otp_dump | grep 17:并显示如下信息，表示成功打开17:3020000a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>之后,去kali官网下载arm版本的系统,</p><blockquote><p><a href="https://www.offensive-security.com/kali-linux-arm-images/">https://www.offensive-security.com/kali-linux-arm-images/</a></p></blockquote><p><img src="1.png"></p><p>按照刷入内存卡的方法在U盘刷入系统,推荐使用<code>rufus</code><br>注意,U盘尽量选择好一点<br><img src="2.jpeg"></p><p>U盘刷好系统后, 用一台linux系统的机器挂载U盘,我们需要修改两个文件</p><blockquote><p><a href="https://raspberrypi.stackexchange.com/questions/106762/how-to-install-kali-linux-on-a-usb-for-the-raspberrypi">https://raspberrypi.stackexchange.com/questions/106762/how-to-install-kali-linux-on-a-usb-for-the-raspberrypi</a></p></blockquote><ul><li><p>/boot/cmdline.txt<br>  root=/dev/sda2<br>  (我这里是 sda2)</p></li><li><p>/etc/fstab<br>  将 /dev/mmcblk0p1  改为 /dev/sda1<br>  将 /dev/mmcblk0p2  改为 /dev/sda2</p></li></ul><p>之后,将U盘插入你的树莓派,等待系统启动即可</p><p><em>听说树莓派4不需要怎么麻烦了,但是价格还是太高了(lll￢ω￢)</em></p><h2 id="启动-ssh-vnc"><a href="#启动-ssh-vnc" class="headerlink" title="启动 ssh | vnc"></a>启动 ssh | vnc</h2><h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><p>每次给树莓派重装系统之后,最反感的就是要接显示器和键鼠,要是遇上手头没有这些东西,简直抓狂反人类.</p><p>所以,Kali的系统就很好了,预先开启ssh,只要有网线,接上路由器,获取ip直接远程登录即可.</p><p>注意: <del>Kali默认的登录账号 <code>root</code>. 默认密码 <code>toor</code> (还是很好记的)</del><br>新的版本账号密码都为 <code>kali</code>, 如果不确定，自己 Google 一下就行</p><p>ssh之后,就是开启vnc. vnc已经预安装了,我们启动就行</p><blockquote><p><a href="http://blog.sevagas.com/?VNC-to-access-Kali-Linux-on-Raspberry-Pi">http://blog.sevagas.com/?VNC-to-access-Kali-Linux-on-Raspberry-Pi</a></p></blockquote><p>按照如下步骤</p><ul><li><p>Install TightVNC server package:</p>  <pre class="line-numbers language-none"><code class="language-none">apt updateapt-get install tightvncserver (我这里情况是执行这命令,提示已经安装)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>Install Autocutsel package to enable cut&amp;paste between client and server:</p>  <pre class="line-numbers language-none"><code class="language-none">apt-get install autocutsel<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>We will make a first run of VncServer to generate configuration files and VNC password.</p>  <pre class="line-numbers language-none"><code class="language-none">vncserver :1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  这一步会让你输入一个远程登录的密码,不同于的root账号的密码,切记</p></li><li><p>查看服务开启的情况,可以看到5901和6001端口已开启<br>  Port 5901 is VNC connection port, 6001 is X server for VNC.</p>  <pre class="line-numbers language-none"><code class="language-none">netstat -nptl <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>配置 cut 和 paste 的自启动功能<br>  目前在我的树莓派不生效……</p><p>  编辑你 root 目录下面的这个文件 <code>~/.vnc/xstartup</code><br>  增加如下内容,如有重复,记得删除</p>  <pre class="line-numbers language-none"><code class="language-none">#!&#x2F;bin&#x2F;shxrdb $HOME&#x2F;.Xresourcesxsetroot -solid greyautocutsel -fork# Fix to make GNOME workexport XKL_XMODMAP_DISABLE&#x3D;1&#x2F;etc&#x2F;X11&#x2F;Xsession<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>到这一步基本都完成，如果你远程后，是一个灰色的页面，只有一个 X 形状的光标，那请修改上面的配置文件为</p>  <pre class="line-numbers language-none"><code class="language-none">#!&#x2F;bin&#x2F;shunset SESSION_MANAGERunset DBUS_SESSION_BUS_ADDRESSstartxfce4 &amp;[ -x &#x2F;etc&#x2F;vnc&#x2F;xstartup ] &amp;&amp; exec &#x2F;etc&#x2F;vnc&#x2F;xstartup[ -r $HOME&#x2F;.Xresources ] &amp;&amp; xrdb $HOME&#x2F;.Xresourcesxsetroot -solid greyautocutsel -forkvncconfig -iconic &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><a href="https://raspberrypi.stackexchange.com/questions/60874/tightvncserver-displaying-grey-screen-on-kali-linux-upon-vnc-connection">https://raspberrypi.stackexchange.com/questions/60874/tightvncserver-displaying-grey-screen-on-kali-linux-upon-vnc-connection</a></p></blockquote></li></ul><h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><p>到这里,服务端已经搞定.我这边客户端时Windows,就下载了一个<code>vnc viwer</code><br>在输入栏输入 <code>192.168.1.103:1</code><br>192.168.1.103 是我树莓派的ip, 不要忘记后面的 <code>:1</code></p><p><img src="3.png"></p><p>输入账号: <code>root</code> （有些情况不需要，如下图，只需密码）<br>密码: 你设置服务端时<code>新设置</code>的密码</p><p><img src="4.png"></p><p>然后愉快的 <del>搞破坏</del> 玩耍吧</p><h3 id="重置-VNC-密码"><a href="#重置-VNC-密码" class="headerlink" title="重置 VNC 密码"></a>重置 VNC 密码</h3><p>有时候太久没用，忘记 VNC 的连接密码，可以用下面的方法重置</p><ol><li><p>找到当前用户的 home 文件夹，有个 <code>.vnc</code> 的隐藏文件<br>cd /root/.vnc/</p></li><li><p>强制移除里面的 passwd 文件<br>rm -rf passwd</p></li><li><p>命令行输入 <code>vncserver</code>，重新设置密码</p></li></ol><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>这里附上树莓派的一些使用技巧</p><h4 id="修改-分辨率"><a href="#修改-分辨率" class="headerlink" title="修改 分辨率"></a>修改 分辨率</h4><pre class="line-numbers language-none"><code class="language-none">hdmi_group&#x3D;2 &#x2F;&#x2F;将显示模式切换成dmt （显示器模式）hdmi_mode&#x3D;82  &#x2F;&#x2F; 1920*1080 60HZ hdmi_drive&#x3D;2  &#x2F;&#x2F;HDMI 模式<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="打开配置界面"><a href="#打开配置界面" class="headerlink" title="打开配置界面"></a>打开配置界面</h4><blockquote><p>raspi-config</p></blockquote><h4 id="安装输入法"><a href="#安装输入法" class="headerlink" title="安装输入法"></a>安装输入法</h4><pre class="line-numbers language-none"><code class="language-none">apt-get -y install ttf-wqy-zenhei 安装中文字体apt-get -y install scim-pinyin  安装输入法apt-get命令中的“-y”参数，用处是免“确认安装吗？[Y&#x2F;n]”一步，直接安装。可以不加。有些教程推荐ibus输入法。树莓派跑ibus太慢，建议别用。老实一点用scim最好。http:&#x2F;&#x2F;www.guokr.com&#x2F;post&#x2F;520901&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>dpkg-reconfigure keyboard-configuration   键盘配置</p><p>~/.config/openbox/lxde-rc.xml<br>自定义快捷键</p><h4 id="默认目录作用"><a href="#默认目录作用" class="headerlink" title="默认目录作用"></a>默认目录作用</h4><p>boot： 包含了启动树莓派需要的 Linux 内核和其他软件包<br>bin：操作系统中相关的二进制文件<br>dev： 虚拟目录，实际上并不存在于sd 卡上。所有设备连接到系统，可以从这里访问。<br>etc： 存储配置文件。<br>home：<br>lib：用来存储不同应用程序所需代码共享的库文件<br>lost + found ：当系统崩溃时，存储丢失文件碎片的目录</p><p>media：可移动存储设备目录。<br>mnt： 用于手动挂载的存储设备。</p><p>opt：用来存储不是操作系统本身自带的软件。安装到树莓派的新软件如不在usr 目录下，通常会在这里。]</p><p>proc：虚拟目录，包含正在运行的程序信息。<br>selinux:  Linux 内核中提供的强制媒体访问控制（MAC）的安全系统。<br>sbin：存储特殊二进制文件的目录。<br>srv：用于存放操作系统服务数据的目录。<br>sys：虚拟目录，用于存放被Linux 内核所使用的系统信息。<br>tmp：临时文件 </p><p>usr：提供存储用户访问的程序。</p><p>var ：虚拟目录，用于存储程序运行时改变的值或变量。</p><h4 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h4><p>Link encap ：网络所使用的封装类型。<br>Bcast ：树莓派所在网络的广播地址。<br>RX ：收到网络流量情况，包括错误以及丢包情况。如果这里有错误，表明网络存在问题。。<br>TX ：发送数据包。</p><p>collisions：如果两个系统在网络上尝试在同一时间发送消息，将会发生碰撞，这要求他们重新发送数据包。<br>RX bytes  和 TX bytes  ：网络接口传送数据总量。</p><p>ifdown  eth0<br>ifup eht0<br>开启和关闭 网络端口。</p><p>Linux 内核是一个位于/boot 目录下名为kernel.img 的文件，紧急内核是同位于/boot 目录下的另一个文件，名为kernel_emergency.img.</p><p>/etc/network/interfaces   dhcp 配置 </p><p>/etc/resolv.conf  DNS 配置<br>格式 ：<br>nameserver 8.8.8.8</p><p>内核缓冲区是一个专用于 Linxu 内核存放用户可读信息的内存区域。因为Linux 启速度非常快， 屏幕上的内容一闪而过，将启动过程输出的信息存放在内核缓冲区中，在需要的时候用户可以查看里面的信息。<br>命令：dmesg    ^ 匹配行首字符</p><p>iwlist scan 扫描无线接入点。<br>iwconfig  无线网络专用</p><p>网卡模式（mode）<br>Managed - 常规无线网络模式，连接到AP。<br>Ad-Hoc  - 设备到设备无线网络，无AP。<br>Monitor  - 监听网络传输的特殊模式，常用于网络差错。<br>Repeater - 增强网络信号的中继模式。<br>Secondary - Repeater 模式中的一种，此时网卡作为备用中继器使用。</p><p>Tx-Power： 无线网卡的传输功率， 数字越大表示信号越强。</p><h5 id="树莓派静态ip"><a href="#树莓派静态ip" class="headerlink" title="树莓派静态ip"></a>树莓派静态ip</h5><p>1、使用ssh登陆，使用以下命令设置静态ip。<br>sudo nano /etc/dhcpcd.conf<br>2、在dhcpcd.conf后添加以下内容：<br>interface eth0<br>static ip_address=10.12.8.124/24<br>static routers=10.12.8.1<br>static domain_name_servers=202.102.152.3 114.114.114.114<br>3、保存后重启树莓派。<br>sudo reboot</p><p>作者：科技爱好者<br>链接：<a href="https://www.jianshu.com/p/b0e6d066d6b6">https://www.jianshu.com/p/b0e6d066d6b6</a><br>來源：简书<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p><h4 id="config-txt"><a href="#config-txt" class="headerlink" title="config.txt"></a>config.txt</h4><p>arm freq : cpu 的核心时钟频率。 默认700 mhz</p><p>gpu freq ：GPU 的时钟频率。默认为250MHz</p><p>sdram_freq : 设置RAM芯片的时钟频率，默认频率为400MHz。</p><p>gpu_mem=16 设置gpu 内存</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Youtube-dl使用方法</title>
      <link href="/2020/03/20/youtube-dl-shi-yong-fang-fa/"/>
      <url>/2020/03/20/youtube-dl-shi-yong-fang-fa/</url>
      
        <content type="html"><![CDATA[<h2 id="安装-ffmpeg"><a href="#安装-ffmpeg" class="headerlink" title="安装 ffmpeg"></a>安装 ffmpeg</h2><p>把下载好的<code>ffmpeg.exe</code>放到youtube-dl同目录下,能自动识别. 运行 <code>youtube-dl -v</code> 查看安装的情况</p><h2 id="直接下载"><a href="#直接下载" class="headerlink" title="直接下载"></a>直接下载</h2><pre class="line-numbers language-none"><code class="language-none">youtube-dl https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;iJvr0VPsn-s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="添加代理"><a href="#添加代理" class="headerlink" title="添加代理"></a>添加代理</h2><pre class="line-numbers language-none"><code class="language-none">youtube-dl --proxy socks5:&#x2F;&#x2F;127.0.0.1:2089 -F  https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;PSBjS2xppec<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="下载多个视频"><a href="#下载多个视频" class="headerlink" title="下载多个视频"></a>下载多个视频</h2><pre class="line-numbers language-none"><code class="language-none">youtube-dl &lt;url1&gt; &lt;url2&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>将要下载视频的 URL 全部放在文本文件中，并将其作为参数传递给 Youtube-dl 也行</p><pre class="line-numbers language-none"><code class="language-none">youtube-dl -a url.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>文件的格式:一行一个url,以#开头的行会被忽略</strong></p><h2 id="只下载音频"><a href="#只下载音频" class="headerlink" title="只下载音频"></a>只下载音频</h2><pre class="line-numbers language-none"><code class="language-none">youtube-dl -x --audio-format mp3 https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;iJvr0VPsn-s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="下载最好画质"><a href="#下载最好画质" class="headerlink" title="下载最好画质"></a>下载最好画质</h2><pre class="line-numbers language-none"><code class="language-none">youtube-dl -f best https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;iJvr0VPsn-s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="要下载视频及其他详细信息，如：说明、元数据、注释、字幕和缩略图等"><a href="#要下载视频及其他详细信息，如：说明、元数据、注释、字幕和缩略图等" class="headerlink" title="要下载视频及其他详细信息，如：说明、元数据、注释、字幕和缩略图等"></a>要下载视频及其他详细信息，如：说明、元数据、注释、字幕和缩略图等</h2><pre class="line-numbers language-none"><code class="language-none">youtube-dl --write-description --write-info-json --write-annotations --write-sub --write-thumbnail https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;iJvr0VPsn-s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="查看可以下载的画质"><a href="#查看可以下载的画质" class="headerlink" title="查看可以下载的画质"></a>查看可以下载的画质</h2><pre class="line-numbers language-none"><code class="language-none">youtube-dl -F https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;iJvr0VPsn-s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="下载指定的画质的视频"><a href="#下载指定的画质的视频" class="headerlink" title="下载指定的画质的视频"></a>下载指定的画质的视频</h2><pre class="line-numbers language-none"><code class="language-none">youtube-dl -f 22 https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;iJvr0VPsn-s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="指定下载路径"><a href="#指定下载路径" class="headerlink" title="指定下载路径"></a>指定下载路径</h2><p>半部分的绝对路径是你指定的，后半部分最好是固定的，使用原来的标题作为文件名以及使用原扩展名。</p><pre class="line-numbers language-none"><code class="language-none">youtube-dl -o &quot;绝对路径\%(title)s.%(ext)s&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="查看youtube-dl-支持的网站"><a href="#查看youtube-dl-支持的网站" class="headerlink" title="查看youtube-dl 支持的网站"></a>查看youtube-dl 支持的网站</h2><pre class="line-numbers language-none"><code class="language-none">youtube-dl --list-extractors<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="下载字幕"><a href="#下载字幕" class="headerlink" title="下载字幕"></a>下载字幕</h2><p>字幕默认是vtt 格式,用下方转格式</p><pre class="line-numbers language-none"><code class="language-none">youtube-dl  --write-sub --sub-format &quot;ass&#x2F;srt&#x2F;best&quot; --convert-subs &quot;srt&quot;&#39; [url]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="只下载字幕-不下视频"><a href="#只下载字幕-不下视频" class="headerlink" title="只下载字幕,不下视频"></a>只下载字幕,不下视频</h2><pre class="line-numbers language-none"><code class="language-none">youtube-dl --write-sub --skip-download [url]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>–write-sub 下载视频制作者上传的字幕<br>–write-auto-sub  下载Youtube机器生成的字幕</p><h2 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h2><pre class="line-numbers language-none"><code class="language-none">youtube-dl --proxy socks5:&#x2F;&#x2F;127.0.0.1:2089 -f 313 https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;_sFHPaTU_XA -o &quot;D:\download\YoutubeD\\%(title)s.%(ext)s&quot; <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote><p><a href="https://www.sysgeek.cn/youtube-dl-examples/">https://www.sysgeek.cn/youtube-dl-examples/</a><br><a href="https://blog.starryvoid.com/archives/355.html">https://blog.starryvoid.com/archives/355.html</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Windows 技巧</title>
      <link href="/2020/03/07/windows-ji-qiao/"/>
      <url>/2020/03/07/windows-ji-qiao/</url>
      
        <content type="html"><![CDATA[<h2 id="System"><a href="#System" class="headerlink" title="System"></a>System</h2><h3 id="提取-windows10-锁屏壁纸"><a href="#提取-windows10-锁屏壁纸" class="headerlink" title="提取 windows10 锁屏壁纸"></a>提取 windows10 锁屏壁纸</h3><p><code>C:/User/Username/AppDate/Local/Packages/Microsoft.Windows.contentDeliveryManager_*/Localstate/Assets</code></p><h3 id="锁屏后息屏时间设置"><a href="#锁屏后息屏时间设置" class="headerlink" title="锁屏后息屏时间设置"></a>锁屏后息屏时间设置</h3><p>打开注册表编辑器</p><p><code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Power\PowerSettings\7516b95f-f776-4464-8c53-06167f40cc99\子项</code></p><p>在 <code>7516b95f-f776-4464-8c53-06167f40cc99</code> 子项下，我们继续双击打开<code>8EC4B3A5-6868-48c2-BE75-4F3044BE88A7</code> 子项，然后在其右侧页面中找到 <code>Attributes</code> 一项，双击打开该项目。</p><p>在接下来打开的页面中，我们将其键值由 1 改为 2，然后保存设置。</p><p><a href="https://jingyan.baidu.com/article/a17d52851297e18099c8f270.html">https://jingyan.baidu.com/article/a17d52851297e18099c8f270.html</a></p><h3 id="如何为-Windows-10-UWP-应用设置代理"><a href="#如何为-Windows-10-UWP-应用设置代理" class="headerlink" title="如何为 Windows 10 UWP 应用设置代理"></a>如何为 Windows 10 UWP 应用设置代理</h3><p>UWP 是微软在 Windows 10 中引入的新概念，由于所有 UWP 应用均运行在被称为 App Container 的虚拟沙箱环境中，其安全性及纯净度远胜于传统的 EXE 应用。但 App Container 机制同时也阻止了网络流量发送到本机（即 loopback）， 使大部分网络抓包调试工具无法对 UWP 应用进行流量分析。同样的，该机制也阻止了 UWP 应用访问 localhost，即使你在系统设置中启用了代理，也无法令 UWP 应用访问本地代理服务器，十分恼人。</p><p>其实 Windows 10 自带了一款名为 CheckNetIsolation.exe 的命令行工具可以帮助我们将 UWP 及 Windows 8 Metro 应用添加到排除列表，具体步骤如下：</p><ol><li><p>通过注册表获取应用的 SID<br>首先通过 Win + R 快捷键打开「运行」窗口，输入「Regedit」打开注册表编辑器，然后定位到 HKEY_CURRENT_USER\Software\Classes\Local Settings\Software\Microsoft\Windows\CurrentVersion\AppContainer\Mappings，接着在左边的注册表项中找到你想解除网络隔离的应用，右边的 DisplayName 就是应用名称，而左边那一大串字符就是应用的 SID 值了。</p></li><li><p>打开 CMD 面板<br>在终端中输入 CheckNetIsolation.exe loopbackexempt -a -p=SID，出现「完成」后就大功告成了。</p></li></ol><p><a href="https://zhuanlan.zhihu.com/p/29989157">https://zhuanlan.zhihu.com/p/29989157</a></p><h3 id="卸载-Windows10-app"><a href="#卸载-Windows10-app" class="headerlink" title="卸载 Windows10 app"></a>卸载 Windows10 app</h3><pre class="line-numbers language-none"><code class="language-none">一次卸載所有appGet-AppxPackage -AllUsers | Remove-AppxPackage<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">一次卸載所有app(僅於當前使用帳戶)Get-AppxPackage -User | Remove-AppxPackage<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">卸载单独一个appGet-AppxPackage *Microsoft3DViewer* | Remove-AppxPackage<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><a href="https://esisterebbb.blogspot.com/2017/06/windows-10-app.html">https://esisterebbb.blogspot.com/2017/06/windows-10-app.html</a></p><h3 id="Windows-Modern-APP"><a href="#Windows-Modern-APP" class="headerlink" title="Windows Modern APP"></a>Windows Modern APP</h3><ul><li>文件夹的命名规则<br>a Microsoft Store apps folder has a different naming structure. Typically, it follows the pattern of name, version number, architecture, and Microsoft Store publisher ID.</li></ul><ul><li><p>App 安装的位置</p><p>  Installation folder – Apps are installed to the WindowsApps folder. You can find it at this location – C:\Program Files.<br>  <code>C:/Program Files/WindowsApps</code></p><p>  Data folder - Data for all of the Modern Apps are stored in the <code>AppData</code> folder under the user’s profile.</p><p>  Temporary data folder (Isolated storage) – Modern apps save their data at the following location  – <code>C:\Users\&lt;username&gt;\AppData\Local\Packages.</code></p><blockquote><p><a href="https://www.techmesto.com/windows-store-apps-installed-save-data/">https://www.techmesto.com/windows-store-apps-installed-save-data/</a></p></blockquote></li><li><p>离线安装</p></li></ul><p>Powershell 运行如下命令，前提是下载好了离线包</p><p><code>Add-AppxPackage -Path &quot;&quot;</code></p><h3 id="ProgramFiles-x86-amp-ProgramFiles-区别"><a href="#ProgramFiles-x86-amp-ProgramFiles-区别" class="headerlink" title="ProgramFiles(x86) &amp; ProgramFiles 区别"></a>ProgramFiles(x86) &amp; ProgramFiles 区别</h3><ul><li>running 64-bit Windows with 32-bit software: <code>%ProgramFiles(x86)%</code></li><li>running 32-bit Windows, or 64-bit software with 64-bit Windows: <code>%ProgramFiles%</code></li></ul><h3 id="Windows-update-组策略的设置"><a href="#Windows-update-组策略的设置" class="headerlink" title="Windows update 组策略的设置"></a>Windows update 组策略的设置</h3><ul><li>设置更新额外的服务器</li></ul><p><img src="4.png"></p><p><code>Computer Configuration &gt; Policies &gt; Administrative Templates &gt; Windows Components &gt; Windows Updates</code>:</p><p><code>Configure Automatic Updates</code>: Enabled, 2 - Notify for download and notify for install<br><code>Do not connect to any Windows Update Internet locations</code>: Disabled<br><code>Specify intranet Microsoft update service location</code>: Disabled</p><ul><li>开启官方更新服务器<br><img src="5.png"></li></ul><p><code>Computer Configuration &gt; Policies &gt; Administrative Templates &gt;System &gt; Specify settings for optional component installation and component repair</code></p><p>Set it to <code>Enabled</code></p><p><code>Alternate source file path</code>: <BLANK><br><code>Never attempt to download payload from Windows Update</code>: Disabled<br><code>Download repair content and optional features directly from Windows Update instead of Windows Server Update Services (WSUS)</code>: Enabled</p><ul><li>清除更新的缓存</li></ul><pre class="line-numbers language-bat" data-language="bat"><code class="language-bat">net stop wuauservcd %Windir%\SoftwareDistributiondel &#x2F;f &#x2F;s &#x2F;q Download <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="批量更改文件后缀名"><a href="#批量更改文件后缀名" class="headerlink" title="批量更改文件后缀名"></a>批量更改文件后缀名</h3><p><code>ren *.gif *.jpg</code><br>将 GIF 更改为 jpg</p><p><code>ren *.* *.gif </code><br>将所有文档更改为 GIF</p><h3 id="驱动位置"><a href="#驱动位置" class="headerlink" title="驱动位置"></a>驱动位置</h3><p>32位: </p><p><code>%systemroot%\system32\driverstore\filerepository</code></p><p><code>%systemroot% </code>表示分区中的 Windows 文件夹</p><p>在64位 Windows10 中，64位驱动程序存储位置与上面的相同，但是64位 中的 32 位驱动程序则存储在以下位置:<br><code>%systemroot%\syswow64\driverstore\filerepository</code></p><p>硬件设备驱动程序中的 inf 文件用于控制驱动程序的安装以及向注册表写入硬件设备的配置信息， 该文件还会标记在安装驱动程序时需要用到的相关文件. 在安装硬件设备的驱动程序时， 驱动程序都会有一个.sys 文件， 有些驱动程序还包含 .dll | .dat | .exe  等文件. </p><p><code>%systemroot%\system32\drivers</code></p><h3 id="Windows-備份驅動"><a href="#Windows-備份驅動" class="headerlink" title="Windows 備份驅動"></a>Windows 備份驅動</h3><p>PowerShell：<br><code>dism /online /export-driver /destination:E:\temp</code><br>E:\temp  備份的驅動放置的文件夾</p><p>恢復時在 <code>設備管理器</code>中 <code>更新驅動</code>，指定备份的目录<br>或<br><code>Dism /online /Add-Driver /Driver:D:\DriversBackup /Recurse</code></p><h3 id="软件自启动目录"><a href="#软件自启动目录" class="headerlink" title="软件自启动目录"></a>软件自启动目录</h3><p>注：本教程适用于 Win8、Win8.1 和 Win10 系统</p><p>首先，“启动”文件夹分为两种，一种是“系统启动文件夹”，Win10系统“启动”文件夹的路径为：<br><code>X:\ProgramData\Microsoft\Windows\Start Menu\Programs\StartUp</code><br>如果想要实现应用程序在所有的用户登录系统后都能自动启动，就把该应用程序的快捷方式放到“系统启动文件夹”里；</p><p>另一种为“用户启动文件夹”，如果想要实现某个应用程序只在某个用户登录系统时自动启动，那么就把该应用程序的快捷方式放到这个用户的“启动”文件夹里。Windows10某个用户的“启动”文件夹路径为：<br><code>X:\Users\用户名\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup</code></p><ol><li><p>打开“系统启动文件夹”的命令<br><code>shell:Common Startup</code></p></li><li><p>打开“用户启动文件夹”的命令<br><code>shell:startup</code></p></li></ol><p>打开“运行”对话框，输入以上命令，回车或点击“确定”即可打开“用户启动文件夹”</p><p>From <a href="https://www.windows10.pro/win10-startup-folder/">https://www.windows10.pro/win10-startup-folder/</a> </p><h3 id="只打开自己的USB设备"><a href="#只打开自己的USB设备" class="headerlink" title="只打开自己的USB设备"></a>只打开自己的USB设备</h3><p>设备管理中找到 usb 设备的ID</p><p>之后Win+R组合键后输入 <code>gpedit.msc</code> 进入组策略，依次进入“计算机配置-管理模板-系统-设备安装-设备安装限制”，在右侧打开“允许安装与下列设备ID相匹配的设备”。</p><p>双击打开后，点选“已启用”，并点击左下方的“显示”，在弹出对话框中把之前复制的硬件ID贴进去就好了。</p><p>From <a href="http://www.cfan.com.cn/2018/0511/130790.shtml">http://www.cfan.com.cn/2018/0511/130790.shtml</a> </p><h3 id="清除小娜"><a href="#清除小娜" class="headerlink" title="清除小娜"></a>清除小娜</h3><p><a href="http://www.cfan.com.cn/2018/0515/130806.shtml">http://www.cfan.com.cn/2018/0515/130806.shtml</a></p><p>更快的方法是用 LTSC 吧!</p><h3 id="组策略中的管理模板"><a href="#组策略中的管理模板" class="headerlink" title="组策略中的管理模板"></a>组策略中的管理模板</h3><p><code>管理模板</code> 是组策略的重要组成部分，在管理模板中修改的任何策略都会被保存到 Windows 系统的注册表中. [计算机配置]-&gt;[管理模板] 节点中的策略设置存在Windows 注册表的 HKEY_LOCAL_MACHINE  根键中，[用户配置]-&gt;[管理模板] 节点中的策略设置存在Windows 注册表中的 HKEY_CURRENT_USER 根键中.</p><p>管理模板文件基于 XML， 文件扩展名为 <code>admx</code></p><p>除了<code>gpedit</code>之外，可以在  命令提示符中输入 <code>mmc</code> 进入 Microsoft 管理控制台添加</p><p>未配置: 策略处于未设置状态， 没有对策略进行任何设置， 对注册表没有进行任何修改. 这是所有策略的默认设置<br>已启用: 系统会将策略启用时的值写入注册表中.<br>已禁用:  策略处于禁用状态， 系统会将策略禁用时的值写入注册表中. [未配置]和[已禁用]两个选项通常产生相同的效果.</p><p>gpupdate: 刷新组策略</p><p><code>gpupdate /target:compter</code><br><code>gpupdate /target:user</code></p><p>可以在控制台中<code>禁用</code>组配置， 而不需要删除</p><h3 id="创建删除目录"><a href="#创建删除目录" class="headerlink" title="创建删除目录"></a>创建删除目录</h3><ul><li>创建 md<br>如果创建的文件夹有空格， 需要用引号把文件夹名括起来.</li></ul><p>如果没有引号，会同时新建多个文件夹</p><p><strong>md 可以很方便的创建中级目录:</strong><br>如: <code>md a\b\c</code></p><ul><li>删除 rd<br><code>rd  /s /q</code><br>/s  遇到有子文件或子文件夹的时候可以直接删除.<br>/q  安静模式， 不会询问你是否删除</li></ul><h3 id="快速启动设置命令"><a href="#快速启动设置命令" class="headerlink" title="快速启动设置命令"></a>快速启动设置命令</h3><table><thead><tr><th>Settings page</th><th>Uri</th></tr></thead><tbody><tr><td>Landing page for Settings</td><td>ms-settings:</td></tr><tr><td>About</td><td>ms-settings:about</td></tr><tr><td>Activation</td><td>ms-settings:activation</td></tr><tr><td>Apps &amp; features</td><td>ms-settings:appsfeatures</td></tr><tr><td>Apps for websites</td><td>ms-settings:appsforwebsites</td></tr><tr><td>App volume and device preferences (1903)</td><td>ms-settings:apps-volume</td></tr><tr><td>Software Center (SCCM)</td><td>softwarecenter:</td></tr><tr><td>AutoPlay</td><td>ms-settings:autoplay</td></tr><tr><td>Backup</td><td>ms-settings:backup</td></tr><tr><td>Recovery - Reset/Advanced startup</td><td>ms-settings:recovery</td></tr><tr><td>Battery Saver</td><td>ms-settings:batterysaver</td></tr><tr><td>Battery Saver - settings</td><td>ms-settings:batterysaver-settings</td></tr><tr><td>Battery Saver - usage</td><td>ms-settings:batterysaver-usagedetails</td></tr><tr><td>Bluetooth Devices</td><td>ms-settings:bluetooth</td></tr><tr><td>Shared experiences</td><td>ms-settings:crossdevice</td></tr><tr><td>Default apps</td><td>ms-settings:defaultapps</td></tr><tr><td>For developers</td><td>ms-settings:developers</td></tr><tr><td>Display</td><td>ms-settings:display</td></tr><tr><td>Display Screen rotation</td><td>ms-settings:screenrotation</td></tr><tr><td>Storage</td><td>ms-settings:storagesense</td></tr><tr><td>Offline Maps</td><td>ms-settings:maps</td></tr><tr><td>Connected Devices</td><td>ms-settings:connecteddevices</td></tr><tr><td>Touchpad</td><td>ms-settings:devices-touchpad</td></tr><tr><td>Mouse &amp; Touchpad Devices</td><td>ms-settings:mousetouchpad</td></tr><tr><td>Typing</td><td>ms-settings:typing</td></tr><tr><td>Find My Device</td><td>ms-settings:findmydevice</td></tr><tr><td>USB</td><td>ms-settings:usb</td></tr><tr><td>Airplane mode</td><td>ms-settings:network-airplanemode</td></tr><tr><td>Cellular Network</td><td>ms-settings:network-cellular</td></tr><tr><td>DirectAccess</td><td>ms-settings:network-directaccess</td></tr><tr><td>Dial-up Network</td><td>ms-settings:network-dialup</td></tr><tr><td>Ethernet Network</td><td>ms-settings:network-ethernet</td></tr><tr><td>Proxy (Network)</td><td>ms-settings:network-proxy</td></tr><tr><td>Network Status</td><td>ms-settings:network-status</td></tr><tr><td>VPN</td><td>ms-settings:network-vpn</td></tr><tr><td>Wi-Fi</td><td>ms-settings:network-wifi</td></tr><tr><td>Manage known Wi-Fi</td><td>ms-settings:network-wifisettings</td></tr><tr><td>Sync your settings</td><td>ms-settings:sync</td></tr><tr><td>Data Sense</td><td>ms-settings:datausage</td></tr><tr><td>Mobile Hotspot</td><td>ms-settings:network-mobilehotspot</td></tr><tr><td>Lock screen</td><td>ms-settings:lockscreen</td></tr><tr><td>Power &amp; sleep</td><td>ms-settings:powersleep</td></tr><tr><td>Multitasking</td><td>ms-settings:multitasking</td></tr><tr><td>Optional features</td><td>ms-settings:optionalfeatures</td></tr><tr><td>Personalization</td><td>ms-settings:personalization</td></tr><tr><td>Backgrounds</td><td>ms-settings:personalization-background</td></tr><tr><td>Colors</td><td>ms-settings:personalization-colors</td></tr><tr><td>Colors</td><td>ms-settings:colors</td></tr><tr><td>Start Menu</td><td>ms-settings:personalization-start</td></tr><tr><td>Taskbar</td><td>ms-settings:taskbar</td></tr><tr><td>Themes</td><td>ms-settings:themes</td></tr><tr><td>Printers</td><td>ms-settings:printers</td></tr><tr><td>Proximity</td><td>ms-settings:proximity</td></tr><tr><td>Email &amp; app accounts</td><td>ms-settings:emailandaccounts</td></tr><tr><td>Family &amp; other users</td><td>ms-settings:otherusers</td></tr><tr><td>Your workplace</td><td>ms-settings:workplace</td></tr><tr><td>Date &amp; Time</td><td>ms-settings:dateandtime</td></tr><tr><td>Region &amp; language</td><td>ms-settings:regionlanguage</td></tr><tr><td>Sign-in options</td><td>ms-settings:signinoptions</td></tr><tr><td>Speech</td><td>ms-settings:speech</td></tr><tr><td>Privacy</td><td>ms-settings:privacy</td></tr><tr><td>Account info (privacy)</td><td>ms-settings:privacy-accountinfo</td></tr><tr><td>Background apps (privacy)</td><td>ms-settings:privacy-backgroundapps</td></tr><tr><td>App diagnostics (privacy)</td><td>ms-settings:privacy-appdiagnostics</td></tr><tr><td>Call history (privacy)</td><td>ms-settings:privacy-callhistory</td></tr><tr><td>Calendar (privacy)</td><td>ms-settings:privacy-calendar</td></tr><tr><td>Contacts (privacy)</td><td>ms-settings:privacy-contacts</td></tr><tr><td>Email (privacy)</td><td>ms-settings:privacy-email</td></tr><tr><td>Feedback &amp; diagnostics (privacy)</td><td>ms-settings:privacy-feedback</td></tr><tr><td>Location (privacy)</td><td>ms-settings:privacy-location</td></tr><tr><td>Messaging (privacy)</td><td>ms-settings:privacy-messaging</td></tr><tr><td>Microphone (privacy)</td><td>ms-settings:privacy-microphone</td></tr><tr><td>Motion (privacy)</td><td>ms-settings:privacy-motion</td></tr><tr><td>Notifications and Actions</td><td>ms-settings:notifications</td></tr><tr><td>Notifications (privacy)</td><td>ms-settings:privacy-notifications</td></tr><tr><td>Other (privacy)</td><td>ms-settings:privacy-customdevices</td></tr><tr><td>Radio (privacy)</td><td>ms-settings:privacy-radios</td></tr><tr><td>Speech (privacy)</td><td>ms-settings:privacy-speechtyping</td></tr><tr><td>Tasks (privacy)</td><td>ms-settings:privacy-tasks</td></tr><tr><td>Webcam (privacy)</td><td>ms-settings:privacy-webcam</td></tr><tr><td>Your info (Microsoft account)</td><td>ms-settings:yourinfo</td></tr><tr><td>Closed Captioning</td><td>ms-settings:easeofaccess-closedcaptioning</td></tr><tr><td>High Contrast</td><td>ms-settings:easeofaccess-highcontrast</td></tr><tr><td>Keyboard</td><td>ms-settings:easeofaccess-keyboard</td></tr><tr><td>Magnifier</td><td>ms-settings:easeofaccess-magnifier</td></tr><tr><td>Mouse</td><td>ms-settings:easeofaccess-mouse</td></tr><tr><td>Narrator</td><td>ms-settings:easeofaccess-narrator</td></tr><tr><td>Other options</td><td>ms-settings:easeofaccess-otheroptions</td></tr><tr><td>Projecting to this PC</td><td>ms-settings:project</td></tr><tr><td>Tablet mode</td><td>ms-settings:tabletmode</td></tr><tr><td>Windows Defender</td><td>ms-settings:windowsdefender</td></tr><tr><td>Windows Insider Program (beta’s)</td><td>ms-settings:windowsinsider</td></tr><tr><td>Troubleshoot - Fix Windows Update</td><td>ms-settings:troubleshoot</td></tr><tr><td>Windows Update</td><td>ms-settings:windowsupdate</td></tr><tr><td>WinUpdate - Check for updates</td><td>ms-settings:windowsupdate-action</td></tr><tr><td>WinUpdate - Update history</td><td>ms-settings:windowsupdate-history</td></tr><tr><td>WinUpdate - Advanced options</td><td>ms-settings:windowsupdate-options</td></tr><tr><td>WinUpdate - Restart options</td><td>ms-settings:windowsupdate-restartoptions</td></tr></tbody></table><h3 id="关闭开机动画，加快开机"><a href="#关闭开机动画，加快开机" class="headerlink" title="关闭开机动画，加快开机"></a>关闭开机动画，加快开机</h3><p><img src="1.png"></p><h3 id="打开回收站"><a href="#打开回收站" class="headerlink" title="打开回收站"></a>打开回收站</h3><p><code>explorer.exe ::&#123;645FF040-5081-101B-9F08-00AA002F954E&#125;</code></p><h3 id="导入和删除计划任务"><a href="#导入和删除计划任务" class="headerlink" title="导入和删除计划任务"></a>导入和删除计划任务</h3><p><code>schtasks /create /ru %runasUsername% /rp %runasPassword% /tn %taskname% /xml %filename% </code></p><p>其中 <code>/ru</code> 是运行这个任务时， 需要以这个账号运行<br><code>/tn</code> 指定这个任务的名称 </p><p>这个命令执行之后，会在计划任务的GUI里面显示刚才导入的任务</p><p>删除：<br><code>schtasks /delete /tn  taskname</code></p><h3 id="注册表"><a href="#注册表" class="headerlink" title="注册表"></a>注册表</h3><h4 id="runonce"><a href="#runonce" class="headerlink" title="runonce"></a>runonce</h4><p>同一台机器，不同用户的注册表， 有些地方是不一样的<br>比如， 你在 administrator 的<br><code>HKEY_CURRENT_USER/Software/Microsoft/Windows/CurrentVersion/RunOnce</code><br>下面添加东西<br>切换到  bin 这个账号，是看不到刚才在 administrator 添加的东西的</p><p>也就是你不能在administrator账号下面添加 runonce 的项， 然后指望切换到 bin 账号让项生效</p><p><code>HKEY_CURRENT_USER</code> 代表当前用户，当前用户登录后才执行的操作。<br><code>HKEY_LOCAL_MACHINE</code> 代表当前机器，所有操作在用户登录前就执行了。<br>Run 键值代表着开机启动项，也就是说在这个项下的键值会随着开机启动（这里的开机是指用户登录，也就是说只要有登录操作就会执行，注销然后登录，也会执行这个键值）。<br>RunOnce 键值类似于 Run 键值，唯一的区别在于，RunOnce 键值只执行一次，操作执行后会被自动删除。</p><h4 id="uninstall"><a href="#uninstall" class="headerlink" title="uninstall"></a>uninstall</h4><p>32位：<code>HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\</code></p><p>64位：<code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstal</code></p><h3 id="去除安装软件时的安全提醒"><a href="#去除安装软件时的安全提醒" class="headerlink" title="去除安装软件时的安全提醒"></a>去除安装软件时的安全提醒</h3><pre class="line-numbers language-bat" data-language="bat"><code class="language-bat">REG ADD &quot;HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\3&quot; &#x2F;V &quot;1806&quot; &#x2F;T &quot;REG_DWORD&quot; &#x2F;D &quot;00000000&quot; &#x2F;FREG ADD &quot;HKLM\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\3&quot; &#x2F;V &quot;1806&quot; &#x2F;T &quot;REG_DWORD&quot; &#x2F;D &quot;00000000&quot; &#x2F;FREG ADD &quot;HKLM\SOFTWARE\Policies\Microsoft\Internet Explorer\Security&quot; &#x2F;V &quot;DisableSecuritySettingsCheck&quot; &#x2F;T &quot;REG_DWORD&quot; &#x2F;D &quot;00000001&quot; &#x2F;F <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="查看网卡"><a href="#查看网卡" class="headerlink" title="查看网卡"></a>查看网卡</h3><pre class="line-numbers language-bat" data-language="bat"><code class="language-bat">wmic nic get name, index, NetConnectionStatus    0 &#x3D; Disconnected    1 &#x3D; Connecting    2 &#x3D; Connected 2    3 &#x3D; Disconnecting    4 &#x3D; Hardware Not Present    5 &#x3D; Hardware Disabled    6 &#x3D; Hardware Malfunction    7 &#x3D; Media Disconnected    8 &#x3D; Authenticating    9 &#x3D; Authentication Succeeded    10 &#x3D; Authentication Failed    11 &#x3D; Invalid Address    12 &#x3D; Credentials Requiredwmic path win32_networkadapter where index&#x3D;1 call disable<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="查看-Chrome-版本"><a href="#查看-Chrome-版本" class="headerlink" title="查看 Chrome 版本"></a>查看 Chrome 版本</h3><pre class="line-numbers language-bat" data-language="bat"><code class="language-bat">reg query &quot;HKLM\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\Google Chrome&quot;wmic datafile where name&#x3D;&quot;C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe&quot; get Version &#x2F;value<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="wmic-远程执行命令"><a href="#wmic-远程执行命令" class="headerlink" title="wmic 远程执行命令"></a>wmic 远程执行命令</h3><pre class="line-numbers language-bat" data-language="bat"><code class="language-bat">wmic &#x2F;USER:&quot;sss\user1&quot; &#x2F;PASSWORD:&quot;ss-12&quot; &#x2F;NODE:111.111.111.111 process call create &quot;D:\r.bat&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查询电源计划任务的情况："><a href="#查询电源计划任务的情况：" class="headerlink" title="查询电源计划任务的情况："></a>查询电源计划任务的情况：</h3><p>UID 从顶层开始指定，不然会报错</p><pre class="line-numbers language-bat" data-language="bat"><code class="language-bat">powercfg &#x2F;q db310065-829b-4671-9647-2261c00e86ef  238c9fa8-0aad-41ed-83f4-97be242c8f20 7bc4a2f9-d8fc-4469-b07b-33eb785aaca0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看-Windows-版本"><a href="#查看-Windows-版本" class="headerlink" title="查看 Windows 版本"></a>查看 Windows 版本</h3><p>可以查看 OS Build:<br><code>ver</code></p><p>或者：<br><code>winver</code></p><h3 id="更改-DNS"><a href="#更改-DNS" class="headerlink" title="更改 DNS"></a>更改 DNS</h3><ul><li><p>查看网卡状态：<br><code>netsh interface show interface</code></p></li><li><p>添加主 DNS：<br><code>netsh interface ipv4 set dnsservers &quot;Ethernet&quot;  static 8.8.8.8 primary</code></p></li><li><p>添加辅助 DNS<br><code>netsh interface ipv4 add dnsservers &quot;Ethernet&quot; 1.1.1.1 index=2</code></p></li><li><p>设置动态 DNS<br><code>netsh interface ip set dns name=&quot;本地连接&quot; source=dhcp</code></p></li></ul><h3 id="锁屏命令"><a href="#锁屏命令" class="headerlink" title="锁屏命令"></a>锁屏命令</h3><p><code>% windir %\System32\rundll32.exe user32.dll,LockWorkStation</code></p><p><a href="https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/win32shutdown-method-in-class-win32-operatingsystem">https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/win32shutdown-method-in-class-win32-operatingsystem</a></p><h3 id="移除路由表"><a href="#移除路由表" class="headerlink" title="移除路由表"></a>移除路由表</h3><p><code>route delete 0.0.0.0 mask 0.0.0.0 172.31.96.1 -p</code></p><h2 id="Softwares"><a href="#Softwares" class="headerlink" title="Softwares"></a>Softwares</h2><h3 id="NotePad-缓存文件的位置"><a href="#NotePad-缓存文件的位置" class="headerlink" title="NotePad++ 缓存文件的位置"></a>NotePad++ 缓存文件的位置</h3><p><code>C:\Users\Administrator\AppData\Roaming\Notepad++\session.xml</code></p><p><code>C:\Users\Administrator\AppData\Roaming\Notepad++\backup</code></p><p>里面的文件就是你的自动保存的缓存文件。</p><p>From <a href="https://blog.csdn.net/u010216716/article/details/49814283">https://blog.csdn.net/u010216716/article/details/49814283</a> </p><h3 id="静默安装"><a href="#静默安装" class="headerlink" title="静默安装"></a>静默安装</h3><p>大部分软件，其安装都具备一定的智能性，换句话说，许多软件的安装都能采取全自动或半自动的方式进行。</p><h4 id="一、-Microsoft-Windows-Installer"><a href="#一、-Microsoft-Windows-Installer" class="headerlink" title="一、 Microsoft Windows Installer"></a>一、 Microsoft Windows Installer</h4><p>如果某个软件是用 Windows Installer 打包的，那你就应该能在文件夹中看到 *.msi 文件。</p><p>这是最典型的特征，这些文件通常可以使用 /QB 和 /QN 参数进行自动安装</p><p><code>/qb</code> 会在窗口中显示一个基本的安装进程</p><p><code>/qn</code> 参数则不会显示任何窗口，直接在后台自动安装</p><p>为了阻止某些程序安装成功后自动重启动（例如Kerio Personal Firewall 4），你可以在 /qn 或者 /qb参数后使用REBOOT=Suppress标记，例如：</p><p>如安装虚拟光驱 DaemonTools：<code>msiexec /i dtools.msi /qb REBOOT=SUPPRESS</code></p><h4 id="二、-Windows-补丁包"><a href="#二、-Windows-补丁包" class="headerlink" title="二、 Windows 补丁包"></a>二、 Windows 补丁包</h4><p>有两种情况，一种是类似IE增量补丁包的那种安装文件，要使之静默安装，只需要在执行文件后加上 /q:a /r:n 参数即可；一种是 Windows 常用的补丁文件，一般情况下加上 /U /N /Z 即可实现静默安装。</p><p>(对于新的系统补丁，也可使用 /passive /norestart)。这通用大部分情况，但某些特定的补丁不能用此法进行静默安装。</p><h4 id="三、InstallShield"><a href="#三、InstallShield" class="headerlink" title="三、InstallShield"></a>三、InstallShield</h4><p>a.要使用静默安装的方式安装用InstallShield技术打包的程序，首先要在现有的操作系统中创建一个setup.iss文件。</p><p>在命令行窗口中使用 -R 参数（大小写敏感）运行安装程序。</p><p>例如：Setup.exe -R</p><p>b. 接着会显示常见的安装屏幕，并且询问你一些问题，例如要安装的目录等有一点是很重要的，在安装结束后你不能选择“立刻重启动计算机”的选项。如果你选了，在批处理文件中的其他命令就会因为计算机重启动而无法执行。</p><p>c. 在安装程序运行完毕后，打开你的C:/Windows（或者C:/WINNT）目录，然后找到setup.iss文件，把这个文件和你将要静默安装的程序setup.exe保存在同一个目录中</p><p>d. 用以下命令进行静默安装：setup.exe -s [-sms]</p><p>我怎么知道哪个程序是使用InstallShield技术打包的？</p><p>大部分这类程序的安装文件都可以被压缩软件解压缩，安装文件setup.exe的属性对话框中应该有“InstallShield (R) Setup Launcher”或者其他类似的字样。</p><p>最后，如果你在保存安装文件的文件夹中看到了一个setup.iss文件，那么毫无疑问这是用InstallShield打包了！</p><h4 id="四、InstallShield-with-MSI"><a href="#四、InstallShield-with-MSI" class="headerlink" title="四、InstallShield with MSI"></a>四、InstallShield with MSI</h4><p>InstallShield with MSI 制作的安装文件，请使用类似：setup.exe /s /v”/qb” 来安装</p><h4 id="五、WISE-Installer"><a href="#五、WISE-Installer" class="headerlink" title="五、WISE Installer"></a>五、WISE Installer</h4><p>用WISE技术打包的软件在安装的时候可以选择使用 /s参数进行自动安装：setup.exe /s</p><h4 id="六、Inno-Setup"><a href="#六、Inno-Setup" class="headerlink" title="六、Inno Setup"></a>六、Inno Setup</h4><p>Inno Setup 制作的安装文件，请使用：setup.exe /sp- /silent /norestart</p><p>我怎么知道哪个安装程序是用Inno 技术打包的？</p><p>这种软件安装时第一个界面一般如下图所示</p><p>在窗口标题栏左侧的图标上点击鼠标左键，然后再探出菜单上点击“About Setup”可以看见安装类型</p><h4 id="七、NullSoft-Installation-System"><a href="#七、NullSoft-Installation-System" class="headerlink" title="七、NullSoft Installation System"></a>七、NullSoft Installation System</h4><p>使用 NSIS (NullSoft Installation System) 制作的安装文件，可用 /S （注意大写）来进行静默安装。示例：setup.exe /S</p><p>使用NSIS 打包的安装文件可以用 /S参数进行自动安装（“S”是大小写敏感的）：</p><p><code>Setup.exe /S</code></p><p>你也可以用 /D参数选择将要安装的目标分区和文件夹：</p><p><code>Setup.exe /S /D=E:/Software/CDex</code></p><p>像Winamp 和CDex这类的软件都会在安装结束后显示一个确认屏幕（CDex）或者一个设置文件关联方式的结束安装屏幕（Winamp）</p><p>我怎么知道哪个程序是使用NSIS技术打包的？</p><p>很多用NSIS打包的程序在安装的时候都有类似这样的窗口，例如Winamp 和CDex </p><h4 id="八、Wise-Installation-Professional"><a href="#八、Wise-Installation-Professional" class="headerlink" title="八、Wise Installation Professional"></a>八、Wise Installation Professional</h4><p>制作的安装文件，可用 /silent 参数进行静默安装。</p><p>反正拿到一个安装程序，大家用各静默安装参数试试就知道了</p><p>（[/s] [/S] [/silent [/noreboot]] [/verysilent [/sp-] [/norestart]] [/q] [/qn] [/qb] [REBOOT=SUPPRESS]   [/s /v/qn] [/q:a /r:n] [/u /n /z] [/quiet] [/SilentInstallNoSponsor] [/SilentInstall] [/s /qn] [/s /qd] [-s] [-q] 等）</p><p>常用软件的静默安装参数参考</p><p>winrar 静默参数 /s (大小写皆可)</p><p>Windows Installer 3 (.msi)<br>msiexec /i x:/y/z.msi /qb(或qn) /norestart<br>获取安装参数：msiexec /help</p><p>inno 的包 /verysilent 代替 /silent 也可</p><p>From <a href="https://blog.csdn.net/lihongzhai/article/details/5048748">https://blog.csdn.net/lihongzhai/article/details/5048748</a> </p><h3 id="火狐软件问题"><a href="#火狐软件问题" class="headerlink" title="火狐软件问题"></a>火狐软件问题</h3><p><img src="2.png"></p><p>设置出现这样的提示</p><p>到注册表里面删除</p><p><img src="3.png"></p><p>把mozilla 目录下的 firefox 目录删除</p>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wmi使用介绍</title>
      <link href="/2020/03/04/wmi-shi-yong-jie-shao/"/>
      <url>/2020/03/04/wmi-shi-yong-jie-shao/</url>
      
        <content type="html"><![CDATA[<h2 id="wmi介绍"><a href="#wmi介绍" class="headerlink" title="wmi介绍"></a>wmi介绍</h2><p>这里推荐一个辅助软件, <code>WMI Explorer 2.0</code></p><p><img src="21.png"></p><h3 id="可以调用wmi的方式或者语言"><a href="#可以调用wmi的方式或者语言" class="headerlink" title="可以调用wmi的方式或者语言"></a>可以调用wmi的方式或者语言</h3><pre class="line-numbers language-none"><code class="language-none">* wmic.exe* winrm.exe* winrs.exe* powershell* windows scripting host(WSH)   * VBScript   * JScript* mof* C&#x2F;C++ via IWbem* COM API* .NET System.Management classes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><h4 id="内部事件"><a href="#内部事件" class="headerlink" title="内部事件"></a>内部事件</h4><p>内部事件表示的是创建、修改和删除任何 WMI 类，对象或命名空间的事件。它们也可被用于计时器或 WMI 方法执行的警报。以下内部事件采用了系统类 (以两个下划线开头的那些) 的形式，并存在于每一个 WMI 命名空间:</p><pre><code>__NamespaceOperationEvent__NamespaceModificationEvent__NamespaceDeletionEvent__NamespaceCreationEvent__ClassOperationEvent__ClassDeletionEvent__ClassModificationEvent__ClassCreationEvent__InstanceOperationEvent__InstanceCreationEvent__MethodInvocationEvent__InstanceModificationEvent__InstanceDeletionEvent__TimerEvent</code></pre><p>这些事件的作用非常强大，因为它们可以被用于在操作系统中几乎任何可以想见的事件的触发器。例如，如果触发了一个基于交互式登录的事件则可以形成下面的内部事件查询:</p><p>此查询被转换为创建一个登录类型为 2 （交互式）的 Win32_LogonSession 类的一个实例。</p><p>由于触发的内部事件有一定的频率，所以必须在 WQL 查询语句的 WITHIN 子句中指定事件轮询间隔。这就是说，它有时可能错过事件。例如，如果事件查询的形式目的是创建 WMI 类的实例，如果该实例的创建和销毁 (如常见的一些进程 —— Win32_Process 实例) 在轮询间隔内，那么则会错过这一事件。创建内部 WMI 查询时，必须考虑这种可能出现的情况。</p><p>SELECT * FROM __InstanceCreationEvent WITHIN 15 WHERE TargetInstance ISA ‘Win32_LogonSession’ AND TargetInstance.LogonType = 2</p><h4 id="外部事件"><a href="#外部事件" class="headerlink" title="外部事件"></a>外部事件</h4><p>外部事件解决了和内部事件有关的潜在的轮询问题，因为它们在事件发生时立刻被触发。然而美中不足的是在 WMI 中并没有太多的外部事件，不过，所有已经存在的外部事件的作用很强大，性能也很高。下面的外部事件对于攻击者和防御者来说可能是有用的：</p><pre><code>ROOT\CIMV2:Win32_ComputerShutdownEventROOT\CIMV2:Win32_IP4RouteTableEventROOT\CIMV2:Win32_ProcessStartTraceROOT\CIMV2:Win32_ModuleLoadTraceROOT\CIMV2:Win32_ThreadStartTraceROOT\CIMV2:Win32_VolumeChangeEventROOT\CIMV2: Msft_WmiProvider*ROOT\DEFAULT:RegistryKeyChangeEventROOT\DEFAULT:RegistryValueChangeEvent</code></pre><p>以下外部事件查询形式可以用来捕获每一个进程已加载的所有可执行模块（用户模式和内核模式）：<br>SELECT * FROM Win32_ModuleLoadTrace</p><h3 id="WQL-查询"><a href="#WQL-查询" class="headerlink" title="WQL 查询"></a>WQL 查询</h3><h4 id="实例查询"><a href="#实例查询" class="headerlink" title="实例查询"></a>实例查询</h4><pre class="line-numbers language-none"><code class="language-none">SELECT [Class property name|*] FROM [CLASS NAME] &lt;WHERE [CONSTRAINT]&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">select * from Win32_NTlogEvent where logfile &#x3D; &#39;application&#39;SELECT Freespace,DeviceID FROM Win32_LogicalDisk<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li><p><code>*</code> 代表的是下图区域<strong>3</strong>的所有属性(properties).也可以具体指定某些属性,而不是全部(没有*号好用)</p></li><li><p>from 后面接<strong>1</strong>的类型(Classes)</p></li><li><p>where 后面可以接属性的参数进行筛选,如下图的<strong>3</strong> 区域</p></li></ul><p><img src="24.png"></p><pre class="line-numbers language-none"><code class="language-none">SELECT * FROM Win32_Process WHERE Name LIKE &quot;%chrome%&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="事件查询"><a href="#事件查询" class="headerlink" title="事件查询"></a>事件查询</h4><pre class="line-numbers language-none"><code class="language-none">SELECT [Class property name|*] FROM [INTRINSIC CLASS NAME] WITHIN [POLLING INTERVAL] &lt;WHERE [CONSTRAINT]&gt;SELECT [Class property name|*] FROM [EXTRINSIC CLASS NAME] &lt;WHERE [CONSTRAINT]&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="22.png"></p><pre class="line-numbers language-none"><code class="language-none">SELECT * FROM __InstanceCreationEvent WITHIN 15 WHERE TargetInstance ISA &#39;Win32_LogonSession&#39; AND TargetInstance.LogonType &#x3D; 2交互式用户登录的事件查询触发器<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">strComputer &#x3D; &quot;.&quot; Set objWMIService &#x3D; GetObject(&quot;winmgmts:\\&quot; &amp; strComputer &amp; &quot;\root\cimv2&quot;) Set colMonitorProcess &#x3D; objWMIService.ExecNotificationQuery _  (&quot;SELECT * FROM __instancemodificationevent WITHIN 10&quot; &amp; _  &quot;WHERE TargetInstance ISA &#39;Win32_Service&#39;&quot;)  WScript.Echo &quot;Waiting for process change event ...&quot; Set objLatestEvent &#x3D; colMonitorProcess.NextEvent WScript.Echo VbCrLf &amp; objLatestEvent.Path_.Class Wscript.Echo &quot;Process Name: &quot; &amp; objLatestEvent.TargetInstance.Name Wscript.Echo &quot;Process ID: &quot; &amp; objLatestEvent.TargetInstance.ProcessId Wscript.Echo &quot;Process State:&quot; &amp; objLatestEvent.TargetInstance.stateWScript.Echo &quot;Time: &quot; &amp; Now<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="元查询"><a href="#元查询" class="headerlink" title="元查询"></a>元查询</h4><p>用于查询WMI类架构</p><pre class="line-numbers language-none"><code class="language-none">SELECT [Class property name|*] FROM [Meta_Class&lt;WHERE [CONSTRAINT]&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">OPTIONAL-META-WHERE &#x3D; [&quot;WHERE __THIS ISA&quot; &lt;CLASS-NAME&gt;]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="vbs-使用-vmi"><a href="#vbs-使用-vmi" class="headerlink" title="vbs 使用 vmi"></a>vbs 使用 vmi</h2><p>vbs脚本操作wmi对象的时候，有两种方法 <code>winmgmts:\\</code> 和<code>WbemScripting.SWBemlocator</code></p><p>不过这两者是有异同的，SWbemlocator可以做到WMI moniker不能做到的两个功能（SWbemlocator is designed to address two specific scripting scenarios that cannot be performed using GetObject and the WMI moniker， You must use SWbemLocator if you need to)：</p><ul><li><p>provide user and password credentials to connect to WMI on a remote computer. The WMI moniker used with the GetObject function does not include a mechanism for specifying credentials.</p></li><li><p>Connect to WMI if you are runing a WMI script from within a Web page.</p></li></ul><p>如下是vbs两种声明的方式</p><pre class="line-numbers language-VBScript" data-language="VBScript"><code class="language-VBScript">strComputer&#x3D;&quot;.&quot;set objService &#x3D; GetObject(&quot;winmgmts:\\&quot; &amp; strComputer &amp; &quot;\root\cimv2&quot;)&#39;set objWmi &#x3D; CreateObject(&quot;WbemScripting.SWBemLocator&quot;)&#39;set objService &#x3D; objWmi.ConnectServer(strComputer, &quot;root\cimv2&quot;)set objSet &#x3D; objService.InstancesOf(&quot;Win32_Process&quot;)&#39;set objSet &#x3D; objService.ExecQuery(&quot;SELECT * FROM Win32_process&quot;)for each obj in objSet    Wscript.Echo &quot;Name: &quot; &amp; obj.NameNext<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-VBScript" data-language="VBScript"><code class="language-VBScript">创建对象并连接服务器Set objWMIService&#x3D;GetObject(&quot;winmgmts:&#123;impersonationLevel&#x3D;impersonate&#125;!\\&quot;&amp;strComputer&amp;&quot;\root\cimv2:Win32_Process&quot;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><h4 id="操作注册表"><a href="#操作注册表" class="headerlink" title="操作注册表"></a>操作注册表</h4><h5 id="读取注册表Value"><a href="#读取注册表Value" class="headerlink" title="读取注册表Value"></a>读取注册表Value</h5><p><img src="15.png"></p><pre class="line-numbers language-VBScript" data-language="VBScript"><code class="language-VBScript">const HKEY_CURRENT_USER &#x3D; &amp;H80000001 &#39;Replace the dot with a computer name or IP to use any other than the local machinestrComputer &#x3D; &quot;.&quot;Set oReg&#x3D;GetObject(&quot;winmgmts:&#123;impersonationLevel&#x3D;impersonate&#125;!\\&quot; &amp; strComputer &amp; &quot;\root\default:StdRegProv&quot;)strKeyPath &#x3D; &quot;Console&quot;strValueName &#x3D; &quot;HistoryBufferSize&quot;oReg.GetDWORDValue HKEY_CURRENT_USER,strKeyPath,strValueName,dwValueWScript.Echo &quot;Current History Buffer Size: &quot; &amp; dwValue<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其他的根代号<br>    Const HKEY_CLASSES_ROOT              = &amp;H80000000<br>    Const HKEY_CURRENT_USER              = &amp;H80000001<br>    Const HKEY_LOCAL_MACHINE             = &amp;H80000002<br>    Const HKEY_USERS                     = &amp;H80000003<br>    Const HKEY_CURRENT_CONFIG            = &amp;H80000005</p><p>strComputer 可以是远程计算机. 填写其计算机名即可.如 <code>binPC</code><br>strKeyPath 是注册表key的路径, <strong>路径前后末端不用反斜杠</strong><br>GetDWORDValue 不同类别的value用不同Get方法,具体如下</p><p><img src="16.png"></p><ul><li><p>GetBinaryValue &lt;&gt; REG_BINARY<br>  oReg.GetBinaryValue HKEY_LOCAL_MACHINE,strKeyPath, strValueName,strValue<br>  返回 strValue<br>  具体参照: <a href="https://docs.microsoft.com/en-us/previous-versions/windows/desktop/regprov/getbinaryvalue-method-in-class-stdregprov">https://docs.microsoft.com/en-us/previous-versions/windows/desktop/regprov/getbinaryvalue-method-in-class-stdregprov</a></p></li><li><p>GetDWORDValue &lt;&gt; REG_DWORD<br>  用法如上</p></li><li><p>GetExpandedStringValue &lt;&gt; REG_EXPAND_SZ</p></li></ul><pre class="line-numbers language-VBScript" data-language="VBScript"><code class="language-VBScript">const HKEY_LOCAL_MACHINE &#x3D; &amp;H80000002strComputer &#x3D; &quot;.&quot;Set objReg&#x3D;GetObject(&quot;winmgmts:&#123;impersonationLevel&#x3D;impersonate&#125;!\\&quot;&amp;_    strComputer &amp; &quot;\root\default:StdRegProv&quot;)strKeyPath &#x3D; &quot;SOFTWARE\Microsoft\Windows NT\CurrentVersion\WinLogon&quot;strValueName &#x3D; &quot;UIHost&quot;Return &#x3D; objReg.GetExpandedStringValue(HKEY_LOCAL_MACHINE,_    strKeyPath,strValueName,strValue)If (Return &#x3D; 0) And (Err.Number &#x3D; 0) Then       WScript.Echo  &quot;The Windows logon UI host is: &quot; &amp; strValueElse    Wscript.Echo _        &quot;GetExpandedStringValue failed. Error &#x3D; &quot; &amp; Err.NumberEnd If<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>GetMultiStringValue &lt;&gt; REG_MULTI_SZ</p></li><li><p>GetQWORDValue &lt;&gt; REG_QWORD</p></li><li><p>GetStringValue  &lt;&gt; REG_SZ</p></li></ul><h5 id="新建一个Key"><a href="#新建一个Key" class="headerlink" title="新建一个Key"></a>新建一个Key</h5><pre class="line-numbers language-VBScript" data-language="VBScript"><code class="language-VBScript">const HKEY_LOCAL_MACHINE &#x3D; &amp;H80000002strComputer &#x3D; &quot;.&quot;Set objReg&#x3D;GetObject( &quot;winmgmts:&#123;impersonationLevel&#x3D;impersonate&#125;!\\&quot; &amp; strComputer &amp; &quot;\root\default:StdRegProv&quot;)strKeyPath &#x3D; &quot;SOFTWARE\NewKey&quot;objReg.CreateKey HKEY_LOCAL_MACHINE,strKeyPathWScript.Echo &quot;Created registry key HKEY_LOCAL_MACHINE\SOFTWARE\NewKey&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="在key下创建一个value"><a href="#在key下创建一个value" class="headerlink" title="在key下创建一个value"></a>在key下创建一个value</h5><pre class="line-numbers language-VBScript" data-language="VBScript"><code class="language-VBScript">Const HKEY_LOCAL_MACHINE &#x3D; &amp;H80000002strKeyPath &#x3D; &quot;SOFTWARE\NewKey&quot;strComputer &#x3D; &quot;.&quot;Set objReg&#x3D;GetObject( &quot;winmgmts:&#123;impersonationLevel&#x3D;impersonate&#125;!\\&quot; &amp; strComputer &amp; &quot;\root\default:StdRegProv&quot;)strValueName &#x3D; &quot;Example_Expanded_String_Value&quot;strValue &#x3D; &quot;%PATHEXT%&quot;objReg.SetExpandedStringValue HKEY_LOCAL_MACHINE,strKeyPath,strValueName,strValueWScript.Echo &quot;Example expanded_String_Value at &quot; &amp; &quot;HKEY_LOCAL_MACHINE\SOFTWARE\NewKey&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="获取计算机硬件"><a href="#获取计算机硬件" class="headerlink" title="获取计算机硬件"></a>获取计算机硬件</h4><pre class="line-numbers language-VBScript" data-language="VBScript"><code class="language-VBScript">Set Wshshell &#x3D; CreateObject(&quot;WScript.Shell&quot;)Set fs &#x3D; wscript.createobject(&quot;scripting.filesystemobject&quot;)thisFilePath &#x3D; fs.GetFile(Wscript.ScriptFullName).ParentFolder.Path&#39;获取执行这个vbs脚本的路径saveFileName &#x3D; wshShell.ExpandEnvironmentStrings( &quot;%COMPUTERNAME%&quot; )&#39;获取执行脚本计算机的主机名saveFile &#x3D; thisFilePath &amp; &quot;\&quot; &amp; saveFileName &amp; &quot;.txt&quot;&#39;输出结果到文本Set ts &#x3D; fs.CreateTextFile(saveFile, True, True)strComputer &#x3D; &quot;.&quot; Set objWMIService &#x3D; GetObject(&quot;winmgmts:&#x2F;&#x2F;&quot; &amp; strComputer &amp; &quot;&#x2F;root&#x2F;cimv2&quot;)Dim ip,mac,hostname,model,sn,version,officeVer,Memlocation,Memsize,Memtype&#39;------------------&#39;调用各个function模块GetIPMACGetHostnameModel GetSNGetWinVerGetMemnory&#39;------------------ts.writeline(&quot;Name&#x3D;&quot; &amp; hostname)ts.writeline(&quot;Model&#x3D;&quot; &amp; model)ts.writeline(&quot;Ipaddress&#x3D;&quot; &amp; ip)ts.writeline(&quot;Macaddress&#x3D;&quot; &amp; mac)ts.writeline(&quot;SerialNumber&#x3D;&quot; &amp; sn)ts.writeline(&quot;Version&#x3D;&quot; &amp; Version)ts.close Function GetHostnameModel()    dim colComputer,colComputers    Set colComputers &#x3D; objWMIService.ExecQuery _    (&quot;Select * from Win32_ComputerSystem&quot;)    For Each objComputer in colComputers        hostname &#x3D; objComputer.Name        model &#x3D; objComputer.model                Exit For    NextEnd FunctionFunction GetIPMAC()        Set colItems &#x3D; objWMIService.ExecQuery _     (&quot;Select * From Win32_NetworkAdapterConfiguration Where IPEnabled &#x3D; True&quot;)    For Each objItem in colItems        For Each objAddress in objItem.IPAddress            If objAddress &lt;&gt; &quot;&quot; then                &#39; GetIPMAC &#x3D;&quot;IP:  &quot; &amp; objAddress  &amp; vbCrlf &amp; &quot;MAC:  &quot; &amp; objItem.MACAddress                ip &#x3D; objAddress                mac &#x3D; objItem.MACAddress                Exit For            End If          Next        Exit For    NextEnd FunctionFunction  GetSN()    Set colItems &#x3D; objWMIService.ExecQuery _     (&quot;SELECT * FROM Win32_BIOS&quot;)    for each colItem in colItems        sn &#x3D; colItem.SerialNumber        Exit For     NextEnd FunctionFunction GetWinVer()    Set colComputers &#x3D; objWMIService.ExecQuery _    (&quot;Select * from Win32_OperatingSystem&quot;)     For Each objComputer in colComputers        version &#x3D; objcomputer.BuildNumber                 Exit For    NextEnd FunctionFunction GetOfficeVer() &#39;获取office的功能目前无法实现    Set colComputers &#x3D; objWMIService.ExecQuery _    (&quot;Select * from Win32_ComputerSystem&quot;) End Function Function GetMemnory()    Set colComputers &#x3D; objWMIService.ExecQuery _    (&quot;SELECT * FROM Win32_PhysicalMemory&quot;)     For Each objComputer in colComputers        Memlocation &#x3D; objComputer.DeviceLocator        Memsize &#x3D; objComputer.Capacity         Memtype &#x3D; objComputer.ConfiguredClockSpeed                 ts.writeline(&quot;&quot;)        ts.writeline(&quot;Memlocation&#x3D;&quot; &amp; Memlocation)        ts.writeline(&quot;Memsize&#x3D;&quot;&amp; Memsize)        ts.writeline(&quot;Memtype&#x3D;&quot;&amp; Memtype)        ts.writeline(&quot;&quot;)    NextEnd Function <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="查看电脑类型"><a href="#查看电脑类型" class="headerlink" title="查看电脑类型"></a>查看电脑类型</h4><pre class="line-numbers language-VBScript" data-language="VBScript"><code class="language-VBScript">strComputer &#x3D; &quot;.&quot; Set objWMIService &#x3D; GetObject(&quot;winmgmts:&quot; _ &amp; &quot;&#123;impersonationLevel&#x3D;impersonate&#125;!\\&quot; &amp; strComputer &amp; &quot;\root\cimv2&quot;) Set colChassis &#x3D; objWMIService.ExecQuery _ (&quot;Select * from Win32_SystemEnclosure&quot;) For Each objChassis in colChassis     For Each strChassisType in objChassis.ChassisTypes         Select Case strChassisType         Case 1         Wscript.Echo &quot;Other&quot;         Case 2         Wscript.Echo &quot;Unknown&quot;         Case 3         Wscript.Echo &quot;Desktop&quot;         Case 4         Wscript.Echo &quot;Low Profile Desktop&quot;         Case 5         Wscript.Echo &quot;Pizza Box&quot;         Case 6         Wscript.Echo &quot;Mini Tower&quot;         Case 7         Wscript.Echo &quot;Tower&quot;         Case 8         Wscript.Echo &quot;Portable&quot;         Case 9         Wscript.Echo &quot;Laptop&quot;         Case 10         Wscript.Echo &quot;Notebook&quot;         Case 11         Wscript.Echo &quot;Handheld&quot;         Case 12         Wscript.Echo &quot;Docking Station&quot;         Case 13         Wscript.Echo &quot;All-in-One&quot;         Case 14         Wscript.Echo &quot;Sub-Notebook&quot;         Case 15         Wscript.Echo &quot;Space Saving&quot;         Case 16         Wscript.Echo &quot;Lunch Box&quot;         Case 17         Wscript.Echo &quot;Main System Chassis&quot;         Case 18         Wscript.Echo &quot;Expansion Chassis&quot;         Case 19         Wscript.Echo &quot;Sub-Chassis&quot;         Case 20         Wscript.Echo &quot;Bus Expansion Chassis&quot;         Case 21         Wscript.Echo &quot;Peripheral Chassis&quot;         Case 22         Wscript.Echo &quot;Storage Chassis&quot;         Case 23         Wscript.Echo &quot;Rack Mount Chassis&quot;         Case 24         Wscript.Echo &quot;Sealed-Case PC&quot;         Case Else         Wscript.Echo &quot;Unknown&quot;         End Select     Next Next<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="启动音频服务"><a href="#启动音频服务" class="headerlink" title="启动音频服务"></a>启动音频服务</h4><p>有时候音频服务关闭,插入耳机也没有反应,可以通过<code>Troubleshoot sound problems</code>解决.但是为了自动化,就写了个脚本:</p><pre class="line-numbers language-VBScript" data-language="VBScript"><code class="language-VBScript">strComputer &#x3D; &quot;.&quot;Set objWMIService &#x3D; GetObject(&quot;winmgmts:&quot; &amp; &quot;&#123;impersonationLevel&#x3D;impersonate&#125;!\\&quot; &amp; strComputer &amp; &quot;\root\cimv2&quot;)Set colListOfServices &#x3D; objWMIService.ExecQuery _(&quot;Select * from Win32_Service Where Name &#x3D; &#39;AudioEndpointBuilder&#39;&quot;)For Each objService in colListOfServices    objService.StartService()    objService.ChangeStartMode(&quot;Automatic&quot;)NextSet colListOfServices &#x3D; objWMIService.ExecQuery _(&quot;Select * from Win32_Service Where Name &#x3D; &#39;Audiosrv&#39;&quot;)For Each objService in colListOfServices    objService.StartService()    objService.ChangeStartMode(&quot;Automatic&quot;)Next<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><blockquote><p><a href="http://huaidan.org/archives/1087.html">http://huaidan.org/archives/1087.html</a></p></blockquote><blockquote><p><a href="https://xz.aliyun.com/t/2080">https://xz.aliyun.com/t/2080</a></p></blockquote><blockquote><p><a href="https://wooyun.js.org/drops/WMI%20%E7%9A%84%E6%94%BB%E5%87%BB%EF%BC%8C%E9%98%B2%E5%BE%A1%E4%B8%8E%E5%8F%96%E8%AF%81%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF%E4%B9%8B%E6%94%BB%E5%87%BB%E7%AF%87.html">https://wooyun.js.org/drops/WMI%20%E7%9A%84%E6%94%BB%E5%87%BB%EF%BC%8C%E9%98%B2%E5%BE%A1%E4%B8%8E%E5%8F%96%E8%AF%81%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF%E4%B9%8B%E6%94%BB%E5%87%BB%E7%AF%87.html</a></p></blockquote><h2 id="cmd-下使用vmi"><a href="#cmd-下使用vmi" class="headerlink" title="cmd 下使用vmi"></a>cmd 下使用vmi</h2><h3 id="查看帮助"><a href="#查看帮助" class="headerlink" title="查看帮助"></a>查看帮助</h3><ul><li>/?  获取帮助</li><li>process/?  获取process这个子命令的帮助信息</li></ul><p><img src="12.png"></p><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><h4 id="process"><a href="#process" class="headerlink" title="process"></a>process</h4><pre class="line-numbers language-none"><code class="language-none">process where name&#x3D;&quot;maxthon.exe&quot; list full<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>name 后面必须接完整的进程名称(包括 <code>.exe</code>)</li><li>list full  会显示出进程的具体信息,排版也会整齐点</li></ul><pre class="line-numbers language-none"><code class="language-none">wmic process where name&#x3D;&#39;QQ.exe&#39; call terminate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>结束 QQ.exe 进程. 如果 <code>ReturnValue</code> 显示等于 0 , 代表命令执行成功</p><h4 id="services"><a href="#services" class="headerlink" title="services"></a>services</h4><p>停止服务</p><pre class="line-numbers language-none"><code class="language-none">Service where caption&#x3D;&quot;windows time&quot; call stopservice<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>开启服务</p><pre class="line-numbers language-none"><code class="language-none">Service where caption&#x3D;&quot;windows time&quot; call startservice<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>停止服务,注意 <code>name</code> 和 <code>caption</code> 的区别</p><pre class="line-numbers language-none"><code class="language-none">Service where name&#x3D;&quot;w32time&quot; call stopservice <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>caption</code> 显示服务名<br><code>name</code> 服务名称</p><p><img src="13.png"></p><p>更改spooler服务启动类型[auto|Disabled|Manual] 释[自动|禁用|手动]</p><pre class="line-numbers language-none"><code class="language-none">wmic SERVICE where name&#x3D;&quot;Spooler&quot; set StartMode&#x3D;&quot;auto&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>删除服务</p><pre class="line-numbers language-none"><code class="language-none">wmic SERVICE where name&#x3D;&quot;test123&quot; call delete<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="bios"><a href="#bios" class="headerlink" title="bios"></a>bios</h4><p>———–重要语法——————–<br>显示出BIOS信息</p><blockquote><p>wmic bios list full </p></blockquote><p>list决定显示的信息格式与范围，它有Brief、Full、Instance、 Status、System、Writeable等多个参数，full只是它的一个参数，也是list的缺省参数，表示显示所有的信息。<br>其他几个参数顾名思义，如Brief表示只显示摘要信息，Instance表示只显示对象实例，Status表示显示对象状态，Writeable表示只显示该对象的可写入的属性信息等。</p><p>获取bios其中一个参数(serialnumber)的值</p><pre class="line-numbers language-none"><code class="language-none">wmic bios get serialnumber &#x2F;value <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>同时获取两个值</p><pre class="line-numbers language-none"><code class="language-none">wmic bios get Manufacturer,Name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="ip"><a href="#ip" class="headerlink" title="ip"></a>ip</h4><p>配置或更新IP地址：</p><pre class="line-numbers language-none"><code class="language-none">wmic nicconfig where index&#x3D;0 call enablestatic(&quot;192.168.1.5&quot;), (&quot;255.255.255.0&quot;) <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><em>此命令自己测试不通过,可以作为参考用,如果要更改IP地址信息,可以用下面的命令</em></p><pre class="line-numbers language-none"><code class="language-none">netsh interface ip set address &quot;以太网&quot; static 192.168.2.200 255.255.255.0 192.168.2.1   &#39;这个命令设置静态ip地址, 后面三个地址分别对应:IP地址,子网掩码,默认网关netsh interface ip set dns &quot;以太网&quot; static 8.8.8.8 &#39; 设置静态DNSnetsh interface ip add dns &quot;以太网&quot;  180.76.76.76 &#39;添加DNS<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以通过下面命令查询 <code>index</code> 对应的 网卡</p><pre class="line-numbers language-none"><code class="language-none">nicconfig get index,description<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="system"><a href="#system" class="headerlink" title="system"></a>system</h4><p>这个命令可以查看某些系统信息</p><pre class="line-numbers language-none"><code class="language-none">wmic computersystem  list full<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>而这个命令可以查看计算机名称以及型号</p><blockquote><p>wmic computersystem  get name,model</p></blockquote><pre class="line-numbers language-none"><code class="language-none">C:\Windows\system32&gt;wmic computersystem  get name,modelModel          NameOptiPlex 3050  CANW0000000516<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="更改计算机名称"><a href="#更改计算机名称" class="headerlink" title="更改计算机名称"></a>更改计算机名称</h4><p>可以先用 <code>hostname</code> 命令 查询当前计算机名称</p><p>更改计算机名abc为123</p><pre class="line-numbers language-none"><code class="language-none">wmic computersystem where &quot;name&#x3D;&#39;abc&#39;&quot; call rename 123<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>或者为</p><pre class="line-numbers language-none"><code class="language-none">WMIC computersystem where caption&#x3D;&#39;DESKTOP-HJ3HMEF&#39; rename &#39;Sysgeek-PC&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="cpu"><a href="#cpu" class="headerlink" title="cpu"></a>cpu</h4><blockquote><p>wmic cpu list full </p></blockquote><h4 id="硬盘"><a href="#硬盘" class="headerlink" title="硬盘"></a>硬盘</h4><blockquote><p>wmic DISKDRIVE get Caption,size,InterfaceType</p></blockquote><p><img src="14.png"></p><blockquote><p>wmic LOGICALDISK get name,Description,filesystem,size,freespace</p></blockquote><h4 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h4><p>查找e盘下test目录(不包括子目录)下的cc.cmd文件</p><pre class="line-numbers language-none"><code class="language-none">wmic datafile where &quot;drive&#x3D;&#39;e:&#39; and path&#x3D;&#39;\\test\\&#39; and FileName&#x3D;&#39;cc&#39; and Extension&#x3D;&#39;cmd&#39;&quot; list <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><em>注意: path 参数反斜杠需要两个</em></p><p>查找e盘下所有目录和子目录下的cc.cmd文件,且文件大小大于1K</p><pre class="line-numbers language-none"><code class="language-none">wmic datafile where &quot;drive&#x3D;&#39;e:&#39; and FileName&#x3D;&#39;cc&#39; and Extension&#x3D;&#39;cmd&#39; and FileSize&gt;&#39;1000&#39;&quot; list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>删除e盘下文件大小大于10M的.cmd文件</p><pre class="line-numbers language-none"><code class="language-none">wmic datafile where &quot;drive&#x3D;&#39;e:&#39; and Extension&#x3D;&#39;cmd&#39; and FileSize&gt;&#39;10000000&#39;&quot; call delete<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>删除e盘下test目录(不包括子目录)下的非.cmd文件</p><pre class="line-numbers language-none"><code class="language-none">wmic datafile where &quot;drive&#x3D;&#39;e:&#39; and Extension&lt;&gt;&#39;cmd&#39; and path&#x3D;&#39;test&#39;&quot; call delete<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>复制e盘下test目录(不包括子目录)下的cc.cmd文件到e:,并改名为aa.bat</p><pre class="line-numbers language-none"><code class="language-none">wmic datafile where &quot;drive&#x3D;&#39;e:&#39; and path&#x3D;&#39;\\test\\&#39; and FileName&#x3D;&#39;cc&#39; and Extension&#x3D;&#39;cmd&#39;&quot; call copy &quot;e:\aa.bat&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>wmic 全盘搜索某文件并获取该文件所在目录</p><pre class="line-numbers language-none"><code class="language-none">for &#x2F;f &quot;skip&#x3D;1 tokens&#x3D;1*&quot; %i in (&#39;wmic datafile where &quot;FileName&#x3D;&#39;qq&#39; and extension&#x3D;&#39;exe&#39;&quot; get drive^,path&#39;) do (set &quot;qPath&#x3D;%i%j&quot;&amp;@echo %qPath:~0,-3%)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>改名c:\hello.txt为c:\test.txt</p><pre class="line-numbers language-none"><code class="language-none">wmic datafile &quot;c:\\hello.txt&quot; call rename c:\test.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查找h盘下目录含有test,文件名含有perl,后缀为txt的文件</p><pre class="line-numbers language-none"><code class="language-none">wmic datafile where &quot;drive&#x3D;&#39;h:&#39; and extension&#x3D;&#39;txt&#39; and path like &#39;%\\test\\%&#39; and filename like &#39;%perl%&#39;&quot; get name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="显示器"><a href="#显示器" class="headerlink" title="显示器"></a>显示器</h4><p>获取屏幕分辨率</p><pre class="line-numbers language-none"><code class="language-none">wmic DESKTOPMONITOR where Status&#x3D;&#39;ok&#39; get ScreenHeight,ScreenWidth<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><p>获取temp环境变量</p><pre class="line-numbers language-none"><code class="language-none">wmic ENVIRONMENT where &quot;name&#x3D;&#39;temp&#39;&quot; get UserName,VariableValue<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="账户"><a href="#账户" class="headerlink" title="账户"></a>账户</h4><p>更改用户administrator全名为admin</p><pre class="line-numbers language-none"><code class="language-none">wmic USERACCOUNT where name&#x3D;&quot;Administrator&quot; set FullName&#x3D;&quot;admin&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>更改用户名admin为admin00</p><pre class="line-numbers language-none"><code class="language-none">wmic useraccount where &quot;name&#x3D;&#39;admin&quot; call Rename admin00<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="已安装的软件"><a href="#已安装的软件" class="headerlink" title="已安装的软件"></a>已安装的软件</h4><p>cmd 下执行如下命令,可以统计本机安装的软件</p><pre class="line-numbers language-none"><code class="language-none">wmic &#x2F;output:D:\InstalledSoftwareList.txt product get name,versionwmic &#x2F;NAMESPACE:&quot;\\root\CIMV2&quot; PATH Win32_Productwmic &#x2F;NAMESPACE:&quot;\\root\CIMV2&quot; PATH Win32_Product get name,version &#x2F;FORMAT:table<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>powershell版本</p><pre class="line-numbers language-none"><code class="language-none">Get-WmiObject -Class Win32_Product | Select-Object -Property Name &gt; D:\InstalledSoftwareList.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>通过注册表获取</p><pre class="line-numbers language-none"><code class="language-none">Get-ItemProperty HKLM:\Software\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\* | Select-Object DisplayName, DisplayVersion, Publisher, InstallDate | Format-Table –AutoSize &gt; D:\InstalledSoftwareList.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><a href="https://www.sysgeek.cn/get-installed-software-list-windows/">https://www.sysgeek.cn/get-installed-software-list-windows/</a></p></blockquote><blockquote><p><a href="https://www.freebuf.com/articles/system/182531.html">https://www.freebuf.com/articles/system/182531.html</a></p></blockquote><p>重要</p><blockquote><p><a href="https://3gstudent.github.io/3gstudent.github.io/%E6%B8%97%E9%80%8F%E5%9F%BA%E7%A1%80-%E8%8E%B7%E5%BE%97%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E5%B7%B2%E5%AE%89%E8%A3%85%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%88%97%E8%A1%A8/">https://3gstudent.github.io/3gstudent.github.io/%E6%B8%97%E9%80%8F%E5%9F%BA%E7%A1%80-%E8%8E%B7%E5%BE%97%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E5%B7%B2%E5%AE%89%E8%A3%85%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%88%97%E8%A1%A8/</a></p></blockquote><p><strong>通过WMI查询Win32_Product 或者用 systeminfo 或 psinfo工具 只能获得特定的程序列表.这些程序有一个共同的特征： 安装包由Windows Installer制作，安装过程中调用Windows Installer服务进行安装</strong></p><p>我们知道，通过控制面板 -&gt; 程序 -&gt; 程序和功能获取的程序列表比较完整，该列表对应注册表键值：</p><p>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\</p><p>每个子健代表列表中的一个程序</p><p>所以，可以通过枚举注册表键值的方法获得完整程序列表</p><p>值得注意的是64位系统下，注册表存在重定向的问题，也会影响程序列表的显示</p><p>32位程序列表对应注册表键值HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\</p><p>64位程序列表对应注册表键值HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\</p><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p>wmic process call create “taskmgr.exe”</p><p>修改程序优先级<br>wmic process where name=”explorer.exe” call set priority 64</p><p>终止程序<br>wmic process where name=”explorer.exe” call terminate</p><p>枚举出整个系统中所有可执行文件的路径地址<br>wmic process where “NOT ExecutablePath LIKE ‘%Windows%’” GET ExecutablePath</p><p>wmic fsdir where=”drive=’c:’ and filename=’test’” get /format:list</p><p>wmic datafile where name=’c:\windows\system32\demo\demo.txt’ get /format:list</p><p>WMIC可以提取出所有重要系统文件的路径，例如temp目录和win目录等等：<br>wmic environment get Description, VariableValue</p><p>wmic product get name,version</p><p>获取运行的服务<br>wmic service where (state=”running”) get caption, name, startmode</p><p>sysdrive选项可以枚举出驱动的名称、路径和服务类型等数据：<br>wmic sysdriver get Caption, Name, PathName, ServiceType, State, Status /format:list</p><p>wmic useraccount where name=’demo’ set disabled=false</p><p>用户账户重命名<br>wmic useraccount where name=’demo’ rename hacker</p><p>我们还可以限制本地用户的密码修改操作<br>wmic useraccount where name=’hacker’ set passwordchangeable=false</p><p>我们可以枚举出目标系统安装的反病毒产品信息，包括安装位置和版本：<br>wmic /namespace:\root\securitycenter2 path antivirusproduct GET displayName,productState, pathToSignedProductExe</p><p>wmic nteventlog where filename=’system’ cleareventlog</p><p>wmic nteventlog where (description like “%shell%”) call cleareventlog</p>]]></content>
      
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> 编程 </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>英语语法</title>
      <link href="/2020/02/14/ying-yu-yu-fa/"/>
      <url>/2020/02/14/ying-yu-yu-fa/</url>
      
        <content type="html"><![CDATA[<p><strong>Listen a song when reading</strong></p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=22778741&auto=0&height=66"></iframe><p>部分内容时下面视频内容的笔记,不过不是很详细.自己买了一个星火英语啃,顺便增加了笔记</p><blockquote><p><a href="https://www.bilibili.com/video/av2639206?p=1">https://www.bilibili.com/video/av2639206?p=1</a></p></blockquote><p>附上一张语法概览图,点击后,右键<code>另存图片为</code>即可下载</p><p><a href="%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%95%E4%BD%93%E7%B3%BB%E5%9B%BE.png">下载</a></p><p>笔记略微粗陋,如有错误,请不吝指正!</p><h2 id="词素"><a href="#词素" class="headerlink" title="词素"></a>词素</h2><h3 id="前缀"><a href="#前缀" class="headerlink" title="前缀"></a>前缀</h3><h4 id="表示否定意义的前缀"><a href="#表示否定意义的前缀" class="headerlink" title="表示否定意义的前缀"></a>表示否定意义的前缀</h4><ul><li><p>纯否定前缀</p><ul><li>a- | an-<br>  asymmetry 不对称<br>  anhydrous 无水的</li><li>dis-<br>  dishonest<br>  dislike</li><li>in- | ig- | il- | im- | ir-<br>  incapable 不会的,无能力的<br>  inability 无能,无力<br>  ignoble 卑微的,可耻的,地位低下的<br>  impossible  不可能的,难对付的<br>  immoral 不道德的,邪恶的,淫荡的<br>  illegal 不合法的<br>  irregular  不规则的</li><li>ne- | n-<br>  none<br>  neither<br>  never</li><li>non-<br>  nonsense 废话,愚蠢的行为,无聊的事物</li><li>un-<br>  unable<br>  unemployment 失业(人数),失业率</li></ul></li><li><p>表示错误的意义</p><ul><li>male- | mal-<br>  malfunction  故障,障碍<br>  maladjustment(失调)</li><li>mis-<br>  mistake<br>  mislead</li><li>pseudo-<br>  pseudonym(假名,笔名)<br>  pseudoscience 伪科学</li></ul></li><li><p>表示反动作的意思</p><ul><li><p>de-<br>  defend 防守,保卫<br>  demodulation(解调)</p></li><li><p>dis-<br>  disarm 裁军,使息怒<br>  disconnect</p></li><li><p>un-<br>  unload 卸, 摆脱…负担<br>  uncover 揭露,发现,揭开</p></li></ul></li><li><p>表示相反,相互对立的意思</p><ul><li><p>anti- | ant-<br>  antiknock(防震)<br>  antiforeign(排外的)</p></li><li><p>contra- | contre- | contro-<br>  contradiction 矛盾, 反驳<br>  controflow(逆流)</p></li><li><p>counter-<br>  counteraction 反动,抵抗<br>  counterbalance 抵消,抗衡,平衡力</p></li><li><p>ob- | oc- | of- | op-<br>  object 反对,抗议   n.物体<br>  oppose 反对<br>  occupy 占据,居住</p></li><li><p>with-<br>  withdraw  取回,撤退<br>  withstand 承受</p></li></ul></li></ul><h4 id="表示空间位置-方向关系的前缀"><a href="#表示空间位置-方向关系的前缀" class="headerlink" title="表示空间位置,方向关系的前缀"></a>表示空间位置,方向关系的前缀</h4><ul><li>a-<br>  在…之上,向…<br>  aboard 在…上, 在船上,在火车上,在飞机上<br>  aside 在旁边,离开   n. 旁白,私语,悄悄话</li><li>by-<br>  附近,邻近,边侧<br>  bypath 小路<br>  bypass vt. 绕过,避开  不顾   n. 旁道</li><li>circum- | circu-<br>  周围,环绕,回转<br>  circumstance  环境,条件,情况,境遇,经济情况<br>  circuit 电路,回路,环道,一圈     vi. 环形</li><li>de-<br>  在下,向下<br>  descend 下降,遗传,下去<br>  degrade 贬低, 降级,降低</li><li>en-<br>  在内,进入<br>  encage 关在笼中,禁闭<br>  enbed 嵌入</li><li>ex- | ec- | es-<br>  外部,外<br>  exit<br>  eclipse vt. 形成蚀；使黯然失色 n. 日蚀，月蚀；黯然失色<br>  expand<br>  export</li><li>extra-<br>  额外<br>  extraction 取出, 拔牙  开采</li><li>fore-<br>  在前面<br>  forehead  前额<br>  foreground 前景 , 突出的地方</li><li>in- | il- | im- | ir-<br>  向内,在内,背于<br>  inland  内地,内陆<br>  invade 侵略, 涌入<br>  inside<br>  import</li><li>inter- | intel-<br>  在…间,相互<br>  international<br>  interaction 合作, 相互作用</li><li>intro-<br>  向内,在内,内侧<br>  introduce 介绍,引见,采用</li><li>medi- | med- | mid-<br>  中间<br>  Mediterranean 地中海<br>  midposition 中点</li><li>out-<br>  在上面,在外部,在外<br>  outline 轮廓, 大概, 略图, 概述<br>  outside<br>  outward 外出的, 往外的 , 外表的, 表面的</li><li>over-<br>  在上面,在外部,向上<br>  overlook 忽略,俯瞰,远眺,宽恕,监督,检查<br>  overhead  离地面的, 头顶上的, 上空的. 在楼上<br>  overboard 在船外. 拒绝,丢弃</li><li>post-<br>  向后,在后面,次<br>  postscript 附言<br>  postgraduate 研究生</li><li>pre-<br>  在前,在前面<br>  prefix  前缀<br>  preface  序言,前言. 开端,前奏<br>  preposition 介词</li><li>pro-<br>  在前,向前<br>  progress 进步,发展<br>  proceed 前进, 继续进行</li><li>sub- | suc- | suf- | sug- | sum- | sup- | sur- | sus-<br>  在下面,下<br>  subway<br>  submarine  潜艇<br>  suffix 添后缀  n.后缀,下标<br>  suppress 压制,镇压; 查禁,隐瞒<br>  supplement  增补; 补编</li><li>super- | sur-<br>  在…之上<br>  superficial 表面的,肤浅的<br>  surface 表面<br>  superstructure 上层建筑. 建筑上面的部分</li><li>trans-<br>  移上,转上,在那一边<br>  translate 翻译,转化<br>  transform 改变<br>  transoceanic 在海洋彼岸的,横越海洋的</li><li>under-<br>  在…下面,下的<br>  underline 在…下面画线; 加强,强调<br>  underground </li><li>up-<br>  向上,向上面<br>  upward 向上,上升的<br>  uphold 赞成,支撑,举起,鼓励<br>  uphill 上坡的,向上的. 上升,登高</li></ul><h4 id="表示时间-序列关系的前缀"><a href="#表示时间-序列关系的前缀" class="headerlink" title="表示时间,序列关系的前缀"></a>表示时间,序列关系的前缀</h4><ul><li>ante- | anti-<br>  先前,早于,预先<br>  antecedent 先行词,发生在前的事,先例. 祖先. 前身. 在前的<br>  anticipate 预感,期望</li><li>ex-<br>  先,故,旧<br>  ex-president 前任总统<br>  ex-husband</li><li>fore-<br>  在前面,先前,前面<br>  foreword 前言,序<br>  foretell 预言</li><li>mid- | medi-<br>  中,中间<br>  midnight<br>  midsummer 仲夏,夏至</li><li>post-<br>  在后,后<br>  postwar 战后的</li><li>pre- | pri-<br>  在前,事先,预先<br>  preheat 预热<br>  prewar 战前的<br>  prehistory 史前时期</li><li>pro-<br>  在前,先,前<br>  prologue(序幕,开场白)<br>  prophet 预言家</li><li>re-<br>  再一次,重新<br>  retell 复述<br>  rewrite</li></ul><h4 id="表示比较程度差别关系的前缀"><a href="#表示比较程度差别关系的前缀" class="headerlink" title="表示比较程度差别关系的前缀"></a>表示比较程度差别关系的前缀</h4><ul><li>by-<br>  副,次要的<br>  byproduct 副产品, 副作用</li><li>extra-<br>  超越,额外<br>  extraordinary 非常奇怪的,特别的,临时的</li><li>hyper-<br>  超过,极度<br>  hypersonic 超音速的<br>  hypertension 高血压</li><li>out-<br>  超过,过分<br>  outdo(超过,胜过)<br>  outbid 出价高于(别人)</li><li>over-<br>  超过,过度,太<br>  overeat<br>  overdress (使)穿的太讲究; 外衣<br>  oversleep 睡过头</li><li>sub- | suc-<br>  次,低,副,亚<br>  subeditor 副主编<br>  subordinate 下级的, 次要的,附属的<br>  succession 连续; 继承,继任,继承权</li><li>super- | sur-<br>  超过<br>  supernatural 超自然的<br>  superpower 超级大国<br>  surplus 过剩的,多余的</li><li>under-<br>  低劣,低下<br>  undersize 不够大的<br>  undergrown 发育不全的</li><li>vice-<br>  副,次<br>  vice-president<br>  vice-chairman</li></ul><h4 id="表示共同-相等意思的前缀"><a href="#表示共同-相等意思的前缀" class="headerlink" title="表示共同,相等意思的前缀"></a>表示共同,相等意思的前缀</h4><ul><li>com- | cop- | con- | cor- | co-<br>  共同,一起<br>  combine<br>  connect 连接<br>  coexist 和平共存</li><li>syn- | syl- | sym-<br>  同,共,和,类<br>  synthesis 综合,合成<br>  sympathy 同情(心)</li></ul><h4 id="表示整个-完全意思的前缀"><a href="#表示整个-完全意思的前缀" class="headerlink" title="表示整个,完全意思的前缀"></a>表示整个,完全意思的前缀</h4><ul><li><p>al-<br>  完整,完全<br>  alone 单独的<br>  almost 几乎</p></li><li><p>over-<br>  完全,全<br>  overall 总体的,综合的; 大体上,总的来说; 全部的<br>  overflow 溢出,淹没. 充满</p></li><li><p>pan-<br>  全,总,万<br>  panentheism(泛神论)<br>  panorama(全景,盖伦)</p></li></ul><h4 id="表示分离-离开意思的前缀"><a href="#表示分离-离开意思的前缀" class="headerlink" title="表示分离,离开意思的前缀"></a>表示分离,离开意思的前缀</h4><ul><li>a- | ab- | abs-<br>  分离,离开<br>  away<br>  apart 分离的,与众不同的<br>  abstract  抽象,摘要. 抽象的<br>  abstain 放弃, 避免</li><li>de-<br>  离去,除去<br>  depart 离开,出发,违反,去世<br>  decolour 使脱色</li><li>dis- | di- | dif-<br>  分离,离开<br>  disarm vi. 裁军 vt. 使息怒<br>  divorce vt. 使离婚，使分离；与…离婚 n. 离婚；分离</li><li>ex- | e-<br>  离开,分离<br>  expel vt. 驱逐；开除<br>  exclude vt. 排除；排斥；拒绝接纳；逐出<br>  expatriate   侨民；放弃本国国籍的人</li><li>for-<br>  离开,脱离<br>  forgive<br>  forget</li><li>re-<br>  离开<br>  release<br>  resolve vt. 决定；使…分解；决心要做…；溶解vi. 决心；解决；分解 n. 坚决；决定要做的事</li><li>se-<br>  分离,隔离<br>  separate vt. 使分离；使分居 vi. 分开；分居 adj. 分开的；单独的<br>  seduce vt. 引诱；诱惑；诱奸；怂恿<br>  select</li></ul><h4 id="表示通过-遍及意思的前缀"><a href="#表示通过-遍及意思的前缀" class="headerlink" title="表示通过,遍及意思的前缀"></a>表示通过,遍及意思的前缀</h4><ul><li>dia-<br>  通过,横过<br>  diameter 直径,放大率<br>  diagram 图表,图解</li><li>per- | pel-<br>  通,总,遍<br>  perfect 完美的<br>  perform 执行；完成；演奏<br>  pervade(浸透)</li><li>trans<br>  横过,贯通<br>  transparent adj. 透明的 含义清楚的, 显而易见的<br>  transmit vt. &amp; vi. 发射, 播送, 广播 vt. 传播, 传染 传导<br>  transport 运送; 流放</li></ul><h4 id="表示加强意思的前缀"><a href="#表示加强意思的前缀" class="headerlink" title="表示加强意思的前缀"></a>表示加强意思的前缀</h4><ul><li>a-<br>  arouse vt. 唤醒 引起, 激发<br>  ashamed 惭愧的，感到难为情的；耻于……的</li><li>ad-<br>  adjoin  毗连，邻接<br>  adhere(黏着)</li></ul><h4 id="表示变换此类动作的前缀"><a href="#表示变换此类动作的前缀" class="headerlink" title="表示变换此类动作的前缀"></a>表示变换此类动作的前缀</h4><ul><li><p>be-<br>  befriend(帮助,扶助)</p></li><li><p>en-<br>  enslave 使成为奴隶;奴役 使受控制;征服;制伏<br>  enable<br>  enrich</p></li><li><p>ad- | ac- | af- | ag- | an- | ap- | ar- | as- | at-<br>  adapt vt. 改编；使适应 vi. 适应<br>  accord n. 一致, 符合 (尤指国与国之间的)谅解, 协议 vt. 给予, 赠予<br>  affix vt. 粘上；署名；将罪责加之于 n.词缀；附加物<br>  aggression  n. 侵略, 侵犯,挑衅<br>  arrive<br>  assist 帮助,促进<br>  attend 出席；上（大学等）；照料；招待；陪伴 (attempt 试图)<br>  attract 吸引, 引起…的注意<br>  arrange  排列；安排；整理<br>  assign vt. 分配; 交给 指派, 选派</p></li></ul><h4 id="表示数量关系的前缀"><a href="#表示数量关系的前缀" class="headerlink" title="表示数量关系的前缀"></a>表示数量关系的前缀</h4><ul><li>mono- | mon-<br>  单一,一<br>  monotone 单音调<br>  monopoly 垄断；垄断者；专卖权<br>  monarch 君主, 帝王</li><li>ambi- | bi- | di- | twi-<br>  二,两,双<br>  ambiguous 引起歧义的; 模棱两可的, 含糊不清的<br>  amphibian 两栖动物 水旱两生植物 水陆两用飞行器 水陆两用车<br>  bicycle 自行车, 脚踏车<br>  diode 二极管<br>  twilight 黄昏; 黎明</li><li>deca- | deco- | dec- | deci-<br>  十<br>  decade<br>  decimals 位数；小数（decimal的复数形式）</li><li>hecto- | hect- | centi-<br>  百,百分之一<br>  hectometer (长度单位)百米<br>  centimeter 厘米</li><li>kilo-<br>  千,千分之一<br>  kilometer</li><li>myria- | myri- | mega- | meg- | micro-<br>  万,万分之一<br>  myriametre 万米(即10公里,略作mym.)<br>  megabyte 兆字节<br>  microvolt 微伏(等于1伏特的百万分之一)</li><li>multi- | mult- | poly-<br>  许多,复,多数<br>  multipmetre  多重<br>  polysyllable 多音节字</li><li>hemi- | demi- | semi- | pene- | pen-<br>  半,一半<br>  hemisphere 半球<br>  demiofficial 半官方的<br>  semiconductor 半导体<br>  semitransparent 半透明的<br>  peninsula  半岛(半岛，是一種三面环海，一面连陆地的地形，相當小的半岛稱為海岬（海角）)</li></ul><h4 id="表示特殊意义的前缀"><a href="#表示特殊意义的前缀" class="headerlink" title="表示特殊意义的前缀"></a>表示特殊意义的前缀</h4><ul><li>arch-<br>  首位,第一,主要的<br>  architect 建筑师, 设计师(?)<br>  archbishop (基督教会的)大主教</li><li>auto-<br>  自己,独立,自动<br>  automobile<br>  autobiography 自传</li><li>bene-<br>  善,福<br>  benefit vt. &amp; vi. 有益于, 得益 n. 益处, 好处 救济金, 保险金</li><li>eu-<br>  优,美好<br>  eugenics(优生学)<br>  euphemism 委婉语;委婉说法</li><li>male- | mal-<br>  恶,不良<br>  maltreatment 虐待,粗暴对待<br>  malodor 恶臭</li><li>macro-<br>  大,宏大<br>  macroscopic(宏观)</li><li>magni-<br>  大<br>  magnificent 壮丽的, 伟大的, 华丽的, 高贵的</li><li>micro-<br>  微<br>  microscope 显微镜</li></ul><h4 id="表示术语的前缀"><a href="#表示术语的前缀" class="headerlink" title="表示术语的前缀"></a>表示术语的前缀</h4><ul><li>aud-<br>  听,声<br>  audience 观众；听众；接见；读者</li><li>bio-<br>  生命,生物<br>  biography 传记<br>  biology 生物学</li><li>ge-<br>  地球,大地<br>  geography n. 地理(学) 地形, 地势</li><li>phon-<br>  声,声调<br>  phonograph 留声机</li><li>tele-<br>  远离<br>  television<br>  telephone</li></ul><h3 id="后缀"><a href="#后缀" class="headerlink" title="后缀"></a>后缀</h3><h4 id="名词后缀"><a href="#名词后缀" class="headerlink" title="名词后缀"></a>名词后缀</h4><h5 id="具有某种职业或动作的人"><a href="#具有某种职业或动作的人" class="headerlink" title="具有某种职业或动作的人"></a>具有某种职业或动作的人</h5><ul><li><p>-an | -ian<br>  …地方的人,精通…的人<br>  American<br>  historian 历史学家, 史学工作者</p></li><li><p>-al<br>  具有…职务的人<br>  principal adj. 最重要的; 主要的 n. 负责人, 校长 资本, 本金 被代理人, 委托人</p></li><li><p>-ant | -ent<br>  …者<br>  merchant 商人<br>  agent<br>  servant  仆人，佣人；公务员；雇工<br>  student</p></li><li><p>-ar<br>  …的人<br>  scholar 学者；奖学金获得者<br>  liar 说谎者</p></li><li><p>-ard | -art<br>  做…的人<br>  coward n. 懦夫，懦弱的人 adj. 胆小的，懦怯的<br>  laggard n. 落后者<br>  braggart n. 吹嘘；好自夸者；大言者 adj. 自夸的；吹牛的</p></li><li><p>-arian<br>  …派别/主义的人<br>  humanitarian  人道主义者,博爱主义者,慈善家<br>  vegetarian 素食者；素食主义者</p></li><li><p>-ary<br>  从事…的人<br>  secretary n. 秘书 书记 部长, 大臣<br>  missionary 传教士</p></li><li><p>-ate<br>  具有…职责的人<br>  candidate 申请求职者, 候选人 报考者<br>  graduate</p></li><li><p>-ator<br>  做…的人<br>  educator  教师；教育家；教育工作者<br>  speculator  投机倒把者, 投机商</p></li><li><p>-crat<br>  某种政体,主义的支持者<br>  democrat 民主政体论者；民主主义者；民主党人<br>  bureaucrat n. 官僚,官僚主义者,官僚作风的人</p></li><li><p>-ee<br>  动作承受者<br>  employee<br>  examinee 应试者；受审查者；受检查者</p></li><li><p>-eer<br>  从事于…的人<br>  engineer<br>  volunteer 志愿者</p></li><li><p>-er<br>  从事某职业的人,某地区或地方的人<br>  banker  n. 银行家,银行主,银行经理 庄家<br>  observer 观察者, 观察员; 遵守者<br>  londoner 伦敦人<br>  villager </p></li><li><p>-ese<br>  …国人, …地方的人<br>  Japanese<br>  Cantonese</p></li><li><p>-ess<br>  阴性人称名词<br>  actress<br>  hostess n.女主人 空中小姐<br>  manageress 女经理,女管理人</p></li><li><p>-eur<br>  …家<br>  amateur adj. 业余的, n. 业余爱好者 外行, 生手<br>  litterateur 文学家,文人</p></li><li><p>-ian<br>  …地方人,信仰…教的人,从事…职业的人<br>  Christian 基督教徒<br>  physician 医生, 内科医生<br>  musician</p></li><li><p>-ician<br>  精通者, …家<br>  electrician  电工, 电气专家<br>  magician 魔术师，变戏法的人<br>  technician   技术人员, 专家; 技巧好的人</p></li><li><p>-icist<br>  …家, …者, …能手<br>  physicist 物理学家<br>  phoneticist 语音学者<br>  technicist 技术员,技师</p></li><li><p>-ic<br> …者, …师<br> mechanic n. 技工，机修工 adj. 手工的<br> critic 批评家，评论家；爱挑剔的人</p></li><li><p>-ie<br>  爱称, 指小<br>  auntie 阿姨<br>  lassie 姑娘；少女；恋人</p></li><li><p>-ier<br>  从事…职业<br>  cavalier 对女人彬彬有礼的绅士,对女人献殷勤的男子  骑士,骑手<br>  clothier 男装裁缝, 男服装商<br>  brazier 铜匠</p></li><li><p>-ine | -ina<br>  阴性人称<br>  heroine  女英雄；女杰<br>  ballerina 芭蕾舞女演员</p></li><li><p>-ist<br>  从事…研究者, 信仰…主义者<br>  pianist 钢琴家<br>  communist 共产主义者<br>  dentist 牙科医生<br>  artist<br>  chemist  药剂师；化学家；药店，药商</p></li><li><p>-ive<br>  动作者, 行动者<br>  native 本地人；土产；当地居民<br>  captive 俘虏；迷恋者</p></li><li><p>-logist<br>  …学家,研究者<br>  biologist 生物学家<br>  geologist  地质学家;地质学者</p></li><li><p>-or<br>  …者<br>  author<br>  doctor<br>  operator</p></li><li><p>-ster<br>  做…事情的人<br>  youngerster 青少年<br>  gamester 赌徒，赌棍<br>  songster 歌唱家</p></li><li><p>-yer<br>  从事…职业者<br>  lawyer</p></li></ul><h5 id="构成具有抽象名词的含义"><a href="#构成具有抽象名词的含义" class="headerlink" title="构成具有抽象名词的含义"></a>构成具有抽象名词的含义</h5><ul><li><p>-acy<br>  性质,状态,境遇<br>  accuracy 精确(性), 准确(性)<br>  diplomacy   外交, 外交手腕, 外交术</p></li><li><p>-age<br> 状态,行为,身份及结果,总称<br> courage  勇气；胆量<br> storage 存储；仓库；贮藏所<br> marriage  结婚 婚姻状况 婚礼</p></li><li><p>-al<br>  事物的动作,过程<br>  refusal n. 拒绝；优先取舍权；推却；取舍权<br>  arrival<br>  survival n. 幸存, 生存<br>  denial n. 否认</p><p>  表示具体的事物<br>  manual 手册, 指南<br>  signal 信号；暗号；导火线<br>  editorial 编辑的, 主笔的<br>  journal</p></li><li><p>-ance | -ence<br>  性质,状态,行为,过程,总量,程度<br>  endurance 忍耐力<br>  importance 重要(性)<br>  diligence 勤奋，勤勉<br>  difference<br>  obedience 服从;顺从;听话</p></li><li><p>-ancy | -ency<br>  性质,状态,行为,过程<br>  frequency 频率 振动频率; 波段<br>  urgency 紧迫;急迫;急事；紧要<br>  efficiency 效率, 效能</p></li><li><p>-bility<br>  动作,性质,状态<br>  possibility 可能性 可能的事<br>  feasibility  可行性</p></li><li><p>-craft<br> 工艺,技巧<br> woodcraft 木工技术<br> handicraft 手工艺;手工艺品  手工业者;手工艺人<br> statecraft  管理国家的本领</p></li><li><p>-cracy<br>  统治,支配<br>  bureaucracy  政府机构 官僚主义, 官僚作风<br>  democracy n. 民主, 民主制 民主国家</p></li><li><p>-cy<br>  性质,状态,职位,级别<br>  bankruptcy 破产；倒闭 彻底失败;(名誉等的)完全丧失<br>  supremacy 至高, 无上;最高权力</p></li><li><p>-dom<br>  等级,领域,状态<br>  freedom<br>  kingdom<br>  wisdom</p></li><li><p>-ery | -ry<br>  行为,状态,习性<br>  bravery 勇敢；勇气<br>  bribery 行贿,受贿,贿赂<br>  rivalry 竞争；竞赛；对抗</p></li><li><p>-ety<br>  性质,状态<br>  variety n. 品种, 种类 变化, 多样化<br>  dubiety 可疑性,可疑的东西,怀疑</p></li><li><p>-faction | -facture<br> 做成, …化, 作用<br> satisfaction 满意, 满足, 实现 赔偿物, 补偿<br> manufacture  制造 捏造 制造品, 产品</p></li><li><p>-hood<br>  资格,身份,年纪,状态<br>  childhood<br>  falsehood 谎言;假话;虚假</p></li><li><p>-ice<br> 行为,性质,状态<br> notice 通知，布告；注意；公告 vt. 注意到；通知；留心 vi. 引起注意<br> justice n. 正义; 公正, 合理 法律制裁; 司法; 审判 法官<br> service  服务，服侍；服役；仪式</p></li><li><p>-ine<br>  带有抽象概念<br>  medicine 药；医学；内科；巫术<br>  discipline vt. 训练, 训导 处罚, 惩罚 n. 训练, 锻炼, 训导 纪律 处罚, 处分 学科<br>  famine  饥荒；饥饿，奇缺</p></li><li><p>-ing<br>  动作的过程,结果<br>  building<br>  writing<br>  learning</p></li><li><p>-ion | -sion | -tion | -ation | ition<br>  行为的过程,结果,状况<br>  action<br>  solution<br>  conclusion n. 结束, 结尾 信念, 意见, 结论<br>  destruction 破坏, 毁灭, 消灭<br>  expression n. 表示, 表现, 表达 表情 感情 词, 措辞, 词组<br>  correction n. 改〔纠〕正 修改;纠正 有待改正 adj. 改正的,纠正的</p></li><li><p>-ise<br>  性质,状态<br>  exercise 练习；运动；运用；操练；典礼；礼拜<br>  merchandise n. 商品, 货物 vt. 买卖, 经营</p></li><li><p>-ism<br>  制度,主义,学说,信仰,行为<br>  socialism<br>  criticism n. 批评, 批判, 指责 评论, 评论文章<br>  colloquialism 俗话,白话,口语<br>  heroism 英勇，英雄气概；勇敢的事迹；英雄行为</p></li><li><p>-ity<br>  性质,状态,程度<br>  purity 纯净；纯洁；纯粹；纯度<br>  reality 现实；真实；实际<br>  ability 能力; 力量  智慧, 才智; 天资<br>  calamity 灾祸, 灾难</p></li><li><p>-ment<br>  行为,状态,过程,手段及其结果<br>  treatment 处理; 对待, 待遇 治疗; 疗法<br>  movement<br>  judgment 判断；裁判；判决书；辨别力<br>  punishment 处罚, 受罚<br>  argument 争吵；论据；内容提要；论证</p></li><li><p>-mony<br>  动作的结果,状态<br>  ceremony 典礼, 仪式 礼节, 礼仪<br>  testimony 证词 证明, 证据</p></li><li><p>-ness<br>  性质,状态,程度<br>  goodness n. 良好, 善良, 优良 精华, 精髓 上帝<br>  kindness<br>  tiredness 疲劳;倦怠</p></li><li><p>-or | -our<br>  动作,性质,状态<br>  favor n. 好感,宠爱,关切,欢心,好意,喜爱 vt. 支持,赞成,照顾,促成,喜欢,证实,赐予<br>  error</p></li><li><p>-osity<br>  动作,状态<br>  curiosity 好奇心, 爱打听的癖性 奇人, 奇物, 珍品</p></li><li><p>-ship<br>  情况,性质,技巧,技能及身份,职业<br>  hardship  n. 艰难, 困苦 艰难情况<br>  membership  全体会员 会员身份, 会员资格<br>  friendship</p></li><li><p>-th<br>  动作,性质,过程,状态<br>  depth n. 深, 深度, 纵深<br>  wealth<br>  truth<br>  length<br>  growth n. 生长, 发育</p></li><li><p>-tude<br>  性质,状态,程度<br>  latitude n. 纬度；界限；活动范围<br>  altitude n. 高度, 海拔</p></li><li><p>-ure<br>  行为,结果<br>  exposure n. 暴露, 显露 揭发, 揭露<br>  pressure  n. 压力；压迫，压强<br>  failure 失败；故障；失败者；破产</p></li><li><p>-y<br>  行为的结果,状态,性质<br>  glory  光荣，荣誉；赞颂<br>  history<br>  inquiry 调查；质询；探究</p></li></ul><h5 id="带有场所-地方的含义"><a href="#带有场所-地方的含义" class="headerlink" title="带有场所,地方的含义"></a>带有场所,地方的含义</h5><ul><li>-age<br>  住所,地点<br>  village<br>  cottage 村舍；小屋；（农舍式的）小别墅</li><li>-ary<br>  住所,场地<br>  library<br>  granary 谷仓，粮仓；盛产粮食的地区</li><li>-ery | -ry<br>  工作场所,饲养地,地点<br>  laundry n. 洗衣店, 洗衣房<br>  nursery 托儿所；苗圃；温床<br>  surgery  外科；外科手术；手术室；诊疗室</li><li>-ory<br>  工作场所,住处<br>  factory  工厂；制造厂；代理店<br>  dormitory 集体宿舍<br>  laboratory 实验室</li></ul><h5 id="表示学术-科技含义"><a href="#表示学术-科技含义" class="headerlink" title="表示学术,科技含义"></a>表示学术,科技含义</h5><ul><li>-grapy<br>  …学, 写法<br>  biography 传记<br>  calligraphy 书法；笔迹<br>  geography n. 地理(学) 地形, 地势</li><li>-ic | -ics<br>  …学, …法<br>  logic n. 逻辑(学), 逻辑性<br>  mechanics 力学;机械学<br>  optics 光学</li><li>-ology<br>  …学, …论<br>  biology 生物学；（一个地区全部的）生物<br>  zoology 动物学；动物区系<br>  technology 科技(总称); 工艺; 应用科学</li><li>-nomy<br>  …学, …术<br>  astronomy 天文学<br>  economy 节约；经济；理财</li><li>-ery<br>  学科,学术<br>  chemistry 化学<br>  cookery 烹调术；烹调业<br>  machinery n. (总称)机器 体系, 机构</li><li>-y<br>  …学,术,法<br>  photography 摄影术<br>  philosophy n. 哲学 人生哲学, 人生观</li></ul><h5 id="表示人和事物的总和-集合含义"><a href="#表示人和事物的总和-集合含义" class="headerlink" title="表示人和事物的总和,集合含义"></a>表示人和事物的总和,集合含义</h5><ul><li><p>-age<br> baggage 行李<br> tonnage 吨位;总吨数,排水吨数</p></li><li><p>-dom<br>  newspaperdom 报界,新闻界</p></li><li><p>-hood<br>  neighbourhood<br>  womanhood 女子成年期;女子特征,女子气质</p></li><li><p>-ry<br>  cavalry 骑兵；装甲兵；装甲部队<br>  ministry （政府的）部门</p></li><li><p>-ure<br>  legislature 立法机关；立法机构<br>  judicature n. 司法 (总称)法官</p></li></ul><h5 id="表示物品和物质名称的含义"><a href="#表示物品和物质名称的含义" class="headerlink" title="表示物品和物质名称的含义"></a>表示物品和物质名称的含义</h5><ul><li>-ant | -ent<br>  solvent 有溶解力的；有偿付能力的 n. 溶剂；解决方法<br>  constant adj. 始终如一的, 恒久不变的 不断的, 连续发生的 忠实的, 忠诚的</li><li>-al<br>  signal n. 信号；暗号；导火线 vt. 用信号通知；标志 adj. 显著的；作为信 vi. 发信号<br>  pictorial 以图画表示的;有画面的</li><li>-ar<br>  collar n. 衣领, 领子 (狗等的)项圈<br>  pillar  柱子，柱形物；栋梁；墩</li><li>-er<br>  boiler 锅炉；盛热水器；烧水壶，热水器<br>  computer<br>  washer 垫圈；洗涤器；洗衣人<br>  cooker  炊具；窜改者</li><li>-ery<br>  drapery  布料；帏帐</li><li>-ing<br>  clothing<br>  matting 席</li><li>-ment<br>  instrument 器具, 仪器 乐器<br>  equipment 设备; 装备; 配备<br>  attachment n. 附着, 附属 附属物, 附件 连接;安装;附着 连接物 情感,爱慕;忠诚</li></ul><h5 id="表示-细小-的意思"><a href="#表示-细小-的意思" class="headerlink" title="表示 细小 的意思"></a>表示 细小 的意思</h5><ul><li>-cle<br> particle 颗粒；质点；极小量</li><li>-cule<br>  molecule 分子</li><li>-el<br>  parcel 包裹 vt. 给…打成包裹 分成若干部分</li><li>-en<br>  chicken 小鸡；鸡肉；胆小鬼，懦夫<br>  maiden adj. 未婚的，处女的；初次的 n. 少女；处女</li><li>-et<br>  pocket 口袋；钱；容器<br>  ticket</li><li>-etta | -ette | -etto<br>  cigarette 纸烟, 香烟</li><li>-kin<br>  napkin 餐巾；餐巾纸；尿布</li><li>-ling<br>  duckling 小鸭子</li><li>-let<br>  booklet 小册子</li><li>-y<br>  baby<br>  doggy adj. 像狗的；时髦的；装阔气的 n. 小狗；幼犬</li></ul><h4 id="形容词后缀"><a href="#形容词后缀" class="headerlink" title="形容词后缀"></a>形容词后缀</h4><h5 id="带有”属性-倾向-相关”的含义"><a href="#带有”属性-倾向-相关”的含义" class="headerlink" title="带有”属性,倾向,相关”的含义"></a>带有”属性,倾向,相关”的含义</h5><ul><li><p>-able | -ible<br>  movable<br>  comfortable  安逸的, 使人舒服的<br>  applicable 适当的; 合适的<br>  visible<br>  responsible 负有责任的, 需承担责任的</p></li><li><p>-al<br>  natural 自然的, 天然的<br>  additional 增加的, 额外的, 另外的<br>  educational 教育(方面)的,为教育的;有教育意义的;提供咨询的</p></li><li><p>-an | -ane<br>  urban 城市的；住在都市的<br>  suburban 土气的；郊区的，城郊的；见闻不广的 n. 郊区居民<br>  republican adj. 共和国的, 共和政体的 n. 拥护共和政体者, 共和主义者</p></li><li><p>-ant | -ent<br>  distant 远隔的, 遥远的 远亲的<br>  important<br>  excellent 优秀的, 卓越的, 杰出的</p></li><li><p>-ar<br>  similar 相似的<br>  popular<br>  regular</p></li><li><p>-ary<br>  military 军事的；军人的；适于战争的 n. 军队；军人<br>  voluntary  自愿的, 志愿的 义务的, 无偿的</p></li><li><p>-ic | -atic | -ical<br>  politic  精明的；有策略的；狡猾的；审慎的<br>  systematic 有系统的; 有规则的; 彻底的<br>  physical 身体的；物质的；物理的</p></li><li><p>-ine<br>  masculine adj. 男性的, 男子的, 男子气的 阳性的<br>  feminine 有女性气质的, 女子气的, 适于女子的 〈语〉阴性的<br>  marine adj. 海的, 海产的, 海生的 海军的</p></li><li><p>-ing<br>  moving<br>  touching  动人的，令人同情的<br>  daring 勇敢, 鲁莽 adj. 勇敢的, 无畏的</p></li><li><p>-ish<br>  foolish 愚蠢的, 笨的<br>  bookish 书本上的,好学的<br>  selfish 自私的；利己主义的</p></li><li><p>-ive<br>  active<br>  impressive 给人印象深刻的, 感人的<br>  decisive 决定性的；果断的，坚定的</p></li><li><p>-ory<br>  satisfactory 令人满意的, 符合要求的<br>  compulsory 必须做的, 强制性的</p></li><li><p>-il | -ile | -eel<br>  fragile 易碎的, 脆的 虚弱的, 脆弱的; 经不起折腾的<br>  genteel 上流社会的；有教养的，文雅的</p></li></ul><h5 id="表示”相像-类似”的含义"><a href="#表示”相像-类似”的含义" class="headerlink" title="表示”相像,类似”的含义"></a>表示”相像,类似”的含义</h5><ul><li>-ish<br> boyish 男孩的；孩子气的；（女孩）像男孩的<br> childish 幼稚的，孩子气的</li><li>-esque<br>  picturesque 美丽的, 有趣的, 风景如画的 生动的; 活泼的</li><li>-like<br>  manlike 男人似的,有男子气质的<br>  childlike 天真的;童稚的;孩子般的</li><li>-ly<br>  manly 有男子气概的;刚强的, 勇敢的<br>  fatherly 父亲的；慈爱的；父亲般的<br>  scholarly 学术性的;学问精深的<br>  motherly 母亲的；慈母般的</li><li>-some<br>  troublesome 引起麻烦的, 令人讨厌的, 令人烦恼的<br>  handsome</li><li>-y<br>  milky 牛奶的；乳状的；柔和的；乳白色的；混浊不清的<br>  pasty 肉馅饼 adj. 苍白的</li></ul><h5 id="表示”充分的”-含义"><a href="#表示”充分的”-含义" class="headerlink" title="表示”充分的” 含义"></a>表示”充分的” 含义</h5><ul><li>-ful<br>  beautiful<br>  wonderful<br>  helpful<br>  truthful</li><li>-ous<br>  dangerous<br>  generous 慷慨的，大方的；宽宏大量的；有雅量的<br>  courageous 勇敢的;无畏的 adv. 勇敢地;无畏地<br>  various 勇敢的;无畏的 adv. 勇敢地;无畏地</li><li>-ent<br>  violent 暴力引起的, 粗暴的 剧烈的, 强烈的</li></ul><h5 id="表示由某种物质形成-制成或生产的含义"><a href="#表示由某种物质形成-制成或生产的含义" class="headerlink" title="表示由某种物质形成,制成或生产的含义"></a>表示由某种物质形成,制成或生产的含义</h5><ul><li>-en<br>  wooden 木制的；僵硬的，呆板的<br>  golden<br>  woolen 羊毛的；羊毛制的</li><li>-ous<br>  gaseous 气态的;似气体的</li><li>-fic<br>  scientific 科学的</li></ul><h5 id="表示方向的含义"><a href="#表示方向的含义" class="headerlink" title="表示方向的含义"></a>表示方向的含义</h5><ul><li>-ern<br>  eastern  东方的；朝东的；东洋的<br>  western</li><li>-ward<br>  downward 向下的，下降的<br>  forward 早的；向前的；迅速的 adv. 向将来；向前地 vt. 促进；转寄；运送</li></ul><h5 id="表示倍数的含义"><a href="#表示倍数的含义" class="headerlink" title="表示倍数的含义"></a>表示倍数的含义</h5><ul><li>-ble<br>  double<br>  treble  三倍的；最高声部的；三层的；三重的</li><li>-ple<br>  triple 三倍的；三方的</li><li>-fold<br>  twofold 双重的；两倍的<br>  tenfold 十倍地(的)</li></ul><h5 id="表示数量关系的含义"><a href="#表示数量关系的含义" class="headerlink" title="表示数量关系的含义"></a>表示数量关系的含义</h5><ul><li>-teen<br>  thirteen</li><li>-ty<br>  fifty</li><li>-th<br>  fourth<br>  fiftieth</li></ul><h5 id="表示国籍-语种-宗教的含义"><a href="#表示国籍-语种-宗教的含义" class="headerlink" title="表示国籍,语种,宗教的含义"></a>表示国籍,语种,宗教的含义</h5><ul><li><p>-an<br>  Roman<br>  European</p></li><li><p>-ese<br>  Chinese</p></li><li><p>-ish<br>  English<br>  Spanish</p></li></ul><h5 id="表示比较程度的含义"><a href="#表示比较程度的含义" class="headerlink" title="表示比较程度的含义"></a>表示比较程度的含义</h5><ul><li>-er<br>  greater</li><li>-ish<br>  reddish 微红的；略带红色的<br>  yellowish</li><li>-est<br>  highest</li><li>-most<br>  foremost 最著名的, 最重要的; 最好的; 主要的<br>  topmost 最高的；顶端的</li></ul><h5 id="其他含义"><a href="#其他含义" class="headerlink" title="其他含义"></a>其他含义</h5><ul><li>-less<br>  否定<br>  countless 无数的;多得数不清的<br>  stainless adj. 不锈的；不锈钢制的 无污点的,无瑕疵的<br>  wireless</li></ul><h4 id="动词后缀"><a href="#动词后缀" class="headerlink" title="动词后缀"></a>动词后缀</h4><ul><li>-ize | -ise<br>  做成,变成, …化<br>  modernize 使现代化,使适应现代需要 vi. 现代化,使用现代方法 n. 现代化<br>  mechanize 使(过程、工厂等)机械化<br>  organize  组织；使有系统化；给予生机；组织成立工会等</li><li>-en<br>  是成为, 引起, 使有<br>  quicken 加快；变活跃；进入胎动期<br>  weaken  减少；使变弱；使变淡<br>  soften 使变柔软；使温和；使缓和<br>  harden</li><li>-fy<br>  使…化, 使成<br>  beautify<br>  purify vt. 净化；使纯净<br>  intensify (使)增强, (使)加剧<br>  signify v. 表示…的意思, 意味</li><li>-ish<br>  使,令<br>  finish<br>  abolish 废除, 废止<br>  diminish 使减少；使变小<br>  establish vt. 建立, 成立 确定, 证实</li><li>-ate<br>  成为… , 处理, 作用<br>  separate  使分离；使分居；使分开<br>  operate 运转；动手术；起作用 vt. 操作；经营；对…开刀；引起<br>  indicate 标示, 指示, 指出 象征; 表明或暗示…的可能性</li></ul><h4 id="副词后缀"><a href="#副词后缀" class="headerlink" title="副词后缀"></a>副词后缀</h4><ul><li>-ly<br>  possibly 可能地；大概；也许<br>  swiftly  很快地；即刻；敏捷地<br>  simply</li><li>-ward | -wards<br>  downward<br>  inwards 向内地；向中心地<br>  upward</li><li>-ways<br>  always<br>  sideways adv. 向侧面地；向一旁 adj. 向侧面的；一旁的</li><li>-wise<br>  otherwise 用别的方法, 不同地 在其他方面; 除此以外 conj. 否则; 要不然<br>  clockwise</li></ul><h3 id="词根"><a href="#词根" class="headerlink" title="词根"></a>词根</h3><ul><li><p>aer | ar<br>  空气,大气<br>  aeroplane 飞机<br>  aerial 空气的, 空中的 存在或悬浮于空中的, 架空的 n. 天线</p></li><li><p>ag | act | ig<br>  做,动作<br>  active 主动的；有效的；积极的；活跃的；现役的 n. 主动语态；积极分子<br>  agent<br>  reaction 反应，感应；反作用；反动，复古</p></li><li><p>alt<br>  高<br>  altitude</p></li><li><p>alter | altern | altr<br>  其他,变更<br>  alternate 轮流的, 交替的 间隔的 代替的</p></li><li><p>bio | bi | bion<br>  生物,生命<br>  biology<br>  bionics 仿生学</p></li><li><p>brev | bri | brief<br>  短<br>  brief 简短的，简洁的；短暂的，草率的<br>  abbreviation 缩写; 缩写词<br>  abridge 节略, 缩写(一本书等) 缩短 减少，消减；限制</p></li><li><p>cap | capt | cept | cip<br>  取,获<br>  capture<br>  except  把…除外; 免除<br>  concept 概念; 观念; 想法<br>  capacity 能力；容量；生产力；资格，地位</p></li><li><p>ced | ceed | cess<br>  行,让步<br>  proceed vi. 前进; 行进 进行; 继续下去<br>  succeed 成功 完成<br>  excess 无节制；过度，过量；超过，超额</p></li><li><p>centr<br>  中心<br>  concentrate 专心于; 注意 集中, 聚集 vt. 浓缩<br>  eccentric 古怪的, 怪癖的; 异乎寻常的</p></li><li><p>clain | claim<br>  呼喊<br>  claim 声称, 断言,要求<br>  proclaim 声明；宣告，公布；表明；赞扬<br>  exclaim 呼喊, 惊叫, 大声说</p></li><li><p>clos | clud<br>  闭合<br>  conclude 结束；推断；决定，作结论<br>  enclose 把…围起来 把…装入信封, 附入<br>  include</p></li><li><p>col | cult<br>  耕耘<br>  colony 殖民地；移民队<br>  cultivate 耕作, 种植<br>  agriculture 农业 农学, 农艺</p></li><li><p>cor | cord<br>  心<br>  cordial adj. 兴奋的；热忱的，诚恳的 n. 补品；兴奋剂；甜香酒，甘露酒<br>  record t. &amp; vi. 记录; 录音, 拍摄<br>  accord  一致, 符合 (尤指国与国之间的)谅解, 协议 vt. 给予, 赠予</p></li><li><p>curr | cur | cour<br>  跑,动作<br>  current adj. 现在的；最近的；草写的；流通的，通用的<br>  occur 发生; 举行; 存在<br>  concurrence 同时发生；赞同；合作</p></li><li><p>dic | dict<br>  说,示<br>  dictate 大声讲或读; 口授 vt. 指示; 指定; 指令 n. 命令, 规定, 要求<br>  indicate vt. 标示, 指示, 指出 象征; 表明或暗示…的可能性<br>  predict 预报，预言；预知</p></li><li><p>doc | doct<br>  教<br>  doctor<br>  document</p></li><li><p>duc | duct<br>  引导,传导<br>  introduce<br>  produce vt. 生产；引起；创作 n. 农产品，产品 vi. 生产，创作<br>  conduct 组织，实施，进行；指挥（音乐）；带领，引导；举止，表现；传导（热或电）</p></li><li><p>fact | fac | fect | dic | dit<br>  做,创造<br>  factory<br>  effect n. 效果；作用；影响<br>  profit n. 利润；利益<br>  faculty n. 能力, 才能 技巧</p></li><li><p>fend | fens<br>  打,击<br>  defense 防卫，防护；防御措施；防守<br>  offence 攻击；违反；犯罪；过错</p></li><li><p>fer<br>  搬运,转移<br>  ferry n. 渡口；渡船；摆渡 vt. （乘渡船）渡过；用渡船运送；空运<br>  transfer<br>  defer 拖延, 延缓, 推迟</p></li><li><p>fin | finit<br>  终,极<br>  final<br>  finish<br>  confine n. 界限，边界 vt. 限制；禁闭</p></li><li><p>firm<br>  坚固<br>  firm 公司 坚定的；结实的；牢固的；严格的<br>  confirm 确认；批准；证实；确定；使巩固<br>  affirm 断言；肯定</p></li><li><p>fix<br>  固定<br>  prefix  前缀<br>  affix 粘上；署名；将罪责加之于</p></li><li><p>flect | flex<br>  弯曲<br>  flexible 灵活的；柔韧的；易弯曲的<br>  reflex 反应能力；反射作用</p></li><li><p>flor | flour | flower<br>  花<br>  flower<br>  flourish 茂盛, 繁荣 兴旺发达 vt. 挥动</p></li><li><p>form<br>  形<br>  uniform n. 制服 adj. 全都相同的, 一律的, 清一色的<br>  formula n. 公式，准则；配方；婴儿食品<br>  transform vt. &amp; vi. 改变<br>  reform n. 改革, 改良, 改造 vt. &amp; vi. 改革; 改造; 改善</p></li><li><p>forc | fort<br>  力,强度<br>  force<br>  enforce<br>  effort 努力, 尽力 努力的结果, 成就</p></li><li><p>gen | genit<br>  生产,发生<br>  generate 使形成；生殖；发生<br>  generation</p></li><li><p>gram | graph<br>  书写,记录<br>  telegram<br>  diagram 图表；图解<br>  photograph 照片, 相片</p></li><li><p>grad | gress | gred | gree<br>  步,阶段<br>  gradually 逐步地,渐渐地<br>  degree 程度，等级；度；学位；阶层<br>  progress 进步，发展；前进</p></li><li><p>hab | habit | hibit<br>  保持,住<br>  inhabit 居住于, 栖居于<br>  exhibit 展览品；证据；展示会 vi. 展出；开展览会<br>  prohibit vt. 阻止，禁止</p></li><li><p>her | hes<br>  黏附<br>  adhere vi. 黏附, 附着 坚持, 支持<br>  cohesion   内聚力；结合；凝聚</p></li><li><p>ject | jet<br>  抛射<br>  project vt. 规划 抛; 投; 射 vt. &amp; vi. 伸出, 突出; 表达特点 n. 项目, 计划, 方案, 课题<br>  inject vt. 注射, 注入</p></li><li><p>jour<br>  日,一天<br>  journal n. 日报，杂志；日记<br>  adjourn vi. 休会；延期；换地方 vt. 推迟；使…中止；使…延期<br>  journey n. 旅行; 行程 vi. 旅行</p></li><li><p>jug, junct<br>  结合,联合<br>  conjunction n. 连词 结合; 联合<br>  junction n. 连接，接合；交叉点；接合点</p></li><li><p>labour | labor<br>  劳动,工作<br>  labourer  n. (尤指户外的)体力劳动者,劳工,工人<br>  elaborate  vi. 详尽说明 vt. 详细制定 adj. 复杂的; 精心制作的<br>  collaborate vi. 合作 勾结叛国 n. 协作者,合作者;勾结者</p></li><li><p>lect | leg | lig<br>  挑选,采集<br>  collect<br>  select<br>  lecture 演讲；讲稿；教训</p></li><li><p>lif | liv<br>  生活,生存<br>  life<br>  alive adj. 活着的, 在世的, 存在的</p></li><li><p>loc<br>  场所,位置<br>  location<br>  dislocate vt. 使(骨头)关节脱位 使(交通, 事务等)混乱</p></li><li><p>long | leng | ling<br>  长的<br>  length 长度，长；时间的长短<br>  prolong 拖延；延长<br>  linger 逗留, 徘徊 缓慢消失</p></li><li><p>loqu | locut<br>  说话<br>  colloquial 口语的, 会话的<br>  eloquent 辩的，有口才的；有说服力的；意味深长的；动人的</p></li><li><p>mand | mend<br>  命令<br>  command<br>  demand 要求 需要<br>  recommend vt. 推荐, 介绍, 赞许某人[某事物] 劝告, 建议</p></li><li><p>man | manu<br>  手,手法<br>  manage<br>  manual 用手的, 手工的 n. 手册, 指南</p></li><li><p>memor | member<br>  记忆<br>  memory<br>  remember<br>  memorial 纪念碑, 纪念物</p></li><li><p>mind | ment<br>  心<br>  mind<br>  remind<br>  mental adj. 精神的, 头脑的, 心理的, 智力的 精神病的</p></li><li><p>merc | merch<br>  贸易<br>  commerce 商业, 贸易<br>  merchant 商人</p></li><li><p>meas | mens | meter | metr<br>  测量,量度<br>  measure<br>  meter<br>  diameter n. 直径 放大率</p></li><li><p>min<br>  小<br>  diminish vt. 使减少；使变小 vi. 变小；减少，缩小<br>  minority n. 少数民族；少数派；未成年</p></li><li><p>miss | mit<br>  派遣,送<br>  mission n. 使命, 任务, 天职 代表团, 使节团<br>  dismiss vt. 让…离开；开除；解散；解雇 vi. 解散<br>  transmit   发射, 播送, 广播 vt. 传播, 传染 传导<br>  missile n. 导弹 投射物</p></li><li><p>mob | mot | mov<br>  动<br>  movement<br>  motion<br>  mobile<br>  remove</p></li><li><p>nect | nex<br>  捆扎<br>  connect<br>  disconnect<br>  annex 附加；并吞；获得 n. 附加物；附属建筑物</p></li><li><p>not<br>  记号,注意<br>  note<br>  denote  表示，指示<br>  annotation 注解,注释</p></li><li><p>onom | onym<br>  名字<br>  synonym 同义词<br>  autonym 本名,实名<br>  anonymous 匿名的</p></li><li><p>pair | par<br>  相同,对等<br>  compare<br>  prepare  准备</p></li><li><p>pel | puls<br>  追逐<br>  expel 驱逐；开除<br>  impel 驱使；推动；激励</p></li><li><p>pend | pens | poud<br>  悬挂<br>  depend<br>  independent 独立的, 自主的, 自立的<br>  expense 开支；消费；损失，代价</p></li><li><p>phon<br>  声音<br>  symphony 交响乐；谐声，和声<br>  telephone<br>  microphone</p></li><li><p>plac<br>  位置,场所<br>  place<br>  replace</p></li><li><p>peopl | popul | publ<br>  人民,民众<br>  public<br>  republic 共和国, 共和政体<br>  popular<br>  people</p></li><li><p>port<br>  搬运<br>  export<br>  import<br>  deport 举止；放逐；驱逐出境</p></li><li><p>press<br>  压,压制<br>  pressure<br>  express 表达, 表示, 陈述 . 快运, 快车<br>  oppress 压迫，压抑；使……烦恼；使……感到沉重<br>  impression 印象, 感想 想法, 看法, 感觉</p></li><li><p>prob | proof | prov<br>  实验,验证<br>  prove<br>  approve</p></li><li><p>quer | quest | quir | quis<br>  寻找,探问<br>  inquiry 调查；质询；探究<br>  question<br>  inquisition 调查,审讯</p></li><li><p>rang | rank<br>  排列<br>  arrange<br>  rank</p></li><li><p>rect | right | rig<br>  正,直<br>  correct<br>  direct<br>  erect 竖立的, 直立的, 挺立的</p></li><li><p>riv<br>  河流, 流走<br>  river<br>  arrive<br>  derive  得到 源于</p></li><li><p>rupt<br>  破坏<br>  eruption 喷发, 爆发<br>  bankrupt 破产的, 倒闭的<br>  corruption 堕落;腐化;腐败;贿赂</p></li><li><p>sci<br>  认识,知识<br>  science<br>  conscious 神志清醒的 知道的; 注意到的 自觉的; 蓄意的</p></li><li><p>scrib | script<br>  书写,记录<br>  describe 描写, 叙述<br>  script</p></li><li><p>sens | sent<br>  感觉,情感<br>  sensation 感觉, 感受 知觉 激动, 轰动<br>  sentiment 柔情 态度或意见</p></li><li><p>sign<br>  标记,符号<br>  signal<br>  signature<br>  design</p></li><li><p>sembl | simil<br>  相似,类似<br>  similar<br>  resemble 像…, 类似于</p></li><li><p>soci<br>  结合,社交<br>  social<br>  association 协会, 社团</p></li><li><p>spec | spect | spitc | spis<br>  看,视<br>  inspect 检查；视察；检阅<br>  spectator 观众, 旁观者<br>  conspicuous 显眼的, 明显的</p></li><li><p>struct<br>  建筑,构造<br>  structure<br>  construct vt. 修建, 建立 构成, 组成<br>  instruct 命令；教授；指导；通知</p></li><li><p>tect | teg<br>  遮蔽,掩盖<br>  detect<br>  protect 保护，防卫；警戒</p></li><li><p>temp | tens<br>  时间,时机<br>  tense 拉紧的；紧张的<br>  contemporary 当代的 同时代的, 同属一个时期的<br>  temporal 时间的 暂存的,短暂的,</p></li><li><p>tend | tes | tent<br>  倾向,伸张<br>  tendency 倾向, 趋势<br>  intension  紧张<br>  extend  (空间、时间等)延伸; 延续 vt. 延长; 扩展; 达到(某一点)<br>  intend 打算；意指；想要</p></li><li><p>test<br>  证明,证实<br>  testify 作证；证明，证实<br>  protest 抗议; 反对 vt. &amp; vi. 声明; 抗议<br>  contest 争辩；提出质疑</p></li><li><p>text<br>  编织,构成<br>  textile 纺织品，织物<br>  texture 手感, 质感, 质地<br>  context 环境；上下文；来龙去脉</p></li><li><p>tract | trail<br>  拖拉,吸引<br>  attract 吸引, 引起…的注意<br>  tractor 拖拉机；牵引机<br>  abstract 抽象；摘要；<br>  contract 感染；订约；收缩</p></li><li><p>tribut<br>  给予<br>  contribution n. 捐助物, 贡献<br>  distribute t. 分配, 分给 散发; 散播; 分布</p></li><li><p>us | ut<br>  用,使用<br>  usable<br>  utilize<br>  abuse  滥用；辱骂；虐待；弊端；恶习，陋习</p></li><li><p>vac | van<br>  空,虚<br>  vacancy 空房间 空虚;空白 空缺;空职;空额<br>  vanity 虚荣心；浮华；空虚；无价值的东西<br>  evacuate 排泄；疏散，撤退</p></li><li><p>vad | vas | wad<br>  走,去<br>  invade  侵略；侵袭；侵扰；涌入<br>  wade 蹚, 走过, 跋<br>  evade 逃避；规避；逃脱</p></li><li><p>vers | vert<br>  旋转,反转<br>  convert vt. &amp; vi. (使)转变, (使)转化 皈依, 改变(信仰)<br>  inversion 倒置,(尤指词序)倒装 转化<br>  reverse  (使)反转; (使)颠倒; (使)翻转 推翻, 取消 使倒退, 逆转 adj. 相反的, 颠倒的, 反向的<br>  divert vt. 转移；使…欢娱；使…转向 vi. 转移</p></li><li><p>vid | vis | vey | view<br>  观看,看见<br>  television<br>  visible<br>  evident 明显的, 明白的<br>  interview<br>  survey 调查；测量；纵览；审视</p></li><li><p>viv | vit<br>  生, 活<br>  vivid 鲜明的；鲜艳的；生动的<br>  vital 极重要的, 必不可少的<br>  survival 幸存, 生存</p></li><li><p>war | ward<br>  注意,保护<br>  aware | wary | ward</p></li><li><p>way<br>  路<br>  way<br>  away<br>  subway<br>  always</p></li></ul><h2 id="常用语句"><a href="#常用语句" class="headerlink" title="常用语句"></a>常用语句</h2><blockquote><p>He learns English every day.<br>他每天学习英语</p></blockquote><h3 id="sv-主语-谓语"><a href="#sv-主语-谓语" class="headerlink" title="sv (主语+谓语)"></a>sv (主语+谓语)</h3><blockquote><p>The universe remains.(宇宙长存)</p></blockquote><h3 id="svp-主-系-表"><a href="#svp-主-系-表" class="headerlink" title="svp (主+系+表)"></a>svp (主+系+表)</h3><blockquote><p>The food is delicious.</p></blockquote><h3 id="svo-主-谓-宾"><a href="#svo-主-谓-宾" class="headerlink" title="svo (主+谓+宾)"></a>svo (主+谓+宾)</h3><blockquote><p>He took his bag and left. </p></blockquote><h3 id="svoo-主-谓-间宾-直宾"><a href="#svoo-主-谓-间宾-直宾" class="headerlink" title="svoo (主+谓+间宾+直宾)"></a>svoo (主+谓+间宾+直宾)</h3><blockquote><p>Her father bought her a dictionary.</p></blockquote><p><code>her</code> (间接宾语)<br><code>dictionary</code> (直接宾语)</p><h3 id="svoc-主-谓-宾-宾补"><a href="#svoc-主-谓-宾-宾补" class="headerlink" title="svoc (主+谓+宾+宾补)"></a>svoc (主+谓+宾+宾补)</h3><blockquote><p>We made him our monitor.<br>我们选他做我们班长</p></blockquote><p><code>our monitor</code> (宾补)</p><h2 id="be动词用法"><a href="#be动词用法" class="headerlink" title="be动词用法"></a>be动词用法</h2><h3 id="形式"><a href="#形式" class="headerlink" title="形式"></a>形式</h3><pre class="line-numbers language-none"><code class="language-none">be , is , am, are , was , were , being , been<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>is,are: 现在进行</li><li>was,were: 过去</li><li>been: 现在完成时(They have been back.)</li></ul><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>后面接名词,形容词,地点副词或短语作为补足语</p><blockquote><p>My mother was in the kitchen.</p></blockquote><blockquote><p>He has been a teacher for 3 years</p></blockquote><h3 id="be-动词的否定-提问-回答"><a href="#be-动词的否定-提问-回答" class="headerlink" title="be 动词的否定/提问/回答"></a>be 动词的否定/提问/回答</h3><h4 id="否定"><a href="#否定" class="headerlink" title="否定"></a>否定</h4><pre class="line-numbers language-none"><code class="language-none">am not , isn&#39;t , aren&#39;t , wasn&#39;t , weren&#39;t<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="提问"><a href="#提问" class="headerlink" title="提问"></a>提问</h4><blockquote><p>Is he a teacher?<br>Yes,he is. / No,he isn’t.</p></blockquote><h2 id="代词"><a href="#代词" class="headerlink" title="代词"></a>代词</h2><ul><li>人称代词<br>  I | me | we | us | you | it | he | him | she | her | they | them</li><li>物主代词<br>  my | your | his | her | its | our | their | mine | yours | his | hers | ours | theirs</li><li>反身代词<br>  myself | yourself | himself | herself | itself | ourselves | yourselves | themselves</li><li>相互代词<br>  one another | each other </li><li>指示代词<br>  this | that | these | those </li><li>不定代词<br>  somebody | someone | anyone | anybody | something | anything | everything | nothing | nobody | no one | some | many | much | few | a few | little | a little | each | every | none | several | one | both | either | neither | other | another | any </li><li>疑问代词<br>  who | whom | whose | which | what </li><li>连接代词<br>  who | whom | whose | which | what | whoever | whichever | whatever</li><li>关系代词<br>  who | whom | whose | that | as | which </li></ul><h3 id="人称代词"><a href="#人称代词" class="headerlink" title="人称代词"></a>人称代词</h3><ul><li><p>第一人称<br>  I | me<br>  we | us</p></li><li><p>第二人称<br>  you | you<br>  you | you </p></li><li><p>第三人称<br>  he,she,it | him,her,it<br>  they | them </p></li></ul><h4 id="we-you-they-he-表示泛指的用法"><a href="#we-you-they-he-表示泛指的用法" class="headerlink" title="we,you,they,he 表示泛指的用法"></a>we,you,they,he 表示泛指的用法</h4><p>we | you | they 可以泛指人们,意为 我们 | 你们 | 他们 ,<code>单数用he</code></p><p>We all get into trouble sometimes. 我们每个人<br>You should finish the work this afternoon. 你(们)<br>They say that honesty is the best policy.  人们<br>He who laughs last laughs best.  谁笑到最后谁笑得最好</p><h4 id="he-she-用法"><a href="#he-she-用法" class="headerlink" title="he,she 用法"></a>he,she 用法</h4><p>he 指代男性,she 指代女性.某些情况,可以指代事物或动物</p><ul><li><p>指代宠爱的动物,可以用he,she;不带感情色彩用it<br>  Go and find the dog and put <code>him</code> out<br>  This little animal is a lemur and it lives in Madagascar</p></li><li><p>She 可以用来指代国家,船只,大地,月亮等<br>  China will always do what she has promised to do (天大笑话?)<br>  Nice car – how much did <code>she</code> cost </p></li><li><p>在诗歌,寓言等中,温柔的动物常用she指代,凶猛的用he</p></li></ul><p>**在英语中多个人称代词同时出现时,其排列的顺序通常为: 单数场合为 <code>二,三,一</code>,复数场合 <code>一,二,三</code>, 男女并用 <code>男+女</code>,承担责任 <code>我</code>在前</p><p>She and I are good friends<br>You, he and I are of the same age<br>We and they are longing to see you<br>Every student must have his or her homework finished by tomorrow<br>I and he are to blame for the accident </p><h4 id="it用法"><a href="#it用法" class="headerlink" title="it用法"></a>it用法</h4><p>it 作人称代词,主要指某样东西,抽象事物,不知性别的孩子或用来明确身份.</p><ul><li>指代上文提到的某样东西<br>  Where is my dictionary? I put it on the table just now</li><li>指代抽象的事物<br>  I tried my best to persuade him, but it didn’t help (劝说)</li><li>指代身份不明确的人<br>  Who is it knocking at the door?<br>  It might be the postman</li><li>指代时间,天气,距离等<br>  What time is it nwo by your watch<br>  It was raining when I arrived home<br>  It’s about 15 minutes’walk from here to the bar</li><li>作形式主语或形式宾语,代替句子中的不定式短语,动名词短语或从句等<br>  It is important for us to master the skills of computers<br>  It is no good living alone without keeping in touch with others.<br>  I feel it necessary to learn every day</li><li>有些固定句式中也常用it<ul><li>It is/has been + 时间段 + since<br>  It is/has been years since we parted in the West Point.<br>  自从我们在西点军校分别以来已有多年了</li><li>It was/will be + 时间段 + before<br>  It will not be long before you regret for what you are doing now.<br>  不久你就会为你现在的所作所为后悔的</li><li>强调结构 It is/was…that…<br>  It is in this bookstore that I find the book I want.<br>  就是在这家书店我找到了我想要的那本书</li></ul></li></ul><h3 id="名词性-形容词性物主代词"><a href="#名词性-形容词性物主代词" class="headerlink" title="名词性/形容词性物主代词"></a>名词性/形容词性物主代词</h3><h4 id="形容词性物主代词"><a href="#形容词性物主代词" class="headerlink" title="形容词性物主代词"></a>形容词性物主代词</h4><pre class="line-numbers language-none"><code class="language-none">单数:my, your , his&#x2F;her&#x2F;its , one&#39;s复数:our , your , their <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="名词性物主代词"><a href="#名词性物主代词" class="headerlink" title="名词性物主代词"></a>名词性物主代词</h4><pre class="line-numbers language-none"><code class="language-none">单数:mine , yours , his&#x2F;hers&#x2F;its , one&#39;s复数:ours, yours , theirs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="用法-1"><a href="#用法-1" class="headerlink" title="用法"></a>用法</h4><p>It’s not my mobile phone. Mine is one the desk.<br><em>使用名词性物主代词必须有特定的语言环境,即要指代的名词大家知道或已经提起过</em></p><p>Her coming added to our pleasure<br>她的到来增加了我们的快乐</p><h3 id="反身代词"><a href="#反身代词" class="headerlink" title="反身代词"></a>反身代词</h3><pre class="line-numbers language-none"><code class="language-none">单数:myself , yourself , herself , himself , itself复数:yourselves , ourselves , themselves<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>Please help yourself to some fish.<br>We enjoyed ourselves last night.<br>Take good care of yourself<br>You don’t have to worry. I can look after myself</p></blockquote><p>在不强调的情况下, but | except | for 等介词后的宾语用反身代词或人称代词均可</p><blockquote><p>No one but myself/me is hurt</p></blockquote><h4 id="固定用法"><a href="#固定用法" class="headerlink" title="固定用法"></a>固定用法</h4><blockquote><p>You’ll have to see if he has come for yourself<br>你得亲自去看看他是否已经来了<br>The computer can shut off of itself<br>You shouldn’t leave the child by himself at home.<br>Are you enjoying yourself<br>When he came to himself, he was lying alone in the dark<br>他醒来发现自己一个人躺在黑暗中</p></blockquote><h4 id="常用必备"><a href="#常用必备" class="headerlink" title="常用必备"></a>常用必备</h4><ul><li>in oneself  本身固有</li><li>by oneself   独自</li><li>for oneself 亲自</li><li>of oneself 自动地</li><li>dress oneself 自己穿衣</li><li>come to oneself 恢复知觉</li><li>devote oneself to 致力于</li><li>enjoy oneself 玩得高兴</li><li>help oneself to 随便吃,随便用</li><li>make oneself at home 无拘束；别客气，随便</li><li>say to oneself 心里想</li><li>seat oneself 坐下</li><li>talk/speak to oneself 自言自语</li><li>teach oneself 自学</li></ul><h4 id="不用反身代词的情况"><a href="#不用反身代词的情况" class="headerlink" title="不用反身代词的情况"></a>不用反身代词的情况</h4><ul><li><p>作主语时不用反身代词<br>  Herself called you up last night (x)<br>  She called you up last night herself (0)</p><p>  Myself drove the car (x)<br>  I myself drove the car (0)</p></li></ul><p><strong>在 and | or | nor | 连接的并列主语中,第二个主语可用反身代词,尤其是 myself</strong><br>    Tom and myself saw it</p><ul><li><p>并列宾语中的一个为名词或非反身代词,另一个不能用反身代词<br>  The tickets are for you, Mr Wang and myself (x)<br>  The tickets are for you, Mr Wang and me. (0)</p><p>  The chairman invited my wife and myself to the meeting (x)<br>  The chairman invited my wife and me to the meeting (0)</p></li><li><p>在介词about(到处),after等后的宾语即使和主语指同一对象,宾语也不能用反身代词<br>  I looked about myself, hoping to find the lost keyis (x)<br>  I looked about me,hoping to find the lost keys (0)<br>  我环顾四周,希望能找到丢失的钥匙</p><p>  He closed the door after himself (x)<br>  He closed the door after him (0)</p></li></ul><h4 id="省略反身代词的情况"><a href="#省略反身代词的情况" class="headerlink" title="省略反身代词的情况"></a>省略反身代词的情况</h4><p>“日常”的行为返回到自己身上时,代表自己的反身代词常常可以省略<br>I don’t need to shave (myself) every day (刮胡子)<br>The child can dress (himself) now.<br>You mustn’s overeat (yourself)</p><h3 id="指示代词"><a href="#指示代词" class="headerlink" title="指示代词"></a>指示代词</h3><pre class="line-numbers language-none"><code class="language-none">单数(复数)this(these) that(those)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>另外, such | so | the same 也可以起到指示代词作用</p><h4 id="this-that-these-those"><a href="#this-that-these-those" class="headerlink" title="this,that,these,those"></a>this,that,these,those</h4><ul><li><p>this,these 指时间或空间上较近的人或物; that,those 较远<br>  I love these books but I don’t like those</p></li><li><p>刚提到过的事情或已经完成的事情用 that , 即将要发生或将要提到的事情用this<br>  I’ve finished all my homework,Mum. That’s nice<br>  He said I was lying, and that was unfair.<br>  Now, everybody, watch this </p></li><li><p>在电话用语中, this 指自己, that 指对方<br>  Hello. This is Alan. Who is that speaking</p></li><li><p>that/those 还常常用来指代已经提到过的名词,以避免重复. That 特指不可数名词或可数名词单数(物); those 特指可数名词复数(人或物)<br>  The climate of Japan is not so mild as that of Taiwan<br>  The days in summer are longer than those in winter<br>  I love reading poems by Emerson better than those by Whitman.</p></li><li><p>习惯用法<br>  like this 就这样,如此<br>  for all this  就这一次<br>  that is to say 也就是说<br>  That’s it 可不是嘛<br>  That’s enough! 我受够了<br>  That’s all right 没关系/不用谢</p></li></ul><h4 id="such用法"><a href="#such用法" class="headerlink" title="such用法"></a>such用法</h4><p>such 可单独使用, 指代上文提到的人或事物,意为”那样的,类似的”; 指代下文中要提到的内容,意为”这样的,下述一类的”<br>    Such is Albert Einstein, a famous physicist (作主语)<br>    We were second-class citizens and they treated us as such (指上文)<br>    The damage was such that it would cost thousands to repair (指下文)</p><p><em>such 修饰的名词前如果有不定冠词,such 须放在其前; 如果有no,another,several等表示数量的词时,such须置于其后.有时such之后可以加一个as用以引出属于哪一类</em><br>    Roger is such a nice person<br>    All such problems have been solved<br>    Any such mistake can be avoided<br>    There is no such thing as free lunch (世界上没有免费的午餐)</p><h4 id="so用法"><a href="#so用法" class="headerlink" title="so用法"></a>so用法</h4><p>so是副词,但也可以起代词作用</p><ul><li><p>用在 believe | think | expect | suppose | imagine | guess 等词后代替前文提出的观点.<br>  Will Bob come by boat this evening?<br>  I think so. / I don’t think so </p></li><li><p>用在 hope | I’m afraid 后代替前文提出的观点,但只用于肯定句<br>  It is going to rain this evening<br>  I hope so (不可以说 I don’t hope so)</p><p>  He said he was defeated, and I’m afraid so. (不可以说 I’m not afraid so)</p></li><li><p>用 “动词 + so” 代替 “动词 + 宾语” 结构, 以避免重复<br>  If she notices, she never says so<br>  She told me to get the tickets and I will do so as soon as possible<br>  He thinks I dislike him but that just isn’t so</p><p>  do so 代替的动作必须是可以由主观意识支配的,否则不可用<br>  She lost all the money. I didn’t know  how she did so (x)<br>  She lost all the money. I didn’t know how she did (0)</p><p>  动作的执行者不一致时,不用 do so 而用 <code>do it</code> 或 <code>do that</code><br>  I don’t have enough time to help you. Let George do it/that</p></li></ul><h4 id="the-same"><a href="#the-same" class="headerlink" title="the same"></a>the same</h4><p>Merry Christmas! The same to you and your family!<br>I think the same of her as you do<br>I would do the same again<br>I found my book at the same palce where I had left it<br>I’d like one the same as yours<br>Let’s meet at the same places as we did yesterday</p><h3 id="不定代词"><a href="#不定代词" class="headerlink" title="不定代词"></a>不定代词</h3><p>不明确指代某个/些人或事物的代词叫做不定代词.不定代词可以替代名词和形容词,没有主格和宾格之分</p><h4 id="one-用法"><a href="#one-用法" class="headerlink" title="one 用法"></a>one 用法</h4><p>one 指代可数名词单数,即可指人,也可指物. 其复数形式为<code>ones</code>, 所有格为 <code>one&#39;s</code>, 反身代词为 <code>oneself</code></p><ul><li>单独使用, 泛指”人””一个人””人们”<br>  One often fails to see one’s/his own faults. (人往往看不到自己的缺点)  <em>One 表示泛指是<code>非常正式</code>的用法, 口语或一般文体中常用 <code>you</code></em><br>  You should do your best at all times (一个人无论何时都应尽全力)<br>  You can never be too careful (再小心也不为过)</li><li>表示具体的”一个人”或”一个事物”<br>  He is not one who is easy to work with<br>  This is the one you’re looking for  <em>One前面由形容词修饰是,形容词前必须由冠词或代词.如: the best one , her last one (最后一个)</em></li><li>指代上文已出现过的可数名词单数,表示泛指意义,以避免重复,ones指代可数名词复数<br>  This problem is harder than that one<br>  Miss Green is a strict but kind teacher, one who cares for every pupil.<br>  I prefer red roses to white ones. 我喜欢红玫瑰胜过白玫瑰</li></ul><p>Today’s libraries differ greatly from those of the past</p><ul><li>常用短语<ul><li>one day  过去或将来的某一天</li><li>(all) in one 合为一体</li><li>one after another 一个接一个地</li><li>one by one 逐个,逐一</li><li>as one 一齐,一致</li><li>one and the same 同一个人/物</li><li>at one time 曾经,一度</li><li>for one thing 首先</li><li>…for one … 就是其中之一</li><li>one and all 每个人,全体</li></ul></li></ul><h4 id="either-neither"><a href="#either-neither" class="headerlink" title="either | neither"></a>either | neither</h4><ul><li>either 指两者中的 <code>任意一个</code>. 作主语,谓语动词<strong>常用单数</strong><br>  Do you want tea or coffee? Oh, I don’t mind. Either will do (哪种都行)<br>  There are two apples. You may take either. (你可以随便拿一个)</li><li>neither 指两者中的任何一个 <code>都不</code><br>  Neither of my parents allows me to study medicine<br>  You talked about Bill and Fagan, but I know neither<br>  Neither statement you provide holds water.(你所陈述的两个观点没有一个能站的住脚)</li></ul><p>either 用于<strong>否定句句末</strong>, 表示<code>也(不)</code>.<br>neither 位于句首时,表示前面否定的内容也适用于另外一个人/物,句子需要用部分倒装结构<br>固定用法 <code>me neither</code> : 我也不…<br>If you don’t go to the party, I won’t either (= neither will I)<br>I won’t like horror movies. Me neither</p><p>either…or… (或者…或…)<br>neither…nor… (既不…也不…)<br>When my daughter is happy,she either sings or dances<br>I have neither time nor money for skating. 我没有时间也没有钱去滑雪(这不就是我嘛)</p><h4 id="all-both"><a href="#all-both" class="headerlink" title="all | both"></a>all | both</h4><p>all 可以指代可数名词复数或不可数名词,表示三个或三个以上<br>both 仅可修饰可数名词复数,指<code>两个</code>人或事物”都”</p><p>all of / both of  后为名词时,Of可省略</p><p>All were present at the meeting(主语)<br>Almost all of the music was from Italian operas<br>Both of us are non-smokers.<br>Both women are French<br>She invited both of us to her birthday party<br>They both accepted  my invitation</p><p>all,both 作同位语时樱位于实义动词之前,连系动词,助动词或情态动词之后<br>They both like water lilies very much<br>You should all hand in your homework by tomorrow (把作业交上)</p><h4 id="each-every"><a href="#each-every" class="headerlink" title="each | every"></a>each | every</h4><p>each: 每个(强调个体) (两者或两者以上)(可以与of搭配)<br>every: 每个(强调整体) (三者或三者以上) (不可以与of搭配)</p><p>They both came on time, but each left ahead of time<br>他们两个都按时到达了,但又都提前走了</p><p>We send each other an e-mail each/every week</p><p>Every student <code>needs</code> to be careful with their studies</p><p><em>each作同位语时,谓语动词仍和主语保持一致,不受each的影响</em><br>We each <code>have</code> received a special gift from the teacher</p><h4 id="another-other"><a href="#another-other" class="headerlink" title="another | other"></a>another | other</h4><h5 id="another"><a href="#another" class="headerlink" title="another"></a>another</h5><p>“另外的,另外一个”,表示泛指,即没有整体范围.可单独使用,也可后接可数名词<code>单数</code></p><p>Buy two CDs and get another completely free<br>If you don’t like this dress, let me show you another<br>We need another person to help us finish the work</p><p>another 后可接基数词或few,意为”还有…,另外的…”,修饰可数名词复数<br>I have been here for two weeks and I will stay here for <code>another three weeks</code><br>There’s still room for <code>another few people</code> at the back of the hall<br>大厅后面还有几个人的空间</p><h5 id="other"><a href="#other" class="headerlink" title="other"></a>other</h5><ul><li>other 可与 the 连用, 单独使用或修饰<code>可数名词单数</code>,表示 “(两者中的)另一个”.<br>或修饰可数名词复数, 相当于the others, 意为”其余的”;<br>也可不与 the 连用,直接修饰名词,修饰可数名词复数时, 相当于 others, 表示泛指意义,常用于 some…others…结构<br>  <strong>I have two brothers. One is a soldiier and the other is a singer.</strong><br>  The other <code>shoe</code> can’t be found<br>  The old man has three sons. One is doctor, another is a lawyer, and the other is a worker<br>  Old John has four children. Lily is a little silly, and lucy is a little lazy and <code>the other two</code> are very bright<br>  I often have different ideas from <code>the others</code> in my class<br>  We should not speak ill of other people behind thieir backs<br>  Some children are cleaning the windows, and others are mopping the floor</li><li>other 前除了可以用 the , 还可以用 any | some | no | my | your | two | several | many | a few 等,一起修饰可数名词<br>  I have no other dictionary apart from this one. 除了这本词典,我没有别的了<br>  You can hold it with your other hand<br>  We’ve still got several other kinds for you to choose from<br>  I don’t like this colour. Have you got <code>any other colours/any others</code><br>  These books are not all. There are still <code>some other books/some others</code></li></ul><h4 id="little-a-little-few-a-few"><a href="#little-a-little-few-a-few" class="headerlink" title="little | a little | few | a few"></a>little | a little | few | a few</h4><p>We usually have little rain in spring<br>Can you speak English? Yes, but a little<br>Please add a little sugar to the coffee<br>He ate little of the food<br>A lot of friends were invited, but few came<br>I have read all of his works, but only a few are as good as his first one<br>I could still see a few people in the street<br>Very few students learn Latin now</p><h4 id="many-much"><a href="#many-much" class="headerlink" title="many | much"></a>many | much</h4><p>Many don’t agree to this plan<br>He didn’t say much about his trip<br>Many hands make light work<br>I’ve got much work to do </p><p>many 作主语,谓语动词用复数形式<br>much 作主语,谓语动词用单数形式<br>many 和 much 后面可跟of 短语</p><p>Many of my friends live abroad<br>much of the work has been done</p><p>many | much 前可以有 as | so | too | how 等词修饰<br>Don’t take so many<br>There are too many mistakes in your composition</p><h4 id="some-any"><a href="#some-any" class="headerlink" title="some | any"></a>some | any</h4><ul><li>some | any 表示”一些” 可修饰可数名词复数或不可数名词. 一般 some 用于肯定句中, any 用于否定句和疑问句中<br>  Some say it was an accident, but I don’t believe it<br>  Many of the buildings were damaged in the earthquake and some were totally destroyed<br>  There are still some wine in the bottle<br>  Have you got any money with you? If you have any, please lend me some.<br>  Are any of the paintings for sale? 这些画有没有要卖的<br>  I didn’t eat any meat</li><li>some 有时也用于疑问句,表示说话者肯定的语气或希望得到对方肯定的回答. any 有时也用于肯定句中,表示”任何一个,任何一些”<br>  Weren’t you looking for some of those? 你不是再找那些东西吧?<br>  I’ve just made a pot of coffee. Would you like some?<br>  I’ll take any you don’t like<br>  Which colour do you want? Any of them will do</li><li>作主语时,谓语动词要根据 some 和 any 指代或修饰的名词的单复数而定<br>  Some food <code>has</code> gone bad<br>  <code>some agree</code>, and <code>some</code> of them <code>don&#39;t</code><br>  <strong>I don’t think <code>any</code> of them <code>are</code> coming</strong><br>  <code>Any</code> of time <code>is</code> to be made full use of </li></ul><h4 id="复合不定代词的用法"><a href="#复合不定代词的用法" class="headerlink" title="复合不定代词的用法"></a>复合不定代词的用法</h4><ul><li><p>some 类复合不定代词主要用于肯定句中或预料会得到肯定会带的问句中<br>  any 类复合不定代词主要用于否定句和疑问句中,也可用于肯定句,表示”任何…”之意</p><p>  Does someone here know Lily’s telephone number?<br>  I haven’t seen anybody around here that I can turn to for help<br>  I don’t know what he does exactly, but I know it has something to do with computers<br>  I’m so hungry and I’ll eat anything</p></li><li><p>由 one 和 body 构成的不定代词可以相互换用,但前者比较文雅</p><p>  Someone/Somebody seems to have been here<br>  Everyone’s/Everybody’s business is no one’s/nobody’s business (事关大家无人管)</p></li><li><p>someone | somebody | anyone | anybody | everyone | everybody | no one 等词后一般不跟 OF 短语;<br>  若需跟of短语通常用 some one | any one | every one | none 等</p><p>  Somebody should have told me<br>  Every one of them has a computer<br>  None of the suggestions are acceptable </p></li><li><p>复合不定代词后可加 -‘s 构成所有格</p><p>  There’s somebody’s backpack left in the classroom<br>  It’s anybody’s plan,not mine(这是别人的计划,不是我的)</p></li><li><p>none | no one<br>  none 表示三者或三者以上范围中”没有一个”, 也可指代不可数名词,表示”没有一点儿”; 后可以接表示范围的of短语<br>  no one 只能指人,不能指物,其后一般不接of短语</p><p>  I have invited them all but now none have/has arrived yet<br>  No one in our class failed the maths exam<br>  Owen has made lots of money, but he would prefer to spend none on books<br>  None of them believed his story<br>  I was going to offer you saome cake but there’s none left</p><p>  How many of you have been to the Three Gorges Dam? None<br>  Who knows the answer to this question? No one<br>  *回答how many/much 的提问用 <code>none</code>, 回答 who 的提问用 <code>no one</code></p><p>  常用短语</p><ul><li>none but 只有</li><li>second to none 首屈一指</li><li>have none of sth.  不允许,不接受</li><li>none of one’s business 不关某人的事</li></ul></li><li><p>every one | everyone<br>  every one 可单独使用, 也可用于of 短语之前,表示一定范围内的每一个人或每个事物<br>  everyone 等同于 everybody, <code>只指人</code>, 不指物, 常单独使用, 其后一般不跟of 短语</p><p>  There are 50 students in this class and he knows every one.<br>  I checked every one of the drawers, but couldn’t find my watch</p></li><li><p>somebody | nobody<br>  somebody 可指有一点地位或小有名气的人物; Nobody 指没有地位或默默无闻的人物<br>  He thinks himself somebody, but he’s really nobody</p></li></ul><h3 id="相互代词"><a href="#相互代词" class="headerlink" title="相互代词"></a>相互代词</h3><p>指由相互关系的代词,主要有 each other | one another , 意为”相互”<br>each other 主要用于两者之间, 但在现在英语中 each other 也可以用于三者或三者以上<br>one another 主要用于三者或三者以上</p><p>   We often help each other when in trouble<br>   Jeffery and I often send e-mails to each other<br>   They seem to love one another very much </p><p><em>相互代词的所有格修饰的名词不能作主语</em><br>One another’s postcards have been received (x)<br>We have received one another’s postcards (0)</p><h3 id="疑问代词"><a href="#疑问代词" class="headerlink" title="疑问代词"></a>疑问代词</h3><ul><li><p>who | whom<br>  who 即可指单数,也可指复数<br>  whom 只能作动词或介词的<code>宾语</code> . 作动词的宾语时可与who互换使用<br>  <strong>在介词后作宾语时只能用whom</strong><br>  Who will be the leader of the team?<br>  Who/Whom did you meet just now (动词的宾语)<br>  Who/Whom were you talking about when I came in (介词的宾语)<br>  With whom did you go to the concert (介词的宾语,跟在介词后,whom不可用who代替)</p><p>  <strong>疑问代词作主语时,谓语动词的数要根据疑问代词代替的词的数来决定.如果数的概念不清,动词多用单数形式</strong><br>  Who are there on the playground?<br>  Who is in the room?</p></li><li><p>whose<br>  表示”谁的”, 可指人和物. 可置于名词前起修饰限定作用,也可单独使用<br>  They each draw a picture, but whose is the best?<br>  Whose do you like better, Jack’s or Sally’s?<br>  Helen has already taken her bag away. Whose is this?<br>  Both Jim and Jack speak English. Whose pronunciation is better?</p><p>  <em>Whose作主语时即可指�����数,也可指复数</em><br>  Whose is this backpack?<br>  Whose are these backpacks?</p></li><li><p>which<br>  which 指在明确的,已知的范围中进行选择,即可指人也可指物,即可指单数也可以指复数<br>  Which is more interesting, this book or that?<br>  I don’t know which to choose<br>  Which cities are you going to visit this summer<br>  Which of the seven colours do you prefer<br>  Which of the patients have recovered (哪些患者已经康复了?)</p></li><li><p>what<br>  what 意为”什么”. 修饰可数或不可数<br>  What makes you love your hometown so much?<br>  What do you usually do on Sundays?<br>  What are your parents?<br>  What interests do you have?</p><ul><li><p>what | which<br>what 没有具体的范围,意为”什么”;<br>which 常指在具体的范围内进行选择,意为”哪一个/些”<br>What colour do you like? (没有指定选择的范围)<br>Which colour do you like better, red or yellow? (在红色和黄色中进行选择)</p></li><li><p>what | who<br>What 指人时一般说明职业<br>who 常用来说明身份<br>What is your father (你爸爸时作什么的)<br>Who is the man? He is my brother</p></li><li><p>“What be + 主语” 和 “What do + 主语 + do?” 用于询问职业<br>What is your mother<br>What do you do for a living </p></li><li><p>“What be + 主语 + like” 用于询问品行,性格,状况等<br>What is the weather like?<br>What is Lucy like? She is ver diligent,friendly and lovely</p></li><li><p>“What do + 主语 + look like?” 用于询问外貌<br>What does  Mary look like? She is tall and thin</p></li><li><p>“What (…) for?” 用于询问原因和用处<br>What did she put the books away for? She wanted to play<br>I should get up early tomorrow morning. What for?</p></li><li><p>“What if …?” 用于提出疑虑或建议,意为”如果…怎么办/怎么样?”<br>What if it rains tomorrow?<br>What if we go together? (我们一起去怎么样)</p></li><li><p>“What about…?” 用于提出建议或询问情况<br>What time shall we meet? What abot 7:00 tomorrow morning?<br>I’ll stay here for another week. What about you?</p></li></ul></li></ul><h3 id="连接代词"><a href="#连接代词" class="headerlink" title="连接代词"></a>连接代词</h3><p>指 引导主语从句, 宾语从句, 表语从句 和 同位语从句 的代词.<br>主要分为表示会疑问的连接代词和不表示疑问的连接代词<br>包括 who | whom | whose | which | what | whoever | whomever | whosever |whichever | whatever</p><ul><li><p>表示疑问的连接代词<br>Who will be elected president of the company won’t be known until late this afternoon.<br>直到今天下午晚些时候,我们才能知道谁将被选为公司的总裁<br>He didn’t tell me whose computer this was<br>I have no idea whomever I should invite to the get-together<br>我不知究竟应该邀请谁参加这次聚会</p></li><li><p>不表示疑问的连接代词<br>表示”…事,任何…”之意<br>I’ll tell you what we’re planning to do in the coming days<br>Whoever can’t afford to go to school shall be sponsored by our company.<br>上不起学的人都将受到我们公司的资助<br>She will buy whichever is the cheapest<br>哪个便宜她就买哪个<br>You can buy whatever you need in this supermarket<br>I have invited whomever you rang this morning<br>Whosever books are overdue will be fined </p></li></ul><h3 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h3><ol><li><p>This project requires close teamwork. ____ will be achieved unless we work well together.</p></li><li><p>____ can be good at something for 40 years if he doesn’t love it</p></li><li><p>I’ve lived in New York and Chicago, but don’t like ____ of them very much</p></li><li><p>At our factory there are a few machines similar to ____ described in this magazine.</p></li><li><p>Do you have ____ ready for the opening ceremony, Ted?</p></li><li><p>We’d really appreciate ____ when Miss Green comes to help us with the kitchen work</p></li><li><p>He didn’t make ____ clear when and where the meeting would be held</p></li><li><p>For ____ with famil members far away, the personal computer and the phone are improtant in staying connected.</p></li><li><p>Nothing  2. Nobody  3. either  4. those  5. everything  6. it  7. it  8. those</p></li></ol><p>改错</p><ol><li><p>Life in the city is quite different form one in the country</p></li><li><p>Everything is worng with  my watch; It doesn’t work</p></li><li><p>My brother and I have all worked in Nanjing for some time </p></li><li><p>I’ve got some others friends I’d like to invite</p></li><li><p>one &gt; that  2. Everything &gt; something  3. all &gt; both  4. others &gt; other</p></li></ol><h2 id="实意动词"><a href="#实意动词" class="headerlink" title="实意动词"></a>实意动词</h2><pre class="line-numbers language-none"><code class="language-none">例如:come , read , go , watch , play , fly <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="实意动词的否定-提问"><a href="#实意动词的否定-提问" class="headerlink" title="实意动词的否定/提问"></a>实意动词的否定/提问</h3><h4 id="使用助动词进行否定"><a href="#使用助动词进行否定" class="headerlink" title="使用助动词进行否定"></a>使用助动词进行否定</h4><pre class="line-numbers language-none"><code class="language-none">do&#x2F;does&#x2F;did 后面加 notdon&#39;t doesn&#39;t didn&#39;t<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="使用助动词进行提问"><a href="#使用助动词进行提问" class="headerlink" title="使用助动词进行提问:"></a>使用助动词进行提问:</h4><blockquote><p>He often plays golf.<br>Does he often <code>play</code> golf?<br>Yes,he does. / No,he doesn’t.<br><strong>注意play的形态</strong></p></blockquote><blockquote><p>They go to school by bus.<br>Do they go to school by bus?<br>Yes,they do. / No,they don’t.</p></blockquote><blockquote><p>Sam had breakfast yesterday.<br>Did Sam have breakfast yesterday?<br>Yes,he did. / No,he didn’t</p></blockquote><h4 id="使用疑问词进行提问和回答"><a href="#使用疑问词进行提问和回答" class="headerlink" title="使用疑问词进行提问和回答"></a>使用疑问词进行提问和回答</h4><blockquote><p>He bought three books yesterday.<br>Who bought three books yesterday?<br>What did he buy yesterday?<br>When did he buy three books?<br><strong>如果询问不是主语,则需要添加助动词,例如上面的did</strong></p></blockquote><blockquote><p>They have been in China for three years.<br>How long have they been in China?</p></blockquote><blockquote><p>It is about 4 kilometers from  Beijing to Xi’an.<br>How far is it from Beijing to Xi’an?</p></blockquote><blockquote><p>They come to visit me once a week.<br>How often do they come to visit me ?</p></blockquote><blockquote><p>他们学习汉语多长时间了?<br>How long have they learned Chinese?</p></blockquote><blockquote><p>How often do you watch movies?</p></blockquote><h2 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h2><ul><li>可数名词<ul><li>单数</li><li>复数</li></ul></li><li>不可数名词<ul><li>无复数,只用单数形式表示</li></ul></li></ul><h3 id="名词变复数规则"><a href="#名词变复数规则" class="headerlink" title="名词变复数规则"></a>名词变复数规则</h3><ul><li><p>一般末尾加上后缀 <code>s</code></p></li><li><p>以s,z,x,ch,sh结尾的词,在末尾加上后缀 <code>es</code><br>bus &gt; buses<br>class &gt; classes<br>brush &gt; brushes<br>watch &gt; watches<br>  <em>有些书定义是用发音来判断的,如 stomach 的复数为 <code>stomachs</code></em></p></li><li><p>以字母 <code>f</code> 或 <code>fe</code>结尾的名词,要把 f 或 fe 改为 <code>v</code> 再加<code>es</code><br>leaf &gt; leaves<br>wife &gt; wives<br>life &gt; lives<br>shelf &gt; shelves (书架)<br>knife &gt; knives<br>wolf &gt; wolves</p><p>  <em>有些以 f 结尾的名词变复数直接加 s ,也有些词两种变化都可以</em><br>  roof &gt; roofs (屋顶)<br>  chief &gt; chiefs (首领)<br>  gulf &gt; gulfs (海湾)<br>  scarf &gt; scarfs/scarves (围巾)</p></li><li><p>辅音字母+Y结尾的名词,将Y改为i,再加<code>es</code><br>factory &gt; factories<br>city &gt; cities<br>university &gt; universities<br>family &gt; families<br>study &gt; studies (书房,研究)<br>country &gt; countries </p><p>  <em>元音 + y 的词复数形式</em><br>  day &gt; days<br>  toy &gt; toys<br>  boy &gt; boys<br>  monkey &gt; monkeys</p></li><li><p>以O结尾的名词,如果O前面不是元音字母或不是外来词或缩写形式,就加<code>es</code><br>hero &gt; heroes<br>potato &gt; potatoes (土豆)<br>tomato &gt; tomatoes (西红柿)<br>echo &gt; echoes (回声)</p><p>  <em>直接接s</em><br>  radio &gt; radios (收音机)<br>  bamboo &gt; bamboos (竹子)<br>  photo &gt; photos<br>  piano &gt; pianos<br>  tobacco &gt; tobaccos (烟草)</p><p>  <em>es/s 皆可</em><br>  zero &gt; zeroes/zeros<br>  cargo &gt; cargoes/cargos (货物)</p></li><li><p>以 <code>th</code>结尾的词一般加 -s<br>mouth &gt; mouths<br>youth &gt; youths<br>path &gt; paths<br>month &gt; months</p></li></ul><p><strong>a,e,i,o,u 元音,其余为辅音字母</strong></p><h3 id="可数名词复数的不规则变化"><a href="#可数名词复数的不规则变化" class="headerlink" title="可数名词复数的不规则变化"></a>可数名词复数的不规则变化</h3><ul><li><p>单复数同形的名词<br>sheep (绵羊)<br>deer (鹿)<br>  <strong>means (方法,手段)</strong><br>series (系列)<br>  <strong>Chinese (中国人)</strong><br>crossroads(十字路口)<br>  <strong>species(种类)</strong></p></li><li><p>改变内部元音的名词<br>foot &gt; feet<br>tooth &gt; teeth<br>goose &gt; geese (鹅)<br>man &gt; men </p></li><li><p>变换词尾的名词<br>child &gt; children<br>ox &gt; oxen (公牛)</p></li><li><p>表示”某国人”的名词<br>a Chinese &gt; two Chinese<br>a Japanese &gt; two Japanese<br>a Frenchman &gt; two Frenchmen<br>an Englishman &gt; two Englishmen<br>German &gt; Germans</p><p>  <strong>中日不变英法变,其余 <code>-s</code> 添后面</strong></p></li><li><p>外来名词的复数形式<br>phenomenon &gt; phenomena (现象)<br>basis &gt; bases (基础)<br>thesis &gt; theses (论文)<br>medium &gt; media (媒介物)<br>crisis &gt; crises (危机)<br>analysis &gt; analyses (分析)</p></li></ul><h3 id="特殊名词的复数形式"><a href="#特殊名词的复数形式" class="headerlink" title="特殊名词的复数形式"></a>特殊名词的复数形式</h3><ul><li><p>有些名词只有复数形式,同时也表示复数意义.做主语是,谓语动词用复数<br>goods (商品)<br>clothes (服装)<br>thanks (感谢)</p></li><li><p>有些名词只有一种形式,但表示复数意义.做主语时,谓语动词用复数<br>police<br>  <strong>people</strong><br>cattle (牛)</p></li><li><p>有些集体名词常以单数形式出现,侧重整体时表示单数意义,若表示多个这样的整体则有复数变化形式;侧重整体中的成员时表示复数意义<br>Lily’s family is well known throughout the town<br>Our willage consists of no more than  200 families<br>His family all love music.</p></li><li><p>以名词为中心词的复合名词,将该名词变复数; 没有中心词的符合名词,只在最后一词的词尾加-s<br>blackboard &gt; blackboards<br>editor-in-chief &gt; editors-in-chief(主编)<br>passer-by &gt; passers-by<br>grown-up &gt; grown-ups (成年人)<br>go-between &gt; go-betweens (中间人)<br>forget-me-not &gt; forget-me_nots (勿忘我)(草)(什么鬼!!!)<br>brother-in-law &gt; brothers-in-law</p></li><li><p>有些名词意义不同复数形式不同</p><ul><li>penny<br>指价值时,复数形式为pence; 指硬币的个数时,复数形式为pennies<blockquote><p>ten pence 面值十便士<br>ten pennies 十枚一便士的硬币</p></blockquote></li><li>fish<br>表示鱼的条数时,单复数同形; 表示鱼的种类时,复数形式为fishes<blockquote><p>I caught two fish in the river yesterday<br>I keep five fishes in the fishbowl</p></blockquote></li><li>people<br>意为”人,人们”时,时集体名词,只有一种形式,表示复数意义;意为”民族”时,单数形式为people,复数形式为peoples<blockquote><p>two people 两个人<br>two peoples 两个民族</p></blockquote></li><li>常以复数形式出现的名词<blockquote><p>trousers (裤子) | scissors (剪刀) | shorts (短裤) | chopsticks (筷子) | socks (短袜) | glasses (眼镜)<br>这类词不能直接被具体数字修饰. 像 trousers 不能说 two trousers, 但可以说many trousers , two pairs of trousers 等</p></blockquote></li></ul></li></ul><h3 id="常见的不可数名词"><a href="#常见的不可数名词" class="headerlink" title="常见的不可数名词"></a>常见的不可数名词</h3><p><strong>一般没有复数形式,不能用不定冠词修饰;若表示它的个体意义,一般要借助量词</strong></p><blockquote><p>advice | air | baggage(行李) | bread(面包) | chalk(粉笔) | change(零钱) | cloth(布) | cotton(棉花) | equipment(仪器) | food | fruit | furniture(家具) | gas(汽油) | glass | grain(谷物) | grass(草) | ink(墨水) | information| knowledge | luck | luggage(行李) | meat(肉) | money | music | news(新闻) | paper | progress(进步) | tea | rain | rice | sand | smoke | snow | sugar | traffic | waste(废弃物) | water | wealth | weather | wheat(小麦) | wind | work | wood</p></blockquote><h3 id="可转化为可数名词的物质名词"><a href="#可转化为可数名词的物质名词" class="headerlink" title="可转化为可数名词的物质名词"></a>可转化为可数名词的物质名词</h3><ul><li><p>有些物质名词表示”一份/杯/场…”时,作可数名词用,前面可用不定冠词<br>a beer 一瓶啤酒<br>a rain<br>a wind<br>a coffee<br>a paper 一份文件<br>a glass 一个玻璃杯</p></li><li><p>有些物质名词可以有复数形式,表示不同种类或数量之多<br>foods 各种各样的食品<br>glasses 眼镜<br>snows 雪堆,多场雪<br>woods 小树林<br>fruits 各种各样的水果<br>sands 沙堆,沙丘<br>waters 大片水域<br>winds 多阵风</p></li></ul><h3 id="可转化为可数名词的抽象名词"><a href="#可转化为可数名词的抽象名词" class="headerlink" title="可转化为可数名词的抽象名词"></a>可转化为可数名词的抽象名词</h3><p>抽象名词表示具体事物时,可以变为可数名词,表示”某种人或某件事”</p><p>beauty 美人<br>death 死亡事件;死<br>failure 失败的人或事<br>joy 令人高兴的人或物<br>pity 遗憾,可惜<br>surprise 令人感到惊讶的事情<br>comfort 安慰者;慰藉物<br>honour 令人感到荣耀的人或事物<br>pleasure 愉快的活动<br>success 成功的事物<br>shock  令人感到吃惊的事<br>worry 令人担忧的事</p><p>Mary is a great honour to our class<br>what a surprise you gave us all </p><p>*专有名词一般也视为不可数名词,但有时也可以作为可数名词用,可以用 a/an 修饰或用复数形式</p><p>How I wish to be a Thomas Edison!<br>A Dick is asking to see you. 一个叫迪克的人想见你<br>There are two Marys in my class.I often confuse them.</p><h2 id="名词所有格"><a href="#名词所有格" class="headerlink" title="名词所有格"></a>名词所有格</h2><h3 id="‘s所有格"><a href="#‘s所有格" class="headerlink" title="-‘s所有格"></a>-‘s所有格</h3><h4 id="构成"><a href="#构成" class="headerlink" title="构成"></a>构成</h4><ul><li><p>一般情况下,在名词词尾加 <code>-&#39;s</code><br>my son’s watch<br>Dick’s car<br>Richard’s new idea<br>a women’s hospital<br>men’s clothes</p></li><li><p>词尾是 -s 的复数名词,在词尾直接加 <code>-&#39;</code><br>birds’ nests 鸟窝<br>my parents’ wishes</p></li><li><p>词尾是 -s 的单数名词或专有名词,名词尾加 -‘ 或 -‘s 均可<br>my boss’/boss’s plan<br>Engels’/Engels’s works 恩格斯的著作</p></li><li><p>复合名词在最后一个词的词尾加 -‘s<br>my brother-in-law’s birthday cake<br>a grown-up’s problem </p></li><li><p>名词后有同位语是,只将同位语变所有格<br>This is my sister,Mary’s bicycle. 这个是我姐姐玛丽的自行车<br>You must be surprised when you know your son, Philip’s school report</p></li></ul><h4 id="用法-2"><a href="#用法-2" class="headerlink" title="用法"></a>用法</h4><ul><li><p>表示人或物真正地拥有时 用 -‘s 所有格形式<br>Many students’ eyesight is gettting poorer and poorer.</p></li><li><p>表示时间,距离,国家,城市,团体,机构等名词<br>today’s newspapers<br>tomorrow’s weather<br>the city’s environment<br>the delegation’s visit 代表团的访问</p></li><li><p>用以构成各种节日<br>Valentine’s Day 情人节<br>New Year’s Day<br>Women’s Day</p></li><li><p>表示店铺,学校,住宅以及公共建筑的名词, -‘s 所有格后通常不出现其所修饰的名词<br>at the doctor’s (office)<br>at Tom’s (home)<br>at the tailor’s (shop) 在裁缝店</p></li><li><p>有时所有格可单独使用<br>My spoken English is just as good as Susan’s (spoken English).<br>Robin’s (family) is a happy family.</p></li></ul><h3 id="of-所有格"><a href="#of-所有格" class="headerlink" title="of 所有格"></a>of 所有格</h3><ul><li><p>用于表示无生命的事物的名词<br>From the top of the hill, you can get a panoramic view of the city.<br>There is something wrong with the engine of the car.<br>The environment of the city is getting better and better.</p></li><li><p>用于表示名词化的形容词或过去分词的名词<br>the life of the poor<br>the living conditions of the old<br>the needs of the wounded 伤员们的需要</p></li><li><p>用于有较多修饰语的名词<br>I have read the report of the students who have done the research work for two years.<br>The naughty boy caught the tail of the old black cat.</p></li></ul><h3 id="双重所有格"><a href="#双重所有格" class="headerlink" title="双重所有格"></a>双重所有格</h3><p>of 所有格和 -‘s 所有格或名词性物主代词合成在一起用于一个短语中,叫做双重所有格.双重所有格主要用来表示部分概念和强烈的感情色彩</p><h4 id="构成-1"><a href="#构成-1" class="headerlink" title="构成"></a>构成</h4><ul><li><p>of + -‘s 所有格<br>a friend of jack’s 杰克的一个朋友<br>a teacher of my brother’s 我弟弟的一位老师</p></li><li><p>of + 名词性物主代词<br>some friends of ours 我们的一些朋友<br>a good habit of mine 我的一个好习惯</p></li></ul><h4 id="用法-3"><a href="#用法-3" class="headerlink" title="用法"></a>用法</h4><ul><li><p>双重所有格中用-‘s 所有格的必须时一个明确限定的,指人的名词,同时of 前面被修饰的必须是不确指的名词</p></li><li><p>有时双重所有格所修饰的名词与指示代词连用,常带有赞赏,厌恶,不满等感情色彩<br>That brother of yours is always looking for trouble.<br>That little son of Mr Chen’s is very clever.</p><p>  <em>名词后用of所有格和双重书有个表达的含义不同,注意区别</em><br>  a picture of my mother 我妈妈(本人)的一张照片<br>  a picture of my mother’s 我妈妈(拥有)的一张照片</p></li></ul><h3 id="名词的修饰词"><a href="#名词的修饰词" class="headerlink" title="名词的修饰词"></a>名词的修饰词</h3><h4 id="表示数量的词作修饰语"><a href="#表示数量的词作修饰语" class="headerlink" title="表示数量的词作修饰语"></a>表示数量的词作修饰语</h4><ul><li><p>只修饰可数名词</p><blockquote><p>few | a few | several | many | many a (很多) | each | dozens of (几十个;许多) | scores of (许多;大量) | a couple of (两个;几个) | a great/good many (很多) | a number of (大量的) | more than one (不止一个)</p></blockquote></li><li><p>只修饰不可数名词</p><blockquote><p>little | a little | a bit of(一点) | much | a large amount of | a good/great deal of </p></blockquote></li><li><p>即可修饰可数名词又可修饰不可数名词</p><blockquote><p>some | a lot of | lots of | plenty of (充足的) | enough | most | all | any | masses of(许多) | a mass of(许多) | quantities of (许多) | a quantity of (许多)</p></blockquote></li></ul><h3 id="单位词作修饰语"><a href="#单位词作修饰语" class="headerlink" title="单位词作修饰语"></a>单位词作修饰语</h3><ul><li><p>普通单位词<br>英语中最宠用的单位词有piece,bit,article,item等,它们的搭配能力最强,常用来修饰不可数名词<br>an item of information 一条消息<br>an item of furniture 一件家具<br>a piece of chalk 一支粉笔<br>a piece of news<br>a piece of paper<br>a piece of work 一份工作<br>a piece of meat 一块肉<br>  <strong>two pieces of bread</strong><br>several pieces of advice<br>a few articles of clothing 几件衣服<br>a bit of wood 一块木头<br>bits of broken glasses 玻璃碎片</p></li><li><p>度量单位<br>常用的度量单位词有 metre,inch,yard,foot,pound,kilogram,ton<br>a metre of cloth 一米布<br>an inch of land 一寸土地<br>a pound of meat 一磅肉<br>a ton of coal 一吨煤<br>two feet of snow 两英寸厚的雪</p></li><li><p>容积单位词<br>box,bag,tin,basket,bottle,cup,glass,basin<br>a box of sweets 一盒糖<br>a bag of books 一袋子书<br>a tin of baked beans 一罐烤豆子<br>a bottle of wine 一瓶葡萄酒<br>a cup of tea 一杯茶<br>a glass of beer 一杯啤酒<br>a basin of water 一盆水<br>a basket of eggs 一篮子鸡蛋</p></li><li><p>形状单位词<br>指用象状描述名词的一些词. 如: bar,ball,block,loaf,sheet,drop,grain等<br>a bar of chocolate 一条巧克力<br>a cake of soap 一块肥皂<br>a block of ice 一块冰<br>a loaf of bread 一条面包<br>a drop of rain 一滴雨<br>a grain of sand 一粒沙子</p></li><li><p>动态单位词<br>主要用来描述”一阵”,”一道”,”一声”,”一丝”等<br>a fit of laughter 一阵笑声<br>a roar of shout 一声大喊<br>a gust of wind 一阵狂风<br>a flash of lightning 一道闪电<br>a burst of anger 一阵怒火<br>a round of applause 一阵掌声</p></li><li><p>集体单位词<br>a crowd of people 一群人<br>a group of students<br>a troop of soldiers 一队士兵<br>a team of players<br>a fleet of ships 一支舰队<br>a gang of people 一伙人</p></li></ul><h3 id="其他修饰语"><a href="#其他修饰语" class="headerlink" title="其他修饰语"></a>其他修饰语</h3><ul><li><p>名词作修饰语<br>a stone table<br>a clothes shop<br>a goods train<br>a shoe factory<br>a girl student<br>a savings account 一个储蓄账户</p></li><li><p>形容词作修饰语<br>a pretty girl<br>a nice day<br>amazing news<br>a well-known poet<br>a greezing night</p></li><li><p>副词作修饰语<br>the people there<br>  <strong>the pictures below</strong><br>the room above </p></li><li><p>介词短语作修饰语<br>a girl in clean clothes<br>the school near the river<br>the answer to this question<br>books on th top shelf</p></li><li><p>定语从句作修饰语<br>The probelm <code>which we are facing now</code> is how to bring down the number of private cars.</p></li></ul><h3 id="名词句法功能"><a href="#名词句法功能" class="headerlink" title="名词句法功能"></a>名词句法功能</h3><ul><li><p>作主语<br><code>self-confidence</code> is the key to success<br><code>The lawyer</code> will undertake this case</p></li><li><p>作宾语<br>It is everyone’s duty to love <code>animals</code><br>Teenagers today are facing <code>lots of pressure</code><br>He went on to talk about <code>his accident</code></p></li><li><p>作补足语<br>Mary was made <code>head</code> of the delegation<br>He named his son <code>John</code></p></li><li><p> 作表语<br>I’m not <code>a wage-earner</code>;I’m <code>a self-employed man</code> 我不是工薪阶层,我是一名个体经营者<br>Lydia turned <code>nurse</code>,which she didn’t wish to be. 名词在turn后作表语时,其前不用冠词</p></li><li><p>作同位语<br>That is my new English teacher,<code>Mr Wang</code><br>We <code>students</code> need to develop our interests fully</p></li><li><p>作定语<br>The young man gave his girlfriend a <code>diamond</code> necklace<br>Sorry, I am a <code>chemistry</code> teacher,not an <code>English</code> teacher<br>In my hometown,there grow many <code>apple</code> trees.</p></li></ul><p><em>大多数情况下作定语的名词用单数形式.但 man , woman 作定语时,如果修饰的是可数名词复数,者相应地变为复数. 总是以复数形式出现的名词作定语时仍用复数</em><br>a shoe factory<br>heart attack 心脏病<br>a film star<br>an orange tree<br>a woman doctor<br>three women doctors<br>a glasses store </p><h3 id="词义解析"><a href="#词义解析" class="headerlink" title="词义解析"></a>词义解析</h3><ul><li><p>affair | matter | business</p><p>  I have been very interested in foreign affairs.<br>  我一直对外交事物很感兴趣</p><p>  We all wonder what is the matter with the new machine</p><p>  The manager is away on business and it’s none of your business</p></li></ul><ul><li><p>cloth | clothes | clothing | dress</p><p>  cloth 泛指 “布”时为不可数名词,而指某一特殊用途的布时,时可数名词,其复数为 clothes<br>  Most of our clothes are made of cloth. 衣服由布做的<br>  Customers are quite satisfied with our table clothes. 顾客对我们的桌布很满意</p><p>  clothes 指身上穿的衣服,包括上衣,裤子,内衣等<br>  Do I need to change into a new set of clothes for this party?</p><p>  clothing 是服装的总称,范围比clothes广.除衣,裤外,还包括帽子,鞋袜,手套等<br>  This shop sells articles of men’s clothing.</p><p>  dress “裙子,衣服” . 作可数名词,指妇女的连衣裙或上下连身的女装,或小孩的衣物.作不可数,表示衣服(无论男女)<br>  He doesn’t care about dress.<br>  Who is that girl in a red dress?<br>  national dress (民族服装)<br>  evening dress (晚礼服)</p></li><li><p>sound | nosie | voice </p><p>  Sound travels more slowly than light<br>  We couldn’t hear a sound here</p><p>  He enjoys the country life, away from the city nosie</p><p>  I recognized his voice at once when he phoned.<br>  He was suffering from flu and had lost his voice</p></li><li><p>power | strength | force | energy </p><p>  power 力气,能力,权力<br>  The power of the explosion smashed windows across the street(爆炸的冲击力震碎了对面街上的窗户)<br>  China is a country where the people are in power.(笑话?)<br>  Electricity gives us power and makes machines work.</p><p>  strength 体力,意志力,优点<br>  The little boy doesn’t have the strength to lift that heavy box<br>  Union is strength. 团结就是力量<br>  By doing so, you can test the strength of steel. (钢)<br>  Her main strength is her critical thinking ability(批判性的思维能力)</p><p>  force<br>  The force of explosion damaged his car<br>  He robbed me of the money by force. 他用暴力把我的钱抢走了<br>  From then on, the regulations came into force.<br>  Air forces were sent to the front. 空军被派往前线</p><p>  energy 精力,能量<br>  The man is old but he is full of energy<br>  The sun can provide varieties of energy</p></li><li><p>habit | custom | practice</p><p>  habit 指个人习惯; custom强调社会民主的风俗; practice作”惯例,常规”</p><p>  He has formed the habit of saving money<br>  Social customs vary greatly from country to country 各国的风俗习惯很不一样<br>  It is the practice in Britain to drive on the left</p></li><li><p>sight | view | scene | scenery</p><p>  sight 是可数名词,指某一地区值得游览的或具有特色的建筑物,风景,名胜等<br>  The Great Wall is one of the most breathtaking sights in the world (惊叹)</p><p>  view 是可数,指从某一特定点观看到的东西,景物,尤其是美丽的自然风景<br>  We have a fine view of the lake from our hotel window</p><p>  scene 是可数,表示”景色” ,指所见之物,也可表示动态或静止的室内,室外场景或常被当做一个整体的景色<br>  There are many beautiful scenes in the out-of-town park</p><p>  scenery 是不可数, 指自然景色,场面,是大自然风景的总称<br>  Guilin is world-famous for her fine scenery</p></li><li><p>prize | award | reward</p><p>  prize 各类竞赛或抽奖的奖; award 多指工作中获得的奖; reward 多指对某人的工作或服务等的回报</p><p>  Hundreds of prizes can be won in our competition<br>  The movie has won a number of awards<br>  A reward was offered for the return of the passport</p></li><li><p>journey | trip | travel | tour | voyage</p><p>  journey 指一地到一地,远距离,或走很长的路,不含由回到原地之意<br>  trip 时间短,距离近<br>  travel 旅行,游历<br>  tour 参观,访问<br>  voyage 主要指乘船或飞机进行的旅行</p><p>  He made a journey from Paris to Berlin<br>  He went on a trip to the nearest seaside during his vacation<br>  He came home after five years of foreign travel<br>  We made a tour around the factory yesterday<br>  The day is coming when man takes voyage to the moon</p></li></ul><h3 id="练习题-1"><a href="#练习题-1" class="headerlink" title="练习题"></a>练习题</h3><pre class="line-numbers language-none"><code class="language-none">1. I took out my guildebook in which there was a lot of information about the city&#39;s well-known tourist _____(attact) and started to read2. The children huddled closely together for ____(warm)3. Father went to his doctor for ____(advise) about his heart trouble4. There are ten ____(woman) teachers and two hundred girl students in the school5.I shall never fear difficulty and I shall never know the ____(exist) of the word &quot;failure&quot;6.His ____(curious) made him wonder about clouds7.Except for some short songs and poems included in his plays, all of ____(Shakespeare) greatest poems are sonnet8.Tight jeans and trousers, short skirts and even sensible flat shoes may all cause ____(ill)1. attactions  2. warmth  3.  advice   4. women  5. existence 6.curiosity  7. Shakespeare&#39;s  8. illnesses找出下面语句的错误1. For Americans, distance in a social conversation is about an arm&#39;s long to front feet.2. These children had great funs in the park.3. Don&#39;t make any voice; your father is sleeping.4. It&#39;s not my book and maybe it&#39;s somebody else.**5. One of the first thing Bill did was to teach us how to play basketball.**6. The patient has stayed in the hospital for one and a half month.7. Of course, she is often asked question by people who want to be told the secret of long life.8. I had my hair cut at the barber around the corner9. To my surprised, Mr Yang found me and apologized to me for his sharp words the next day.1. long &gt; length2. funs &gt; fun 3. voice &gt; noise4. else &gt; else&#39;s5. thing &gt; things6. month &gt; months7. question &gt; questions8. barber &gt; barber&#39;s9. surprised &gt; surprise<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="冠词"><a href="#冠词" class="headerlink" title="冠词"></a>冠词</h2><h3 id="不定冠词"><a href="#不定冠词" class="headerlink" title="不定冠词"></a>不定冠词</h3><p>不定冠词 a/an 与one 同源,表示 “一” 概念. <code>但并不强调数目</code>,只表示名词的<code>不特定性</code></p><p>a 用于辅音音素前;<br>an 用于元音音素前</p><p>a university<br>a one-eyed horse<br>    <strong>a European country</strong><br>an important meeting<br>    <strong>an hour</strong><br>    <strong>an honest boy</strong></p><ul><li><p>表示同类中的任何一个<br>这种用法是由相同特点的同类人或事物中的任何一个来泛指一类人或事物的全部<br>A doctor is a person who saves people’s life<br>A square has four sides</p></li><li><p>表示泛指某个人或事物<br>A girl is sitting under the tree<br>I met a friend of yours today as I hurried off to work<br>我今天在赶去上班的路上遇到了你的一个朋友<br>My father bought me a nice present, but I don’t know what it is now.</p></li><li><p>表示”一”的概念<br>The hall can seat a thousand people </p></li><li><p>表示相同,同一或具有相同的性质<br>不定冠词的这种用法常与of搭配,构成”of + a/an + 名词”<br>Birds of a feather flock together (物以类聚)<br>We are all of an age (我们都是同龄人)</p></li><li><p>表示单位量词的”每一”<br>常用在指时间,重量,速度,价格等的单位量词前,表示”每一”,相当于 per | each | every 等<br>Take three pills a day and you’ll get better soon<br>We have a music class once a week<br>The meat costs three shillings a pound</p></li><li><p>用于表示整体的集体名词,可数名词化了的不可数名词及专有名词前<br>John Smith has a happy family<br>  <strong>A heavy rain fell yeaterday</strong><br>The news of my promotion came as a shock (我晋升的消息着实让我吃了一惊)<br>  <strong>I remember he came here one a Sunday and left soon</strong></p></li><li><p>用于表示某一方面,某一部分等特殊含义的不可数名词前<br>不可数名词如 education(教育) | history(历史) | knowledge(知识,学识) | population(人口) | time(时间) | word(世界) 等, 在表述其<code>某一部分或某一方面</code>的内容,概念时,尤其由修饰语修饰时,前面常用不定冠词<br>have a long history<br>receive a good education<br>a knowledge of English and computer</p></li><li><p>用于部分动词短语中<br>具有动作意义的名词在与动词 have | take | make | give | 等一起构成短语时, 名词前常用不定冠词,表示<code>一种短暂性的动作</code><br>have a look/walk/break/bath/swim<br>take a rest/walk/break/bath<br>make a choice/decision/plan/study<br>give a whistle/laugh/smile/shout </p></li><li><p>用于作同源宾语的名词前<br>dream a sweet dream<br>smile an attractive smile (笑得迷人)<br>fight a hard fight<br>die a glorious death (光荣牺牲)<br>sleep a sound sleep<br>live a happy and peaceful life </p></li><li><p>常用短语</p><ul><li><p>与 时间 | 数量 | 方式 等有关的短语<br>a moment ago<br>twice a week<br>after a time 一段时间之后<br>after a while  一会儿后<br>for a while 一会儿<br>half an hour 半小时<br>in a moment  立刻<br>just a minute/moment 就一会儿<br>once in a while 偶尔<br>all of a sudden 突然<br>as a result 因此<br>in a hurry 急匆匆地<br>in a word 总之<br>a great many 许多<br>a lot of 许多<br>a little 一点<br>a number of 一些<br>a kind of 一种<br>a great deal of 许多<br>a bit (of) 一点<br>in a loud voice 大声地<br>as  a matter of fact  事实上<br>as a rule 通常<br>once upon a time 从前<br>in a low mood</p></li><li><p>某些固定地动词短语<br>catch a cold<br>have a good time<br>keep an eye on<br>make a face 作鬼脸<br>make a living 谋生<br>make a speech<br>make a choice<br>pay a visit 拜访<br>take an interest in<br>do a good deed 做好事<br>have a fever<br>lend/ give sb. a hand<br>make an effort 做出努力<br>make a mistake<br>make an apology<br>make a decision<br>make a promise<br>take a seat</p></li></ul></li></ul><h3 id="定冠词"><a href="#定冠词" class="headerlink" title="定冠词"></a>定冠词</h3><p>定冠词 the 与 this | that | these | those 同源</p><ul><li><p>特指上文提到过的特定地人或事物<br>I went to a nearby restaurant. The food there was good, but the service of <code>the</code> restaurant was terrible<br>I have been staying here for two weeks. <code>The</code> two weeks has been wonderful</p></li><li><p>特指上文虽未提及,但谈话人都知道的人或事物<br>Would you please turn down the radio a little? <code>The</code> baby is sleeping<br>Close <code>the</code> windows before you leave the lab</p></li><li><p>用在表示宇宙将独一无二地事物地名词前<br>The sun was shining and birds were singing<br>Man travelled to the moon scores of years ago</p></li></ul><p><em>这里所指地主要是各种天体及世界上比较有影响的物体.但是<code>如果有形容词修饰</code>,常用不定冠词.例如: a full moon 一轮圆月</em></p><ul><li><p>用在可数名词单数前表示一类人或事物<br>The brain is the centre of thought<br>The cat, like the dog, is liked by many people<br>The pen is mightier than the sword (笔胜于剑)</p></li><li><p>用在表示地点,方位和时间地固定短语中<br>in the world<br>at the corner 在拐角处<br>from the west<br>in the beginning<br>in the morning<br>in the country<br>in the east<br>on the left<br>in the end<br>in the middle of<br>  <em>如果出现对称的方位或事件名词时,冠词往往可以省略</em><br>from (the) east to (the) west<br>from (the) beginning to (the) end</p></li><li><p>用于序数词前或比较等级说修饰的名词前<br>He is always the first to come and the last to leave<br>Maths is the most difficult subject and English is the easiest, I think.<br>  <strong>Which story is the more interesting (story) of the two?</strong></p></li><li><p>用在 “the + 比较级… , the + 比较级…” 结构中<br>The more love we give, the more love we’ll receive<br>The more careful you are, the fewer mistakes you’ll make</p></li><li><p>用于某些形容词或形容词化的过去分词前表示一类人或事物<br>The new is to take the place of the old<br>The poor in Africa are still suffering from hunger<br>In the air crash, the number of the wounded was ten</p></li><li><p>用于被演奏的西洋乐器名词前<br>The boy of no more than four years old can play the piano very well<br>Shall we dance to the guitar</p></li><li><p>用于集体名词,物质名词前<br>The museum is open to the public<br>The people in this country are kind and ready to help<br>The iron is harder than the stone </p></li><li><p>用于表示世纪或年代的词前<br>in the 19th century<br>in the fifties (在50年代)<br>in the 1980s/1980’s</p></li><li><p>用于”动词 + sb. + 介词 + the + 身体部位”的结构中<br>The policeman caught the thief by the arm. (警察抓住了小偷的胳膊)<br>The teacher patted the child on the shoulder and encouraged him to answer<br>A stone hit me in the face as I walked by the garden (我从花园旁经过时一块石头击中了我的脸)<br>  <em>常见的此类动词有 take | catch | hold | seize | pull | hit | cut | strike | pat | lead</em><br>  <em>常见的介词有 in | on | by等</em></p><p>  上述固定结构在现代英语中常用简化的方式,省掉the<br>  hit sb. in the face = hit sb.’s face<br>  pat sb. on the shoulder = pat sb.’s shoulder<br>  lead sb. by the hand = lead sb.’s hand<br>  catch sb. by the arm = catch sb.’s arm </p></li><li><p>用于 “by + the + 计量单位名词” 结构中<br>by the pound/foot/yard 按磅/英尺/码<br>by the hour/day/week/year 按小时/日/星期/年</p></li><li><p>表示地名,组织,江河,海洋,海湾,沙漠等的专有名词前<br>the Great Wall<br>the Yangtze River 长江<br>the Palace Museum 故宫<br>the Himalayas 喜马拉雅<br>the History Museum 历史博物馆<br>the US<br>the WTO<br>the Yellow River<br>the Summer Palace<br>the West Lake<br>the Taiwan Straits 台湾海峡<br>the Atlantic Ocean 大西洋<br>the Persian Gulf 波斯湾</p></li></ul><h3 id="不用冠词的情况"><a href="#不用冠词的情况" class="headerlink" title="不用冠词的情况"></a>不用冠词的情况</h3><ul><li>表示一类人或事物的可数名词复数前<br>  <strong>Doctors and patients should respect each other.</strong><br>  Tigers sometimes can be very kind.<br>  Trees can help clean the air</li><li>物质名词 | 抽象名词 | 专有名词前<br>  表示其基本意义或泛指的物质名词,抽象名词等前不用冠词<br>  I think water is a kind of food, too<br>  Music can bring people pleasure<br>  Philip has lived in China for years<br>  I wish you good luck in your coming competition</li><li>表示时间 | 节日 | 季节等的名词前<br>  I have visited many cities since September 2003<br>  Spring is the best season of the year<br>  January 1 is <code>New Year&#39;s Day</code> (注意前面没有the)<br>  <em>表示具体的季节,日期和中国传统节日的名词前常用定冠词</em><br>  I don’t like the spring of Beijing. It’s too sandy<br>  The mid-autumn Festival is one of the most important traditional Chinese festivals</li><li>表示三餐,球类<br>  What do you usually have for lunch<br>  Do you like to play football or baseball<br>  It calls for skills to play bowling well (打好保龄球需要技巧)<br>  三餐前有形容词修饰或特指某顿饭时需要用冠词<br>  a big lunch<br>  the dinner given by Mr Smith</li><li>表示学科,语言的名词前<br>  I like physics though it’s a bit difficult<br>  English is one of the most improtant languages in the world</li><li>称呼语,表示职位,头衔的名词作表语,补足语,同位语或与姓氏连用时<br>  Doctor, I’m not feeling myself today<br>  Mr Smith, head of the group, will plan for the whole trip</li><li>作 “人类”讲的 man 与 作 “消息” 讲的 word 前<br>  Man can save the earth and man can also destroy the earth<br>  She sent word that she would be late</li><li>名词前有指示代词,物主代词等限定词时<br>  This is <code>my address</code>. Let’s keep in touch<br>  I’d like to buy <code>some books</code> about cars<br>  <code>Bill&#39;s camera</code> is like mine</li><li>as/though 引导的让步状语从句中作表语的名词提前至句首时<br>  Child as/though she is, she plays the violin perfectly</li><li>表示同一人或事物的两个并列名词中的后一个名词前<br>  a teacher and <code>writer</code> 教师兼作家<br>  a fork and knife  一副刀叉<br>  如果两个并列名词指不同的人或事物则需要各加冠词<br>  a teacher and a writer 一位教师和一位作家</li><li>连系动词 turn 后作表语的名词前<br>  Three years later, he turned lawyer<br>  当turn后的名词前有形容词修饰,或名词在表示相同意义的become后作表语时,前面需要冠词<br>  He wanted to be a lawyer, but later he turned a famous singer<br>  When did you first want to become a teacher</li><li>表示交通方式的by后的名词前<br>  by bike<br>  by train<br>  by plane/air<br>  by ship<br>  by car<br>  by bus<br>  by land 从陆路<br>  by water 从水路<br>  by sea 从海路</li><li>单数名词相对应使用时<br>  arm in arm  胳膊挽着胳膊<br>  day after day  日复一日<br>  face to face<br>  heart and soul 全心全意地<br>  shoulder to shoulder 肩并肩<br>  step by step  逐渐的<br>  day  and night 日日夜夜<br>  day by day 一天天地<br>  hand in hand 手拉手地<br>  husband and wife 夫妇<br>  side by side 肩并肩地<br>  from time to time 时不时地</li><li>习惯用法中<br>  at night<br>  at noon<br>  at home<br>  at table 在吃饭<br>  at school<br>  at work<br>  at dinner<br>  after school<br>  at war<br>  by hand 手工制作<br>  for example<br>  in ink 用钢笔<br>  in fact 事实上<br>  in hospital<br>  in danger<br>  in fight<br>  catch fire 着火<br>  in surprise   有无冠词区别<br>  at table 在吃饭    at the table 在桌子旁<br>  at school 上学    at the shcool 在学校里<br>  by day 白天   by the day 按日计算<br>  in hospital/prison 住院/坐牢    in the hospital/prison 在医院/在监狱里<br>  in charge of 掌管     in the charge of  在…的掌管下<br>  in place of 取代      in the place of 在…的位置上<br>  in front of 在…(外部)的前面     in the front of 在…(内部)的前面<br>  out of question 毫无疑问        out of the question 不可能<br>  take place 发生       take the place of 取代<br>  live on farm  务农     live on the farm 住在农场<br>  two of us 我们中的两人    the two of us 就我们两人<br>  go to bed 上床睡觉      go to the bed 朝床边走去<br>  go to church 做礼拜    go to the church 到教堂去</li></ul><h3 id="冠词的位置"><a href="#冠词的位置" class="headerlink" title="冠词的位置"></a>冠词的位置</h3><h4 id="冠词用于名词或名词短语前"><a href="#冠词用于名词或名词短语前" class="headerlink" title="冠词用于名词或名词短语前"></a>冠词用于名词或名词短语前</h4><p>a beautiful girl<br>an orange<br>a long enough holiday<br>the difficult situation<br>the happiest time<br>the cheapest clothes</p><h4 id="固定结构中冠词的位置"><a href="#固定结构中冠词的位置" class="headerlink" title="固定结构中冠词的位置"></a>固定结构中冠词的位置</h4><ul><li><p>as/so … as … 结构中<br>  I have never spent as delightful a day as this Sunday<br>  Mary is not so smart a girl as I thought</p></li><li><p>such … as 结构中<br>  We are in such a difficult situation as we came across last time<br>  He has never written such an interesting book as that </p></li><li><p>too .. (to) 结构中<br>  Maggie is too young a girl to be left by herself at home<br>  I’m afraid it’s too heavy a load for such a boy of ten</p></li><li><p>quite,rather 修饰可数名词单数时,不定冠词必须置于其之后,其他修饰语之前<br>  He’s quite/rather a good soccer player (他是个相当不错的足球运动员)<br>  Our maths teacher is quite a teacher (我们的数学老师真的有点与众不同)</p></li><li><p>what 引导的感叹句中,不定冠词置于what 之后,修饰名词的形容词前<br>  What a splendid performance you gave us (演出多么精彩)</p></li><li><p>how 引导的感叹句中,不定冠词置于how 修饰的形容词之后,可数名词单数前<br>  How timely a rain we’ve got in such a dry season</p></li><li><p>定冠词the置于 all | both | double | twice | half 等词之后,名词之前<br>  All the information is true<br>  I offered him double the amount, but he still refused</p></li></ul><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><pre class="line-numbers language-none"><code class="language-none">元音 + an其他 +  a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>an apple<br>a box of apples</p></blockquote><p><strong>不可数名词前不可加a(an),没有复数,但前面可以加量词</strong></p><blockquote><p>a cup of coffee </p></blockquote><h3 id="练习题-2"><a href="#练习题-2" class="headerlink" title="练习题"></a>练习题</h3><ol><li><p>Animals are obviously ____ lower form of life than man.</p></li><li><p>People develop ____ preference for particular style of learning at ____ early age and these preferences affect learnning</p></li><li><p>Sarah looked at ____ finished painting with satisfaction</p></li><li><p>Sophie dreams of walking in outer space like ____ astronaut one day</p></li><li><p>Have you seen ____ pencil? I left it here this morning. Is it ____ black one? I think I saw it somewhere</p></li><li><p>They are getting things together in preparation for ____ journey we have planned</p></li><li><p>I heard ____ bank where Dora works was robbed by ____ gunman wearing a mask</p></li><li><p>a    </p></li><li><p>a,an     </p></li><li><p>the      </p></li><li><p>an   </p></li><li><p>a,a</p></li><li><p>the</p></li><li><p>the,a</p></li></ol><p>找出错误</p><ol><li><p>He is a man of few words, but his talent in singing is the second to none</p></li><li><p>Sam has been appointed a manager of the engineering department to take the place of George</p></li><li><p>Tom, you’ve dropped a “s” in the word “across”.</p></li><li><p>Have you seen the film The Silent War, which is said to be a great fun?</p></li><li><p>The father was in hurry so he didn’t know what was inside</p></li><li><p>Jumping out of an airplane at 10000 feet is quite exciting experience</p></li><li><p>去掉 the</p></li><li><p>去掉 a</p></li><li><p>a 改为 an</p></li><li><p>去掉 a</p></li><li><p>in a hurry</p></li><li><p>quite an exciting experience </p></li></ol><h2 id="数词"><a href="#数词" class="headerlink" title="数词"></a>数词</h2><h3 id="基数词"><a href="#基数词" class="headerlink" title="基数词"></a>基数词</h3><p>one | two | three | four | five | six | seven | eight | nine | ten<br>eleven | twelve | thirteen | fourteen | fifteen | sixteen | seventeen | eighteen | <code>nineteen</code><br>twenty | <code>thirty</code> | fourty | fifty | sixty | seventy | eighty | ninety<br>a/one hundred | thousand | million(百万) | billion(十亿)    </p><p>forty thousand 四万<br>two hundred million 两亿</p><h4 id="读法"><a href="#读法" class="headerlink" title="读法"></a>读法</h4><p>1,000 以上的数字,从后向前数,每三位加”,”<br>第一个”,”前为 thousand<br>第二个”,”前为 million<br>第三个”,”前为 billion<br>然后每一节按百,十,个的顺序表示</p><p>读的时候,百位和十位之间要读 <code>and</code>.<br>例如: 104,056,486 读作 <code>one hundred and four million, fifty-six thousand, four hundred and eighty-six</code></p><h4 id="one-OR-a-an"><a href="#one-OR-a-an" class="headerlink" title="one OR a/an"></a>one OR a/an</h4><p>若有 exactly | only 或要强调刚好是整数时用 one</p><p>The journey took exactly one hundred days.(那次旅行刚好用了一百天)<br>I owe him one thousand yuan only</p><h3 id="序数词"><a href="#序数词" class="headerlink" title="序数词"></a>序数词</h3><p>first | second | third | fourth | fifth | sixth | seventh | eighth | <code>ninth</code> | tenth<br>eleventh | twelfth | thirteenth | fourteenth | fifteenth | sixteenth | seventeenth | eighteenth | eighteenth | nineteenth<br>twentieth | twenty-first | twenty-second | twenty-third | twenty-fourth | twenty-fifth | twenty-sixth | twenty-seventh | twenty-eighth | twenty-ninth<br>thirtieth | fortieth | fiftieth | sixtieth | seventieth | eightieth | ninetieth<br>one hundredth | one thousandth | one millionth | one billionth </p><h4 id="缩写"><a href="#缩写" class="headerlink" title="缩写"></a>缩写</h4><p>在阿拉伯数字后直接解上序数词<code>最后两个字母</code>构成,如 1st,2nd,3rd,4th,21st,22nd,34th</p><h4 id="100以上读法"><a href="#100以上读法" class="headerlink" title="100以上读法"></a>100以上读法</h4><p>第一百为 100th(读作 one hundredth)<br>第101 为 101st (读作 one hundred and first)</p><h3 id="句法"><a href="#句法" class="headerlink" title="句法"></a>句法</h3><p>The two happily opened the box<br>The second was a tall man </p><p>She is the second in our class</p><p>I need three  altogether<br>Do you prefer the first or the second</p><p>We still have one hour left<br>January is the first month of the year</p><p>自身用复数形式再搭配介词 of 后构成短语, 表示不确切的数量</p><p>tens of 数十<br>hundreds of 数百<br>tens of hundreds of 数千<br>thousands of 数千<br>tens of thousands of 数万<br>millions of 数百万</p><p>score 二十<br>dozen 十二</p><h3 id="编号"><a href="#编号" class="headerlink" title="编号"></a>编号</h3><ul><li><p>第12号<br>  Number 12 (number twelve,缩写: NO.12)</p></li><li><p>第211页<br>  Page 211 (page two hundred and eleven)</p></li><li><p>第9行<br>  Line 9 (line nine)<br>  the ninth line</p></li><li><p>408房间<br>  Room 408 | Room No.408 | the No.408 Room</p></li><li><p>12路公共汽车<br>  Bus 12 | Bus No.12 | the No.12 Bus</p></li><li><p>第5大街<br>  Street No.5 | the No.5 Street</p></li><li><p>电话号码 435-7334<br>  Tel. No. 435-7334 (telephone number four, three, five, dash, seven, double three,four)</p></li><li><p>邮政编码 250100<br>  postcode(或zip code) 250100</p></li></ul><h3 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h3><ul><li>公元前 476 年<br>  476 B.C. (four seven six B.C.)(four seventy-six B.C.)(four hundred and seventy-six B.C.)</li><li>公元 381 年<br>  381 A.D. |  A.D. 381  (three eight one A.D.)(three eighty-one A.D.)(Three hundred and eihty-one A.D.)</li><li>公元 1900 年<br>  1900 (nineteen hundred)</li><li>公元1908 年<br>  1908 (nineteen and eight)(nineteen hundred and eight)(one nine zero eight)</li><li>2008年11月25日<br>  November 25(th),2008 (November (the) twenty-fifth, two thousand and eight)</li><li>在20世纪90年代<br>  in the 1990s | in the 1990’s</li><li>在19世纪<br>  in the 19th century</li><li>在80年代<br>  in the eighties</li></ul><h3 id="月份"><a href="#月份" class="headerlink" title="月份"></a>月份</h3><p>January - Jan.<br>February - Feb.<br>March - Mar.<br>April - Apr.<br>May<br>June - Jun.<br>July - Jul.<br>August - Aug.<br>September - Sept.<br>October - Oct.<br>November - Nov.<br>December - Dec.</p><h3 id="时刻"><a href="#时刻" class="headerlink" title="时刻"></a>时刻</h3><ul><li>8:21<br>  twenty-one past eight | eight twenty-one</li><li>8:56<br>  four to nine | eight fifty-six</li><li>8:30<br>  eight thirty | half past eight</li><li>7:00<br>  seven o’clock</li><li>8 a.m.<br>  eight a.m.</li></ul><h3 id="年龄"><a href="#年龄" class="headerlink" title="年龄"></a>年龄</h3><p>She is a student, 16, from the United States</p><p>in his thirties 在他三十多岁时<br>“in one’s + 基数词整十数 的 复数形式”</p><h3 id="货币"><a href="#货币" class="headerlink" title="货币"></a>货币</h3><p>货币后有小数,一律使用两位<br>7.5 美元<br>$7.50 (不能写 $7.5)</p><h3 id="分数-小数-百分数"><a href="#分数-小数-百分数" class="headerlink" title="分数,小数,百分数"></a>分数,小数,百分数</h3><ul><li>分数<br>  表示简单分数时,一般分子用基数词,分母用序数词,分子与分母之间一般用连字符连接; 如果分子大于1,做分母的序数词要用复数形式.<br>  但 1/2 用 one half 表示(不能用 one second)<br>  表示带分数时,整数与分数之间用 and 连接<ul><li>1/2<br>  one half | a half   </li><li>1/3<br>  one-third | a third</li><li>2/3<br>  two-thirds</li><li>3/4<br>  three quarters | three-fourths</li><li>2/5<br>  two-fifths</li><li>5又3/5<br>  five and three-fifths  基数词与序数词之间的连字符”-“有时可以省略</li></ul></li><li>小数<br>  小数点前的基数词按照基数词读法读,小数点后将数字一一读出<ul><li>67.89<br>  sixty-seven point eight nine</li><li>0.05<br>  zero point zero five</li></ul></li><li>百分数<ul><li>46%<br>  forty-six percent</li><li>3.5%<br>  three point five percent</li></ul></li></ul><h3 id="倍数"><a href="#倍数" class="headerlink" title="倍数"></a>倍数</h3><p>表示倍数, 两倍用 twice 或 double, 三倍以上用 “基数词 + times”</p><ul><li>倍数 + as…as….<br>  We have produced three times as many computers as we did last year.<br>  My deskmate claimed to have twice as many stamps as me</li><li>倍数 + the size of …<br>  weight | height | depth | width | age | length   This city is almost twice/double the size of that city<br>  This rope is three times the <code>length</code> of that one</li><li>倍数 + what 从句<br>  The width of the road is twice/double what it was three years ago<br>  The production now is three times what it was five years ago</li><li>倍数 + 比较级 + than<br>  I am twice older than you<br>  He has read three times more books than I have</li><li>比较级 + than … + by + 倍数<br>  The line is longer than that one by twice<br>  The time I spent is more than that he spent by three times</li></ul><p>分数,百分数等也可用于上面的各种句式中,表示差异的程度<br>I usually spend half what Iearn on books<br>We increased 20% as many products as last year.</p><h3 id="序数词前冠词的使用情况"><a href="#序数词前冠词的使用情况" class="headerlink" title="序数词前冠词的使用情况"></a>序数词前冠词的使用情况</h3><p>序数词前一般用定冠词,但一下情况例外</p><ol><li>表示”又一,再一”时,序数词前可用不定冠词<br> I’ll try a second time and see if I can do it</li><li>在一些固定短语中,序数词前不用 the<br> first hand 直接地<br> at first sight 乍一看<br> be second to none 首屈一指<br> every third day 每隔两天</li><li>其他情况<ul><li>月,日表达中序数词前可省略 the<br>  March (the) eighth<br>  October (the) first</li><li>并列使用两个序数词,后面的序数词前可省略the<br>  the twentieth and twenty-first centuries</li><li>在某些动词短语中序数词前可不用the<br>  take/win/get/gain first place 获得冠军<br>  come out first 获得第一名</li></ul></li></ol><h2 id="介词"><a href="#介词" class="headerlink" title="介词"></a>介词</h2><h3 id="介词的分类"><a href="#介词的分类" class="headerlink" title="介词的分类"></a>介词的分类</h3><h4 id="根据形式分类"><a href="#根据形式分类" class="headerlink" title="根据形式分类"></a>根据形式分类</h4><ul><li><p>简单介词<br>  由一个词构成</p><ul><li>at _在…</li><li>after _在…后</li><li>before</li><li>with _和,带有</li></ul></li><li><p>合成介词<br>  由两个词合成</p><ul><li>inside _在…里面</li><li>outside</li><li>into _到…里面</li><li>without _缺乏,没有</li></ul></li><li><p>双重介词<br>  由两个介词构成</p><ul><li>from behind _从…后面</li><li>until after _直到…之后</li><li>from among _从…之中</li><li>except for _除…之外</li></ul></li><li><p>短语介词<br>  由一个或几个简单介词和一个或几个其他词类组合构成</p><ul><li>instead of _代替</li><li>because of _因为</li><li>in front of _在…前面</li><li>thanks to _多亏</li></ul></li><li><p>分词式介词<br>  形式上与分词相同的介词</p><ul><li>including _包括</li><li>respecting _与…有关</li><li>considering _关于,涉及</li><li>given _考虑到,鉴于</li></ul></li></ul><h4 id="根据意义分类"><a href="#根据意义分类" class="headerlink" title="根据意义分类"></a>根据意义分类</h4><ul><li>地点介词<br>  at _在…<br>  in _在…里面<br>  below _在…下方<br>  inside<br>  off _远离<br>  beyond _在…的那边<br>  up _在…上边<br>  around<br>  under<br>  behind _在…后面<br>  outside<br>  between<br>  over _在…远处/上方<br>  across _在…对面<br>  on _在…上面<br>  above _在…上方<br>  in front of _在…前面<br>  beside _在…旁边<br>  among _在…(三者或以上)中间<br>  past _经过<br>  opposite _在…对面</li><li>时间介词<br>  at _在…时<br>  on _在…时<br>  in _在…后<br>  before<br>  between<br>  for _长达<br>  since<br>  during<br>  by _到…为止<br>  till _直到<br>  after<br>  until _直到</li><li>手段介词<br>  with _用…<br>  in _用…<br>  by _借助…</li><li>其他含义的介词<br>  of _具有…性质<br>  with _带有…<br>  without _没有<br>  except _除…之外<br>  besides _除…之外(还)<br>  instead of _代替;而不是</li></ul><h3 id="常用介词的用法"><a href="#常用介词的用法" class="headerlink" title="常用介词的用法"></a>常用介词的用法</h3><h4 id="表示时间的介词"><a href="#表示时间的介词" class="headerlink" title="表示时间的介词"></a>表示时间的介词</h4><ul><li><p>at | in | on</p><p>  at: 某一具体<code>时刻</code>,<code>时间点</code><br>  in: 在一段<code>较长</code>的时间<br>  on: 在特定的<code>日子</code>,具体的<code>日期</code>,<code>星期</code>,及<code>节日</code></p><p>  at seven o’clock<br>  at noon<br>  at midnight<br>  at that time<br>  at breakfast time </p><p>  in the evening<br>  in 2004<br>  in August<br>  in the 21st century</p><p>  on Monday<br>  on a rainy day<br>  on May the first _在五月一日<br>  on Monday morning </p></li><li><p>during | in </p><p>  在一段时间内<br>  during 更强调时间的延续,可以表示一段时间内自始至终的状态<br>  需要准确说明动作发生的具体时间时则用in</p><p>  during/in summer<br>  during/in afternoon<br>  during the whole month 整整一个月<br>  in April  在四月</p></li><li><p>in | after</p><p>  …之后</p><p>  After 20 hours, we arrived at Los Angeles Airport (用在过去时)<br>  We’ll have a meeting after three o’clock. (在将来时,表示 …(时间点)之后)</p><p>  My father will be back in two weeks (用在将来时)<br>  He wrote the book in two years (用在过去时,表示”在…内”)</p></li><li><p>for | since </p><p>  I have lived in this city for more than 10 years<br>  I have been learning English for over 20 years<br>  I have lived here since two years ago/since last year<br>  I haven’t eaten anything since breakfast</p></li><li><p>before | by </p><p>  在…之前<br>  by 含有 “最晚不迟于… , 到…为止” 的意思</p><p>  I will be back before supper time<br>  Supper will be ready by 6 p.m. (晚饭将在6点前准备好(包括6点))</p><p>  This factory had produced more than one million cars by the end of last year.<br>  <code>到</code>去年年底, ….</p></li><li><p>by | until</p><p>  by 表示到什么时候为止动作已经完成<br>  until 表示动作持续到什么时候<br>  在终止性动词做谓语的否定句式中,二者通用</p><p>  Can you repair my bike by Friday?<br>  I’ll work here until six o’clock<br>  The work won’t be finished by/until tomorrow</p></li></ul><h4 id="表示方位-空间关系的介词的用法"><a href="#表示方位-空间关系的介词的用法" class="headerlink" title="表示方位,空间关系的介词的用法"></a>表示方位,空间关系的介词的用法</h4><ul><li><p>over | above | on<br>  over: 主要强调覆盖某一物体 或 在某一物体的正上方<br>  above: 强调在上方,但不一定在正上方. 而且还可以指温度,海拔等刻度”在…之上”<br>  on: 表示接触或由某一表面支撑着</p><p>  The bridge over the river has a long history<br>  He spread a cloth over the table (他在桌子上铺了一块布)</p><p>  The plane flew above the clouds<br>  The average temperature here in summer is well above 30 (单位不打了)</p><p>  Leave your things on the table over there<br>  People were sunbathing on the grass</p></li><li><p>under | below | beneath<br>  under: 强调在某一物体的正下方,是over的反义词<br>  below: 指在下方,但不一定是正下方, 是above的反义词<br>  beneath: 常与 below 互换, 其多用于正式文体中</p><p>  She placed the ladder under the window<br>  The boat lay under several feet of water</p><p>  Please do not write below this line<br>  The temperatures remained below freezing all day</p><p>  Two girls are sitting beneath the tree<br>  Jo enjoyed feeling the warm sand beneath her feet</p></li><li><p>before | after<br>  before: 在…前面, 指空间顺序时可与 in front of 通用<br>  after: 在…后, 指空间可与 behind 通用</p><p>  He had performed before the Queen<br>  A couple were just sitting before/in front of me and making lots of noise during the whole film</p><p>  She entered the hall after her mother<br>  It’s highly dangerous to ride a bike fast right after/behind a car</p></li><li><p>between | among</p><p>  between: 一般用于两者之间. 也可用于三者或三者以上,此时强调每两者之间的关系或某物体与一组特定的可分离的事物之间的关系;<br>  among: 通常用于三者或三者以上</p><p>  The house stands between two farms<br>  Switzerland lies between France,Germany,Austria and Italy</p><p>  The village lies among hills<br>  Tom has always been popular among her classmates</p></li><li><p>in front of | in the front of </p><p>  前者表示在某一空间外部的前面<br>  后者表示在某一空间内部的前面<br>  In front of my house runs a small river.<br>  Don’t sit in the front of the bus.</p></li><li><p>around | round | about </p><p>  三者基本通用,指围绕某一位置,物体或人物<br>  Don’t walk around | round | about the room.</p></li><li><p>across | through | past | over</p><p>  across 强调穿过某一个平面<br>  through 强调从某一空间内通过<br>  past 强调从某事物的一旁经过<br>  over 强调从一边到另一边或越过某一高度</p><p>  Be careful enough while walking across the street<br>  Walk through the gate and you’ll see the rest room<br>  We drove past the Great Hall of the People.(我们开车经过人民大会堂)<br>  The dog jumped over the fence and ran away.(狗跳过栅栏跑了)</p></li></ul><h4 id="表示”用”工具-手段-材料"><a href="#表示”用”工具-手段-材料" class="headerlink" title="表示”用”工具,手段,材料"></a>表示”用”工具,手段,材料</h4><p>with 多指用工具,身体的某部位或器官<br>by 指使用方法,手段<br>in 指使用某种语言或材料等</p><p>What can I cut the cake with?<br>You can see it with your own eyes.<br>Why don’t we go there by car instead?<br>He made the speech in English<br>Don’t write it in pencil,Write it in ink,please.</p><h4 id="“除…-外”"><a href="#“除…-外”" class="headerlink" title="“除….外”"></a>“除….外”</h4><p>but | except </p><p>Nobody but/except John knows the city well<br>I could come any day but/except Friday<br>Who but/except you should be to blame for the mistake?(除了你还有谁应为这个错误负责呢？)</p><p>如果在句首或句尾，且与其他部分有逗号分隔，常用 <code>except</code><br>Except my salary, I have nothing to live on<br>Children would prefer to do everything, except the things their parents ask them to</p><p>except for 表示对整体说明做细节修正<br>The street in the early morning is very quiet except for a few cars<br>The movie is good except for the ending</p><p>besides “除…之外还/也…”<br>Many students have been to the Great Wall besides me.(除了我之外，很多学生<code>也</code>去过长城)<br>Besides reading, I love listening to music.(除了读书之外，我还喜欢听音乐)</p><p>apart from “除…之外”。表示排除意义时相当于except，表示包括意义时相当 besides<br>The children hardly see anyone apart from their parents.(除了他们的父母，孩子们很少见到其他人)<br>Apart from being fun and good exercise,swimming is a very useful skill.(除了有趣和是一项好的运动之外，游泳还是一项很有用的技能)</p><h3 id="介词的省略"><a href="#介词的省略" class="headerlink" title="介词的省略"></a>介词的省略</h3><ul><li><p>表示“行为，方式”的way前介词 in 的省略<br>  Don’t treat her (in) that way<br>  I think you’re going about this (in) the wrong way</p></li><li><p>肯定句中表示一段时间或距离的 for 不位于句首时常省略<br>  I have been waiting for you (for) a whole afternoon.<br>  The forest stretches (for) thousands of miles.</p></li></ul><ul><li><p>“of + 年龄，形状，面积等名词” 时的省略<br>  age, colour, weight, length, width,height,shape,size类名词作 of 的宾语<br>  When I was (of) your age, I knew much less than you.<br>  The desks in our class are (of) the same colour, material, shape, height and length.<br>  China and Canada are almost (of) the same size, but (of) very different populations.</p></li><li><p>表示时间的介词 on, at, in, by 等有时省略<br>  Jack will be here (on) the first of next month<br>  What happened (on) that day so long ago</p></li><li><p>一些固定结构中介词 in, from 等的省略<br>  be busy (in) doing sth<br>  have difficulty/trouble (in) doing sth<br>  spend…(in) doing sth<br>  have a good time (in) doing sth<br>  waste no time (in) doing sth 赶紧作某事  </p></li></ul><h3 id="介词的固定搭配"><a href="#介词的固定搭配" class="headerlink" title="介词的固定搭配"></a>介词的固定搭配</h3><h4 id="与名词搭配"><a href="#与名词搭配" class="headerlink" title="与名词搭配"></a>与名词搭配</h4><p>at night<br>at noon<br>at breakfast<br>at home<br>at work<br>at school<br>at the cinema<br>for example<br>in English 用音乐<br>after school<br>by accident<br>by the way<br>by the lake 在湖边<br>at the moment 此刻<br>during the night<br>at Christmas<br>for a moment 一会儿<br>for years 多年<br>for some reason<br>in ink<br>in class<br>in time 及时<br>in danger<br>in a minute 一会儿之后<br>in the way 妨碍<br>on the weekend 在周末<br>on time 按时</p><p>key to …的钥匙/答案<br>answer to<br>note to …的注释<br>way to<br>visit to<br>interest in<br>reason for …的原因<br>love for 对…的热爱<br>desire for 对…的渴望<br>effect on 对…的影响<br>contribution to<br>approach to …的方法</p><h4 id="与动词搭配"><a href="#与动词搭配" class="headerlink" title="与动词搭配"></a>与动词搭配</h4><p>listen to<br>write to<br>hear from 收到…来信<br>get to 到达<br>look at<br>look after<br>run into 碰到，撞上<br>knock at/on 敲门<br>look through 翻查<br>ask for<br>wait for<br>pay for<br>stick to 坚持<br>search for<br>succeed in 在…取得成功<br>insist on 坚持<br>depend on 依靠<br>differ from<br>operate on 给…作手术<br>learn from<br>worry about<br>deal with<br>consist of  由…组成<br>account for  说明<br>depart from 离开<br>stand for 代表<br>dream of/about 梦想<br>result in 导致<br>laugh at</p><h3 id="与形容词搭配"><a href="#与形容词搭配" class="headerlink" title="与形容词搭配"></a>与形容词搭配</h3><p>busy with<br>goot at<br>afraid of<br>full of<br>angry with sb.<br>angry about sth.<br>interested in<br>absent from 缺席，不在<br>pleased with  对…感到高兴<br>strict with 对。。。要求严格<br>good/bad for<br>late for<br>sorry for<br>ready for<br>famous for<br>polite to 对…有礼貌<br>kind to<br>different from</p><h3 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h3><ol><li>She will leave for England ____ a month.</li><li>The Greens left for home ____ the morning of June 20.</li><li>The sun has already sunk ____ the horizon.</li><li>The United States is ____ the south of Canada and ____ the east of Japan.</li><li>Susan got back into bed and pulled the quilt ____ her head</li><li>We walked ____ the river and found several boats ____ the water.</li><li>It was a real race ____ time to get the project done. Luckily, we made it.</li><li>The Smiths are praised ____ the way they bring up their children.</li></ol><p>1.in   2.on   3.below   4.on,to  5.over    6.along,on   7.against   8.for</p><ol><li>He has been playing the guitar from 7 o’clock</li><li>The policeman dived in the water and rescued the drowning child.</li><li>In a particular afternoon, my mother brouught a little boy in.</li><li>The Browns left for Hong Kong in the morning of July 27.</li></ol><p>1.since     2. into     3.On    4.On </p><h2 id="连词"><a href="#连词" class="headerlink" title="连词"></a>连词</h2><p>and | or | but | for(因为) | if | because | so | after | since | unless | although(尽管) | before</p><p>both…and …<br>not only…but also…<br>not…but… 不是。。。而是。。。<br>either…or…  或者。。。或者。。。<br>neither…nor… 既不。。。也不。。。<br>whether…or… 无论是。。。还是。。。</p><p>provided 只要<br>assuming 假定<br>providing 只要<br>given 假如<br>seeing 因为</p><p>as if 仿佛<br>as though 仿佛<br>even if 即使<br>even though 即使<br>as/so long as 只要<br>in case 以免，万一<br>now that 既然<br>so that 以便，以致</p><h3 id="表示转折关系"><a href="#表示转折关系" class="headerlink" title="表示转折关系"></a>表示转折关系</h3><ul><li>but 但是</li><li>yet 然而</li><li>while 却，但是，而</li><li>whereas 但是，尽管</li></ul><p>The problem was a little hard, yet I was able to work it out.<br>The winter in Beijing is very cold while/whereas that of Kunming is warm.<br>I love strong tea while my father loves coffee.<br>The soles are leather, while the uppers are canvas.(鞋底是皮革的，而鞋面是帆布的)</p><h3 id="表示因果推理关系"><a href="#表示因果推理关系" class="headerlink" title="表示因果推理关系"></a>表示因果推理关系</h3><p>for<br>The leaves of the trees are falling, for it’s already autumn.<br>He may be ill, for he is absent from the meeting today.<br>I know that you are telling a lie, for you are a little panic.</p><p><strong>有时有些副词或短语也可以起并列连词的作用，如 <code>otherwise(否则)</code> <code>or else(不然的话)</code> <code>however(然而)</code> <code>therefore(因此)</code> <code>thus(因此)</code> <code>as well as(和)</code> 等</strong></p><p>Shut the window; otherwise it’ll get too cold in here<br>He was very tired; therefore he fell sound asleep.</p><p>He must be at home, for the light in his room is still on.<br>He was late again because the traffic was too heavy.</p><h3 id="从属连词"><a href="#从属连词" class="headerlink" title="从属连词"></a>从属连词</h3><p>I don’t think <code>that</code> we should stay another week<br>Can you tell me <code>if</code> he can come to my birthday party?<br><code>Whether</code> he’ll come is unknown<br>The notice came around two in the afternoon that the meeting wold be postponed.(下午两点左右来了通知，说会议要延期)</p><p>When you came in, I was talking with a few boys.<br>It started to rain while we were playing outdoors.<br>They laughed as they walked down the river.<br>After you finish this form, come to my office.<br>Don’t hand in your papers before you are sure there are no mistakes.<br>Wait here until/till I come back.<br>I have lived in England since I was three.<br>As soon as you feel sick, go to see a doctor.<br>Once you have made your decision, you shouldn’t change it.</p><p>I live where there are mountains.<br>You shouldn’t go where you are not asked to.(你不应该去不让你去的地方)<br>If you could go wherever you want to, where would you go?（如果你可以去你想去的任何地方，你会去哪里？)</p><p>We have to go to bed now because we’ll start off early tomorrow.<br>Since you know all about it, tell me please. (既然你都知道，那就请告诉我吧)<br>As all the seats were taken, I had to stand. </p><p>If you see him, give him this note.<br>We won’t finish the work on time unless we work hard.<br>You can use my car <code>as long as</code> you return it before Friday. 只要； 如果；既然</p><p>In order that we can arrive there on time, we should start off early.<br>He played the piano very gently so that/in order that the baby could not be waken up.</p><p>Though/Although Canada is large, the population is small.<br>He went to school though/although he was very ill.<br>Even if/Even though we got a local guide, we still had some difficulty walking through the bush </p><p>He was so careless that he forgot to write his name on the paper.<br>Dalian is such a beautiful city that a great many people go there for holidays.<br>The teacher explained very clearly so that we all understood.<br>My parents are waiting for me, so I must be off now.</p><p>China has a larger population than India (does).<br>He speaks English as well as Americans (do).<br>Some people think that planes now are not so/as safe as trains (are).</p><p>You should do as I do<br>He treated the boy as is he was his son.<br>He walked about as though he had lost something.</p><h3 id="习题-1"><a href="#习题-1" class="headerlink" title="习题"></a>习题</h3><p>1.The little body was doing his homework ____ his mother was cooking in the kitchen.<br>2.I must be off now, ____ my mother is expecting me.</p><p>while<br>for</p><p>改错</p><p>1.It didn’t matter that I would win the match or not.<br>2.I don’t doubt whether you have told the truth.</p><p>that -&gt; whether32<br>whether -&gt; that</p><h2 id="形容词"><a href="#形容词" class="headerlink" title="形容词"></a>形容词</h2><h3 id="复合形容词"><a href="#复合形容词" class="headerlink" title="复合形容词"></a>复合形容词</h3><ul><li><p>数词 + 名词 + （形容词）</p><ul><li>a five-year plan</li><li>a three-week trip</li><li>an 800-metre-long bridge</li><li>a two-year-old child</li></ul></li><li><p>形容词 + 名词 + -ed形式</p><ul><li>an absent-minded child 一个心不在焉的孩子</li><li>cold-blooded murder 残忍的谋杀</li><li>good-tempered parents 好脾气的父母</li><li>a warm-hearted shop assistant</li><li>a middle-aged man </li></ul></li><li><p>形容词/副词 + 动词-ing形式</p><ul><li>a far-reaching speech  一个意义深长的演讲</li><li>a long-standing friendship</li><li>a good-looking girl </li><li>a hard-working teacher</li></ul></li><li><p>名词 + 动词-ed 形式</p><ul><li>a man-made lake </li><li>a heartbroken mother </li><li>a snow-capped mountain </li></ul></li><li><p>副词 + 动词-ed 形式</p><ul><li>the so-called experts 那些所谓的专家</li><li>a newly built library </li><li>a well-chosen story </li><li>a well-known writer </li></ul></li><li><p>其他</p><ul><li>out-of-date information</li><li>a face-to-face interview</li><li>a know-it-all person  一个万事通的人</li><li>a step-by-step guide </li></ul></li></ul><h3 id="形容词位置"><a href="#形容词位置" class="headerlink" title="形容词位置"></a>形容词位置</h3><ul><li><p>置于被修饰词前<br>Children should be given plenty of free time.<br>Warm days are coming</p></li><li><p>置于被修饰词后</p><ol><li><p>He is the most famous scientist <code>alive</code> in the world today.<br>Time <code>alone</code> will show who is right  (唯有时间可以证明谁是对的)</p></li><li><p>形容词修饰 someone, something, anyone, anything, nothing<br> Attention, please! I’ve got something important to tell you all.<br> There is nothing serious at all.</p></li><li><p>There is a lake <code>full of fish</code> to the west of my hometown.<br> Those <code>brave enough to take the course</code> will certainly learn a lot of useful skills.</p></li><li><p>两个形容词中间用 and 或 or 连接作定语时<br> I like reading books both interesting and instructive.<br> All the people on this island, young or old, are all fond of music</p></li><li><p>修饰起名词作用的 anywhere, somewhere时，通常后置<br> Can you find anywhere safe?</p></li><li><p>There are many buildings over <code>20 storeys high</code>. 20多层高<br> There used to be a river about <code>10 metres wide</code></p></li><li><p>修饰名词的比较结构须后置<br> We need a house twice larger than this one </p></li><li><p>具有动词色彩并表示被动意义的以-ble, ible 结尾的形容词作定语时<br> This is the earliest edition obtainable.<br> I have tried all means imaginable</p></li></ol></li><li><p>多个形容词<br>  一般总体描述在前，具体描述在后；<br>  主观在前，客观在后；<br>  普遍在前，特殊在后；<br>  短词在前，长词在后<br>  不紧密的在前</p><p>  （限定词+）描述形容词 -》 大小 -》形状 -》 年龄新旧 -》 颜色 -》 国籍 -》 材料 -》 用途</p><p>  a few big round new black French wooden tables<br>  a famous German medical school<br>  The last few unforgettable sunny days one tha beach</p></li></ul><h3 id="形容词比较级"><a href="#形容词比较级" class="headerlink" title="形容词比较级"></a>形容词比较级</h3><ul><li><p>没有比较级<br>right | wrong | excellent | final | last | possible | golden | east | empty | impossible | wooden | favourite</p></li><li><p>比较级 和 最高级 构成规则</p><ul><li><p>直接加 -er | -est<br>  slow &gt; slower &gt; slowest<br>  tall &gt; taller &gt; tallest</p></li><li><p>以字母 -e 结尾的形容词只在其词尾加 -r | -st<br>  brave &gt; braver &gt; bravest<br>  safe &gt; safer &gt; safest</p></li><li><p>以一个辅音字母结尾的重读闭音节形容词，双写这个辅音字母后再加 -er | -est<br>  big &gt; bigger &gt; biggest<br>  hot &gt; hotter &gt; hottest</p></li><li><p>以辅音字母 + y 结尾的词，将 y 变为 i 再加 -er | -est<br>  happy &gt; happier &gt; happiest<br>  easy &gt; easier &gt; easiest</p></li><li><p>其他双音节词和多音节词，再词前加 more 和 most 构成<br>  beautiful &gt; more beautiful &gt; most beautiful<br>  important &gt; more important &gt; most important</p></li></ul></li><li><p>不规则<br>  good | well &gt; better &gt; best<br>  bad | ill &gt; worse &gt; worst<br>  little &gt; less &gt; least<br>  much | many &gt; more &gt; most<br>  far &gt; father(指距离) | further(指距离和抽象意义) | farthest | furthest<br>  old &gt; older | elder &gt; oldest | eldest </p></li></ul><h4 id="用法-4"><a href="#用法-4" class="headerlink" title="用法"></a>用法</h4><h5 id="原级"><a href="#原级" class="headerlink" title="原级"></a>原级</h5><ul><li><p>as…as<br>  My handwriting is as beautiful as yours<br>  The story is as interesting as the one you just told </p></li><li><p>not as/so…as<br>  I am not as/so busy as I used to be<br>  The weather here is not as/so comfortable as that in China</p></li><li><p>as much/many…as<br>  We have produced as many tractors as we did last year<br>  I don’t make as much money as you do </p></li></ul><h5 id="比较级"><a href="#比较级" class="headerlink" title="比较级"></a>比较级</h5><ul><li><p>than<br>  He made fewer mistakes than you<br>  Lesson 3 is more difficult than Lesson 4</p></li><li><p>单独使用<br>  Be more careful next time<br>  It is colder today<br>  I hope to get a better job<br>  He went abroad for further education</p></li><li><p>and<br>  As winter is coming, the night is becoming longer and longer<br>  Our country is becoming more and more beautilful </p></li><li><p>the<br>  The shorter your article is, the better it is<br>  The more difficult the problem is, the more careful we should be<br>  The more careful you are, the fewer mistakes you’ll make</p></li></ul><p><strong>ATTEMTION</strong></p><ul><li><p>more <code>不可以</code> 修饰比较级，但 much 可以<br>  She looks more younger than me (x)<br>  She looks much younger than me (√)</p></li><li><p>相比较的两者必须是同一类<br>  The weather of Beijing is colder than Shanghai (x)<br>  The weather of Beijing is colder than that of Shanghai (√)</p></li><li><p>在同一范围内比较时要使用other或else排除自身<br>  China is larger than any country in Asia (x)<br>  China is larger than any other country in Asia (√)</p></li></ul><h5 id="最高级"><a href="#最高级" class="headerlink" title="最高级"></a>最高级</h5><ul><li><p>the<br>  jack is the tallest student in his class<br>  It is the cleverest dog of these five dogs</p><p>  介词 in 和 of 引导的短语说明比较范围：<br>  如果在一定的地域空间内比较用 in<br>  如果在同一类事物范围内进行比较用 of</p><p>  Jim is the tallest student in his school<br>  Jim is the tallest student of all the students in his school</p></li><li><p>最高级前不用定冠词<code>the</code>，就没有比较的意思，只是用来加强语气，相当于very<br>  This is a most interesting story. 这是一个非常有趣的故事<br>  For little Tom, writing a composition is most difficult homework</p></li><li><p>比较级表示最高级意义</p><pre><code>              any other + 可数名词单数              all other + 可数名词复数</code></pre><p>  比较级 + than +  any of the other + 可数名词复数</p><pre><code>              anyone/anything else              any + 可数名词单数              </code></pre><p>  Jane is taller than any other student in her class</p><p>  与否定连用<br>  I have never heard a better voice than yours<br>  Nothing can be more tiresome than copying the numbers</p></li></ul><h5 id="修饰语"><a href="#修饰语" class="headerlink" title="修饰语"></a>修饰语</h5><ul><li><p>比较级<br>  much | even | rather | still | yet | twice | five | times | many times | two-fifths | 20% | (by) far | far and away | a lot | a great deal | a little | a bit </p><p>  I feel much/a great deal better today<br>  He is five years older than me = He is older than me by five years<br>  Your handwriting is (by) far better than mine. 你的书法比我的好多了</p></li><li><p>最高级<br>  much | (by) far | nearly | almost </p><p>  The Yellow River is the second longest river in China<br>  Of the three girls Betty is much the cleverest<br>  Of all the students, Jack’s oral English is almost the best.</p></li></ul><h3 id="ed-ing"><a href="#ed-ing" class="headerlink" title="ed | ing"></a>ed | ing</h3><p>amused(被逗乐的) amusing(有趣的)<br>astonished astonishing<br>disappointed disappointing<br>excited exciting<br>frightened frightening<br>interested interesting<br>moved moving<br>pleased pleasing<br>puzzled puzzling<br>satisfied satisfying<br>surprised surprising<br>tired tiring<br>worried worrying </p><p>He is frightened<br>She was disappointed at his refusal<br>John seemed puzzled about waht the question meant<br>I was worried that the branch wouldn’t take my weight</p><p>It’s astonishing that she should say that sort of thing to you<br>This film is more exciting than any that I’ve ever seen<br>The walk takes you past a lot of interesting buildings.<br>It was the most worrying day that he had ever spent.</p><h2 id="副词"><a href="#副词" class="headerlink" title="副词"></a>副词</h2><p>He speaks <code>very fast</code>.<br>They have <code>already</code> left<br>They have <code>already</code> been repaired.</p><p>副词可以修饰动词,形容词,其他副词以及其他结构</p><blockquote><p>She is very beautiful<br>very : 副词</p></blockquote><blockquote><p>They work very hard.<br>very , hard : 都是副词</p></blockquote><p>It’s not <code>simply</code> a question of money 这不仅仅是钱的问题<br>Try to express yourself more <code>simply</code><br>I <code>completely</code> forgot that it’s his birthday today<br>That’s a totally different matter 那完全是两码事</p><ul><li><p>大多数副词构成实在形容词后直接加-ly<br>  frequently | constantly(经常地) | rapidly(迅速地) | calmly | happily | anxiously</p><p>  形容词加 -ly 规则</p><ul><li>形容词直接加 -ly</li><li>以 -le 结尾的形容词需去掉 e 再加 -y<br>  gentle &gt; gently  | possible &gt; possibly | comfortable &gt; comfortably </li><li>以 -y 结尾的形容词把 y 改为 i ，再加 -ly<br>  easy &gt; easily | happy &gt; happily | heavy &gt; heavily | busy &gt; busily<br>  shy &gt; shyly(特殊)</li></ul></li><li><p>与形容词同形<br>  late | clean | fast | enough | slow | high | early | long | low | clear </p></li><li><p>有些词本身事副词，加 -ly 后又构成另外的副词，常见的有：<br>  hard (费力地)&gt; hardly(几乎不)<br>  most &gt; mostly(主要地)<br>  late &gt; lately(最近，近来)<br>  loud(大声地) &gt; loudly(喧闹地)<br>  near(接近) &gt; nearly (几乎)<br>  deep &gt; deeply(真诚地)<br>  close &gt; closely(密切地)<br>  just(正好) &gt; justly(公正地)<br>  high &gt; highly (高度地)<br>  wide &gt; widely(广泛地)<br>  free(免费地) &gt; freely(自由地)<br>  clean(完全地) &gt; cleanly(干净地)</p></li></ul><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ul><li><p>时间副词<br>  now | then | just | recently | before | already | finally | today | tomorrow | soon | ago | late | since | immediately | lately </p></li><li><p>地点副词<br>  here | ther | nearby | in out | inside | outside | down | up | upstairs | downstairs | back | far | over | everywhere | outdoors | indoors | ahead </p></li><li><p>方式副词<br>  well | fast | hard | carefully | slowly | suddently | simply | kindly | seriously </p></li><li><p>程度副词<br>  much | little | very | enough | particularly(特别，尤其) | extremely | entirely | that(那么) | so | too | rather | nearly | almost | half | quite(很)</p></li><li><p>频度副词<br>  usually | often | sometimes | never | always | hardly | constantly | frequently | seldom </p></li><li><p>评论副词<br>  luckily | happily | generally | honestly | roughly(大体上) | briefly(简洁地) | broadly(广义上) | narrowly | naturally | hopefully | fortunately | evidently |</p></li><li><p>疑问副词<br>  where | when | why | however | whenever | wherever</p></li><li><p>关系副词<br>  when | where | why </p></li><li><p>连接副词<br>  therefore | besides(除此之外) | otherwise(否则) | though(但是) | when | why | wherever | moreover | however | then | meanwhile | wher | whenever | however</p></li><li><p>其他副词<br>  yes | no | certainly | surely | sure | really </p></li></ul><h3 id="句法-1"><a href="#句法-1" class="headerlink" title="句法"></a>句法</h3><p>He works very <code>hard</code> on his project(修饰动词)<br>I’m very busy these days(修饰形容词)<br>She speaks English <code>very</code> beautifully(修饰另一个副词)<br><code>Luckily</code>, she has got another chance(修饰整个句子)</p><p>When the metting is over, give me a phone call<br>Sorry, I have to be off right now<br>Is anybody in?</p><p>The people <code>there</code> are very kind to visitors<br>Please write down the words <code>above</code><br>I had to get off and take the bus <code>behind</code></p><p>We held <code>quite</code> a party last weekend. 一个相当不错地派对<br><code>Even</code> a child won’t believe such a story<br><code>Nearly</code> anyone present at the meeting was an expert on computers 参加这次会议地人几乎都是电脑方面地专家<br>I learned three foreign languages at college, but now I have forgotten almost all of them </p><p>Did you see anybody in?<br>The boy was seen upstairs<br>I went to her room only to find her out</p><p>I know there’s a mouse under <code>there</code> somewhere 我知道在那下面有什么地方有只老鼠<br>I didn’t know her until quite <code>recently</code> </p><h3 id="副词的位置"><a href="#副词的位置" class="headerlink" title="副词的位置"></a>副词的位置</h3><ul><li><p>修饰形容词，其他副词，一般位于被修饰词的<code>前面</code><br>  The place looks completely different now<br>  Computers work much faster than before<br>  Happy days pass <code>too</code> soon</p></li><li><p>enough 作副词时总是置于被修饰的形容词或副词<code>之后</code><br>  The book is easy enough for little kids</p></li><li><p>enough 作限定词时通常用于复数名词或不可数名词前，不可置于单数名词前<br>  I’ve got enough bottles to contain the coins<br>  The police didn’t have enough evidence to convict him</p></li><li><p>修饰动词的方式副词一般放在动词<code>后</code>。 地点副词放句末<br>  We must learn to speak English correctly and fluently<br>  The boy read quietly over there all afternoon<br>  He lives <code>at 75 Xiangchun Road,Changsha</code></p></li><li><p>频度副词<br>  I often go to school at six in the morning<br>  Jeff is always ready to help others<br>  You’ll always be asked to keep silence over what’s happened</p></li><li><p>程度副词<br>  The film was quite good<br>  I don’t like coffee very much</p></li><li><p>短语动词<br>  I need to think over your suggestion (= I need to think your suggestion over)<br>  我需要考虑一下你的建议</p><p>  I need to think it over<br>  我需要考虑一下它</p></li></ul><h3 id="比较级-最高级"><a href="#比较级-最高级" class="headerlink" title="比较级 | 最高级"></a>比较级 | 最高级</h3><pre><code>well &gt; better &gt; bestbadly &gt; worse &gt; worst much &gt; more &gt; most little &gt; less &gt; least far &gt; farther | further &gt; farthest | furthest</code></pre><ul><li><p>原级<br>  I love music <code>as much as</code> Betty does<br>  She can’t use the computer so/as well as you<br>  john drove much more <code>carefully</code> than me<br>  He runs faster and faster when he is near the finishing line<br>  The harder you work, the better you’ll learn</p></li><li><p>比较级<br>  She speaks French <code>no better than</code> me<br>  她的法语讲得和我一样都不好（否定两者）</p><p>  She speaks French <code>not better than</code> me<br>  她的法语讲得不如我好</p></li><li><p>最高级<br>  He talks (the) least and does (the) most in his office<br>  Jack jumps (the) highest but runs (the) most slowly of the three boys<br>  Of all the subjects, I like English (the) best</p></li><li><p>比较级的修饰语<br>  even | still | much | a little | a lot | a bit | a great deal | far | by far</p><p>  He speaks Japanese a lot better than before<br>  Could you please speak a little more slowly so I can follow you</p></li><li><p>最高级的修饰语<br>  (by) far | much | far and away | almost | the very | much | nearly</p><p>  Sophia works the best by far in her factory<br>  He played the piano much the best among the boys of his age</p></li></ul><h3 id="辨析"><a href="#辨析" class="headerlink" title="辨析"></a>辨析</h3><ul><li><p>very | much | very much<br>  修饰形容词或副词<code>原级</code> 用 very<br>  修饰形容词或副词<code>比较级</code>和<code>最高级</code> 用 much</p><p>  It is very hot today<br>  The traffic is moving very slowly this morning<br>  He is much the best mechanic in the factory<br>  He is <code>the very</code> best mechanic in the factory. (例外，表示强调)</p><p>  修饰现在分词转化成的形容词一般用 very<br>  修饰过去分词一般用 much</p><p>  This film is very interesting<br>  I was much troubled by the noisy children<br>  I am very tired. (tired 已转换为形容词，可用very)</p><p>  very much 可修饰默写情感的动词<br>  I enjoyed myuself very much at her birthday party last Sunday</p></li><li><p>ago | before<br>  ago 通常用于一般过去时的句子中<br>  before 通常用于完成时的句子中</p><p>  Mike left the office about half an hour ago<br>  Have you two met before?<br>  Her husband had died many years before</p></li><li><p>already | yet | still<br>  I have already seen the film.<br>  I already knew about it<br>  She’s here already. She’s early<br>  Has she found her bike already?</p><p>  Is supper ready yet?<br>  Have you found your ruler yet?<br>  He has not yet begun to work.</p><p>  Have you had your lunch?<br>  No, not yet</p><p>  They were still neck and neck<br>  Does he still work in the factory?<br>  They still haven’t got more money. (放在 not 之前)</p></li><li><p>too | as well | also | either<br>  too 口语，一般用于肯定句，放在句末或句中，常用逗号隔开<br>  If Mike would like to go, I will go, too.<br>  She, too, is a singer</p><p>  as well 和too 类似，通常用于句末<br>  I know Japanese as well</p><p>  also 比较正式<br>  They also have fish shops in that small town<br>  Mrs Green can also sing the song in Chinese</p><p>  either 用于否定<br>  I don’t know him. Tom doesn’t know him, either.</p></li><li><p>fairly | quite | rather<br>  这三个语气程度由轻到重依次为 fairly quite rather<br>  This film is fairly good. 这部电影很好<br>  This film is quite good. 非常好<br>  This film is rather good. 相当好</p><p>  fairly 只修饰褒义词<br>  rather 主要用于贬义，但也可以用于褒义前，相当于very<br>  在没有褒贬意的词前用 fairly 表示赞同，rather 表示不赞同</p><p>  You did fairly well, but he did rather badly 你做的非常好，但是他做的相当差<br>  She is fairly tall for her age。 就她的年龄来说，她长得算是很高了<br>  She is rather tall for her age. 就她的年龄来说，她长得过于高了</p><p>  rather 可以修饰 too 及比较级，而 fairly 和 quite 不行<br>  This book is rather too difficult for the juniors. 低年级学生<br>  My mother is rather better today</p><p>  quite 和 rather 可以修饰动词，而fairly一般不可以<br>  This does not quite satisfy me 这没有使我很满意<br>  They rather expected to win the match</p><p>  quite 和 rather 还可以修饰名词<br>  That was quite an accident. 那是一次不太寻常的事故<br>  It’s rather a pity. 这真的是相当遗憾<br>  They had quite a good time </p></li><li><p>almost | nearly<br>  My son is almost 10 years old. (可能就差几天)<br>  My son is nearly 10 years old. (可能是8岁)</p><p>  I almost/nearly fell off my bike<br>  Time is almost/nearly up. 时间差不到了<br>  She is almost/nearly always at home in the evening<br>  Almost/ nearly everybody came</p><p>  almost 可以与 never | nobody | nothing | no | none | too | more than 连用，而neraly不行<br>  The value of our currency has sunk to almost nothing<br>  This is almost more than we feared 这几乎远远超过我们所害怕的</p><p>  nearly 可以被 very | pretty | not 前置修饰，而almost则不能<br>  I’m not nearly ready<br>  She looks like her mother very nearly</p></li><li><p>perhaps | maybe | possibly | probably | likely<br>  perhaps, maybe 基本相同，口语化，语气弱<br>  Perhaps/Maybe the weather will turn out to be fine tomorrow</p><p>  possibly 强调客观存在的可能性，可能性较小，常与 may/might 或 can/could 连用<br>  What he said may possibly be true<br>  You can’t possibly walk 20 miles in an hour</p><p>  probably 可能性较大，常用 more/most修饰，不可用 very<br>  John most probably told his father all about the matter. He usually tells him everything</p><p>  likely 侧重从表面看来很有可能，常与 probably 换用<br>  They’ll very likely come by train<br>  I shall most likely be at home all day tomorrow.</p></li></ul><h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><p>1.The plane flew smoothly ____ (high) in the sky and people spoke ____ (high) of the experiencel pilot</p><p>2.He is a ____ (disappoint) child and his parents are ____ (disappoint) with him</p><p>3.To my great surprise, the little boy ____ (skillful) fixed myu computer in ten minutes</p><p>4.Earthquakes are ____ (extreme) difficult to predict</p><p>5.After passing several stations, I felt ____ (sleep) and closed my eyes</p><p>6.When you visit a Chinese friend, your friend will ____ (constant) add hot water to your emptying teacup</p><p>1.high; highly 2.disappointing; disappointed 3.skillfully 4.extremely 5.sleepy 6.constantly</p><p>改错<br>1.The assistant was clearly as embarrassing as my sister<br>2.They ate silently, and it was clearly that things were not going well<br>3.Like the rest of my classmates, I didn’t really want to get closest to her<br>4.She was, in fact, rather attractively, and she never seemed to care what the rest of us thought about her<br>5.Mum said to Tom, “Dad and I were terrible worried.”<br>6.Beside, Coco tends to bark an average of six hours a day<br>7.No one in the carriage had previous spoken to or even noticed the ticket-owner before<br>8.Interesting, It had a connection with the British porcelain industry<br>9.After waiting for about half an hour, I was beginning to get impatiently.<br>10.I found the test difficult, but I tried hardly to do it.<br>11.I understood that he missed us just as many as we missed him</p><p>1.embarrassed 2.clear 3.close 4.attractive 5.terribly 6.Besides 7.previously 8.Interestingly 9.impatient 10.hard 11.much </p><h2 id="动词"><a href="#动词" class="headerlink" title="动词"></a>动词</h2><ul><li>实意动词(Notional Verb)</li><li>系动词(Link Verb)</li><li>助动词(Auxiliary Verb)</li><li>情态动词(model Verb)</li></ul><p>三大时态:现在,过去,将来<br>进行的状态: 一般时,进行时,完成时<br>使用动词时通常将 <code>时态</code> 和 <code>状态</code>结合使用,例如:一般现在时,过去进行时</p><h3 id="实义动词"><a href="#实义动词" class="headerlink" title="实义动词"></a>实义动词</h3><h4 id="及物动词"><a href="#及物动词" class="headerlink" title="及物动词"></a>及物动词</h4><p>跟宾语的动词。 又可分为 跟 <code>单宾语</code> <code>双宾语</code> <code>复合宾语</code></p><ul><li><p>单宾语<br>  accetp | admire | admit | affect | afford | announce | borrow | bury | celebrate | cover | defeat | defend | destroy | devote | discover | educate | enjoy | explain | forget | guess | invent | love | post | raise </p><p>  Rasie your hand if you have any questions</p></li><li><p>双宾语</p><ul><li><p>加to<br>  bring | give | hand | pass | post | promise | read | return | show | teach | tell | leand </p><p>  Hand me that book, please = Hand that book to me, please<br>  Will you show me your ticket, please? =  Will you show your ticket to me, please?</p></li><li><p>加for<br>  buy | choose | cook | draw | find | fetch | make | order | paint | purchase | save | spare </p><p>  My parents bought me a nice backpack = My parents bought a nice backpack for me<br>  My mum made me a beautiful dress = My mum made a beautiful dress for me</p></li><li><p>加 to/for<br>  do | sing | bring<br>  I’ll bring you some stamps. = I’ll bring some stamps to/for you</p></li></ul></li><li><p>复合宾语</p><ul><li><p>跟形容词<br>  consider | dye | drive | find | get | imagine | judge | knock | keep | leave | make |push | paint | set | think | wipe </p><p>  Keep the window <code>open</code><br>  I find the book very <code>interesting</code><br>  The noise almost drove me <code>mad</code></p></li><li><p>跟名词<br>  appoint | call | vote | elect | find | keep | make | name </p><p>  The parents named their daughter Lily<br>  We all made Jeffrey <code>head of our team</code><br>  They apointed him <code>Minister for Foreign Affairs</code></p></li><li><p>to<br>  advise | allow | ask | expect | get | invite| order | tell | teach | wish | warn | want </p><p>  He advised us <code>to discuss the report</code> immediately<br>  Mother often tells me <code>to make friends</code> carefully</p></li><li><p>to be + 名词或形容词<br>  believe | consider | declare | find | imagine | know | prove | suppose </p><p>  I believe what you said to be true<br>  You will find it (to be) a difficult book</p></li><li><p>不带 to<br>  fell | hear | have | let | make | notice | see | watch </p><p>  I’ll have my friend <code>repair</code> my computer<br>  He noticed a tall man <code>enter</code> the office </p></li><li><p>动词-ing<br>  catch | discover | find | get | hear | have | keep | notice | ovserver | see | smell | watch </p><p>  Can you hear someone playing the piano next door<br>  He noticed a woman in a black dress sitting across from him.</p></li><li><p>动词-ed<br>  feel | find | get | have | hear | make | notice | see</p><p>  I couldn’t make myself heard by all the listeners<br>  I often hear this song sung by my father</p></li><li><p>副词<br>  ask | drive | find | get | invite | let | order | shut | see | show </p><p>  Can I ask Bob in<br>  Show the visitor in, Please 请把客人请进来</p></li><li><p>介词短语<br>  discover | find | get | have | hear | keep | notice | see</p><p>  Don’t have children at home all day.<br>  Keep all these books on the shelf and take them when necessary</p></li></ul></li></ul><h4 id="不及物动词"><a href="#不及物动词" class="headerlink" title="不及物动词"></a>不及物动词</h4><p>后面不接宾语。很多及物动词能作不及物动词用<br>apologize | appear | arrive | come | die | fall | flow | go | happen | lie | rise | run | stay | sit | stand | walk </p><p>Three days later a rash appeared. 三天后出现了皮疹<br>Accidents like this happen all the time </p><h3 id="连系动词"><a href="#连系动词" class="headerlink" title="连系动词"></a>连系动词</h3><ul><li>be<br>  They were very angry then. 那是他们非常生气</li><li>keep | stand | remain | stay | lie<br>  He always kept silent at the meeting<br>  This matter remains a mystery</li><li>seem | appear<br>  It seems a foolish decision now<br>  Police say there appear to be signs of a break-in 警方称似乎有破门而入的迹象</li><li>feel | smell | sound | taste | look<br>  The park looks very beautiful<br>  This kind of cloth feels very soft<br>  This flower smells very sweet</li><li>become | grow | turn | fall | get | go<br>  She grew rich within a short time<br>  Slowly my eyes became accustomed to the darkness</li><li>prove<br>  The rumor proved false 这谣言证实是假的<br>  The design proved to be a success 那个涉及后来证明很成功</li></ul><h3 id="助动词"><a href="#助动词" class="headerlink" title="助动词"></a>助动词</h3><p>主要有 be | do | have | will | shall<br>主要功能是帮助句中的谓语动词构成否定句，疑问句，时态，语态，语气</p><h4 id="be"><a href="#be" class="headerlink" title="be"></a>be</h4><p>am | was<br>are | were<br>is | was </p><p>现在分词 being<br>过去分词 been</p><p>用法：</p><ul><li><p>be + 现在分词 进行时<br>  The boss is interviewing some new comers.<br>  Jenny was studying in Japan last year. I’m not sure if she has returned now.</p></li><li><p>be + 及物动词的过去分词  被动语态<br>  All the projects were completed before last July.<br>  The story is said to be very instructive.</p></li></ul><h4 id="do"><a href="#do" class="headerlink" title="do"></a>do</h4><p>do | does | did<br>do not | does not | did not<br>don’t | doesn’t | didn’t</p><p>Do you know America well?<br>Did Bob phone you yesterday?<br>I don’t like being laughed at.<br>Monica doesn’t live here; she lives next door.<br>Do be careful while crossing the busy streets.<br>Ann does like teddy bears.<br>I did phone you last night, but no one was in.</p><h4 id="have"><a href="#have" class="headerlink" title="have"></a>have</h4><p>原形 have | ‘ve | have not | haven’t / ‘ve not<br>第三人称 has | ‘s | has not | hasn’t / ‘s not<br>过去式 had | ‘d | had not | hadn’t / ‘d not<br>现在分词  having | not having<br>过去分词  had | not had</p><p><strong>缩略式 ‘s 是 is 或 has 的缩略形式， 不是 was 的缩略形式</strong></p><p>Maria’s / Maria has been studying in China for three years.</p><p>用法<br>You haven’t been abroad before, have you?<br>We hadn’t walked far when we lost our way.<br>We will have finished all the work by next week.<br>He hasn’t seen that film.</p><h3 id="持续性动词与终止性动词"><a href="#持续性动词与终止性动词" class="headerlink" title="持续性动词与终止性动词"></a>持续性动词与终止性动词</h3><ul><li><p>持续性动词<br>  burn | drink | eat | fly | have | keep | know | lie | live | play | rain | read | run | sing | sleep | smoke | snow | stand | study | talk | wait | walk | wear | work</p></li><li><p>终止性动词<br>  admit | arrive | begin | borrow | buy | break | close | come | die | fall | go | hit | join | jump | leave | lose | move | marry | open | put | return | reach | start | stop </p></li><li><p>互相转化<br>  | 词义 | 终止性 | 持续性 |<br>  |   |   |   |<br>  | 买 | buy | have |<br>  | 借 | borrow | keep |<br>  | 到达 | arrive | stay |<br>  | 得知 | learn | know |<br>  | 穿 | put on | wear |<br>  | 放置 | put | lie |<br>  | 结婚 | marry | be married |<br>  | 认识 | get to know | know |<br>  | 回来 | come back | be back |<br>  | 离开 | leave | be away |<br>  | 站 | stand up | stand |<br>  | 死 | die | be dead |<br>  | 坐 | sit down | sit |<br>  | 开始 | start/begin | be on |</p><p>  I bought the car three months ago<br>  I have had the car for three months</p><p>  The meeting began ten minutes ago.<br>  The meeting has been on for ten minutes.</p></li></ul><h3 id="短语动词"><a href="#短语动词" class="headerlink" title="短语动词"></a>短语动词</h3><ul><li><p>动词 + 副词<br>  break out 爆发<br>  break in 打断<br>  find out<br>  give in 屈服<br>  give up<br>  go about 四处走动<br>  go by 经过<br>  go ahead 开始干<br>  go back 回去<br>  go on<br>  look around<br>  look over<br>  put on<br>  pick out<br>  put aside 放下<br>  put down 写下，放下<br>  put away 收拾起来<br>  run away 跑掉<br>  ring up 打电话<br>  turn on </p></li><li><p>动词 + 介词<br>  ask for<br>  arrive at 到达<br>  arrive in 到达<br>  break into 破门而入<br>  believe in<br>  begin with<br>  come across 偶然碰到<br>  care for 喜欢<br>  care about 关心<br>  depend on<br>  die from<br>  get off<br>  go through<br>  go over 复习<br>  look after<br>  listen to<br>  laugh at<br>  look at </p></li><li><p>动词 + 副词 + 介词<br>  add up to 加起来，总共<br>  break away from 躲开，脱离<br>  catch up with 赶上，超过<br>  do away with 废除<br>  go in for 从事，参与<br>  go on with 继续<br>  get along with 与…相处<br>  come up with  想出<br>  keep out of 使…不进入<br>  look forward to  盼望</p></li><li><p>动词 + 名词 + 介词<br>  catch sight of  突然发现<br>  make use of<br>  pay attention to<br>  make a contribution to<br>  take notice of<br>  take the place of<br>  take part in<br>  take pride in </p></li><li><p>be + 形容词 + 介词<br>  be fond of 喜欢<br>  be afraid of<br>  be famous for 以什么出名<br>  be sure about/of<br>  be aware of<br>  be good for<br>  be good at<br>  be ready for<br>  be active in 在…方面积极<br>  be proud of 以…为自豪</p></li><li><p>动词 + 名词<br>  keep watch 值班<br>  take care<br>  take place </p></li><li><p>其他<br>  break up  结束；破碎，放假，散开；开心<br>  bring down 降低； 击落，打死<br>  appeal to 呼吁，上诉，要求，对…有吸引力<br>  cut down 砍倒，减少<br>  come up with 提出，想出，赶上<br>  go through 检查，审查，完成，经历，穿过，通过，用完，看完<br>  live up to 实践，做到，不辜负<br>  set off 出发；引起；动身；使爆炸；抵销；分开<br>  take on 承担；呈现；具有；流行；接纳；雇用；穿上<br>  work out 解决；算出；实现；制定出；消耗完；弄懂；锻炼</p></li></ul><h4 id="练习题-3"><a href="#练习题-3" class="headerlink" title="练习题"></a>练习题</h4><p>break up | bring down | appeal to | cut down | come up with | go through | live up to | set off | take on | work out </p><p>用上面的词完成下面句子</p><p>1.The government has taken measures to ____ the high prices of daily goods to keep the market stable.</p><p>2.Some insects ____ the colour of their surroundings to protect themselves.</p><p>3.Nancy ____ in the gym three times a week to keep her figure.</p><p>4.The novel has been adapted for movies more than once since its exciting story ____ Hollywood producers as much as it does to readers.</p><p>5.-I’m surprised to hear that Sue and Paul have ____.<br>-So am I. They seemed very happy together when I last saw them.</p><p>6.-What’s the matter with John? He has been sitting there for hours.<br>-A postcard from his father ____ an attack of homesickness in him.</p><p>7.All drugs for humans must ____ trials to prove their safety and effectiveness before being placed on the market.</p><p>8.-Have you ____ some new ideas?<br>-Yeah, I’ll tell you later.</p><p>9.Had she ____ her parents’ expectation, she would have made it to Columbia University.</p><p>10.Making good use of waste can help us ____ the costs.</p><p>bring down | take on | works out | appeals to | broken up | set off | go through | come up with | lived up to | cut down </p><p>改错<br>1.The little boy couldn’t hold back of his curiosity and tasted the medicine.<br>2.Our teachers often tell us that every minute we spend on studying will finally pay up in the near future.<br>3.It was in such poor light that I couldn’t take out what the newspaper said.<br>4.The book which came out of at the end of last year turned out to be a great success in Shanghai.<br>5.The food in England is strange at first but you will soon get used of it.<br>6.A fire broken in a hospital last night, but no one was killed.<br>7.Before the war broken out, many people threw away possessions they could not take with them in safe places.<br>8.Who will hand over the company since Ewing has resigned?<br>9.The forest guards often find campfires that have not been put completely.<br>10.Now many people are working hard to earn enough money to keep up the high pace of modern society.</p><p>1.去掉 of<br>2.up改为off<br>3.take改为make<br>4.去掉第一个of<br>5.of改为to<br>6.broke后加out<br>7.threw改为put<br>8.hand改为take<br>9.put后加out<br>10.up后加with</p><h3 id="情态动词"><a href="#情态动词" class="headerlink" title="情态动词"></a>情态动词</h3><h4 id="can-could-may-might"><a href="#can-could-may-might" class="headerlink" title="can,could,may,might"></a>can,could,may,might</h4><p>can/could 表示能力, 用 be able to 代替<br>can/could 现在/过去的能力<br>客观可能时(can的可能性大)</p><ul><li><p>表示能力<br>  My grandma is well over eighty, but she can read without glasses.<br>  I could easily tell my father’s step. 我能很容易地判断出我父亲地脚步声</p><p>  can 与 be able to 区别</p><ul><li><p>can 只能用在一般现在时和一般过去时中，be able to 则可以用于更多时态<br>  I’m sorry I haven’t been able to answer your letter in time.</p></li><li><p>be able to 后地动词一般不用被动形式，而 can 可以<br>  The patient can be operated on. 这个病人可以实施手术了</p></li><li><p>was/were able to 有做到的意思<br>  I talked with her for a long time, and eventully I was able to make her believe me.</p></li></ul></li><li><p>表示可能性</p><ul><li><p>用在肯定句中，表示理论上的可能性，意为“有时候会。。。”<br>  Peter can be really annoying. 彼得有时候的确令人讨厌<br>  Accidents can happen to any drunken driver. 醉酒的司机都有可能发生交通事故<br>  It can be very hot here in summer</p></li><li><p>用在否定句和疑问句中表示主观猜测<br>  It can’t be my father. He is now abroad.<br>  The door is open. Who can be in the classroom? 谁可能在教室里呢？</p></li><li><p>can/could have done 表示对过去事情的推测<br>  Where can Mary have gone? She can’t have gone to school, because it is Sunday.<br>  Could the bank have made a mistake? 银行有没有可能出错呢？</p><p>  还可以表示 “过去本可以做。。。（但事实上未做）”<br>  He could have sent a message. 他本来可以发个信息来的</p></li></ul></li><li><p>表示许可</p><ul><li>请求许可<br>  向对方请求许可，could 语气更加委婉，不确定<br>  Can I have a look at your new design?<br>  Could I use your cell phone? -Yes, of course you can</li><li>给予许可<br>  用can，此时相当于may，不能用could<br>  You can have a short holiday after this item of work. 做完这个工作后，你可以休一个短假<br>  We can’t wear jeans at work. 工作时我们不可以穿牛仔裤</li></ul></li><li><p>征求对方意见</p><ul><li>常用 “Could/Can you…?”, 此时也可以用”Would you…?”, 不过 could 更有礼貌<br>  Can you please help me with this furniture? 搬一下这个家具吗<br>  Could you pick me up at the airport at five next Monday?</li></ul></li><li><p>习惯用法</p><ul><li><p>表示气愤或惊讶，一般用于疑问句和否定句。”怎么可以”,”难道会”<br>  They can’t have arrived already, surely！<br>  Can he be serious? 他难道会当真吗？</p></li><li><p>can but “只好，至多不过”<br>  We can but do our best. 我们只好尽力而为</p></li><li><p>cannot help but do, cannot help doing sth. “禁不住做”,”不能停止做”<br>  Lee can’t help but agree with her. 李只得同意了她<br>  When I try to speak, I can’t help laughing. 我一开始说话，就禁不住笑</p></li><li><p>cannot…too… 表示”无论。。。都不过分，越。。。越好”。 有时候 cannot 可用 can never 代替<br>  You cannot be too careful to cross the road. 过马路时怎么小心都不为过<br>  <strong>You can never do the work too well. 这项工作你做得越出色越好</strong></p></li></ul></li></ul><p>may , might 表示可能性,may的可能性大<br>might 更委婉</p><p>回答:</p><ul><li><p>Yes,please.</p></li><li><p>No,you can’t/mustn’t</p></li><li><p>表示许可<br>  may/might 可以表示征求对方的许可，比can/could更正式</p><ul><li>请求许可<br>  May I trouble you to pass me the book?<br>  Might I come to see you?</li><li>给予许可<br>  You may/can phone me tomorrow<br>  May I trun on the TV? -No, you may not</li><li>表示法律条文等的客观许可<br>  在机关，学校等的文书，公告表示“不得，禁止”时，不用 cannot， 而用 may not 或 mustn’t 表示<br>  Any book may not be taken out of the library.<br>  Cars mustn’t be parked in front of the hall.</li></ul></li><li><p>表示可能性<br>  might 可能性比 may 小一些<br>  I must go home at once. Mary might visit me.<br>  The little girl might be sleeping this time of day.<br>  I can’t find my sunglasses. I may/might have left them in your office.<br>  <code>might have done</code> 还可以表示“本可以做而事实上未做”之意<br>  You might have told me earlier about your illness.<br>  You might have come earlier.</p></li><li><p>其他用法</p><ul><li><p>表示祝愿时常用 May<br>  May you succeed. 祝你成功<br>  May you have a good trip.</p></li><li><p>may/might as well 表示有礼貌地劝告，“还是。。。的好，倒不如”<br>  There is nothing to do, so I may as well go to bed.<br>  It’s too late. You might as well not go.  天太晚了，你还是不走的好</p></li><li><p>may/might well 表示“很有理由”<br>  What do they hope to achieve? -You might well ask.  他们希望达到什么目标呢？你问的好<br>  You may well refuse him. 你有理由拒绝他。</p></li></ul></li></ul><h4 id="must-have-to"><a href="#must-have-to" class="headerlink" title="must(have to)"></a>must(have to)</h4><ul><li><p>表示“必须”<br>  must 主观<br>  have to 客观<br>  I must keep my word. 我必须遵守诺言<br>  It rained heavily, so the children had to stay at home.</p></li><li><p>must 只有一种形态, have to 有多种<br>  They had to speed up, for the weather turned terrible.<br>  We will have to ask Mr Li for help.</p></li><li><p>have to 的否定和疑问式需要助动词构成， not have to 相当于 needn’t(不必)； must 的疑问式直接酱must提前，其否定式在must 后直接加 not， mustn’t(禁止)<br>  You don’t have to/don’t need to/needn’t tell him the truth if you don’t want to.<br>  If you earn more than 5000 yuan, will you have to pay tax?<br>  Must I pay now?<br>  All these exhibits mustn’t be touched. (展品)</p><p>  have to 在口语中 常用 have got to 代替<br>  Have you got to work extra hours today? 加班</p></li><li><p>表示推测<br>  must 表示有根据，有把握的推测，只用于肯定句<br>  后接动词原形，表示对现在情况的推测<br>  后接 be doing， 对正在发生<br>  后接 have done, 表示对过去情况的推测</p><p>  He must be ill. He looks so pale<br>  George must be sleeping now.<br>  You must have gone to bed late last night. Your eyes are red.<br>  You must have read this book. You know the story very well.</p></li><li><p>表示感情色彩<br>  非要。。。；偏要<br>  Why must you always interrupt me?<br>  If you must smoke, do it outside, please.<br>  When I was taking a nap, a student must knock at the door. 正当我午睡时，偏偏有一个学生敲门</p></li></ul><h4 id="shall-should-ought-to"><a href="#shall-should-ought-to" class="headerlink" title="shall/should/ought to"></a>shall/should/ought to</h4><ul><li><p>Shall</p><ul><li><p>用于第一，三人称做主语的疑问句中，表示说话人征求对方的意见<br>  Shall I change into the evening dress for your party?<br>  Shall we put off the sports meet till next month?<br>  Shall Tom go there with me tomorrow?</p></li><li><p>用于第二，三人称做主语的陈述句中，表示说话人给对方的许诺，命令，警告<br>  You shall get an answer from me tomorrow. 到明天你会得到我的答复的<br>  He shall suffer for this. 他会未此事吃苦头的</p></li><li><p>用于第三人称做主语的陈述句中，表示条约，规定，法令等文件中的义务或规定<br>  No readers shall remove a book from the library without the consent of the librarian.<br>  Each competitor shall wear a number.<br>  Those belonging to our club shall wear uniforms.</p></li></ul></li><li><p>should </p><ul><li><p>作为 shall 的 <code>过去式</code><br>  Mr lee asked if he should get his visa on time<br>  I asked the teacher if I should have one day off.</p></li><li><p>表示义务，职责等， “应该”<br>  I think today’s children should really learn to respect their elders.<br>  You shouldn’t be so careless.</p></li><li><p>表示说话人的惊奇，愤怒，失望等特殊情感<br>  It’s surprising that Mary should love such a person as Jack. 竟然爱上<br>  Don’t ask me. How should I know?</p></li><li><p>表示很大的可能性，多指预期的式，常译为“按道理说应该”<br>  It should be Mike who has taken away all the materials.<br>  She promised to come by 10 o’clock. She should be here at any moment.</p></li><li><p>should have done 表示“过去本应该做而未做”，否定式表示“过去本不应该做而做了”<br>  You are right. I should have thought of that.<br>  Mary, you shouldn’t have eaten all the cakes in one day.</p></li></ul></li><li><p>ought to<br>  否定：ought not to<br>  疑问：ought 置前<br>  You ought not to be late for such an important meeting<br>  Ought I to hand in my composition now?<br>  Humans ought to stop polluting nature.<br>  You are late. You ought to have arrived five minutes earlier.</p></li><li><p>will/would </p><ul><li><p>表示意愿<br>  Can someone help me? -I will.<br>  They would not let him in because he was poorly dressed.(过去式)</p></li><li><p>表示请求<br>  Would 比 will 委婉， 不表过去意义<br>  Will you come this way, please? 请你走这边好吗<br>  Would you open the window, please?</p></li><li><p>will 表示规律性的“注定会”<br>  Engines won’t run without lubricants.<br>  You will regret forever if you lose this golden chance.<br>  Oil will float on water.</p></li><li><p>表示习惯或特性<br>  二者均带有主观性，will 表示现在的习惯， would 表示过去的<br>  This old man is strange. He will sit for hours without saying a word.<br>  He would spend hours on the telephone.<br>  Mary will keep asking some silly questions.</p></li></ul></li><li><p>used to<br>  表示”过去常常”, <code>没有人称和书的变化</code><br>  I used to go to work by bike<br>  He didn’t use to be so careless. 他过去没有怎么粗心过<br>  Used they to exercise in high school? 上高中时他们经常锻炼身体吗？<br>  Where did they used to paly football?</p><p>  used to do sth. 过去常常做<br>  be used to (doing) sth.  习惯于（做）。。。<br>  be used to do sth. 被用来做</p></li></ul><h4 id="need"><a href="#need" class="headerlink" title="need"></a>need</h4><ul><li>情态动词need<br>  没有人称和时态的变化，后接动词原形，一般用于否定句或疑问句中<br>  You needn’t be told twice about one single thing.<br>  You needn’t have spent all that money. 你本可以不花那么多钱的<br>  Need I tell him everything that’s happened to his parents? -Yes, you must. / -No, you needn’t</li></ul><ul><li>实意动词need<br>  有人称和数的变化<br>  Plants need light in order to survive<br>  He needs to go to Beijing this Sunday to attend a book fair. 参加书展<br>  Do I need to leave my telephone number and address?<br>  The house needed painting / to be painted<br>  You don’t need to hand in your composition</li></ul><h4 id="dare"><a href="#dare" class="headerlink" title="dare"></a>dare</h4><ul><li><p>做情态动词</p><p>  多用于疑问句，否定句和条件句中<br>  Dare he tell them what he knows?<br>  He dared not tell us the truth<br>  I’m afraid you dare not / daren’t do such a thing.<br>  You will be punished if you dare break the rules.</p><p>  I dare say 是一种习惯说法， 也常写作daresay, “我想，我认为是”<br>  It will rain this afternoon, I dare say.<br>  I dare say you know about it already.</p></li><li><p>做实义动词<br>  有人称和数的变化，在肯定句中要跟带to的不定式，否定式和疑问句中to可有可无<br>  I suppose he dares to tell the manager the turth<br>  This student doesn’t dare (to) raise any question in class<br>  Do you dare (to) drive a car on such a crowded road?</p></li></ul><h4 id="情态动词后的动词时态形式"><a href="#情态动词后的动词时态形式" class="headerlink" title="情态动词后的动词时态形式"></a>情态动词后的动词时态形式</h4><p>be doing<br>have done<br>have been doing<br>动词原形</p><ul><li><p>后接进行式<br>  一般表示对正在发生的事情的推测，can,may,might,must,should,ought to<br>  He might be sleeping in the room. We’d better not disturb him.<br>  He ought to be waitting for us. He promised to<br>  What can he be doing this time of day?  他白天这个时候应该正在干什么呢？</p></li><li><p>后接完成式</p><ul><li><p>对过去发生的事情的推测，can,could,may,might,must<br>  She can’t have read about the explosion. She didn’t know anything about it.<br>  They might have taken a later train.<br>  They must have lived here since last year. 他们肯定从去年就住在这里了</p></li><li><p>与事实相反的虚拟语气，含有责备，批评的意为。might,could,ought to,should,need<br>  You failed again. You should have done it much better.<br>  He might have given you more help then, even though he was very busy.<br>  They could have let me know they were going to be late.<br>  You needn’t have told them again. I had told them already<br>  Tom ought not to have told me your secret, but he meant no harm</p></li></ul></li><li><p>后接完成进行式<br>  They are too tired now. They must have been working all day. 他们肯定一整天都在工作<br>  They should have been painting the new house. Both husband and wife have asked for leave. 想必他们一直在粉刷房子，夫妇两人都请假了</p></li></ul><h3 id="虚拟语气"><a href="#虚拟语气" class="headerlink" title="虚拟语气"></a>虚拟语气</h3><ul><li><p>非真实条件句的虚拟语气</p><ul><li><p>对现在的虚拟<br>  与现在相反，条件从句的谓语动词用过去式，主句谓语动词用”would/should/could/might+动词原形”<br>  If I were ten years younger, I would start all over again.<br>  If I had enough money, I would buy myself a computer first of all.</p></li><li><p>对过去的虚拟<br>  条件从句中谓语动词用 had done，主句谓语动词用 should/would/could/might have done<br>  If we had had enough rain last year, we could have gained a good harvest.<br>  If you had worked hard, you would have easily passed the final examination.</p></li><li><p>真实条件句与非真实条件句的区别<br>  If I have enough money, I will go to the zoo with you. 如果我有足够的钱，我就和你一起去动物园。<br>  (真实条件句，暗语“我得数一数钱是否够，如果够我就去”)</p><p>  If I had enough money, I would go to the zoo with you. 如果我有足够的钱， 我会和你一起去动物园的<br>  (非真实条件句，暗喻“事实上我现在没有足够的钱，没法和你去”)</p></li><li><p>对将来的虚拟<br>  对将来的虚拟表示与将来事实相反的情况，条件从句中谓语动词可用 过去式、“should + 动词原形”或“were to + 动词原形”，主句谓语动词用“would/should/could/might + 动词原形”<br>  If I saw/should see/were to see him tomorrow, I would invite him home.<br>  如果明天见到他， 我会邀请他到我家</p><p>  If it were/should be fine tomorrow, I would go on a trip</p></li><li><p>非真实条件句省略if的情况<br>  但语句中有 should, had, were 时， 可以省略 if，而是把词调到主语前，形成倒装<br>  Had I worked hard, I would have surely succeeded<br>  Were she my daughter, I wouldn’t allow her to study abroad.</p><p>  <code>Were it not for...</code> “要不是…”<br>  <code>Had it not been for...</code> “当时要不是…”<br>  Were it not for your help, I would never be a good manager.<br>  Had it not been for you, I would have lost my way.</p></li><li><p>混合虚拟语气<br>  主句与从句 谓语动词的形式根据各自发生的时间来确定<br>  If I were you, I wouldn’t have missed the concert last night<br>  If you had told me the news yesterday, I wouldn’t be so worried now.<br>  If you hesitated this moment, you might suffer in future.</p></li><li><p>含蓄虚拟语气<br>  有时假设的条件不通过条件从句表达出来，而是隐含在某些介词短语，副词，连词或上下文中<br>  But for your advice, I would have failed.<br>  (If you hadn’t given me advice, I would have failed)</p><p>  Without your help, I wouldn’t have succeeded anyway.<br>  (If you hadn’t helped me, I wouldn’t have succeeded anyway)</p><p>  I’m really busy, otherwise I would certainly go with you</p></li></ul></li><li><p>含有责备及批评语气的虚拟语气<br>  “should/ought to/could/might + have + 过去分词”  “过去本。。。而事实上未。。。”<br>  You are late again. You could have come earlier.<br>  You’ve made a few mistakes. You should have been a little bit more careful. 你犯了了几个错误。你本应该更加细心点的<br>  I ought to have got a better price for the car but I’m not a very good businessman.<br>  It’s so near, We needn’t have taken a taxi. 这么近，我们本没有必要坐出租车的</p></li><li><p>其他从句中的虚拟语气</p><ul><li><p>主语从句中的虚拟语气</p><p>  It is/was important/necessary/essential/impossible/natural/unthinkable/strange/surprising that…<br>  It is/was a rule/a shame/an honour/a surprise/no wonder that…<br>  It is very important that one (should) master the skills of computer<br>  It is a rule that everyone (should) obey the laws</p><p>  It is/was advised/suggested/requested/required/ordered/proposed/decided that…<br>  It is advised that one (should) take plenty of boiled water.<br>  It is required that the students (should) learn a foreign language.</p></li></ul><ul><li><p>宾语从句中的</p><ul><li><p>在 wish 后的宾语从句中， 用一般过去时表示与现在事实相反；用 “could/would + 动词原形” 表示与将来事实相反；用过去完成时表示与过去事实相反</p><p>  I wish I were ten years younger<br>  I wish I could fly to the moon some day.<br>  I wish you had come to the lecture.</p></li><li><p>在 would rather 后的宾语从句中，用一般过去时表示与现在或将来事实相反；用过去完成时表示与过去事实相反</p><p>  I’d rather you came tomorrow than today.<br>  I’d rather we had a rest now.<br>  I’d rather you hadn’t told me about it </p></li><li><p>表示”坚持要，建议，命令，要求”的动词 insist，demand, require, request, propose, suggest, command, order等后面的宾语从句中，谓语动词习惯上用”(should +) 动词原形”</p><p>  The commander ordered that the bridge (should) be blown up.<br>  My father suggests that I (should) take enough sleep before the final examination.<br>  He instisted taht I (should) come to his office at one o’clock.</p><p>  这类动词若表示“建议，命令，要求”之外的意思一般不用虚拟语气<br>  The smile on her face suggests that she agrees with me.(suggest 表示 暗示，表明)<br>  The boy insisted that he hadn’t broken the window (insist 坚持说)</p></li></ul></li></ul><ul><li><p>表语从句中的虚拟语气</p><p>  My suggestion is that we (should) get started as soon as possible<br>  My advice is that you (should) quit smoking</p><p>  常用的这些词有：<br>  advice 建议<br>  demand 要求<br>  order 命令<br>  insistence 坚持，主张<br>  requirement 要求<br>  request 请求<br>  proposal 建议<br>  suggestion 建议<br>  command 命令<br>  decision 决定</p><p>  It seems as though it were spring already. (事实上不是)<br>  The girl si giving us a vivid description of the moon. It seems as if she had been to the moon many times.<br>  It looked as if she had seen a ghost</p><p>  It seems as if he has no worries. (表示没有烦恼接近事实)<br>  It seems as if he had no worries. (表示仿佛没有烦恼，其实有很多)</p></li><li><p>同位语从句中的虚拟语气<br>  English teachers give <code>advice</code> that we <code>(should) make good use of</code> every chance to speak English.<br>  The <code>order</code> from the commander was that the troops <code>(should) set off for</code> the front immediately</p></li><li><p>定语从句中的虚拟语气<br>  It’s time that I should go to pick up my daughter at school<br>  It’s high time we went to school. 我们该去上学了<br>  It’s time that the children should go to bed.</p></li><li><p>状语从句中的虚拟语气<br>  The young man with long hair walks as if he were a girl.<br>  The injured man acted as if nothing had happened.<br>  Everything in my childhood crowded upon my mind as if they had just happened.</p><p>  I hired a boat so that I could go fishing<br>  Bring some money in  case you should use it. 带些钱以防能用到</p></li><li><p>只保留从句的虚拟语气<br>  What if I should fail? 万一失败，我怎么办呢？<br>  What should I do if I should fail?</p><p>  If only I were 20 years younger.<br>  It would be better if I were 20 years younger.</p></li></ul></li></ul><h4 id="习题-2"><a href="#习题-2" class="headerlink" title="习题"></a>习题</h4><ol><li><p>Don’t interrupt me, Kevin. ____ you force me to tell you the truth right now?</p></li><li><p>–Daddy, can you buy me a new iPad when you go to Beijing?   –You ____ get one if you are admitted to a key university.</p></li><li><p>It is unfair that so nice a person like Jenny ____ lost her job.</p></li><li><p>Curious about the world around him, my son ____ ask me endless questions when he was young.</p></li><li><p>The room is in a terrible mess; It ____ have been cleaned.</p></li><li><p>Children above 8 years of age in our country ____ be left at home without going to school, or their parents will be charged.</p></li><li><p>You ____ have the book as soon as I finish reading it.</p></li><li><p>–Is there a ticket to Guangzhou the day after tomorrow? (后天)  –There ____ be. I’ll check on the compter and find it out.</p></li><li><p>The teacher ____ have thought Johnson was worth it or she wouldn’t have wasted time on him, I suppose.</p></li><li><p>– Where ____ Mary have put the empty bottles?    – She ____ have thrown them away. They must be somewhere.</p></li><li><p>–Sunny had to give a speech in front of 500 people yesterday.  –Whew! That’s a big audience. She ____ have been nervous.</p></li><li><p>I ____ be late, so don’t wait for me.</p></li></ol><pre class="line-numbers language-none"><code class="language-none">1. Must  2. shall  3. should  4. would  5. can&#39;t  6. mustn&#39;t  7. shall  8. should  9. must  10. can, can&#39;t   11. must  12. may<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li><p>Don’t play with the dog, Jack, for it must be dangerous at times.</p></li><li><p>You could done better, but you didn’t try your best.</p></li><li><p>If I have know more about giving first aid, I could have helped them.</p></li><li><p>It should have been raining heavily when he got back home, for he was wet all over.</p></li><li><p>You would know what was going on if you listened.</p></li><li><p>If he hasn’t chosen to save the girl, he would not have died in the mountains.</p></li><li><p>They insisted that everyone come to the party.</p></li></ol><pre class="line-numbers language-none"><code class="language-none">1. must -&gt; can  2. could have done  3. have -&gt; had  4.  should -&gt; must  5. 加 had  6. hasn&#39;t -&gt; hadn&#39;t  7. come -&gt; came<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="不定量表达法"><a href="#不定量表达法" class="headerlink" title="不定量表达法"></a>不定量表达法</h2><pre class="line-numbers language-none"><code class="language-none">some , any , most , every , all <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>some 用于肯定句,希望得到肯定回答时, 也可以用在疑问句中<br>any 主要用于否定和疑问句中。。</p><p>most 大部分, 后面接复数名词</p><blockquote><p>Most people here are from China.</p></blockquote><p>every 每一个/所有 , 后面接<code>单数名词</code></p><blockquote><p>Every one likes the film . </p></blockquote><p>all 表示”所有”, 后面接名词复数</p><p>both 两者都<br>either 两者之一<br>neither 两者都不</p><blockquote><p>Both his eyes were severely burned<br>There are trees on either side of the street<br>Neither answer is correct. </p></blockquote><p>lots of (a lot of)<br>plenty of<br>两者均可修饰可数和不可数名词</p><p>a few  肯定 几个<br>few  否定  没几个。<br>两个加<code>可数</code>名词<code>复数</code></p><blockquote><p>Few books are put into the box . </p></blockquote><p>a little 肯定  一点儿<br>little  否定  没多点<br>两个与不可数名词连用</p><blockquote><p>There is little water in the bottle. </p></blockquote><p>none<br>no one<br>一个也不,一点也不<br>两个不同处:</p><ul><li>none 可以接of短语, 动词可用单数也可以用复数</li><li>no one 不能接of 短语, 动词只能用单数</li></ul><blockquote><p>No one knows the answer.<br>None of us have(has) arrived.</p></blockquote><h2 id="There-here-be"><a href="#There-here-be" class="headerlink" title="There/here be"></a>There/here be</h2><p>有 (There be)</p><blockquote><p>There is a book on the bookshelf.<br>There are some books …</p></blockquote><p>这是 (Here be)</p><blockquote><p>Here is the bus stop.<br>Here are your books.</p></blockquote><h2 id="一般现在时和现在进行时"><a href="#一般现在时和现在进行时" class="headerlink" title="一般现在时和现在进行时"></a>一般现在时和现在进行时</h2><h3 id="一般现在时"><a href="#一般现在时" class="headerlink" title="一般现在时"></a>一般现在时</h3><blockquote><p>They often get up at 7:00.<br>He often gets up at 7:00.</p></blockquote><p>一般现在时,动词的单三变化:</p><ul><li>再动词尾直接加s</li><li>以字母 s , x , ch 或 o 结尾的动词,加es</li><li>以辅音字母 + y , 先变 y为i,再加es</li></ul><p>一般现在时否定和疑问句用do,does 帮助构成</p><blockquote><p>He doesn’t like the car.<br>Does he like the car?<br>Yes,he does./No,he doesn’t</p></blockquote><h3 id="现在进行时"><a href="#现在进行时" class="headerlink" title="现在进行时"></a>现在进行时</h3><p>be + doing</p><blockquote><p>They are watching TV</p></blockquote><h4 id="动词现在分词的变化规则"><a href="#动词现在分词的变化规则" class="headerlink" title="动词现在分词的变化规则"></a>动词现在分词的变化规则</h4><ul><li>一般直接动词后加 ing</li><li>动词以不发音的 e 结尾,要去e加 ing.  (take - taking)</li><li>重读闭音节的动词,要双写词尾字母再加 ing. (cut - cutting)</li><li>以ie结尾的动词,变y再加 ing.  (lie - lying)</li></ul><h4 id="否定-疑问"><a href="#否定-疑问" class="headerlink" title="否定/疑问"></a>否定/疑问</h4><p>Am I watching TV?<br>Yes, you are. / No, you aren’t</p><h2 id="一般过去时和过去进行时"><a href="#一般过去时和过去进行时" class="headerlink" title="一般过去时和过去进行时"></a>一般过去时和过去进行时</h2><h3 id="一般过去时"><a href="#一般过去时" class="headerlink" title="一般过去时"></a>一般过去时</h3><p>过去习惯性的行为</p><blockquote><p>He worked very hard last night.<br>They came her by car. </p></blockquote><h4 id="动词一般过去时变化规则"><a href="#动词一般过去时变化规则" class="headerlink" title="动词一般过去时变化规则"></a>动词一般过去时变化规则</h4><ul><li>一般动词后加 ed</li><li>再以字母e结尾, 只加 d</li><li>以 辅音+y 结尾的动词,改y为i,再加ed</li><li>在以重读闭音节结尾且末尾只有一个辅音字母的,双写最后一个辅音字母,再加ed. (plan - planned)</li></ul><h3 id="过去进行时"><a href="#过去进行时" class="headerlink" title="过去进行时"></a>过去进行时</h3><pre class="line-numbers language-none"><code class="language-none">was&#x2F;were + doing<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>They were waiting for you.<br>He was taking with his friends just now.</p></blockquote><h2 id="将来时"><a href="#将来时" class="headerlink" title="将来时"></a>将来时</h2><ul><li>助动词 <code>will</code> 或 <code>shall</code>  + <code>动词原形</code></li></ul><blockquote><p>They will go to Shanghai by ship tomorrow.<br>We shall leave for Shanghai next month.</p></blockquote><ul><li>be going to + 动词原形   (打算,就要)</li></ul><blockquote><p>They are going to play football this afternoon.<br>She is going to learn French next year. </p></blockquote><ul><li>be doing 表示位置转移的动词, 如 go , come , leave , start , arrive 这些词可以用于表示将来时 <strong>注意:跟现在进行时不一样!!!</strong></li></ul><blockquote><p>They are leaving for Japan.<br>She is arriving tomorrow.</p></blockquote><h2 id="完成时"><a href="#完成时" class="headerlink" title="完成时"></a>完成时</h2><h3 id="现在完成时"><a href="#现在完成时" class="headerlink" title="现在完成时"></a>现在完成时</h3><pre class="line-numbers language-none"><code class="language-none">have + p.p <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>They have already arrived in Shanghai.<br>She has played football for 3 hours.<br>She hasn’t finished the homework yet.<br>She hasn’t been to sichuan yet. </p></blockquote><h3 id="过去完成时"><a href="#过去完成时" class="headerlink" title="过去完成时"></a>过去完成时</h3><pre class="line-numbers language-none"><code class="language-none">had + .p.p.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>表示句中的动作发生在过去之前,即过去的过去.已经完成,对过去造成了一定的影响或后果</p><blockquote><p>They had arrived in Shanghai.<br>She had played soccer for 3 hours.<br>They hadn’t finished the work yet.<br>Had they planned to stay here?</p></blockquote><h2 id="被动语态"><a href="#被动语态" class="headerlink" title="被动语态"></a>被动语态</h2><ul><li>如果主语是动作的承受着,则用动词的被动语态作谓语</li><li>被动语态的构成: be + 动词的过去分词 … by sb.</li></ul><blockquote><p>He is taken to America by his mother.</p></blockquote><ul><li>被动语态有各种时态</li></ul><blockquote><p>The information is needed by us.<br>The book was being read by her. (be doing 语句,read 过去分词和本身一样)<br>The computer has been used by her.(has been done 语句)<br>The room  will be cleaned.<br>The computer could have been used by them.(他们可能已经用了那个电脑)</p></blockquote><h3 id="被动态和情态动词结合"><a href="#被动态和情态动词结合" class="headerlink" title="被动态和情态动词结合"></a>被动态和情态动词结合</h3><pre class="line-numbers language-none"><code class="language-none">can&#x2F;could + be + 动词过去分词need + doing (常用)need to be + 动词过去分词<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>The food could be taken away.<br>The food might be taken away.<br>The food needs taking away.<br>The food <code>had</code> better <code>be</code> taken away.<br>Books used to be returned in two days.</p></blockquote><h3 id="By-行为者"><a href="#By-行为者" class="headerlink" title="(By + 行为者)"></a>(By + 行为者)</h3><p>动作的行为者不分明,或不重要,或上下文中提到了行为者时,”by+行为者”可以省略.</p><blockquote><p>The information is needed.<br>The door was opened. </p></blockquote><blockquote><p>The book is being read. (正被读)(现在进行时的被动语态)</p></blockquote><blockquote><p>The computer has been used (已经被用了)<br>The pencil had been sharpenned (已经被削尖了)<br>注意两个have形态,代表两种时态</p></blockquote><h3 id="被动语态的疑问"><a href="#被动语态的疑问" class="headerlink" title="被动语态的疑问"></a>被动语态的疑问</h3><p>助动词+主语+(其他助动词)+动词过去分词</p><blockquote><p>Is the information needed by him?</p></blockquote><p>——重点————</p><blockquote><p>Has the computer been used by her?<br>Yes,it has. / No,it hasn’t.</p></blockquote><blockquote><p>Will the room be cleaned?<br>Yes, it will. / No,it won’t.</p></blockquote><h3 id="被动语态的特殊疑问句"><a href="#被动语态的特殊疑问句" class="headerlink" title="被动语态的特殊疑问句"></a>被动语态的特殊疑问句</h3><pre class="line-numbers language-none"><code class="language-none">疑问词+助动词+主语+(其他助动词)+动词过去分词<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>The information is needed by them.<br>What is needed by them?</p></blockquote><blockquote><p>The girl is taken to Shanghai.<br>Where is the girl taken?</p></blockquote><blockquote><p>The book has been read three times.<br>How many times has the book been read?</p></blockquote><h2 id="非谓语动词"><a href="#非谓语动词" class="headerlink" title="非谓语动词"></a>非谓语动词</h2><ul><li>(to + 动词原形)</li></ul><blockquote><p>To get there by bike will take us an hour.(作主语)</p></blockquote><blockquote><p>The driver failed to see the car in time.(作宾语)</p></blockquote><blockquote><p>We believe him to be guilty(有罪的)(作宾补)</p></blockquote><blockquote><p>The next train to arrive is from Seoul.(作定语)<br>下一辆到达的火车是来自首尔的</p></blockquote><blockquote><p>My suggestion is to put off the meeting.(作表语)<br>推迟会议</p></blockquote><blockquote><p>I come here only to say goodbye to you.(作状语)</p></blockquote><ul><li>(动词原形 + ing)<br>动名词(动词作名词用)</li></ul><blockquote><p>Reading is an art.<br>They went on walking and never stopped talking.</p></blockquote><h2 id="假主语-真主语"><a href="#假主语-真主语" class="headerlink" title="假主语/真主语"></a>假主语/真主语</h2><ul><li>to 不定式或动名词可以再主语的位置上,但一般用<code>it</code>代替它作形式主语,这种情况it叫形式主语.</li></ul><blockquote><p>It’s a great honor to be invited.<br>It’s no use crying over spilt milk.(覆水难收)</p></blockquote><ul><li>在宾语的位置上, 用 it 代替它作形式宾语.这种情况it叫形式宾语</li></ul><blockquote><p>We think it important to learn English.<br>I found it pleasant walking in the park.</p></blockquote><ul><li>对动名词或不定式进行否定时,在不定式或动名词前加 <code>not</code> 否定就可以了</li></ul><blockquote><p>He pretended not to see her. (他假装没有看见她)<br>He regrets not joining them (他后悔没有加入他们)</p></blockquote><h2 id="to-不定式表示目的"><a href="#to-不定式表示目的" class="headerlink" title="to 不定式表示目的"></a>to 不定式表示目的</h2><p>in order to + 动词  表示目的<br>so as to + 动词  表示目的</p><p>由 in order to 引导的目的状语,置于句首,句尾均可<br>由 so as to  引导的目的状语,只用于句尾</p><blockquote><p>I’ve written it down in order to remember it.<br>He shouted and waved so as to be noticed.<br>(他大喊和挥手目的是让人注意)</p></blockquote><h3 id="否定-1"><a href="#否定-1" class="headerlink" title="否定"></a>否定</h3><blockquote><p>I’ve written it down in order not to forget it<br>He said nothing so as not to be noticed.</p></blockquote><h2 id="常见的不定式和动名词"><a href="#常见的不定式和动名词" class="headerlink" title="常见的不定式和动名词"></a>常见的不定式和动名词</h2><p>too … to </p><blockquote><p>The room is too small to live.</p></blockquote><p>enough + 名词 + to + 动词<br>形容词 + enough + to + 动词</p><blockquote><p>There is enough food to eat.<br>The box is big enought to contain six apples.</p></blockquote><p>On + ing : 一 … 就 …</p><blockquote><p>On seeing the snake,the girl was very frightened.</p></blockquote><p>There is no hope of + ing : 没希望…</p><blockquote><p>There is no hope of seeing him.</p></blockquote><p>feel like + ing : 想要</p><blockquote><p>I feel like eating ice cream now. </p></blockquote><p>have a hard time + ing : 做..艰难</p><blockquote><p>They have a hard time solving the problem themselves.</p></blockquote><h2 id="现在分词-过去分词"><a href="#现在分词-过去分词" class="headerlink" title="现在分词/过去分词"></a>现在分词/过去分词</h2><p>v+ing可以称为动名词,也可称为现在分词</p><blockquote><p>Writing books is his job.(动名词)</p></blockquote><blockquote><p>He is writing a book.(现在分词)</p></blockquote><p>动词的p.p.形式可称为动词的过去分词,用在完成时和被动语态当中</p><blockquote><p>He has witten the homework.(完成时)</p></blockquote><blockquote><p>The homework is written. (被动)</p></blockquote><p>分词句是包含现在分词或过去分词的分句</p><blockquote><p>The students went out of the classroom, laughing and talking.</p></blockquote><blockquote><p>Accompanied by his friend, he went to the railwawy station.(伴随他的朋友,…)</p></blockquote><h2 id="原形不定式"><a href="#原形不定式" class="headerlink" title="原形不定式"></a>原形不定式</h2><h3 id="使役动词"><a href="#使役动词" class="headerlink" title="使役动词"></a>使役动词</h3><pre class="line-numbers language-none"><code class="language-none">have , make , let have&#x2F;make&#x2F;let + 宾语 + v&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>表示 “使/让…”</p><blockquote><p>He made me laugh.<br>I let him go.<br>please have him come here.</p></blockquote><pre class="line-numbers language-none"><code class="language-none">get和help做使役动词get + 宾语 + to + vhelp + 宾语 + (to) + v<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>I can’t get anyone to <code>do</code> the work properly.<br>I helped him (to) repair the car.</p></blockquote><pre class="line-numbers language-none"><code class="language-none">have , make , let , get , help  + 宾语 + 过去分词 (让某物&#x2F;人被别人...)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>I must get my hair cut.<br>He couldn’t make himself heard.<br>Can you get the work <code>finished</code> in time?</p></blockquote><h2 id="感官动词"><a href="#感官动词" class="headerlink" title="感官动词"></a>感官动词</h2><pre class="line-numbers language-none"><code class="language-none">see , watch , observe , notice , hear, smell , taste , feel + 宾语 + 动词原形&#x2F;现在分词<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><ul><li>动词原形, 表示动作的真实性<blockquote><p>I saw him work in the garden yesterday.</p></blockquote></li></ul></li><li><ul><li>现在分词,表示动作的连续性,进行性<blockquote><p>I saw him working in the garden yesterday.</p></blockquote></li></ul></li><li><p>感官动词后可以接过去分词</p><blockquote><p>John saw the man knocked down by the car.(被车子撞倒)</p></blockquote></li></ul><blockquote><p>I heard Sam sent(前面没有be动词) to the hospital</p></blockquote><h2 id="假设"><a href="#假设" class="headerlink" title="假设"></a>假设</h2><h3 id="只单纯表示条件"><a href="#只单纯表示条件" class="headerlink" title="只单纯表示条件"></a>只单纯表示条件</h3><p>条件状语从句.用”if”引导条件状语从句,从句为现在时,通常译作”如果…”</p><blockquote><p>If you get up early, you will catch up with the train.<br>(主语为第一人称时, will 改为 shall)</p></blockquote><p>will/shall 等表将来时的词后面接动词原形</p><p>if 引导的条件状语从句,可以放在句首,也可以放在句尾</p><blockquote><p>If you ask him, he will help you.<br>She will be upset if you fail the exam.</p></blockquote><blockquote><p>The cat scratches you if you pull her tail.<br>如果你拉猫的尾巴,他就会抓你 (经常反复发生)</p></blockquote><blockquote><p>The cat will scratch you if you pull her tail.<br>(将会发生)</p></blockquote><h3 id="与现在事实相反的虚拟语气"><a href="#与现在事实相反的虚拟语气" class="headerlink" title="与现在事实相反的虚拟语气"></a>与现在事实相反的虚拟语气</h3><p>If 从句是一种虚拟的条件或假设,和现在的事实相反的.</p><pre class="line-numbers language-none"><code class="language-none">从句: 动词过去式(be 用 were) (if 后面的句子为从句)主句: would &#x2F; could &#x2F; should &#x2F; might + 动词原形<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>If I <code>were</code> you , I would join them.<br>She would come with you if you invited her.</p></blockquote><h3 id="与过去事实相反的虚拟语气"><a href="#与过去事实相反的虚拟语气" class="headerlink" title="与过去事实相反的虚拟语气"></a>与过去事实相反的虚拟语气</h3><p>IF 从句是一种虚拟的条件或假设,和过去事实相反的.</p><pre class="line-numbers language-none"><code class="language-none">从句: had + 动词过去分词主句: would &#x2F; could &#x2F; should &#x2F; might + have + 动词过去分词<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>If I had got there earlier, I should have met her.<br>If he had taken my advice, he would not have made  such a mistake.<br>If there had been a heavy snow, we should not have gone skating.</p></blockquote><h3 id="wish-as-if-过去时-过去完成时"><a href="#wish-as-if-过去时-过去完成时" class="headerlink" title="wish / as if + 过去时/过去完成时"></a>wish / as if + 过去时/过去完成时</h3><h4 id="wish"><a href="#wish" class="headerlink" title="wish"></a>wish</h4><p>wish 后面的从句,译为:<br>“希望…就好了”,是不可能实现的假设</p><ul><li><p>与现在事实相反愿望</p><blockquote><p>I wish I were as tall as you. (一般过去时)</p></blockquote></li><li><p>与过去事实相反愿望</p><blockquote><p>He wished he hadn’t said that. (过去完成时)</p></blockquote></li><li><p>将来不大可能实现的愿望</p><blockquote><p>I wish it would rain tomorrow. (would / shoulld / could)</p></blockquote></li></ul><h4 id="as-if"><a href="#as-if" class="headerlink" title="as if"></a>as if</h4><p>as if , 翻译为”看起来好像…”</p><ul><li><p>从句表示与现在事实相反</p><blockquote><p>You look as if you didn’t care.</p></blockquote></li><li><p>从句表示与过去事实相反</p><blockquote><p>He talks about Rome as if he had been there before.</p></blockquote></li><li><p>从句表示与将来事实相反</p><blockquote><p>He opened his mouth as if he would say something.</p></blockquote></li></ul><h2 id="定语从句"><a href="#定语从句" class="headerlink" title="定语从句"></a>定语从句</h2><p>在句中做定语,修饰一个名词或代词,被修饰的名词,叫先行词.其后的从句就是定语从句,由关系词引出</p><h3 id="关系代词"><a href="#关系代词" class="headerlink" title="关系代词"></a>关系代词</h3><p>That , who , which , whom(宾格) , whose </p><blockquote><p>The girl whom/that I spoke to is my cousin<br>使用 whom 的原因: I spoke to 缺少 宾语</p></blockquote><p>先行词时人的话用 that , who , whom, whose 来引导定语从句</p><ul><li>whom 在从句中做宾语</li><li>who 和 that 在从句中既可以做主语也可以做宾语</li></ul><blockquote><p>They are the people that/who were seen yesterday<br>They are the people whom/that/who I saw yesterday.<br>They are the people whose wallets were lost yesterday.</p></blockquote><p>先行词时动物/事物的话,用which,that,<code>whose</code>来引导定语从句.<br>which , that 在从句中做主语和宾语,做宾语可以省略</p><blockquote><p>He came back for the book which/that he had forgotten.<br>He came back for the book which/that was on the desk.<br>This is the chair whose legs were broken.</p></blockquote><h3 id="关系副词"><a href="#关系副词" class="headerlink" title="关系副词"></a>关系副词</h3><p>when  where , why </p><blockquote><p>We don’t know the reason why he didn’t show up.<br>We’ll put off the picnic untill next week, when the weather may be better.<br>We don’t know the palce where he lives.</p></blockquote><h2 id="宾语从句"><a href="#宾语从句" class="headerlink" title="宾语从句"></a>宾语从句</h2><p>宾语从句: 在句子中起宾语作用的从句<br>从属连词: that , if , whether<br>连接代词: who , whom , whose , what.<br>连接副词: when , where , why , how</p><blockquote><p>He told me (that) he would go to college the next year.<br>He said (that) he was there yesterday.<br>He doesn’t know if/whether he was there.</p></blockquote><blockquote><p>Do you know who has won the game?<br>Do you know whom he likes?<br>Do you know whose book it is?<br>Do you know what he is looking at?</p></blockquote><blockquote><p>He wants to know when the party is.<br>He wants to knwo why they have a party.<br>He wants to knwo how they come.</p></blockquote><h2 id="比较级-最高级-1"><a href="#比较级-最高级-1" class="headerlink" title="比较级/最高级"></a>比较级/最高级</h2><ul><li><p>一般词尾加 er/est<br>hard - harder - the hardest<br>clever - cleverer</p></li><li><p>词尾是不发音的e, 加 r/st<br>nice - nicer - the nicest</p></li><li><p>词尾是辅音 + y 的双音节时, 去掉 y 加 ier/iest<br>dry - drier - the driest</p></li><li><p>以一个辅音结尾的重读闭音节时,双写最后一个字母,加 er/est<br>hot - hotter - the hottest</p></li><li><p>多音节和双音节,在形容词和副词前加<br>more - the most<br>less - the least<br>interesting  - more/less interesting   - the most / the least interesting</p></li><li><p>不规则<br>good - better - the best<br>many - more - the most<br>little  - less - the least</p></li></ul><blockquote><p>The book is more expensive than the pen.<br>Her English is better than his.<br>The book is the most expensive of the three.</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 英文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nmap笔记</title>
      <link href="/2020/01/09/nmap-bi-ji/"/>
      <url>/2020/01/09/nmap-bi-ji/</url>
      
        <content type="html"><![CDATA[<h2 id="help"><a href="#help" class="headerlink" title="help"></a>help</h2><p>我们在终端输入 <code>nmap -h</code> 查看使用方法<br>使用方法如下:</p><p><code>nmap [Scan Type(s)] [Options] &#123;target specification&#125;</code></p><p>中括号内容代表可选,花括号是必填</p><p>这个选项内容可以是:</p><ul><li>hostnames，譬如: <code>scanme.nmap.org</code> <code>microsoft.com/24</code></li><li>IP addresses, 譬如: <code>192.168.1.1</code> <code>10.0.0-255.1-254</code></li><li><code>iL &lt;inputfilename&gt;</code>， 可以从文件导入目标，文件一行一个地址</li></ul><h2 id="扫描常见例子"><a href="#扫描常见例子" class="headerlink" title="扫描常见例子"></a>扫描常见例子</h2><p><code>nmap -sP 192.168.2.0/24</code></p><p>大致输出如下：</p><pre class="line-numbers language-none"><code class="language-none">root@raspberrypi:~# nmap -sP 192.168.2.0&#x2F;24Starting Nmap 7.70 ( https:&#x2F;&#x2F;nmap.org ) at 2019-12-25 11:48 CSTNmap scan report for phicomm.me (192.168.2.1)Host is up (0.00051s latency).MAC Address: FC:7C:02:72:60:8F (Unknown)...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>探测C段存活主机，可以用 <code>|grep up</code> 过滤存活的主机</p><p><code>nmap -sS 1.1.1.1-30 -p 80</code></p><p>SYN扫描，指定IP范围指定端口。</p><p><code>nmap -sV 1.1.1.1 -p 1-65535</code></p><p>探测端口的服务和版本</p><p><code>nmap -O 1.1.1.1 或 nmap -A 1.1.1.1</code></p><p>探测操作系统类型和版本</p><p><code>nmap -sL 192.168.2.0/24</code></p><p>简单扫描192.168.2 这个IP段</p><p><code>nmap -sS -O target.example.com/24</code></p><p>发起对target.example.com所在网络上的所有255个IP地址的秘密SYN扫描。同时还探测每台主机操作系统的指纹特征。需要root权限。</p><p><code>nmap -v target.example.com</code></p><p>扫描主机target.example.com的所有TCP端口。-v打开冗余模式。</p><p><code>nmap -sX -p 22,53,110,143,4564 128.210.*.1-127</code></p><p>对B类IP地址128.210中255个可能的8位子网的前半部分发起圣诞树扫描。确定这些系统是否打开了sshd、DNS、pop3d、imapd和4564端口。注意圣诞树扫描对Micro$oft的系统无效，因为其协议栈的TCP层有缺陷。</p><hr><p>参考文章</p><blockquote><p><a href="https://blog.csdn.net/qq_41876188/article/details/88926938">https://blog.csdn.net/qq_41876188/article/details/88926938</a></p></blockquote><h2 id="扫描参数"><a href="#扫描参数" class="headerlink" title="扫描参数"></a>扫描参数</h2><ul><li><p>-r: 不进行端口随机打乱的操作（如无该参数，nmap会将要扫描的端口以随机顺序方式扫描，以让nmap的扫描不易被对方防火墙检测到）</p></li><li><p><code>--top-ports</code> :扫描开放概率最高的number个端口（nmap的作者曾经做过大规模地互联网扫描，以此统计出网络上各种端口可能开放的概率。以此排列出最有可能开放端口的列表，具体可以参见文件：nmap-services。默认情况下，nmap会扫描最有可能的1000个TCP端口）</p></li><li><p>-v :冗余模式。强烈推荐使用这个选项，它会给出扫描过程中的详细信息。使用这个选项，你可以得到事半功倍的效果。使用-d选项可以得到更加详细的信息。</p></li><li><p>-resume : 某个网络扫描可能由于control-C或者网络损失等原因被中断，使用这个选项可以使扫描接着以前的扫描进行。logfilename是被取消扫描的日志文件，它必须是可读形式或者机器可以解析的形式。而且接着进行的扫描不能增加新的选项，只能使用与被中断的扫描相同的选项。nmap会接着日志文件中的最后一次成功扫描进行新的扫描。</p></li><li><p>-F : 快速扫描模式，只扫描在nmap-services文件中列出的端口。显然比扫描所有65535个端口要快。 Fast mode – 快速模式，仅扫描TOP 100的端口  </p></li><li><p>-iR : 让nmap自己随机挑选主机进行扫描。</p></li><li><p>-e : 告诉nmap使用哪个接口发送和接受数据包。nmap能够自动对此接口进行检测，如果无效就会告诉你。</p></li><li><p>-S <IP_Address>  在一些情况下，nmap可能无法确定你的源地址(nmap会告诉你)。在这种情况下，可以使用这个选项给出你的IP地址。在欺骗扫描时，也使用这个选项。使用这个选项可以让目标认为是其它的主机对自己进行扫描。</p></li></ul><p>-sn: Ping Scan - disable port scan</p><p>-p: 指定待扫描的端口。用法如下</p><p>实例: <code>-p22</code> <code>-p1-65535</code> <code>-p U:53,111,137,T:21-25,80,139,8080,S:9</code>（其中T代表TCP协议、U代表UDP协议、S代表SCTP协议）</p><h2 id="扫描类型"><a href="#扫描类型" class="headerlink" title="扫描类型"></a>扫描类型</h2><ul><li><p>-sT : TCP connect()扫描：这是最基本的TCP扫描方式.这项技术最大的优点是，你勿需root权限。任何UNIX用户都可以自由使用这个系统调用。这种扫描很容易被检测到，在目标主机的日志中会记录大批的连接请求以及错误信息</p></li><li><p>-sS : TCP同步扫描(TCP SYN)：因为不必全部打开一个TCP连接，所以这项技术通常称为半开扫描(half-open).你可以发出一个TCP同步包(SYN)，然后等待回应。如果对方返回SYN|ACK(响应)包就表示目标端口正在监听；如果返回RST数据包，就表示目标端口没有监听程序；如果收到一个SYN|ACK包，源主机就会马上发出一个RST(复位)数据包断开和目标主机的连接，这实际上有我们的操作系统内核自动完成的。这项技术最大的好处是，很少有系统能够把这记入系统日志。不过，你需要root权限来定制SYN数据包。</p></li><li><p>-sF -sX -sN : 秘密FIN数据包扫描、圣诞树(Xmas Tree)、空(Null)扫描模式：即使SYN扫描都无法确定的情况下使用。一些防火墙和包过滤软件能够对发送到被限制端口的SYN数据包进行监视，而且有些程序比如synlogger和courtney能够检测那些扫描。这些高级的扫描方式可以逃过这些干扰。这些扫描方式的理论依据是：关闭的端口需要对你的探测包回应RST包，而打开的端口必需忽略有问题的包(参考RFC 793第64页)。FIN扫描使用暴露的FIN数据包来探测，而圣诞树扫描打开数据包的FIN、URG和PUSH标志。不幸的是，微软决定完全忽略这个标准，另起炉灶。所以这种扫描方式对Windows95/NT无效。不过，从另外的角度讲，可以使用这种方式来分别两种不同的平台。如果使用这种扫描方式可以发现打开的端口，你就可以确定目标注意运行的不是Windows系统。如果使用-sF、-sX或者-sN扫描显示所有的端口都是关闭的，而使用SYN扫描显示有打开的端口，你可以确定目标主机可能运行的是Windwos系统。现在这种方式没有什么太大的用处，因为nmap有内嵌的操作系统检测功能。还有其它几个系统使用和windows同样的处理方式，包括Cisco、BSDI、HP/UX、MYS、IRIX。在应该抛弃数据包时，以上这些系统都会从打开的端口发出复位数据包。</p></li><li><p>-sP : ping 扫描：有时你只是想知道此时网络上哪些主机正在运行。通过向你指定的网络内的每个IP地址发送ICMP echo请求数据包，nmap就可以完成这项任务。如果主机正在运行就会作出响应。不幸的是，一些站点例如：microsoft.com阻塞ICMP echo请求数据包。然而，在默认的情况下nmap也能够向80端口发送TCP ack包，如果你收到一个RST包，就表示主机正在运行。nmap使用的第三种技术是：发送一个SYN包，然后等待一个RST或者SYN/ACK包。对于非root用户，nmap使用connect()方法。</p></li></ul><p>在默认的情况下(root用户)，nmap并行使用ICMP和ACK技术。</p><p>注意，nmap 在任何情况下都会进行ping扫描，只有目标主机处于运行状态，才会进行后续的扫描。如果你只是想知道目标主机是否运行，而不想进行其它扫描，才会用到这个选项。</p><ul><li><p>-sU: UDP扫描</p></li><li><p>-sA : ACK扫描：这项高级的扫描方法通常用来穿过防火墙的规则集。通常情况下，这有助于确定一个防火墙是功能比较完善的或者是一个简单的包过滤程序，只是阻塞进入的SYN包。</p></li><li><p>-sW: 对滑动窗口的扫描</p></li><li><p>-sR: RPC扫描</p></li><li><p>-O: 这个选项激活对TCP/IP指纹特征(fingerprinting)的扫描，获得远程主机的标志。换句话说，nmap使用一些技术检测目标主机操作系统网络协议栈的特征。nmap使用这些信息建立远程主机的指纹特征，把它和已知的操作系统指纹特征数据库做比较，就可以知道目标主机操作系统的类型。</p></li></ul><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><h3 id="主机发现"><a href="#主机发现" class="headerlink" title="主机发现"></a>主机发现</h3><p>主机发现（Host Discovery），即用于发现目标主机是否在线（Alive，处于开启状态）</p><p>默认情况下，Nmap会发送四种不同类型的数据包来探测目标主机是否在线。</p><ol><li>ICMP echo request</li><li>a TCP SYN packet to port 443</li><li>a TCP ACK packet to port 80</li><li>an ICMP timestamp request</li></ol><p>依次发送四个报文探测目标机是否开启。只要收到其中一个包的回复，那就证明目标机开启。使用四种不同类型的数据包可以避免因防火墙或丢包造成的判断错误。</p><p>-sn: Ping Scan 只进行主机发现，不进行端口扫描。</p><p>-Pn: 将所有指定的主机视作开启的，跳过主机发现的过程。</p><p>-PS/PA/PU/PY[portlist]: 使用TCP SYN/ACK或SCTP INIT/ECHO方式进行发现。</p><p>-PE/PP/PM: 使用ICMP echo, timestamp, and netmask 请求包发现主机。-PO[protocollist]: 使用IP协议包探测对方主机是否开启。</p><p>-n/-R: -n表示不进行DNS解析；-R表示总是进行DNS解析。</p><p><code>--dns-servers &lt;serv1[,serv2],...&gt;</code>: 指定DNS服务器。</p><p><code>--system-dn</code>s: 指定使用系统的DNS服务器</p><p><code>--traceroute</code>: 追踪每个路由节点其中，比较常用的使用的是-sn，表示只单独进行主机发现过程；-Pn表示直接跳过主机发现而进行端口扫描等高级操作（如果已经确知目标主机已经开启，可用该选项）；-n，如果不想使用DNS或reverse DNS解析，那么可以使用该选项。</p><h3 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h3><p>默认情况下，Nmap 会扫描1000个最有可能开放的TCP端口。</p><p>Nmap通过探测将端口划分为6个状态：</p><ul><li>open：端口是开放的。</li><li>closed：端口是关闭的。</li><li>filtered：端口被防火墙IDS/IPS屏蔽，无法确定其状态。</li><li>unfiltered：端口没有被屏蔽，但是否开放需要进一步确定。</li><li>open|filtered：端口是开放的或被屏蔽。</li><li>closed|filtered ：端口是关闭的或被屏蔽。</li></ul><h4 id="TCP-SYN-scanning"><a href="#TCP-SYN-scanning" class="headerlink" title="TCP SYN scanning"></a>TCP SYN scanning</h4><p>这是Nmap默认的扫描方式，通常被称作半开放扫描（Half-open scanning）。该方式发送SYN到目标端口，如果收到SYN/ACK回复，那么判断端口是开放的；如果收到RST包，说明该端口是关闭的。如果没有收到回复，那么判断该端口被屏蔽（Filtered）。因为该方式仅发送SYN包对目标主机的特定端口，但不建立的完整的TCP连接，所以相对比较隐蔽，而且效率比较高，适用范围广。</p><h4 id="TCP-connect-scanning"><a href="#TCP-connect-scanning" class="headerlink" title="TCP connect scanning"></a>TCP connect scanning</h4><p>TCP connect方式使用系统网络API connect向目标主机的端口发起连接，如果无法连接，说明该端口关闭。该方式扫描速度比较慢，而且由于建立完整的TCP连接会在目标机上留下记录信息，不够隐蔽。所以，TCP connect是TCP SYN无法使用才考虑选择的方式。</p><h4 id="TCP-ACK-scanning"><a href="#TCP-ACK-scanning" class="headerlink" title="TCP ACK scanning"></a>TCP ACK scanning</h4><p>向目标主机的端口发送ACK包，如果收到RST包，说明该端口没有被防火墙屏蔽；没有收到RST包，说明被屏蔽。该方式只能用于确定防火墙是否屏蔽某个端口，可以辅助TCP SYN的方式来判断目标主机防火墙的状况。</p><h4 id="TCP-FIN-Xmas-NULL-scanning"><a href="#TCP-FIN-Xmas-NULL-scanning" class="headerlink" title="TCP FIN/Xmas/NULL scanning"></a>TCP FIN/Xmas/NULL scanning</h4><p>这三种扫描方式被称为秘密扫描（Stealthy Scan），因为相对比较隐蔽。FIN扫描向目标主机的端口发送的TCP FIN包或Xmas tree包/Null包，如果收到对方RST回复包，那么说明该端口是关闭的；没有收到RST包说明端口可能是开放的或被屏蔽的（open|filtered）。</p><p>其中Xmas tree包是指flags中FIN URG PUSH被置为1的TCP包；NULL包是指所有flags都为(空的?)的TCP包。</p><h4 id="UDP-scanning"><a href="#UDP-scanning" class="headerlink" title="UDP scanning"></a>UDP scanning</h4><p>UDP扫描方式用于判断UDP端口的情况。向目标主机的UDP端口发送探测包，如果收到回复“ICMP port unreachable”就说明该端口是关闭的；如果没有收到回复，那说明UDP端口可能是开放的或屏蔽的。因此，通过反向排除法的方式来断定哪些UDP端口是可能出于开放状态。</p><h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><p><code>nmap –sS –sU –T4 –top-ports 300 192.168.1.100</code></p><p>参数-sS表示使用TCP SYN方式扫描TCP端口；-sU表示扫描UDP端口；-T4表示时间级别配置4级；<code>--top-ports 300</code>表示扫描最有可能开放的300个端口（TCP和UDP分别有300个端口）</p><h3 id="版本检测"><a href="#版本检测" class="headerlink" title="版本检测"></a>版本检测</h3><p><code>-sV</code>: 指定让Nmap进行版本侦测  </p><p><code>--version-light</code>: 指定使用轻量侦测方式 (intensity 2)</p><p><code>--version-all</code>: 尝试使用所有的probes进行侦测 (intensity 9)</p><p><code>--version-trace</code>: 显示出详细的版本侦测过程信息。</p><h3 id="OS-侦测"><a href="#OS-侦测" class="headerlink" title="OS 侦测"></a>OS 侦测</h3><p>具体实现方式如下：</p><ol><li>Nmap内部包含了2600多已知系统的指纹特征（在文件nmap-os-db文件中）。将此指纹数据库作为进行指纹对比的样本库。</li><li>分别挑选一个open和closed的端口，向其发送经过精心设计的TCP/UDP/ICMP数据包，根据返回的数据包生成一份系统指纹。</li><li>将探测生成的指纹与nmap-os-db中指纹进行对比，查找匹配的系统。如果无法匹配，以概率形式列举出可能的系统。</li></ol><p>-O: 指定Nmap进行OS侦测。<br><code>--osscan-limit</code>: 限制Nmap只对确定的主机的进行OS探测（至少需确知该主机分别有一个open和closed的端口）。<br><code>--osscan-guess</code>: 大胆猜测对方的主机的系统类型。由此准确性会下降不少，但会尽可能多为用户提供潜在的操作系统。</p><h3 id="防火墙-ids规避"><a href="#防火墙-ids规避" class="headerlink" title="防火墙/ids规避"></a>防火墙/ids规避</h3><p>防火墙与IDS规避为用于绕开防火墙与IDS（入侵检测系统）的检测与屏蔽，以便能够更加详细地发现目标主机的状况。</p><p>Nmap提供了多种规避技巧，通常可以从两个方面考虑规避方式：数据包的变换（Packet Change）与时序变换（Timing Change）。</p><h4 id="规避原理"><a href="#规避原理" class="headerlink" title="规避原理"></a>规避原理</h4><h5 id="分片（Fragmentation）"><a href="#分片（Fragmentation）" class="headerlink" title="分片（Fragmentation）"></a>分片（Fragmentation）</h5><p>将可疑的探测包进行分片处理（例如将TCP包拆分成多个IP包发送过去），某些简单的防火墙为了加快处理速度可能不会进行重组检查，以此避开其检查。</p><h5 id="IP诱骗（IP-decoys）"><a href="#IP诱骗（IP-decoys）" class="headerlink" title="IP诱骗（IP decoys）"></a>IP诱骗（IP decoys）</h5><p>在进行扫描时，将真实IP地址和其他主机的IP地址（其他主机需要在线，否则目标主机将回复大量数据包到不存在的主机，从而实质构成了拒绝服务攻击）混合使用，以此让目标主机的防火墙或IDS追踪检查大量的不同IP地址的数据包，降低其追查到自身的概率。注意，某些高级的IDS系统通过统计分析仍然可以追踪出扫描者真实IP地址。</p><h5 id="IP伪装（IP-Spoofing）"><a href="#IP伪装（IP-Spoofing）" class="headerlink" title="IP伪装（IP Spoofing）"></a>IP伪装（IP Spoofing）</h5><p>顾名思义，IP伪装即将自己发送的数据包中的IP地址伪装成其他主机的地址，从而目标机认为是其他主机在与之通信。需要注意，如果希望接收到目标主机的回复包，那么伪装的IP需要位于统一局域网内。另外，如果既希望隐蔽自己的IP地址，又希望收到目标主机的回复包，那么可以尝试使用idle scan或匿名代理（如TOR）等网络技术。</p><h5 id="指定源端口"><a href="#指定源端口" class="headerlink" title="指定源端口"></a>指定源端口</h5><p>某些目标主机只允许来自特定端口的数据包通过防火墙。例如FTP服务器配置为：允许源端口为21号的TCP包通过防火墙与FTP服务端通信，但是源端口为其他端口的数据包被屏蔽。所以，在此类情况下，可以指定Nmap将发送的数据包的源端口都设置特定的端口。</p><h5 id="扫描延时"><a href="#扫描延时" class="headerlink" title="扫描延时"></a>扫描延时</h5><p>某些防火墙针对发送过于频繁的数据包会进行严格的侦查，而且某些系统限制错误报文产生的频率（例如，Solaris 系统通常会限制每秒钟只能产生一个ICMP消息回复给UDP扫描），所以，定制该情况下发包的频率和发包延时可以降低目标主机的审查强度、节省网络带宽。</p><h5 id="其他技术"><a href="#其他技术" class="headerlink" title="其他技术"></a>其他技术</h5><p>Nmap还提供多种规避技巧，比如指定使用某个网络接口来发送数据包、指定发送包的最小长度、指定发包的MTU、指定TTL、指定伪装的MAC地址、使用错误检查和（badchecksum）。</p><p><code>-f; --mtu</code>: 指定使用分片、指定数据包的MTU.  </p><p><code>-D &lt;decoy1,decoy2[,ME],...&gt;</code>: 用一组IP地址掩盖真实地址，其中ME填入自己的IP地址。</p><p><code>-S &lt;IP_Address&gt;</code>: 伪装成其他IP地址</p><p><code>-e &lt;iface&gt;</code>: 使用特定的网络接口</p><p><code>-g/--source-port &lt;portnum&gt;</code>: 使用指定源端口</p><p><code>--data-length &lt;num&gt;</code>: 填充随机数据让数据包长度达到Num。</p><p><code>--ip-options &lt;options&gt;</code>: 使用指定的IP选项来发送数据包。</p><p><code>--ttl &lt;val&gt;</code>: 设置time-to-live时间。</p><p><code>--spoof-mac &lt;mac address/prefix/vendor name&gt;</code>: 伪装MAC地址</p><p><code>--badsum</code>: 使用错误的checksum来发送数据包（正常情况下，该类数据包被抛弃，如果收到回复，说明回复来自防火墙或IDS/IPS）。</p><p><code>nmap -v -F -Pn -D192.168.1.100,192.168.1.102,ME -e eth0 -g 3355 192.168.1.1</code><br>其中，-F表示快速扫描100个端口；<br>-Pn表示不进行Ping扫描；<br>-D表示使用IP诱骗方式掩盖自己真实IP（其中ME表示自己IP）；<br>-e eth0表示使用eth0网卡发送该数据包；<br>-g 3355表示自己的源端口使用3355；<br>192.168.1.1是被扫描的目标IP地址。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://github.com/erasin/notes/blob/master/linux/safe/nmap.md">https://github.com/erasin/notes/blob/master/linux/safe/nmap.md</a></p><h2 id="自己常用的"><a href="#自己常用的" class="headerlink" title="自己常用的"></a>自己常用的</h2><p><code>nmap -sP -iL /home/smbShare/PCName.txt  -oN /home/smbShare/outfile.txt</code></p><ul><li><code>iL</code> : 输入文件</li><li><code>oN</code> : 把结果输出到文件</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 网络 </tag>
            
            <tag> 安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用网络工具合集</title>
      <link href="/2020/01/08/chang-yong-wang-luo-gong-ju-he-ji/"/>
      <url>/2020/01/08/chang-yong-wang-luo-gong-ju-he-ji/</url>
      
        <content type="html"><![CDATA[<h2 id="OSI七层模型"><a href="#OSI七层模型" class="headerlink" title="OSI七层模型"></a>OSI七层模型</h2><table><thead><tr><th>层次</th><th>名称</th><th>协议举例</th></tr></thead><tbody><tr><td>7</td><td>应用层</td><td>比如: HTTP DNS FTP SMTP POP3 SSH…(这一层的协议非常多,与用户直接打交道,大多在这层)</td></tr><tr><td>6</td><td>表示层</td><td>(这一层的协议比较少见)</td></tr><tr><td>5</td><td>会话层</td><td>Sock5 PPTP NetBIOS 管道命名(常用于:进程间通讯)</td></tr><tr><td>4</td><td>传输层</td><td>TCP(传输控制协议) UDP(数据报协议)</td></tr><tr><td>3</td><td>网络层</td><td>IP(互联网协议) ICMP(互联网控制消息协议) IGMP(互联网组管理协议) IPsec(常用于VPN)</td></tr><tr><td>2</td><td>链路层</td><td>MAC ARP&amp;RARP SLIP&amp;PPP&amp;PPPOE(常用于拨号上网) L2TP</td></tr><tr><td>1</td><td>物理层</td><td>USB协议 蓝牙协议 RS-232(串口标准协议)</td></tr></tbody></table><h2 id="netcat"><a href="#netcat" class="headerlink" title="netcat"></a>netcat</h2><h3 id="netcat-简介"><a href="#netcat-简介" class="headerlink" title="netcat 简介"></a>netcat 简介</h3><p>简称 <code>nc</code> ， 俗称网猫， 英文全称为 network communication</p><p>nc 本身很小，所以有一些衍生的版本，比如”OpenBSD netcat” ，很多主流的 linux 发行版自带这个工具<br><strong>以下的教程均以这个衍生版作为介绍</strong></p><h3 id="命令简介"><a href="#命令简介" class="headerlink" title="命令简介"></a>命令简介</h3><p><code>nc 命令选项 主机 端口</code></p><ul><li>命令选项:这部分有很多个选项</li><li>主机:可以没有,可能以”点分十进制”形式表示,也可能以”域名”形式表示</li><li>端口:这部分可能没有,可能是单个端口,也可能是端口范围(端口范围如右表示:  1-1024)</li></ul><h3 id="命令选项"><a href="#命令选项" class="headerlink" title="命令选项"></a>命令选项</h3><p>nc 提供了一大堆【命令行选项】，分别对应它提供的功能。每个选项都是“单字母”滴。有些选项需要带【选项值】，有些不需要。<br>你要使用的选项都放在 nc 这个命令之后，每个选项前面要有一个【半角减号】，选项之间以空格分开。</p><p>在下面这个例子中，分别用到了三个选项（l、p、v），其中 12345 是选项 p 所带的【选项值】</p><p><code>nc -l -p 12345 -v</code></p><p>可以使用 <code>nc -h</code> 来查看所有的命令选项</p><ul><li>h: 输出帮助信息</li><li>v: 显示详细的信息输出</li><li>n: 对命令行中的”主机”,<strong>不</strong>进行域名解析 ,只对”点分格式”的ip起作用,对域名的形式,<strong>不能</strong>使用该选项</li><li>p: 指定”端口号”</li><li>l: 开启”监听模式”,nc作为**服务端”.如不使用该选项,nc默认作为客户端</li><li>u: 使用UDP协议,如不加该选项,nc默认使用TCP</li><li>w: 设置连接的超时间隔(N秒)</li><li>q: 让nc 延时(N秒)再退出</li><li>z: 开启”zero-I/O模式”,该选项仅用于”端口扫描”</li><li>k: 配合 -l 选项使用,可以重复接受客户端连接</li><li>X: 指定代理的类型</li><li>x: 以 IP:port的格式指定代理的位置</li><li>e: 启动某个进程,把该进程的”标准输入输出”与网络通讯对接</li></ul><h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><h4 id="网络诊断-测试某个远程主机的【监听】端口是否可达"><a href="#网络诊断-测试某个远程主机的【监听】端口是否可达" class="headerlink" title="(网络诊断)测试某个远程主机的【监听】端口是否可达"></a>(网络诊断)测试某个远程主机的【监听】端口是否可达</h4><p>经常有这种需求，要判断某个主机的监听端口是否能连上。<br>导致监听端口【无法】，通常有两种原因：</p><ul><li>其一，这个监听端口根本就【没开启】；</li><li>其二，监听端口虽然开启，但是被防火墙阻拦了。</li></ul><p>对第1个原因，（如果你能在该主机上运行命令）可以直接用 netstat 这个命令查看监听端口是否开启<br>但对于第2个原因，netstat 就用不上了。这时候就可以用 nc 来帮你搞定。</p><p>用如下命令可以测试某个 IP 地址（x.x.x.x）上的某个监听端口（xx）是否开启。<br><code>nc -nv x.x.x.x xx</code></p><p>在测试链接的时候，如果你【没】使用 -w 这个超时选项，默认情况下 nc 会等待很久，然后才告诉你连接失败。<br>如果你所处的网络环境稳定且高速（比如：局域网内），那么，你可以追加“-w选项”，设置一个比较小的超时值。在下面的例子中，超时值设为3秒。</p><p><code>nc -nv -w 3 x.x.x.x xx</code></p><p>只需再上面的命令添加 <code>-u</code> 选项,即可测试 UDP 的环境</p><h4 id="网络诊断-判断防火墙是否“允许-or-禁止”某个端口"><a href="#网络诊断-判断防火墙是否“允许-or-禁止”某个端口" class="headerlink" title="(网络诊断)判断防火墙是否“允许 or 禁止”某个端口"></a>(网络诊断)判断防火墙是否“允许 or 禁止”某个端口</h4><p>前一个章节（招数1）的场景是——已经有某个网络软件开启了监听端口，然后用 nc 测试端口是否可达。<br>现在换另一个场景：<br>假设你正在配置防火墙规则，禁止 TCP 的 8080 端口对外监听。那么，你如何【验证】自己的配置是 OK 滴？<br>更进一步说：如果当前【没有】任何软件开启 8080 这个监听端口，你如何判断：该端口号是否会被防火墙阻拦？<br>为了叙述方便，设想如下场景：</p><p>有两台主机——“主机C”充当客户端，“主机S”充当服务端。<br>然后要判断“主机S”上的防火墙是否会拦截其它主机对 8080 TCP 端口的连接。</p><p>在 “主机S” 上运行 nc，让它在 8080 端口，命令如下：</p><p><code>nc -lv -p 8080</code></p><p>然后在“主机C”上运行 nc，测试“主机S”上的 8080 端口是否可达(参考上一节)</p><p>在默认情况下，nc 开启 listen 模式充当服务端，在接受【第一次】客户端连接之后，就会把监听端口关闭。<br>为啥会这样捏？因为当年设计 nc 更多的是作为某种网络诊断/配置工具，并【不是】真拿它当服务端软件来用的。<br>如果你想要让 nc 始终监听模式，使之能【重复】接受客户端发起的连接，可以追加 -k 选项。</p><h4 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h4><p>不论是 TCP 还是 UDP，协议规定的【有效】端口号范围都是：1 ~ 65535</p><p><code>nc -znv x.x.x.x 1-1024</code></p><p><code>-z</code>参数意思是：开启“zero-I/O 模式”。该模式指的是：nc 只判断某个监听端口是否能连上，连上后【不】与对端进行数据通讯。</p><p><code>nc -znv x.x.x.x 1-1024  2&gt;&amp;1 | grep succeeded</code></p><p>由于“-v 选项”产生的输出位于【stderr】，上述命令中的 2&gt;&amp;1 用来把【stderr】合并到【stdout】<br>grep 命令用来进行【过滤】。对于 Windows 系统，默认【没有】grep 命令，需改用 find 命令过滤。</p><p><strong>同时运行多个 nc，分别扫描不同的端口范围。可以提高效率</strong></p><h4 id="通过代理"><a href="#通过代理" class="headerlink" title="通过代理"></a>通过代理</h4><p>nc -X 5 -x 127.0.0.1:9050 -q 3 -v program-think.blogspot.com 443</p><p><code>-X</code> : 代理的类型(5: Socks5; 4: socks4; connect:connect型的HTTP代理)<br><code>-x</code> : 代理的地址和端口</p><h4 id="信息收集-用-nc-探测“服务器类型”和“软件版本”（以-SSH-为例）"><a href="#信息收集-用-nc-探测“服务器类型”和“软件版本”（以-SSH-为例）" class="headerlink" title="(信息收集)用 nc 探测“服务器类型”和“软件版本”（以 SSH 为例）"></a>(信息收集)用 nc 探测“服务器类型”和“软件版本”（以 SSH 为例）</h4><p><code>echo &quot;EXIT&quot; | nc -vq 5 服务器域名 22</code></p><h4 id="获取网页代码"><a href="#获取网页代码" class="headerlink" title="获取网页代码"></a>获取网页代码</h4><p><code>echo -e &quot;GET /index.html HTTP/1.0\r\n\r\n&quot; | nc-tor -vq 5 服务器域名 端口</code></p><p>可以把 nc 抓下来的 HTML 源代码，（在命令行中用“大于号”）重定向到某个 HTML 文件，然后就可以用你本机的浏览器阅读之。</p><h4 id="系统管理-用-nc-传输文件"><a href="#系统管理-用-nc-传输文件" class="headerlink" title="(系统管理)用 nc 传输文件"></a>(系统管理)用 nc 传输文件</h4><p>为了叙述方便，假设你有两台主机 A 与 B，你要把 A 主机上的文件 file1 传输到 B 主机上，保存为 file2</p><p>你先在【接收端】（B 主机）运行如下命令（其中的 xxx 是端口号)</p><p><code>nc -l -p xxx file2</code></p><p>然后在【发送端】（A 主机）运行如下命令</p><p><code>nc x.x.x.x xxx &lt; file1</code></p><p>第二条命令中的 xxx 是端口号，要与第一条命令中的端口号相同；第二条命令中的 x.x.x.x 是【主机 B】的 IP 地址。</p><h4 id="使用nc-复制整个硬盘"><a href="#使用nc-复制整个硬盘" class="headerlink" title="使用nc 复制整个硬盘"></a>使用nc 复制整个硬盘</h4><p>假设你要把 A 主机 /dev/sda 磁盘的【原始数据】整个复制到 B 主机的 /dev/sdb 磁盘。</p><p>你先在【接收端】（B 主机）运行如下命令（其中的 xxx 是端口号）</p><p><code>nc -l -p xxx | dd of=/dev/sdb</code></p><p>然后在【发送端】（A 主机）运行如下命令</p><p><code>dd if=/dev/sda | nc x.x.x.x xxx</code></p><h3 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h3><p>请查看源博客</p><p><a href="https://program-think.blogspot.com/2019/09/Netcat-Tricks.html">https://program-think.blogspot.com/2019/09/Netcat-Tricks.html</a></p><h2 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h2><h3 id="查看打开的端口"><a href="#查看打开的端口" class="headerlink" title="查看打开的端口"></a>查看打开的端口</h3><p>看到本机开启的【所有】监听端口,Windows执行下方命令</p><p><code>netstat -an | find &quot;LISTEN&quot;</code><br><code>netstat -ano | find &quot;LISTEN&quot;</code></p><p><code>-o</code> 选项可以看到是哪个进程开启的, 如果使用不了,可以用<code>findstr</code> 代替 <code>find</code>.或者在 powershell 里面运行</p><p>对于Linux,可以把 find 替换成  grep ,也是一样的</p><h3 id="windows-命令下的端口转发"><a href="#windows-命令下的端口转发" class="headerlink" title="windows 命令下的端口转发"></a>windows 命令下的端口转发</h3><p><code>netsh interface portproxy add v4tov4 listenport=新开的监听端口 listenaddress=新开端口的绑定地址 connectaddress=要转发的地址 connectport=要转发的端口 protocol=tcp</code></p><p><code>netsh interface portproxy delete v4tov4 listenport=新开的监听端口 listenaddress=新开端口的绑定地址</code></p><p>命令举例<br>比方说，俺本地已经运行了 Tor，端口是 8118，绑定在 127.0.0.1<br>如果俺希望建立一个新的端口，端口号是 12345（这个端口号是俺随手编的，你也可以用其它端口号），绑定在 0.0.0.0 上，那么就执行如下命令。然后，发往 12345 端口的数据流就会被转发到 8118 端口。</p><p><code>netsh interface portproxy add v4tov4 listenport=12345 listenaddress=0.0.0.0 connectaddress=127.0.0.1 connectport=8118 protocol=tcp</code></p><h2 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>linux系统中是 traceroute,在MS Windows中为tracert。traceroute通过发送小数据包到目的主机直到其返回，来测量其耗时。一条路径上的每个设备traceroute要测3次。输出结果中包括每次测试的时间(ms)和设备的名称及其IP地址。</p><p><code>traceroute [-dFlnrvx][-f&lt;存活数值&gt;][-g&lt;网关&gt;...][-i&lt;网络界面&gt;][-m&lt;存活数值&gt;][-p&lt;通信端口&gt;][-s&lt;来源地址&gt;][-t&lt;服务类型&gt;][-w&lt;超时秒数&gt;][主机名称或IP地址][数据包大小]</code></p><pre class="line-numbers language-none"><code class="language-none">-d 使用Socket层级的排错功能。-f 设置第一个检测数据包的存活数值TTL的大小。-F 设置勿离断位。-g 设置来源路由网关，最多可设置8个。-i 使用指定的网络界面送出数据包。-I 使用ICMP回应取代UDP资料信息。-m 设置检测数据包的最大存活数值TTL的大小。-n 直接使用IP地址而非主机名称。可以加快运行速度-p 设置UDP传输协议的通信端口。-r 忽略普通的Routing Table，直接将数据包送到远端主机上。-s 设置本地主机送出数据包的IP地址。-t 设置检测数据包的TOS数值。-v 详细显示指令的执行过程。-w 设置等待远端主机回报的时间。-x 开启或关闭数据包的正确性检验。-q 默认数值是3 , 表示向目标发送3个数据包.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>一台主机有时会看到一些行以星号表示，出现这样的情况，可能是防火墙封掉了ICMP的返回信息，所以得不到什么相关的数据包返回数据。</p><h2 id="Linux-iproute-工具"><a href="#Linux-iproute-工具" class="headerlink" title="Linux iproute 工具"></a>Linux iproute 工具</h2><p><img src="1.png"></p><p>iproute2套件里提供了许多增强功能的命令，ip命令即是其中之一。</p><h3 id="help-说明"><a href="#help-说明" class="headerlink" title="help 说明"></a>help 说明</h3><pre class="line-numbers language-none"><code class="language-none">Usage: ip [ OPTIONS ] OBJECT &#123; COMMAND | help &#125;       where  OBJECT :&#x3D; &#123; link | address | addrlabel | route | rule | neigh | ntable |                   tunnel | tuntap | maddress | mroute | mrule | monitor | xfrm |                   netns | l2tp | fou | macsec | tcp_metrics | token | netconf | ila |                   vrf | sr &#125;       OPTIONS :&#x3D; &#123; -V[ersion] | -s[tatistics] | -d[etails] | -r[esolve] |                    -h[uman-readable] | -iec | -j[son] | -p[retty] |                    -f[amily] &#123; inet | inet6 | ipx | dnet | mpls | bridge | link &#125; |                    -4 | -6 | -I | -D | -M | -B | -0 |                    -l[oops] &#123; maximum-addr-flush-attempts &#125; | -br[ief] |                    -o[neline] | -t[imestamp] | -ts[hort] | -b[atch] [filename] |                    -rc[vbuf] [size] | -n[etns] name | -a[ll] | -c[olor]&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>常用OBJECT的取值含义如下：</p><ul><li>link：网络设备</li><li>address：设备上的协议（IP或IPv6）地址</li><li>addrlabel：协议地址选择的标签配置</li><li>route：路由表条目</li><li>rule：路由策略数据库中的规则</li></ul><p>常用OPTIONS的取值含义如下：</p><ul><li>-V，-Version：显示指令版本信息</li><li>-s，-stats，statistics：输出详细信息</li><li>-h，-human，-human-readable：输出人类可读的统计信息和后缀</li><li>-o，-oneline：将每条记录输出到一行，用‘\’字符替换换行符</li></ul><p>command设置针对指定对象执行的操作，它和对象的类型有关。一般情况下，ip支持对象的增加(add)、删除(delete)和展示(show或list)。有些对象不支持这些操作，或者有其它的一些命令。对于所有的对象，用户可以使用help命令获得帮助。这个命令会列出这个对象支持的命令和参数的语法。如果没有指定对象的操作命令，ip会使用默认的命令。一般情况下，默认命令是list，如果对象不能列出，就会执行help命令。</p><p>arguments是命令的一些参数，它们倚赖于对象和命令。ip支持两种类型的参数：flag和parameter。flag由一个关键词组成；parameter由一个关键词加一个数值组成。为了方便，每个命令都有一个可以忽略的默认参数。例如，参数dev是ip link命令的默认参数，因此ip link ls eth0等于ip link ls dev eth0。命令的默认参数将使用default标出。</p><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p><code>ip -4 a</code><br>只查看ipv4的信息</p><p><code>ip -4 a show wlan0</code></p><p><code>ip link ls up</code><br>查看启动的网卡</p><p><code>ip link set eth0 up</code><br>说明：启用被禁用的网卡</p><p><code>ip link set eth0 down</code><br>说明：禁用网卡</p><p><code>ip link set mtu 9000 dev eth0</code><br><code> ip addr add 2.2.2.2/16 dev eth0</code><br>给网卡增加一个地址</p><p><code>ip route show</code></p><p>输出内容第一条是默认的路由，我们可以根据我们的需要改动它<br>metric 1002：跳跃计数，确定网关的优先级，默认20，数值越小优先级越高<br>proto kernel：该路由的协议，主要有redirect，kernel，boot，static，ra等，其中kernel指的是直接由核心判断自动设定</p><p><code>ip route add default via 192.168.0.150/24</code><br>说明：所有的网络数据包都通过192.168.0.150来转发，而不是以前的默认路由</p><p><code>ip route add 172.16.32.32 via 192.168.0.150/24 dev enp0s3</code><br>说明：修改特定网卡的默认路由</p><p><code>ip route del 172.17.160.0/20</code><br>说明：删除路由</p><p><code>ip route add 192.168.1.0/24 dev eth0</code><br>要路由的所有流量从 eth0 网卡的192.168.1.254网关通过</p><p><code>ip route flush cache</code><br>说明：刷新路由表</p><p><code>ip -s link</code></p><p>说明:反应网络通信的质量<br>输出重点内容详解：</p><ul><li>RX：表示接收</li><li>TX：表示发送</li><li>bytes：接收/发送的字节数</li><li>packets：接收/发送的包数</li><li>errors：接收/发送的带有错误的包总数</li><li>dropped：由于处理资源不足导致接收/发送的丢弃的包数</li><li>overrun：因接收溢出（环形缓冲区）导致丢失的包；通常如果接口溢出，则表示内核中存在严重问题，或者说服务器上该网络设备的处理设备太慢</li><li>mcast：接收到的多播包数</li><li>carrier：因数据链路错误导致发送失败的包数</li><li>collsns：因在网络上发送冲突而导致的失败数</li></ul><p>ip link不支持tab键补齐</p><p><code>ip route add 目标主机 via 网关</code></p><p>1）添加到达目标主机的路由记录</p><p><code>ip route add 目标网络/掩码 via 网关</code></p><p>2）添加到达网络的路由记录</p><p>作用域</p><p><code>scope &#123;global|link|host&#125;]</code>：指明作用域</p><ul><li><p>global: 全局可用，即两个接口进来的数据我都可以响应。是默认状态。</p></li><li><p>link: 仅链接可用，进来的数据只有直接相连的那个接口能够响应</p></li><li><p>host: 本机可用，即只能自己访问</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 网络 - Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VBS 入门</title>
      <link href="/2019/10/15/vbs-ru-men/"/>
      <url>/2019/10/15/vbs-ru-men/</url>
      
        <content type="html"><![CDATA[<h2 id="声明，注释"><a href="#声明，注释" class="headerlink" title="声明，注释"></a>声明，注释</h2><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">REM 这里是注释，这是一些VBS基本的语法Dim name,msg &#39;用 Dim 声明 name 和 msg 两个变量msg &#x3D; &quot;请输入你的名字：&quot; &#39;赋予字符串值给msg变量name &#x3D; Inputbox(msg, &quot;名称&quot;)msgbox name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>Dim 用来声明一个变量，在 VBS 中，变量类型并不是那么重要，就是说VBS会帮你自动识别变量类型，而且变量在使用前<code>不一定</code>要先声明，程序会动态分配变量空间。如果要在声明的同时，赋予变量值，可以这么写。加一个冒号，然后声明即可</li></ul><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">Dim sPathOutputFolder : sPathOutputFolder &#x3D; &quot;&quot; <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>Inputbox和Msgbox是VBS内建的函数，一个函数就相当于一个”黑箱”，有输入(参数)和输出(返回值)，一个函数可以有返回值也可以没有，可以有参数也可以没有。<code>Inputbox</code>的两个参数对应下面的两个箭头指向<br><img src="1.png"></p></li><li><p>声明其他</p></li></ul><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">Dim arrAllProducts() &#39;声明Array，数组Dim dicFolders &#39;声明字典Const CSV &#x3D; &quot;,&quot; &#39;声明常量<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>在变量声明后，但是不赋值，用IF判断时，可等于0</strong></p><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">dim testif test &#x3D; 0 then msgbox &quot;0&quot; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="sub，function"><a href="#sub，function" class="headerlink" title="sub，function"></a>sub，function</h2><ul><li>sub 不返回执行的结果</li><li>function 可以返回函数执行的结果</li></ul><h3 id="局部或全局变量"><a href="#局部或全局变量" class="headerlink" title="局部或全局变量"></a>局部或全局变量</h3><p>在sub和function里面声明的变量，只在声明的函数里面起作用，如下的 iNum2<br>在函数外声明的为全局变量，所有的函数通用。</p><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">dim iNum1sTestmsgbox iNum1 &#39;显示结果为 1msgbox iNum2 &#39;显示结果为空sub sTest()    dim iNum2 &#x3D; 2    iNum1 &#x3D; 1end sub <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="调用函数的一些规范（坑）"><a href="#调用函数的一些规范（坑）" class="headerlink" title="调用函数的一些规范（坑）"></a>调用函数的一些规范（坑）</h3><p>VBS 在调用函数的时候，是有一些坑的。</p><ul><li><p>如果函数<code>带有参数</code>，请参考如下例子：</p>  <pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">Today &#x3D; &quot;Thusday&quot;YourName &#x3D; &quot;Bin&quot;test YourName, Today &#39;可以call test(YourName, Today) &#39;可以call test YourName, Today &#39;错误格式，不允许test(YourName, Today) &#39;错误格式，不允许function test(Name,Day)    msgbox &quot;Hi, &quot; &amp; Name &amp; &quot;. Today is &quot; &amp; Dayend function <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>  报错的提醒：<br>  <img src="2.png"></p></li></ul><ul><li><p>调用函数做布尔判断等操作时候，请用用这种格式：</p>  <pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">If RegEnumValues (hDefKey, sSubKeyName, arrNames, arrTypes) Then &#39;RegEnumValues 是一个函数，括号中是它的参数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>如果函数<code>没有参数</code>，那调用的方法随意</p>  <pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">call test &#39;可以test &#39;可以test() &#39;可以call test()&#39;可以function test    msgbox &quot;Hi&quot;end function <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="内置函数方法"><a href="#内置函数方法" class="headerlink" title="内置函数方法"></a>内置函数方法</h2><h3 id="UCase-Mid-Len"><a href="#UCase-Mid-Len" class="headerlink" title="UCase Mid Len"></a>UCase Mid Len</h3><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">fCScript &#x3D; (UCase(Mid(Wscript.FullName, Len(Wscript.Path) + 2, 1)) &#x3D; &quot;C&quot;) <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>UCase: 把文字转成大写，对应LCase（转成小写）。用法 <code>UCase(string)</code></p></li><li><p>Mid: 提取一部分数据。用法 <code>Mid(String, Start, Length)</code>。类似的还有 Left，Right 方法</p>  <pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">test &#x3D; &quot;How are you?&quot;test2 &#x3D; mid(test,1,4) &#39;从第一个字符开始，抓取4个字符(包括空格)msgbox test2 &#39;显示 How <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>Len： 统计一段文本的长度</p></li><li><p>注意：这小段代码其实是一个布尔判断，fCScript 的结果 为 <code>true</code> 或 <code>false</code>。解释下作用把，就是判断当前的环境是CStript还是WSript</p></li></ul><h3 id="Left-Instr"><a href="#Left-Instr" class="headerlink" title="Left Instr"></a>Left Instr</h3><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">f64 &#x3D; Instr(Left(oItem.SystemType, 3), &quot;64&quot;) &gt; 0 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>Left：从左边第一个字符开始，抓取3个字符</p></li><li><p>Instr：用法 <code>InStr(Start, String, Substring, Compare)</code>。Start，Compare 是可选的。返回找到<code>第一个</code>找到的位置<br> Compare 值：</p><ul><li>0     Binary comparison (case sensitive)</li><li>1     Text Comparison (case insensitive)</li><li>2     Compare information inside database</li></ul>  <pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">InStr(&quot;ABCDE ABCDE&quot;, &quot;C&quot;) Output: 3 &#39;后面的c就不管了InStr(4, &quot;ABCDE ABCDE&quot;, &quot;C&quot;) Output: 9<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>这小段代码是一个布尔判断，判断系统是否为64位</p></li></ul><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">Set oMsi &#x3D; CreateObject(&quot;WindowsInstaller.Installer&quot;)msgbox oMsi.Version &#39; output 5.0.17763.557msgbox (Instr(oMsi.Version, &quot;.&quot;) - 1) &#39;output 1iWiVersionMajor &#x3D; Left(oMsi.Version, Instr(oMsi.Version, &quot;.&quot;) - 1) &#39;output 5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h3><p><code>Replace(String, FindSubstring, ReplaceSubstring, Start, Count, Compare)</code></p><ul><li>String<br>  The String argument is the string to be searched.</li><li>FindSubstring<br>  The FindSubstring argument is the substring you are searching for inside the string.</li><li>ReplaceSubstring<br>  The ReplaceSubstring argument is the the new substring string that you wish to insert inside the string.</li><li>Start<br>  The optional Start argument specifies the position number, counting from the left, where you wish to start the search. </li><li>Count<br>  The optional Count argument specifies how many times to replace the substring.</li><li>Compare<br>  The optional Compare argument must only use either a constant or value from the Comparison Constants table.<table><thead><tr><th>CONSTANT</th><th>VALUE</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td>VBBinaryCompare</td><td>0</td><td>Binary comparison</td></tr><tr><td>VBTextCompare</td><td>1</td><td>Text Comparison</td></tr><tr><td>VBDataBaseCompare</td><td>2</td><td>Compare information inside database</td></tr></tbody></table></li></ul><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">Replace(&quot;How now brown cow?&quot;, &quot;brown&quot;, &quot;purple&quot;) Output:How now purple cow?<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="join"><a href="#join" class="headerlink" title="join"></a>join</h3><p><code>Join(Array, Delimiter)</code></p><p>将 Array 组合成 String，与它相反的 Split</p><p>The optional Delimiter argument specifies the characters (including blanks) you wish to place between each element. If this argument is not specified, the default is to place a blank space between each element. If you wish to have no spaces, use a double quote, “”, for the argument.</p><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB"> Dim cowarray(10)  cowarray(0) &#x3D; &quot;How&quot;  cowarray(1) &#x3D; &quot;now&quot;  cowarray(2) &#x3D; &quot;brown&quot;  cowarray(3) &#x3D; &quot;cow?&quot;  Join(cowarray) Output:How now brown cow?<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="循环或判断"><a href="#循环或判断" class="headerlink" title="循环或判断"></a>循环或判断</h2><p>我觉得这个很有用，就来作为例子吧</p><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">For i &#x3D; 1 To 4  &#39;从1循环到4        Select Case i  &#39;Case 选择，变相相当于 if 判断        Case 1 : lAccPermLevel &#x3D; KEY_QUERY_VALUE         Case 2 : lAccPermLevel &#x3D; KEY_SET_VALUE         Case 3 : lAccPermLevel &#x3D; KEY_CREATE_SUB_KEY         Case 4 : lAccPermLevel &#x3D; DELETE         End Select &#39;注意要结束Case        &#39;Not，非。        If Not RegCheckAccess(hDefKey, sSubKeyName, lAccPermLevel) Then             fIsAdmin &#x3D; False             Exit for &#39;马上退出循环，不在执行剩下的循环        End If Next &#39;i &#39;用 Next 结束 For 循环<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个是单行的 IF 判断语句，不需要结束符号</p><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">If sPathOutputFolder &#x3D; &quot;&quot; Then sPathOutputFolder &#x3D; &quot;%TEMP%&quot; <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在不知道数组的大小情况下，遍历整个数组的方法，重点在 <code>UBound</code></p><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">For iValueName &#x3D; 0 To UBound(arrNames) <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="判断变量类型"><a href="#判断变量类型" class="headerlink" title="判断变量类型"></a>判断变量类型</h2><p>IsArray(varName)<br>IsDate(varName)<br>IsEmpty(varName)<br>IsNull(varName)<br>IsNumeric(varName)<br>IsObject(varName)</p><p>VarType(Varname):<br>返回的值：</p><table><thead><tr><th>CONSTANT</th><th>VALUE</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td>VBEmpty</td><td>0</td><td>Uninitialized</td></tr><tr><td>VBNull</td><td>1</td><td>Contains no valid data</td></tr><tr><td>VBInteger</td><td>2</td><td>Integer subtype</td></tr><tr><td>VBLong</td><td>3</td><td>Long subtype</td></tr><tr><td>VBSingle</td><td>4</td><td>Single subtype</td></tr><tr><td>VBDouble</td><td>5</td><td>Double subtype</td></tr><tr><td>VBCurrency</td><td>6</td><td>Currency subtype</td></tr><tr><td>VBDate</td><td>7</td><td>Date subtype</td></tr><tr><td>VBString</td><td>8</td><td>String subtype</td></tr><tr><td>VBObject</td><td>9</td><td>Object</td></tr><tr><td>VBError</td><td>10</td><td>Error subtype</td></tr><tr><td>VBBoolean</td><td>11</td><td>Boolean subtype</td></tr><tr><td>VBVariant</td><td>12</td><td>Variant (only use for arrays of variants)</td></tr><tr><td>VBDataObject</td><td>13</td><td>Data access object</td></tr><tr><td>VBDecimal</td><td>14</td><td>Decimal subtype</td></tr><tr><td>VBByte</td><td>17</td><td>Byte subtype</td></tr><tr><td>VBArray</td><td>8192</td><td>Array</td></tr></tbody></table><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">whatsubtype&#x3D;&quot;This is a string subtype&quot; VarType(whatsubtype) Output:8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><p>更多属性，方法请查看：</p><blockquote><p><a href="https://www.devguru.com/content/technologies/vbscript/objects-dictionary.html">https://www.devguru.com/content/technologies/vbscript/objects-dictionary.html</a></p></blockquote><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">Dim carsSet cars &#x3D; CreateObject(&quot;Scripting.Dictionary&quot;) &#39;创建字典变量carscars.Add &quot;a&quot;, &quot;Alvis&quot;cars.Add &quot;b&quot;, &quot;Buick&quot;cars.Add &quot;c&quot;, &quot;Cadillac&quot;msgbox cars.Item(&quot;b&quot;) &#39;查看 key b 的内容msgbox cars.count &#39;查看字典有多少keys<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h2><p>当加上<code>On Error Goto 0</code>语句后，如果后面的程序出现”运行时错误”时，会显示”出错信息”并停止程序的执行。<br>使用了<code>On Error Resume Next</code>之后，如果出错,那么<code>Err</code>对象中将放置最近一次出错的信息。</p><p>Err对象重要的属性有三个：Number, Source, Description。分别是错误号，错误来源，错误描述。</p><p>注意：<br>On Error Resume Next语句只作用于本级别的后续语句。不会作用于被调用的函数或子程序，同样也不会作用于父级别的程序段<br>On Error Resume Next语句如果出现在某个函数中，则只对本函数产生影响。对”主调函数”和”被调函数”均没有影响</p><p>一个子程序中如果没有On Error Resume Next语句，那么当错误在子程序中出现时,将会中断这个子程序的运行,跳转到调用这个子程序的外层程序.如果这个外层程序在”出问题的函数调用”之前包含有On Error Resume Next语句，则会接着执行”函数调用”之后的语句。如果这个外层程序在”出问题的函数调用”之前没有On Error Resume Next语句，那么就跳向外层。这个过程一直重复,直到找到包含有On Error Resume Next语句的环境继续运行，如果最外层的程序也没有包含On Error Resume Next语句，那么将会使用缺省的错误处理器，也就是显示错误信息并停止运行。</p><h3 id="自定义错误"><a href="#自定义错误" class="headerlink" title="自定义错误"></a>自定义错误</h3><pre class="line-numbers language-VB" data-language="VB"><code class="language-VB">On Error Resume NextErr.Raise 22,&quot;VBS指令碼&quot;,&quot;溢位啦&quot;,&quot;c:\test.txt&quot; &#39;定義一個執行時的錯誤MsgBox &quot;錯誤：&quot; &amp; vbCrLf _        &amp; &quot;Number:&quot; &amp; Err.Number &amp; vbCrLf _        &amp; &quot;Source:&quot; &amp; Err.Source &amp; vbCrLf _        &amp; &quot;Description:&quot; &amp; Err.Description &amp; vbCrLf _        &amp; &quot;Helpfile:&quot; &amp; Err.HelpFileErr.Clear &#39;清除錯誤<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> 编程 </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>批处理笔记</title>
      <link href="/2019/10/15/pi-chu-li/"/>
      <url>/2019/10/15/pi-chu-li/</url>
      
        <content type="html"><![CDATA[<h2 id="用运行打开程序"><a href="#用运行打开程序" class="headerlink" title="用运行打开程序"></a>用<code>运行</code>打开程序</h2><ul><li>calc : 打开计算器</li><li>appwiz.cpl : 程序和功能</li><li>certmgr.msc : 证书管理工具</li><li>cleanmgr : 磁盘清理工具</li><li>colorcpl : 颜色管理</li><li>compmgmt.msc : 计算机管理</li><li>control : 控制面板</li><li>devmgmt.msc : 设备管理器</li><li>desk.cpl : 显示控制选项</li><li>diskmgmt.msc : 磁盘管理</li><li>eventvwr : 事件查看器</li><li>explorer : 打开资源管理器</li><li>firewall.cpl : windows防火墙</li><li>gpedit.msc : 组策略</li><li>fsmgmt.msc : 共享文件夹管理器</li><li>hdwwiz.cpl : 设备管理器</li><li>inetcpl.cpl : Internet 属性</li><li>intl.cpl : 区域时间设置</li><li>iexpress : 程序打包软件</li><li>logoff :  注销</li><li>lusrmgr.msc : 本机用户和组</li><li>mmsys.cpl : 声音</li><li>magnify : 放大镜实用程序</li><li>mdsched : Windows内存诊断程序(需要重启电脑)</li><li>mmc : 打开控制台</li><li>msinfo32 : 系统信息</li><li>ncpa.cpl : 网络连接</li><li>netplwiz : 高级用户账户控制面板</li><li>optionalfeatures : 打开或关闭Windows功能</li><li>osk : 屏幕键盘</li><li>perfmon.msc : 计算机性能监视器</li><li>powercfg.cpl : 电源选项</li><li>psr : 问题步骤记录器</li><li>resmon : 资源监视器</li><li>sigverif : 文件签名验证程序</li><li>slui : windows激活信息</li><li>slmgr.vbs -dlv : 显示详细的许可证信息</li><li>snippingtool : 截图工具</li><li>taskschd.msc  : 任务计划程序</li><li>timedate.cpl : 日期和时间</li><li>wf.msc : 高级安全Windows防火墙</li><li>winver : 关于Windows</li><li>taskschd.msc : 计划任务</li></ul><h2 id="命令行语法项"><a href="#命令行语法项" class="headerlink" title="命令行语法项"></a>命令行语法项</h2><table><thead><tr><th>图解</th><th>描述</th></tr></thead><tbody><tr><td>不带方括号或大括号的文本</td><td>必须按如下所示键入项</td></tr><tr><td>&lt;尖括号内的文本&gt;</td><td>必须为其提供值的占位符</td></tr><tr><td>[方括号内的文本]</td><td>可选项</td></tr><tr><td>{大括号内的文本}</td><td>一组必需的项,选择其中一个</td></tr><tr><td>竖线</td><td>互斥项的分隔符,选择其中一个</td></tr><tr><td>省略号(…)</td><td>可以重复的项</td></tr><tr><td></td><td></td></tr><tr><td>详情参见</td><td></td></tr></tbody></table><blockquote><p><a href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/command-line-syntax-key">https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/command-line-syntax-key</a></p></blockquote><h2 id="常用DOS命令"><a href="#常用DOS命令" class="headerlink" title="常用DOS命令"></a>常用DOS命令</h2><ul><li>tree 以图形显示驱动器或路径的文件夹结构</li><li>rd 删除一个目录</li><li>md 创建目录</li><li>xcopy 复制文件和目录树</li><li>ren 重命名文件</li><li>replace 替换文件</li><li>find 搜索字符串</li><li>attrib 显示或更改文件属性</li><li>fc 比较两个文件或两个文件集并显示它们之间的不同</li><li>at 安排在特定日期和时间运行命令和程序</li><li>taskkill 结束进程</li><li>tasklist 显示进程列表</li><li>cls 清屏</li><li>type  显示文件内容</li><li>pause 暂停命令</li><li>rem 和 :    注释命令</li><li>more 逐屏显示</li><li>tree 显示目录结构</li><li>&amp;  顺序执行多条命令，而不管命令是否执行成功</li><li>&amp;&amp;  顺序执行多条命令，当碰到执行出错的命令后将不执行后面的命令</li><li>||  顺序执行多条命令，当碰到执行正确的命令后将不执行后面的命令 </li><li>| 管道命令</li><li>set  设置变量 (引用变量可以在名字前后加%, 即 %变量名%</li><li>^ 转义符</li><li>copy<br> copy 1.txt + 2.txt  3.txt<br> 合并 1.txt 和 2.txt 的内容，保存为 3.txt 文件 如果不指定 3.txt ，则保存到 1.txt</li></ul><p>con 代表屏幕 , prn 代表打印机 , nul 代表空设备</p><h2 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h2><p>“关闭回显”是指运行批处理文件时，不显示文件里的每条命令，只显示运行结果.批处理开始和结束时，系统都会自动打开回显</p><pre class="line-numbers language-none"><code class="language-none">@                    #关闭单行回显echo off             #从下一行开始关闭回显@echo off            #从本行开始关闭回显。一般批处理第一行都是这个echo on              #从下一行开始打开回显echo                 #显示当前是 echo off 状态还是 echo on 状态echo.                #输出一个&quot;回车换行&quot;，一般就是指空白行echo hello world     #输出hello world<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>echo %errorlevel% : 每个命令运行结束,可以用这个查看命令是否执行成功,默认为0.一般执行出错会返回 1.</p><h2 id="set"><a href="#set" class="headerlink" title="set"></a>set</h2><pre class="line-numbers language-none"><code class="language-none">set                    #显示目前所有可用的变量，包括系统变量和自定义的变量echo %SystemDrive%     #显示系统盘盘符。系统变量可以直接引用set p                  #显示所有以p开头的变量，要是一个也没有就设errorlevel&#x3D;1set p&#x3D;aa1bb1aa2bb2     #设置变量p，并赋值为 &#x3D; 后面的字符串，即aa1bb1aa2bb2echo %p%               #显示变量p代表的字符串，即aa1bb1aa2bb2echo %p:~6%            #显示变量p中第6个字符以后的所有字符，即aa2bb2echo %p:~6,3%          #显示第6个字符以后的3个字符，即aa2echo %p:~0,3%          #显示前3个字符，即aa1echo %p:~-2%           #显示最后面的2个字符，即b2echo %p:~0,-2%         #显示除了最后2个字符以外的其它字符，即aa1bb1aa2becho %p:aa&#x3D;c%          #用c替换变量p中所有的aa，即显示c1bb1c2bb2echo %p:aa&#x3D;%           #将变量p中的所有aa字符串置换为空，即显示1bb12bb2echo %p:*bb&#x3D;c%         #第一个bb及其之前的所有字符被替换为c，即显示c1aa2bb2set p&#x3D;%p:*bb&#x3D;c%        #设置变量p，赋值为 %p:*bb&#x3D;c% ，即c1aa2bb2set &#x2F;a p&#x3D;39            #设置p为数值型变量，值为39set &#x2F;a p&#x3D;39&#x2F;10         #支持运算符，有小数时用去尾法，39&#x2F;10&#x3D;3.9，去尾得3，p&#x3D;3set &#x2F;a p&#x3D;p&#x2F;10#用 &#x2F;a 参数时，在 &#x3D; 后面的变量可以不加%直接引用set &#x2F;a p&#x3D;&quot;1&amp;0&quot;#&quot;与&quot;运算，要加引号。其它支持的运算符参见set&#x2F;?set p&#x3D;                 #取消p变量set &#x2F;p p&#x3D;              请输入屏幕上显示&quot;请输入&quot;，并会将输入的字符串赋值给变量p注意这条可以用来取代 choice 命令<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><a href="http://xstarcd.github.io/wiki/windows/windows_cmd_summary_commands.html">http://xstarcd.github.io/wiki/windows/windows_cmd_summary_commands.html</a></p></blockquote><h2 id="xcopy"><a href="#xcopy" class="headerlink" title="xcopy"></a>xcopy</h2><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><pre class="line-numbers language-none"><code class="language-none">xcopy \\raspberrypi\pishare\test d:\xcopytest2\test2\<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>如果复制到目的位置的文件夹不存在, xcopy会自动创建,多级目录也一样</strong><br>(例如上面的,<code>d:\xcopytest2\test2\</code> . 如果这个文件夹不存在,则会创建)</p><p><strong>默认复制源头文件夹下面的文件,而不是整个文件夹</strong><br>(例如上面的,<code>\\raspberrypi\pishare\test</code>. 会copy <code>test</code> 文件夹下面的文件, 而不是 <code>test</code> 这个文件夹)</p><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><pre class="line-numbers language-none"><code class="language-none">&#x2F;i如果“Source”是一个目录或包含通配符，而“Destination”不存在，“xcopy”会假定“destination”指定目录名并创建一个新目录。然后，“xcopy”会将所有指定文件复制到新目录中。默认情况下，“xcopy”将提示您指定“Destination”是文件还是目录。&#x2F;s复制非空的目录和子目录。如果省略“&#x2F;s”，则“xcopy”将在单个目录中工作。&#x2F;e复制所有子目录，包括空目录。将“&#x2F;e”与“&#x2F;s”和“&#x2F;t”命令行选项一起使用。&#x2F;t只复制子目录结构（即目录树），不复制文件。要复制空目录，必须包含“&#x2F;e”命令行选项。&#x2F;y禁止提示确认要覆盖已存在的目标文件。&#x2F;-y提示您确认要覆盖已存在的目标文件。&#x2F;cdehikvy常用的参数组合,能增量,断点续传<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> 编程 </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SysInternals 工具系列</title>
      <link href="/2019/10/15/sysinternals-gong-ju-xi-lie/"/>
      <url>/2019/10/15/sysinternals-gong-ju-xi-lie/</url>
      
        <content type="html"><![CDATA[<h2 id="官方介绍下载地址"><a href="#官方介绍下载地址" class="headerlink" title="官方介绍下载地址"></a>官方介绍下载地址</h2><blockquote><p><a href="https://docs.microsoft.com/en-us/sysinternals/">https://docs.microsoft.com/en-us/sysinternals/</a></p></blockquote><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>如果你发现你的命令输入没有错误,但是总是提示 “<br>The network path was not found.” ,那你需要执行下面的命令行之后,即可正常执行 sysinternals 的工具</p><pre class="line-numbers language-none"><code class="language-none">To start the Remote Registry service via a command line:&gt; sc start RemoteRegistryTo have it start automatically every time:&gt; sc config RemoteRegistry start&#x3D;auto(重要)To do this to a remote machine named Desktop1:&gt; sc \\Desktop1 config RemoteRegistry start&#x3D;auto<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="PsTools"><a href="#PsTools" class="headerlink" title="PsTools"></a>PsTools</h2><p>PSTools 本身就有十来个<code>命令行</code>小工具</p><ul><li>PsExec – 在远程计算机执行命令</li><li>PsFile – 查看打开的网络文件</li><li>PsGetSid – 获取 Machine SID</li><li>PsInfo – 查看简要系统信息</li><li>PsKill – 按进程名或PID杀掉进程</li><li>PsList – 列出进程信息</li><li>PsLoggedOn – 显示已登的会话</li><li>PsLogList – 命令行获取 event log</li><li>PsPasswd – 更改用户密码</li><li>PsPing – 简单的tcp/udp连接测试工具</li><li>PsService – Windows 服务管理命令</li><li>PsShutdown – 关机、注销命令</li><li>PsSuspend – 暂停或恢复某个进程</li></ul><p>以上所有命令都可以直接在本地计算机上使用，不过 PsTools 设计出来就是为了方便对远程 PC 进行管理的</p><p>PsTools 所有工具连接远程计算机都可以使用同一个通用语法，例如：</p><pre class="line-numbers language-none"><code class="language-none">psinfo \\pc1,pc2,pc3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>双斜杠后面可以直接跟计算机名（可以解析netbios）、IP 地址或 FQDN，也可以在命令后跟多台计算机以实现批量</p><p>如果你不是以域管理员等有权限的用户来执行命令、没有域环境或者需要手动指定有权限的远程用户，可用 -u 参数指定用户，-p 参数指定密码 </p><p>如果是域环境，需要将用户写为 <code>DOMAIN\user</code> 样式</p><pre class="line-numbers language-none"><code class="language-none">psinfo \\computername –u user –p Password<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="PsExec"><a href="#PsExec" class="headerlink" title="PsExec"></a>PsExec</h3><p>PsExec 是 PsTools 工具系列中最为常用的一个命令行工具，它可以让我们在本地或远程计算机上「运行」任何东西，包括更改注册表、执行脚本或应用程序等。</p><h4 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h4><ul><li><p>命令说明:</p><pre class="line-numbers language-none"><code class="language-none">psexec \\计算机名 &lt;选项&gt; apptorun.exe &lt;参数&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>例如你想查看某个远程计算机的 TCP/IP 配置，可以使用如下命令：</p><pre class="line-numbers language-none"><code class="language-none">psexec \\计算机名 -u User -p Password ipconfig<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>如果你将命令输出重定向到一个文件中，可以使用常见的 command.exe &gt; output.txt 方式，这种方式对 PsExec 命令同样适用，例如我们可以使用类似如下命令将 netstat -an 的输出保存到本地文本文件中：</p><pre class="line-numbers language-none"><code class="language-none">psexec \\计算机名 netstat -an &gt; C:\netstat.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>如果你想将命令的重定向输出结果直接保存到远程 PC 当中，可以使用很少有人知道的 ^ 这个Windows 命令行转义符，例如：</p><pre class="line-numbers language-none"><code class="language-none">psexec \\计算机名 cmd &#x2F;c netstat -an ^&gt; C:\users\sysgeek\netstat.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>有时我们需要执行的 CDM 外部命令并没有存在于远程计算机当中，此时我们可以使用 PsExec 的 -c 参数来指定一个存放于管理员本地的外部命令或应用。当我们执行命令时，PsExec 会自动将所指定的应用复制到远程 PC 中执行，并在执行完成后自动删除。例如</p><pre class="line-numbers language-none"><code class="language-none">psexec \\计算机名 -c autorunsc.exe –accepteula<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>跳过第一次打开软件的条款同意声明</p><pre class="line-numbers language-none"><code class="language-none">psexec &#x2F;accepteula<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>如果不指定密码,命令行里面会让你输入密码</p><pre class="line-numbers language-none"><code class="language-none">D:\runsoftware\SysinternalsSuite\PsExec.exe \\192.168.1.102 -u ieuser netstat -na<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="6.png"></p></li><li><p>Maybe you need to bring up a notepad window on a remote computer. Not a problem. Run notepad.exe with the -i switch and PsExec will open up Notepad.</p><pre class="line-numbers language-none"><code class="language-none">psexec -i \\REMOTECOMPUTER notepad<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><ul><li>Be sure to also use the <code>-d</code> switch to disconnect when the interactive window is brought up though. By default, PsExec will wait for the process it executed to complete. If the remote process (Notepad in this case) is kept running, PsExec will never return control.</li></ul><ul><li><p><strong>像linux的ssh一样使用,远程Windows</strong></p><pre class="line-numbers language-none"><code class="language-none">psexec \\wss11 -u 666 -p general   cmd<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><strong>Do NOT use Ctrl-C to close out of an interactive cmd session. Always use <code>exit</code>. If you use Ctrl-C, the psexec session will remain running on the remote computer.</strong></p></li></ul><h4 id="psexec-给远程电脑安装软件"><a href="#psexec-给远程电脑安装软件" class="headerlink" title="psexec 给远程电脑安装软件"></a>psexec 给远程电脑安装软件</h4><pre class="line-numbers language-none"><code class="language-none">psexec \\192.168.2.223  -u administrator  -p &quot;&quot; -c  D:\download\Apache_OpenOffice_4.1.7_Win_x86_install_en-US.exe  &#x2F;S &#x2F;v &#x2F;qb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>-p &quot;&quot;</code> 表示密码为空</li><li><code>-c</code> 表示复制文件到远程电脑</li><li><code>D:\download\Apache_OpenOffice_4.1.7_Win_x86_install_en-US.exe</code>  这个文件是本地电脑的</li><li><code>/S /v /qb</code> 表示OpenOffice静默安装参数</li></ul><p>——————目前该命令存在的问题——————–</p><p>使用该命令只能使用远程电脑(目标电脑)的administrator账号,即使用administrators组里面的账号也没有用.不然会提示如下错误:</p><pre class="line-numbers language-none"><code class="language-none">PsExec could not start Apache_OpenOffice_4.1.7_Win_x86_install_en-US.exe on 192.168.2.223:The system cannot find the file specified.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>目前只知道, 执行上面那个命令后,Openoffice 会被 复制到远程计算机的<code>c:\windows</code> 目录,执行完成之后文件即被删除</p><h4 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h4><ul><li>打开远程机器的IE浏览器<pre class="line-numbers language-none"><code class="language-none">PsExec.exe \\192.168.1.102 -u ieuser -p general -d -i  &quot;C:\Program Files (x86)\Internet Explorer\iexplore.exe&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><ul><li><code>-d</code> 表示不等待远端机器执行的结果,命令发送后就立即返回</li><li><code>-i</code> 在远程端口开启互动界面(GUI).没有这个参数,你在远程机器上是看不到IE浏览器的,只有后台有一个进程而已</li><li>后面的IE路径,因为有空格,需要加上双引号</li></ul><p>  下图为有无参数-d的区别(两个命令都成功打开了IE)<br>  <img src="1.png"></p><ul><li>notepad打开文本<br>如下两种写法都是可以的:<br>  <img src="2.png"></li></ul><pre class="line-numbers language-none"><code class="language-none">D:\runsoftware\SysinternalsSuite\PsExec.exe \\192.168.1.102 -u ieuser -p general -d -w C:\runsoftwares -i notepad psexecTest.batD:\runsoftware\SysinternalsSuite\PsExec.exe \\192.168.1.102 -u ieuser -p general -d -i notepad  C:\runsoftwares\psexecTest.vbs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>参考</p><blockquote><p><a href="https://blog.xuite.net/jyoutw/xtech/24607577-PsTools+%E4%B9%8B+PsExec+%E7%9A%84%E7%94%A8%E6%B3%95">https://blog.xuite.net/jyoutw/xtech/24607577-PsTools+%E4%B9%8B+PsExec+%E7%9A%84%E7%94%A8%E6%B3%95</a></p></blockquote><h4 id="运行远程pc上的vbs脚本报错"><a href="#运行远程pc上的vbs脚本报错" class="headerlink" title="运行远程pc上的vbs脚本报错"></a>运行远程pc上的vbs脚本报错</h4><p>运行bat没有问题,但是vbs会出现<code>The system cannot find the file specified.</code>报错.在不同的电脑测试均出现此问题.目前找不到原因<br> <img src="3.png"></p><p>目前找到该问题的解法,感谢大佬的指路.据说是PATH里找不到执行的文件<br>在命令里加上 <code>wscript</code> 就行</p><pre class="line-numbers language-none"><code class="language-none">D:\runsoftware\SysinternalsSuite\PsExec.exe \\192.168.1.102 -u ieuser -p general wscript  C:\Users\bingfeng\Documents\script\vbs\psexecTest.vbs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h4><ul><li><p>-a<br>Separate processors on which the application can run with commas where 1 is the lowest numbered CPU. For example, to run the application on CPU 2 and CPU 4, enter: “-a 2,4”</p></li><li><p>-c<br>Copy the specified program to the remote system for execution. If you omit this option the application must be in the system path on the remote system.</p></li><li><p>-d<br>Don’t wait for process to terminate (non-interactive).</p></li><li><p>-e<br>Does not load the specified account’s profile.</p></li><li><p>-f<br>Copy the specified program even if the file already exists on the remote system.</p></li><li><p>-i<br>Run the program so that it interacts with the desktop of the specified session on the remote system. If no session is specified the process runs in the console session. Some have reported best results always using the -s switch with -i due to windows being unintelligible.</p></li><li><p>-h<br>If the target system is Vista or higher, has the proc</p></li><li><p>-l<br>Run process as limited user (strips the Administrators group and allows only privileges assigned to the Users group). On Windows Vista the process runs with Low Integrity.</p></li><li><p>-n<br>Specifies timeout in seconds connecting to remote computers.</p></li><li><p>-p<br>Specifies optional password for user name. If you omit this you will be prompted to enter a hidden password.</p></li><li><p>-r<br>Specifies the name of the remote service to create or interact. with.</p></li><li><p>-s<br>Run the remote process in the System account.</p></li><li><p>-u<br>Specifies optional user name for login to computer.</p></li><li><p>-v<br>Copy the specified file only if it has a higher version number or is newer on than the one on the remote system.</p></li><li><p>-w<br>设置进程的工作目录（相对于远程计算机）</p></li><li><p>-x<br>Display the UI on the Winlogon secure desktop (local system only).</p></li></ul><p>  -arm     Specifies the remote computer is of ARM architecture.</p><ul><li>-priority<br>Specifies -low, -belownormal, -abovenormal, -high or  -realtime</li><li>-realtime<br>run the process at a different priority. Use</li><li>-background<br>run at low memory and I/O priority on Vista.</li><li>computer<br>Direct PsExec to run the application on the computer or computers specified. If you omit the computer name PsExec runs the application on the local system, and if you specify a wildcard (*), PsExec runs</li><li>@file<br>PsExec will execute the command on each of the computers listed in the file.</li><li>-accepteula<br>This flag suppresses the display of the license dialog.</li><li>-nobanner<br>Do not display the startup banner and copyright message.</li></ul><h4 id="psexec-工作原理"><a href="#psexec-工作原理" class="headerlink" title="psexec 工作原理"></a>psexec 工作原理</h4><p>How PsExec Works on Remote Computers</p><p>PsExec goes through a few steps to execute programs on remote computers.</p><ul><li>Create a PSEXESVC.exe file in C:\Windows.</li><li>Create and start a Windows service on the remote computer called PsExec.</li><li>Execute the program under a parent process of psexesvc.exe.</li><li>When complete, the PsExec Windows service will be stopped and removed.</li></ul><p>   When the process doesn’t work 100% correctly you may have to manually remove the service using the sc command.</p><blockquote><p> <a href="https://blog.51cto.com/leomars/1900528">https://blog.51cto.com/leomars/1900528</a></p></blockquote><h3 id="PsFile"><a href="#PsFile" class="headerlink" title="PsFile"></a>PsFile</h3><ul><li>psfile 命令可以显示本地或远程 PC 中通过网络打开的文件，其类似于命令行中的 net file 命令，及 NetworkOpenedFiles 图形界面工具<pre class="line-numbers language-none"><code class="language-none">psfile \\计算机名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><ul><li>如果你想中断某个共享的访问连接，可以使用 -c 参数：<pre class="line-numbers language-none"><code class="language-none">psfile \\计算机名 &lt;路径&gt; –c<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h3 id="PsInfo"><a href="#PsInfo" class="headerlink" title="PsInfo"></a>PsInfo</h3><p>PsInfo 主要用于显示 Windows 操作系统版本、系统运行时长及个别硬件的简单信息，如果你想获取更详尽的信息，可以使用 -d（磁盘信息）、-h（补丁信息）、-s（已知应用程序版本列表）参数，这样一来就比较像 Windows 内置的 systeminfo 命令行了。</p><pre class="line-numbers language-none"><code class="language-none">psinfo -d -h -s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="PsKill"><a href="#PsKill" class="headerlink" title="PsKill"></a>PsKill</h3><p>PsKill 看名称就不难猜，它可按进程名或 PID 结束进程，使用 -t 参数可以杀掉整个进程树。</p><pre class="line-numbers language-none"><code class="language-none">pskill \\计算机名 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="PsList"><a href="#PsList" class="headerlink" title="PsList"></a>PsList</h3><p>它可以通过列表方式看到进程的几乎所有信息，包括线程数</p><h3 id="PsLoggedOn"><a href="#PsLoggedOn" class="headerlink" title="PsLoggedOn"></a>PsLoggedOn</h3><p>PsLoggedOn 命令主要用于查看本地或远程 PC 上当前登录的用户信息，对于系统管理员来说非常实用。</p><h3 id="PsPing"><a href="#PsPing" class="headerlink" title="PsPing"></a>PsPing</h3><p>PsPing 是一个可对指定端口进行 TCP 或 UDP 连接测试的工具</p><h3 id="PsPasswd"><a href="#PsPasswd" class="headerlink" title="PsPasswd"></a>PsPasswd</h3><p>PsPasswd 用于快速更改本地或远程 PC 的用户密码</p><p>该命令相较 net user 的好处在于可以一次性批量修改多台计算机的密码，对于域管理员批量重置某些本地账户密码时非常有用</p><pre class="line-numbers language-none"><code class="language-none">pspasswd \\计算机名 -u User -p Password &lt;账户名称&gt; &lt;新密码&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="PsSuspend"><a href="#PsSuspend" class="headerlink" title="PsSuspend"></a>PsSuspend</h3><p>该命令行工具与 PsKill 比较类似但不是杀掉进程，它主要用于暂停某个进程的工作</p><p>要将已暂停的进程恢复到工作状态，只需加上 -r 参数即可</p><pre class="line-numbers language-none"><code class="language-none">pssuspend \\计算机名 &lt;PID或进程名&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="PsService"><a href="#PsService" class="headerlink" title="PsService"></a>PsService</h3><p>PsService 命令行工具可操作 Windows 中的各种服务，其语法如下</p><pre class="line-numbers language-none"><code class="language-none">psservice \\计算机名 &lt;操作&gt; &lt;服务名&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>用的操作有start（启动）、stop（停止）、pause（暂停）、restart（重启），要查看详细参数可以使用 PsService /?</p><h2 id="TCPView"><a href="#TCPView" class="headerlink" title="TCPView"></a>TCPView</h2><p>TCPView 是用于查看当前 Windows 应用程序和服务连网状态的绝佳工具，通过它我们可以在图形界面中查看到类似使用 netstat 命令输出的大部分信息。</p><p>与其它 Sysinternals 工具的颜色标识类似，绿色条目表示刚建立连接、红色表示连接正在关闭，而黄色则表示更改了连接指向</p><h2 id="RamMap"><a href="#RamMap" class="headerlink" title="RamMap"></a>RamMap</h2><p>RamMap 工具主要用于分析物理内存的使用情况，它以可视化的图形界面进行输出显示。在 RamMap 界面中，你可以查看到非常详细的内存用量，例如：空闲内存、页面缓冲池、非页面缓冲池、已提交和已缓存等条目的详细情况，比任务管理器中的内存显示强大多了。</p><h2 id="Autologon"><a href="#Autologon" class="headerlink" title="Autologon"></a>Autologon</h2><p>Autologon 可以快速实现Windows自动登录（有登录密码情况下）<br>在打开之后，只需输入要用于自动登录的账户和密码即可。</p><p>其它自动登录的方法</p><blockquote><p><a href="http://www.sysgeek.cn/auto-login-windows-10/">http://www.sysgeek.cn/auto-login-windows-10/</a></p></blockquote><h2 id="AccessEnum"><a href="#AccessEnum" class="headerlink" title="AccessEnum"></a>AccessEnum</h2><p>AccessEnum 是我在做文件夹权限排错时最常用的一个工具，在我们对某个文件夹进行过复杂的权限配置后，AccessEnum 工具可以非常容易帮助我们理清文件夹或注册表的最终访问控制列表。</p><h2 id="SigCheck"><a href="#SigCheck" class="headerlink" title="SigCheck"></a>SigCheck</h2><p>SigCheck 命令行工具最常用的是 -u 参数，它只报告有问题的文件；-e 参数表示只对可执行文件进行检查。所以，我们可以使用如下命令对 C:\Windows\System32 （或某个其它）文件夹进行快速检查：</p><pre class="line-numbers language-none"><code class="language-none">sigcheck -e -u C:\Windows\System32<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在发现异常文件时，可以使用 -v 参数开启 VirusTotal 校验</p><pre class="line-numbers language-none"><code class="language-none">sigcheck -v -vt &lt;文件名&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Contig"><a href="#Contig" class="headerlink" title="Contig"></a>Contig</h2><pre class="line-numbers language-none"><code class="language-none">contig &lt;文件名&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果你要分析一个文件的碎片而不实际整理，可以使用 -a 参数</p><h2 id="du"><a href="#du" class="headerlink" title="du"></a>du</h2><p>而 du 是 Sysinternals 套件中的命令行磁盘和文件夹大小查看工具。du 命令行工具的存在主要是因为其显示更为准确，而且在计算空间时不会计数符号链接文件</p><p>其中 -n 参数在统计大小时不递归在子文件夹，-v 参数将详细列表显示子文件夹大小（KB），-l 参数可以单独控制子文件夹递归层级（默认为 1）</p><h2 id="Disk2vhd"><a href="#Disk2vhd" class="headerlink" title="Disk2vhd"></a>Disk2vhd</h2><p>Disk2vhd 小工具可将正在运行计算机的磁盘克隆成 VHD 虚拟磁盘文件，因此它也成为不少虚拟化项目中的 P2V 转换工具</p><h2 id="autoruns"><a href="#autoruns" class="headerlink" title="autoruns"></a>autoruns</h2><ul><li>粉红色：表示该条目对应的应用没有数字签名、签名不匹配或没有发行商信息</li><li>黄色：表示该启动条目对应的文件已经不存在了</li><li>绿色：该功能不太常用，简单来说就是我们可以在使用 File — Save 对启动项目进行导出成 .arn 格式进行存储，之后有可能在 Autoruns 里面对启动条目进行了配置，然后再在 File — Compare 里面载入之前导出的 .arn 文件即可对不同时间和状态下 Windows 启动条目进行对比，对比出来的差异将以绿色高亮进行显示。</li></ul><h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><blockquote><p><a href="https://www.sysgeek.cn/?s=SysInternals%E7%B3%BB%E5%88%97">https://www.sysgeek.cn/?s=SysInternals%E7%B3%BB%E5%88%97</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何正确对用户密码进行加密</title>
      <link href="/2019/09/28/ru-he-zheng-que-dui-yong-hu-mi-ma-jin-xing-jia-mi/"/>
      <url>/2019/09/28/ru-he-zheng-que-dui-yong-hu-mi-ma-jin-xing-jia-mi/</url>
      
        <content type="html"><![CDATA[<p>首先,贴上原文链接</p><blockquote><p><a href="https://www.infoq.cn/article/how-to-encrypt-the-user-password-correctly">https://www.infoq.cn/article/how-to-encrypt-the-user-password-correctly</a></p></blockquote><p>感觉这篇文章写的很详细,这里做个笔记</p><h2 id="哈希"><a href="#哈希" class="headerlink" title="哈希"></a>哈希</h2><ul><li><p>保护密码的最好办法是使用加盐密码哈希（salted password hashing）</p></li><li><p>不要自己写哈希加密算法！</p></li><li><p>哈希算法是一种单向函数。它把任意数量的数据转换为固定长度的“指纹”，而且这个过程无法逆转。</p></li><li><p>永远不要告诉用户输错的究竟是用户名还是密码。就像通用的提示那样，始终显示：“无效的用户名或密码。”就行了。这样可以防止攻击者在不知道密码的情况下枚举出有效的用户名。</p></li></ul><h2 id="破解哈希"><a href="#破解哈希" class="headerlink" title="破解哈希"></a>破解哈希</h2><ul><li><p>字典攻击和暴力攻击(Dictionary and Brute Force Attacks)</p></li><li><p>查表法(Lookup Tables):对于破解相同类型的哈希值，查表法是一种非常高效的方式。主要理念是预先计算（pre-compute）出密码字典中的每个密码的哈希值，然后把他们相应的密码存储到一个表里。一个设计良好的查询表结构，即使包含了数十亿个哈希值，仍然可以实现每秒钟查询数百次哈希。</p></li><li><p>反向查表法(Reverse Lookup Tables): 首先，攻击者从被黑的用户帐号数据库创建一个用户名和对应的密码哈希表，然后，攻击者猜测一系列哈希值并使用该查询表来查找使用此密码的用户。通常许多用户都会使用相同的密码，因此这种攻击方式特别有效。</p></li></ul><ul><li>彩虹表(Rainbow Tables)</li></ul><p>彩虹表是一种以空间换时间的技术。与查表法相似，只是它为了使查询表更小，牺牲了破解速度。因为彩虹表更小，所以在单位空间可以存储更多的哈希值，从而使攻击更有效。能够破解任何最多 8 位长度的 MD5 值的彩虹表已经出现。</p><h2 id="加盐-salting"><a href="#加盐-salting" class="headerlink" title="加盐(salting)"></a>加盐(salting)</h2><pre class="line-numbers language-none"><code class="language-none">hash(&quot;hello&quot;)                    &#x3D; 2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824hash(&quot;hello&quot; + &quot;QxLUF1bgIAdeQX&quot;) &#x3D; 9e209040c863f84a31e719795b2577523954739fe5ed3b58a75cff2127075ed1hash(&quot;hello&quot; + &quot;bv5PehSMfV11Cd&quot;) &#x3D; d1d3ec2e6f20fd420d50e2642992841d8338a314b8ea157c9e18477aaef226abhash(&quot;hello&quot; + &quot;YYLmfY6IehjZMQ&quot;) &#x3D; a49670c3c18b9e079b9cfaf51634f563dc8ae3070db<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>查表法和彩虹表只有在所有密码都以完全相同的方式进行哈希加密才有效。如果两个用户有相同的密码，他们将有相同的密码哈希值。我们可以通过“随机化”哈希，当同一个密码哈希两次后，得到的哈希值是不一样的，从而避免了这种攻击。</p><p>盐值无需加密。由于随机化了哈希值，查表法、反向查表法和彩虹表都会失效。因为攻击者无法事先知道盐值，所以他们就没有办法预先计算查询表或彩虹表。如果每个用户的密码用不同的盐再进行哈希加密，那么反向查表法攻击也将不能奏效。</p><ul><li><p>盐值不能太短或重复使用</p></li><li><p>盐值应该使用加密的安全伪随机数生成器（ Cryptographically Secure Pseudo-Random Number Generator，CSPRNG ）产生。</p></li><li><p>每个用户的每一个密码都要使用独一无二的盐值。用户每次创建帐号或更改密码时，密码应采用一个新的随机盐值。永远不要重复使用某个盐值。这个盐值也应该足够长，以使有足够多的盐值能用于哈希加密。一个经验规则是，盐值至少要跟哈希函数的输出一样长。该盐应和密码哈希一起存储在用户帐号表中。</p></li><li><p>尽量不要使用双重哈希或古怪的哈希函数</p></li></ul><h2 id="哈希碰撞-Hash-Collisions"><a href="#哈希碰撞-Hash-Collisions" class="headerlink" title="哈希碰撞(Hash Collisions)"></a>哈希碰撞(Hash Collisions)</h2><p>由于哈希函数将任意大小的数据转化为定长的字符串，因此，必定有一些不同的输入经过哈希计算后得到了相同的字符串的情况。加密哈希函数（ Cryptographic hash function）的设计初衷就是使这些碰撞尽量难以被找到。现在，密码学家发现攻击哈希函数越来越容易找到碰撞了。最近的例子是 MD5 算法，它的碰撞已经实现了。</p><h2 id="存储密码的步骤"><a href="#存储密码的步骤" class="headerlink" title="存储密码的步骤"></a>存储密码的步骤</h2><pre><code>1. 使用 CSPRNG 生成足够长的随机盐值2. 将盐值混入密码，并使用标准的密码哈希函数进行加密，如 Argon2、 bcrypt 、 scrypt 或 PBKDF23. 将盐值和对应的哈希值一起存入用户数据库</code></pre><h2 id="校验密码的步骤"><a href="#校验密码的步骤" class="headerlink" title="校验密码的步骤"></a>校验密码的步骤</h2><pre><code>1. 从数据库检索出用户的盐值和对应的哈希值2. 将盐值混入用户输入的密码，并且使用通用的哈希函数进行加密3. 比较上一步的结果，是否和数据库存储的哈希值相同。如果它们相同，则表明密码是正确的；否则，该密码错误</code></pre><p><strong>在 Web 应用中，永远在服务端上进行哈希加密</strong></p><pre class="line-numbers language-none"><code class="language-none">如果您正在编写一个 Web 应用，你可能会疑惑究竟在哪里进行哈希加密，是在用户的浏览器上使用 JavaScript 对密码进行哈希加密呢，还是将明文发送到服务端上再进行哈希加密呢？就算浏览器上已经用 JavaScript 哈希加密了，但你你还是要在服务端上将得到的密码哈希值再进行一次哈希加密。试想一个网站，将用户在浏览器输入的密码经过哈希加密，而不是在传送到服务端再进行哈希。为了验证用户，这个网站将接受来自浏览器的哈希值，并和数据库中的哈希值进行匹配即可。因为用户的密码从未明文传输到服务端，这样子看上去更安全，但事实并非如此。问题是，从客户端的角度来看，经过哈希的密码，从逻辑上成为用户的密码了。所有用户需要做的认证就是将它们的密码哈希值告诉服务端。如果一个攻击者得到了用户的哈希值，他们可以用它来通过认证，而不必知道用户的明文密码！所以，如果攻击者使用某种手段拖了网站的数据库，他们就可以随意使用每个人的帐号直接访问，而无需猜测任何密码。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="使密码更难破解-慢哈希函数-Slow-Hash-Funciton"><a href="#使密码更难破解-慢哈希函数-Slow-Hash-Funciton" class="headerlink" title="使密码更难破解: 慢哈希函数(Slow Hash Funciton)"></a>使密码更难破解: 慢哈希函数(Slow Hash Funciton)</h2><p>加盐可以预防查询表和彩虹表那样的破解,但是阻止不了字典或暴力破解. 高端显卡（ GPU ）和定制的硬件每秒可以进行十亿次哈希计算,为了降低这些攻击的效率,我们可以使用一个叫做<code>密钥扩展(key stretching)</code>的技术</p><pre class="line-numbers language-none"><code class="language-none">密钥扩展的实现使用了一种 CPU 密集型哈希函数（ CPU-intensive hash function）。不要试图去创造你自己的迭代哈希加密函数。迭代不够多的话，它可以被高效的硬件快速并行计算出来，就跟普通的哈希一样这类算法采取安全因子或迭代次数作为参数。此值决定哈希函数将会如何缓慢。对于桌面软件或智能手机应用，确定这个参数的最佳方式是在设备上运行很短的性能基准测试，找到使哈希大约花费半秒的值。通过这种方式，程序可以尽可能保证安全而又不影响用户体验。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>如果您想在一个 Web 应用使用密钥扩展，须知你需要额外的计算资源来处理大量的身份认证请求，并且密钥扩展也容易让服务端遭受拒绝服务攻击（ DoS ）。尽管如此，我还是建议使用密钥扩展，只不过要设定较低一些的迭代次数。这个次数需要根据自己服务器的计算能力和预计每秒需要处理的认证请求次数来设置。消除拒绝服务的威胁可以通过要求用户每次登陆时输入验证码（CAPTCH）来做到。系统设计时要将迭代次数可随时方便调整</strong></p><p>如果你担心计算带来负担，但又想在 Web 应用中使用密钥扩展，可以考虑在浏览器中使用 JavaScript 完成。斯坦福大学的 JavaScript 加密库就包含了 PBKDF2 的实现。迭代次数应设置足够低，以适应速度较慢的客户端，如移动设备。同时，如果用户的浏览器不支持 JavaScript ，服务端应该接手进行计算。客户端密钥扩展并不能免除服务端端进行哈希加密的需要。你必须对客户端生成的哈希值再次进行哈希加密，就跟普通口令的处理一样。</p><p><strong>大多数数据库被拖库是由于 SQL 注入攻击，因此，不要给攻击者进入本地文件系统的权限（禁止数据库服务访问本地文件系统，如果有此功能的话）。如果您生成一个随机密钥并将其存储在一个通过 Web 无法访问的文件上，然后进行加盐哈希加密，那么得到的哈希值就不会那么容易被破解了，就算数据库已经遭受注入攻击，也是安全的</strong></p><h2 id="其他安全措施"><a href="#其他安全措施" class="headerlink" title="其他安全措施"></a>其他安全措施</h2><p>Web 应用漏洞的重要资源:</p><p><a href="https://www.owasp.org/index.php/Main_Page">The Open Web Application Security Project</a></p><p><a href="http://owasptop10.googlecode.com/files/OWASP%20Top%2010%20-%202013.pdf">OWASP Top Ten Vulnerability List</a></p><p><strong>千万不要通过电子邮件向用户发送新密码。记得在用户重置密码时随机生成一个新的盐值用来加密，不要重复使用已用于密码哈希加密的旧盐值。</strong></p><p>看到这里,我发现自己以前多么愚蠢,让客户一点用户体验都没有</p><blockquote><p>不要过于频繁地强制你的用户更改密码，最多每半年一次，超过这个次数，用户就会感到疲劳。相反，更好的做法是教育用户，当他们感觉密码可能泄露时主动修改，并且提示用户不要把密码告诉任何人。如果这是一个商业环境，鼓励员工利用工作时间熟记并使用他们的密码。</p></blockquote><p>如果有人入侵您的数据库，他们很可能已经能够访问您的服务端上的所有内容，这样他们就不需要登录到您的帐号，就可以获得他们想要的东西。密码哈希（对网站而言）的目的不是为了保护被入侵的网站，而是在入侵已经发生时保护数据库中的密码。</p><p>嗯,就写到这里吧.我也不是安全人员,只是略微了解而已,如果想看到原文,可以看一下文章头的原链接</p>]]></content>
      
      
      
        <tags>
            
            <tag> 安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chrome开发者调试工具笔记</title>
      <link href="/2019/09/23/chrome-kai-fa-zhe-diao-shi-gong-ju-bi-ji/"/>
      <url>/2019/09/23/chrome-kai-fa-zhe-diao-shi-gong-ju-bi-ji/</url>
      
        <content type="html"><![CDATA[<p>(未完待续)</p><h2 id="Chrome-浏览器内截图"><a href="#Chrome-浏览器内截图" class="headerlink" title="Chrome 浏览器内截图"></a>Chrome 浏览器内截图</h2><p>按下F12,然后Ctrl+Shift+P,然后输入<code>Screenshot</code>,有几种截图方式供你选择.截图之后,图片会自动下载</p><p><img src="1.png"></p><h2 id="打开设置界面"><a href="#打开设置界面" class="headerlink" title="打开设置界面"></a>打开设置界面</h2><p>在开发者工具里面,按下F1,即可打开设置</p><p><img src="2.png"></p><p>在这里,你可以设置界面为<code>Dark模式</code>,这个对我太重要,不然白茫茫的一片,眼睛都要瞎了……</p><p>或者,我们按下 <code>Ctrl + Shift + P</code> ,可以打开命令菜单</p><p><img src="3.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> Chrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Npm 笔记</title>
      <link href="/2019/09/22/nmp-bi-ji/"/>
      <url>/2019/09/22/nmp-bi-ji/</url>
      
        <content type="html"><![CDATA[<p>参考的原文地址:</p><blockquote><p><a href="https://www.kancloud.cn/shellway/npm-doc/199983">https://www.kancloud.cn/shellway/npm-doc/199983</a></p></blockquote><h2 id="包的概念"><a href="#包的概念" class="headerlink" title="包的概念"></a>包的概念</h2><p>这些可复用代码被称作”包”，有时也叫做”模块”。包仅是一个包含一些文件的目录，以及一个名称为 “package.json” 的文件，此文件中包含了一些有关此包的元数据</p><p>npm 是作为 node 的包管理器开始的，所以你可以找到很多可用于服务器端的包。</p><p>安装 npm 包有两种方式：<code>本地安装</code>或 <code>全局安装</code>。根据你想如何使用包，你可以选择安装方式。</p><p>如果你想要从你自己的模块中通过使用 Node.js 的 require 方法来依赖某个包，那你可以本地安装这个包，这是npm安装的默认行为。另外，如果你想当做命令行工具使用它，比如 grunt CLI，那你应该全局安这个包。</p><p>译注：所谓 “本地安装”，就是在项目文件夹中安装 npm 依赖包，以便此项目调用；“全局安装”相反，安装之后可以供所有项目直接调用，可以免去重复安装的步骤和空间。</p><p>使用下面命令安装</p><pre class="line-numbers language-none"><code class="language-none">npm install &lt;package_name&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>此命令将在你的<strong>当前目录</strong>创建<code>node_modules</code>目录（若还未安装任何包），并将下载此包到这个目录。</p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>为确保 npm 安装正确工作，请检查 <code>node_modules</code> 目录是否存在，以及其下是否包含你安装的包目录。你可以在 Unix 系统（如OSX、Debian）中执行 <code>ls node_modules</code> 命令或在 Windows 系统中执行 <code>dir node_modules</code> 命令来检查。</p><h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>运行如下命令</p><pre class="line-numbers language-none"><code class="language-none">npm init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>此为初始化项目命令，会在你运行此命令的文件夹根目录下创建项目配置文件：package.json。同时每行会出现一个问题，你输入答案后会出来另一个问题。这些问题最终会记录到 package.json 文件中。</p><pre class="line-numbers language-none"><code class="language-none">npm init --yes<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这样就不会要你回答问题了</p><h3 id="升级-npm"><a href="#升级-npm" class="headerlink" title="升级 npm"></a>升级 npm</h3><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;更新最新版本npm install npm@latest -g&#x2F;&#x2F;测试最新版本npm install npm@next -g<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><pre class="line-numbers language-none"><code class="language-none">npm install &lt;package_name&gt;npm install &lt;package_name&gt;@版本号npm install &lt;pagkage_name&gt;@latest<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="清楚本地缓存"><a href="#清楚本地缓存" class="headerlink" title="清楚本地缓存"></a>清楚本地缓存</h3><pre class="line-numbers language-none"><code class="language-none">npm cache clear<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h3><p>“dependencies”: 您的应用程序在生产中需要这些包.<br>“devDependencies”: 这些包只用于开发和测试.</p><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;添加到 dependenciesnpm install &lt;package_name&gt; --save&#x2F;&#x2F;添加到 devDependenciesnpm install &lt;package_name&gt; --save-dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="更新本地包"><a href="#更新本地包" class="headerlink" title="更新本地包"></a>更新本地包</h3><p>运在 package.jso n同级目录下，运行<br><code>npm update</code><br>命令，来实现依赖包的更新。</p><h3 id="全局操作"><a href="#全局操作" class="headerlink" title="全局操作"></a>全局操作</h3><pre class="line-numbers language-none"><code class="language-none">npm install -g &lt;package&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>更新全局包,只需再全局安装一下</p><p>查看哪些安装包需要更新,</p><pre class="line-numbers language-none"><code class="language-none">npm outdated -g --depth&#x3D;0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>更新所有全局包</p><pre class="line-numbers language-none"><code class="language-none">npm update -g <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>卸载全局包</p><pre class="line-numbers language-none"><code class="language-none">npm uninstall -g &lt;package&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="删除本地模块"><a href="#删除本地模块" class="headerlink" title="删除本地模块"></a>删除本地模块</h3><pre class="line-numbers language-none"><code class="language-none">npm uninstall 模块<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>删除本地模块时你应该思考的问题：是否将在package.json上的相应依赖信息也消除？</p><pre class="line-numbers language-none"><code class="language-none">&gt; npm uninstall 模块 #删除模块，但不删除模块留在package.json中的对应信息&gt; npm uninstall 模块 --save #删除模块，同时删除模块留在package.json中dependencies下的对应信息&gt; npm uninstall 模块 --save-dev #删除模块，同时删除模块留在package.json中devDependencies下的对应信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="信息查看"><a href="#信息查看" class="headerlink" title="信息查看"></a>信息查看</h3><pre class="line-numbers language-none"><code class="language-none">npm list -g 或 npm ls -g &#x2F;&#x2F;获得全局安装的模块npm list  &lt;package&gt;或 npm ls &lt;package&gt;  &#x2F;&#x2F;查看模块的版本号npm info  &lt;package&gt; &#x2F;&#x2F;显示包的信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="一些参数"><a href="#一些参数" class="headerlink" title="一些参数"></a>一些参数</h3><pre class="line-numbers language-none"><code class="language-none">-S 或 --save：包被写入到package.json的 dependencies。-D 或 --save-dev：包被写入到package.json的 devDependencies。-O 或 --save-optional：包被写入到package.json的optionalDependencies-B 或 --save-bundle ： 包也将被添加到bundleDependencies。-E 或 --save-exact ：会在 package.json 文件指定安装模块的确切版本。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><p><code>npm list</code> 命令以树型结构列出当前项目安装的所有模块，以及它们依赖的模块。</p><p><code>npm list -g</code> 查看全局的安装</p><h2 id="版本号"><a href="#版本号" class="headerlink" title="版本号"></a>版本号</h2><pre class="line-numbers language-Json" data-language="Json"><code class="language-Json">&quot;dependencies&quot;: &#123;    &quot;bluebird&quot;: &quot;^3.3.4&quot;,    &quot;body-parser&quot;: &quot;~1.15.2&quot;    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>当我们使用最新的Node运行 <code>npm instal --save xxx</code>，的时候，他会优先考虑使用插入符号（^）而不是波浪符号（~）了</strong></p><p>在项目下的 package.json 文件，可以指定 package 的版本号</p><p><code>^</code> : 会把当前库的版本更新到当前 major version（也就是第一位数字）中最新的版本。放到我们的例子中就是：bluebird:^3.3.4，这个库会去匹配 3.x.x 中最新的版本，但是他不会自动更新到 4.0.0</p><p><code>~</code> : 会更新到当前 minor version（也就是中间的那位数字）中最新的版本。放到我们的例子中就是：body-parser: ~1.15.2，这个库会去匹配更新到 1.15.x 的最新版本，如果出了一个新的版本为 1.16.0，则不会自动升级</p><p>1.15.2 对应就是 MAJOR MINOR PATCH</p><p>1 是 marjor version<br>15 是 minor version<br>2 是 patch version</p><p>MAJOR：这个版本号变化了表示有了一个不可以和上个版本兼容的大更改。</p><p>MINOR：这个版本号变化了表示有了增加了新的功能，并且可以向后兼容。</p><p>PATCH：这个版本号变化了表示修复了bug，并且可以向后兼容。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote><p><a href="https://www.cnblogs.com/penghuwan/p/6973702.html">https://www.cnblogs.com/penghuwan/p/6973702.html</a></p></blockquote><blockquote><p><a href="https://juejin.cn/post/6858476253901651982">https://juejin.cn/post/6858476253901651982</a></p></blockquote><blockquote></blockquote><p><a href="https://blog.csdn.net/njweiyukun/article/details/70309066">https://blog.csdn.net/njweiyukun/article/details/70309066</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 编程 </tag>
            
            <tag> JS </tag>
            
            <tag> NPM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记录一下部署本博客遇到的问题</title>
      <link href="/2019/09/21/ji-lu-yi-xia-bu-shu-ben-bo-ke-yu-dao-de-wen-ti/"/>
      <url>/2019/09/21/ji-lu-yi-xia-bu-shu-ben-bo-ke-yu-dao-de-wen-ti/</url>
      
        <content type="html"><![CDATA[<h2 id="npm安装脚本速度慢"><a href="#npm安装脚本速度慢" class="headerlink" title="npm安装脚本速度慢"></a>npm安装脚本速度慢</h2><p>方便一点，我直接更改为阿里的国内镜像</p><p>npm config set registry <a href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a></p><h2 id="npm-使用代理"><a href="#npm-使用代理" class="headerlink" title="npm 使用代理"></a>npm 使用代理</h2><p>后面加上</p><p>-proxy=<a href="http://127.0.0.1:1080/">http://127.0.0.1:1080</a></p><h2 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h2><p>npm install -g hexo-cli  </p><h2 id="连接Github与本地"><a href="#连接Github与本地" class="headerlink" title="连接Github与本地"></a>连接Github与本地</h2><p>git config –global user.name “godweiyang”<br>git config –global user.email “<a href="mailto:&#55;&#x39;&#x32;&#51;&#x32;&#x31;&#x32;&#x36;&#x34;&#x40;&#x71;&#x71;&#x2e;&#99;&#x6f;&#x6d;">&#55;&#x39;&#x32;&#51;&#x32;&#x31;&#x32;&#x36;&#x34;&#x40;&#x71;&#x71;&#x2e;&#99;&#x6f;&#x6d;</a>“</p><h2 id="测试与Github的连接"><a href="#测试与Github的连接" class="headerlink" title="测试与Github的连接"></a>测试与Github的连接</h2><p>ssh -T <a href="mailto:&#103;&#x69;&#116;&#64;&#x67;&#105;&#116;&#104;&#117;&#98;&#x2e;&#x63;&#111;&#x6d;">&#103;&#x69;&#116;&#64;&#x67;&#105;&#116;&#104;&#117;&#98;&#x2e;&#x63;&#111;&#x6d;</a></p><h2 id="配置文件的更改"><a href="#配置文件的更改" class="headerlink" title="配置文件的更改"></a>配置文件的更改</h2><p>为了与github通信，我们修改博客根目录下面的<code>_config.yml</code><br>增加如下内容：</p><pre class="line-numbers language-none"><code class="language-none">deploy:type: gitrepository: git@github.com:user_name&#x2F;repository_name.gitbranch: master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="使用第三方主题"><a href="#使用第三方主题" class="headerlink" title="使用第三方主题"></a>使用第三方主题</h2><p>我用的是这个主题，有点小bug，不过总体效果还是不错的</p><blockquote><p><a href="https://github.com/blinkfox/hexo-theme-matery">https://github.com/blinkfox/hexo-theme-matery</a></p></blockquote><h3 id="文章头设置"><a href="#文章头设置" class="headerlink" title="文章头设置"></a>文章头设置</h3><p>首先为了新建文章方便，建议将/scaffolds/post.md修改为如下代码：</p><pre class="line-numbers language-none"><code class="language-none">--- title: &#123;&#123; title &#125;&#125; date: &#123;&#123; date &#125;&#125;  top: false  cover: false  password:  toc: true  mathjax: true  summary:  tags:  categories:  ---<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="添加动漫人物"><a href="#添加动漫人物" class="headerlink" title="添加动漫人物"></a>添加动漫人物</h3><p>安装live2d</p><pre class="line-numbers language-none"><code class="language-none">npm install --save hexo-helper-live2d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>安装模型</p><p>npm install live2d-widget-model-shizuku</p><p>更多模型请参考</p><blockquote><p><a href="https://github.com/xiazeyu/live2d-widget-models">https://github.com/xiazeyu/live2d-widget-models</a></p></blockquote><p>在根目录配置文件中添加如下代码</p><pre class="line-numbers language-none"><code class="language-none"># Live2D## https:&#x2F;&#x2F;github.com&#x2F;EYHN&#x2F;hexo-helper-live2d## https:&#x2F;&#x2F;l2dwidget.js.org&#x2F;docs&#x2F;class&#x2F;src&#x2F;index.js~L2Dwidget.html#instance-method-initlive2d:  enable: true  #enable: false  scriptFrom: local # 默认  pluginRootPath: live2dw&#x2F; # 插件在站点上的根目录(相对路径)  pluginJsPath: lib&#x2F; # 脚本文件相对与插件根目录路径  pluginModelPath: assets&#x2F; # 模型文件相对与插件根目录路径  # scriptFrom: jsdelivr # jsdelivr CDN  # scriptFrom: unpkg # unpkg CDN  # scriptFrom: https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;live2d-widget@3.x&#x2F;lib&#x2F;L2Dwidget.min.js # 你的自定义 url  tagMode: false # 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中  debug: false # 调试, 是否在控制台输出日志  model:    use: live2d-widget-model-hibiki    # use: live2d-widget-model-wanko # npm-module package name    # use: wanko # 博客根目录&#x2F;live2d_models&#x2F; 下的目录名    # use: .&#x2F;wives&#x2F;wanko # 相对于博客根目录的路径    # use: https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;live2d-widget-model-wanko@1.0.5&#x2F;assets&#x2F;wanko.model.json # 你的自定义 url  display:    position: right    width: 145    height: 315  mobile:    show: true # 是否在移动设备上显示    scale: 0.5 # 移动设备上的缩放  react:    opacityDefault: 0.7    opacityOnHover: 0.8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>到这里，就完成了</p><p>这里有一些扩展的知识，我mark下来备用</p><blockquote><p><a href="https://www.wikimoe.com/?post=158">https://www.wikimoe.com/?post=158</a></p></blockquote><blockquote><p><a href="https://imjad.cn/archives/lab/add-dynamic-poster-girl-with-live2d-to-your-blog-03">https://imjad.cn/archives/lab/add-dynamic-poster-girl-with-live2d-to-your-blog-03</a></p></blockquote><h3 id="添加网易外链播放"><a href="#添加网易外链播放" class="headerlink" title="添加网易外链播放"></a>添加网易外链播放</h3><p>首先复制网易外链播放器生成的HTML代码，然后粘贴到文章里面就行了，你也可以居中一下</p><pre class="line-numbers language-none"><code class="language-none">&lt;div align&#x3D;&quot;middle&quot;&gt;这里粘贴刚刚复制的代码&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="新建标签-tags-页"><a href="#新建标签-tags-页" class="headerlink" title="新建标签 tags 页"></a>新建标签 tags 页</h3><p>hexo new page “tags”</p><p>编辑<code>/source/tags/index.md</code>，替换里面的内容为</p><pre class="line-numbers language-none"><code class="language-none">---title: tagsdate: 2018-09-30 18:23:38type: &quot;tags&quot;layout: &quot;tags&quot;---<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="添加搜索功能"><a href="#添加搜索功能" class="headerlink" title="添加搜索功能"></a>添加搜索功能</h3><p>npm install hexo-generator-search –save</p><p>在 Hexo根目录下<code>_config.yml</code> ，新增如下内容</p><pre class="line-numbers language-none"><code class="language-none">search:  path: search.xml  field: post<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="中文链接转拼音（可选的）"><a href="#中文链接转拼音（可选的）" class="headerlink" title="中文链接转拼音（可选的）"></a>中文链接转拼音（可选的）</h3><p>如果你的文章名称是中文的，那么 Hexo 默认生成的永久链接也会有中文，这样不利于 SEO，且 gitment 评论对中文链接也不支持。我们可以用 hexo-permalink-pinyin Hexo 插件使在生成文章时生成中文拼音的永久链接。</p><p>npm i hexo-permalink-pinyin –save</p><p>在 Hexo 根目录下的 _config.yml 文件中，新增以下的配置项：</p><pre class="line-numbers language-none"><code class="language-none">permalink_pinyin:  enable: true  separator: &#39;-&#39; # default: &#39;-&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="修改页脚"><a href="#修改页脚" class="headerlink" title="修改页脚"></a>修改页脚</h3><p>页脚信息可能需要做定制化修改，而且它不便于做成配置信息，所以可能需要你自己去再修改和加工。修改的地方在主题文件的 /layout/_partial/footer.ejs 文件中，包括站点、使用的主题、访问量等。</p><h3 id="Front-matter"><a href="#Front-matter" class="headerlink" title="Front-matter"></a>Front-matter</h3><p>Front-matter 选项中的所有内容均为非必填的。但我仍然建议至少填写 title 和 date 的值。</p><h3 id="修改主题颜色"><a href="#修改主题颜色" class="headerlink" title="修改主题颜色"></a>修改主题颜色</h3><p>在主题文件的 /source/css/matery.css 文件中，搜索 .bg-color 来修改背景颜色</p><h3 id="修改-banner-图和文章特色图"><a href="#修改-banner-图和文章特色图" class="headerlink" title="修改 banner 图和文章特色图"></a>修改 banner 图和文章特色图</h3><p>你可以直接在 /source/medias/banner 文件夹中更换你喜欢的 banner 图片，主题代码中是每天动态切换一张，只需 7 张即可。</p><p>在 /source/medias/featureimages 文件夹中默认有 24 张特色图片，你可以再增加或者减少，并需要在 _config.yml 做同步修改。</p><h3 id="修改最底下进度条的颜色，大小"><a href="#修改最底下进度条的颜色，大小" class="headerlink" title="修改最底下进度条的颜色，大小"></a>修改最底下进度条的颜色，大小</h3><p>找到文件<br>Blog\themes\hexo-theme-matery\source\css\matery.css</p><p>然后找到如下 class 修改</p><p><img src="1.png"></p><h3 id="让代码块自动换行"><a href="#让代码块自动换行" class="headerlink" title="让代码块自动换行"></a>让代码块自动换行</h3><p>有时使用了代码块引用了一段文字，但是没有换行，导致出现进度条，很难阅读</p><p>解决方法；在<code>matery.css</code>的<code>pre</code>标签增加如下内容</p><p><img src="3.png"></p><h3 id="修改valine评论bug"><a href="#修改valine评论bug" class="headerlink" title="修改valine评论bug"></a>修改valine评论bug</h3><p>如果你用的标题字体，那么会出行如下问题</p><p><img src="2.png"></p><p>修改主题文件夹下面的<code>valine.ejs</code>，添加如下内容</p><pre class="line-numbers language-none"><code class="language-none">div .vcontent&#123;        padding-left: 10px;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="推送到GitHub"><a href="#推送到GitHub" class="headerlink" title="推送到GitHub"></a>推送到GitHub</h2><p>安裝一個插件</p><pre class="line-numbers language-none"><code class="language-none">npm install hexo-deployer-git --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然後 <code>hexo d</code></p><h2 id="手動推送"><a href="#手動推送" class="headerlink" title="手動推送"></a>手動推送</h2><p>不幸的是，上述命令虽然简单方便，但是偶尔会有莫名其妙的问题出现，因此，我们也可以追本溯源，使用git命令来完成部署的工作。</p><p>克隆GitHub的仓库到本地</p><p>将我们之前创建的repo克隆到本地，新建一个目录叫做deploy用于存放克隆的代码。</p><p>cd d:/hexo/blog</p><p>git clone <a href="https://github.com/jiji262/jiji262.github.io.git">https://github.com/jiji262/jiji262.github.io.git</a> deploy/</p><p>新建一个脚本,注意,此脚本放置在根目录下面</p><pre class="line-numbers language-none"><code class="language-none">hexo generatecp -R public&#x2F;* deploy&#x2F;cd deploy&#x2F;git add .git commit -m “update”git push origin master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>详情参见:</p><blockquote><p><a href="https://linghucong.js.org/2016/04/15/2016-04-15-hexo-github-pages-blog/">https://linghucong.js.org/2016/04/15/2016-04-15-hexo-github-pages-blog/</a></p></blockquote><h2 id="设置Git代理"><a href="#设置Git代理" class="headerlink" title="设置Git代理"></a>设置Git代理</h2><p>国内的环境,大家都懂的.有时push发现速度慢的化,不如试试指定代理</p><h3 id="设置http代理"><a href="#设置http代理" class="headerlink" title="设置http代理"></a>设置http代理</h3><pre class="line-numbers language-none"><code class="language-none">git config --global http.proxy http:&#x2F;&#x2F;127.0.0.1:1080git config --global https.proxy https:&#x2F;&#x2F;127.0.0.1:1080<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="设置socks5代理"><a href="#设置socks5代理" class="headerlink" title="设置socks5代理"></a>设置socks5代理</h3><pre class="line-numbers language-none"><code class="language-none">git config --global http.proxy socks5:&#x2F;&#x2F;127.0.0.1:1080git config --global https.proxy socks5:&#x2F;&#x2F;127.0.0.1:1080<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="取消代理"><a href="#取消代理" class="headerlink" title="取消代理"></a>取消代理</h3><pre class="line-numbers language-none"><code class="language-none">git config --global --unset http.proxygit config --global --unset https.proxy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>更多资讯,请参考下方链接</p><blockquote><p><a href="http://ralphbupt.github.io/2017/04/24/git%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%8F%96%E6%B6%88/">http://ralphbupt.github.io/2017/04/24/git%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%8F%96%E6%B6%88/</a></p></blockquote><h2 id="ssh-通过代理连接"><a href="#ssh-通过代理连接" class="headerlink" title="ssh 通过代理连接"></a>ssh 通过代理连接</h2><blockquote><p>ssh -o ProxyCommand=”nc -x 127.0.0.1:1086 %h %p” <a href="mailto:&#x72;&#x6f;&#111;&#x74;&#x40;&#x31;&#48;&#49;&#46;&#49;&#x32;&#49;&#46;&#x32;&#49;&#56;&#46;&#50;&#x33;&#52;">&#x72;&#x6f;&#111;&#x74;&#x40;&#x31;&#48;&#49;&#46;&#49;&#x32;&#49;&#46;&#x32;&#49;&#56;&#46;&#50;&#x33;&#52;</a></p></blockquote><p><img src="4.png"></p><p>更多情况,参考下面链接:</p><blockquote><p><a href="https://www.xiebruce.top/650.html">https://www.xiebruce.top/650.html</a></p></blockquote><h2 id="修改后实时更新情况"><a href="#修改后实时更新情况" class="headerlink" title="修改后实时更新情况"></a>修改后实时更新情况</h2><p>如果你是在本地测试,浏览器调用的是博客根目录下面的<code>source</code>文件夹(而不是<code>public</code>里面的)当你添加完或者修改一篇文章后,在浏览器可以直接刷新实时查看修改.</p><p>对于主题,修改一下css也是可以直接生效的,不需要重启服务.<br>但是,如果涉及到修改博客根目录下面的_config.yml等文件,就需要重启服务了</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Hexo </tag>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深信服防火墙初探</title>
      <link href="/2019/09/21/shen-xin-fu-fang-huo-qiang-chu-tan/"/>
      <url>/2019/09/21/shen-xin-fu-fang-huo-qiang-chu-tan/</url>
      
        <content type="html"><![CDATA[<h2 id="各种malware（恶意软件）-区别"><a href="#各种malware（恶意软件）-区别" class="headerlink" title="各种malware（恶意软件）  区别"></a>各种malware（恶意软件）  区别</h2><blockquote><p><a href="https://matcitsupport.org/what-are-the-differences-between-adware-virus-worms-spyware-trojan-rootkits-backdoors-logic-bomb-and-botnets/">https://matcitsupport.org/what-are-the-differences-between-adware-virus-worms-spyware-trojan-rootkits-backdoors-logic-bomb-and-botnets/</a></p></blockquote><ul><li><p>Adware：广告软件，可以让广告商追踪你的访问记录。在中国有一个更贴切的名称–“流氓软件”。这些软件严重损害用户利益。比如2345，腾讯，360等厂商旗下的一些软件。</p></li><li><p>Virus： 病毒，通过文件分享或邮件传播，占用系统资源，导致电脑崩溃。有时可以自我传播</p></li><li><p>Worms：蠕虫（也称蠕虫病毒）和病毒很像，但是会自我扩散。它利用应用程序的漏洞起作用</p></li><li><p>Spyware：间谍软件，感染之后，一般不会发现它的存在，会收集你的信息，如账号密码，屏幕截图，然后发送给攻击者</p></li><li><p>Trojan：木马（特洛伊），名字源于古希腊的木马攻城计。病毒可以伪装成正常的应用。比如你下载了一个激活软件，但是里面却包含有一个记录你键盘输入的木马</p></li><li><p>Rootkits：这个暂时没找到中文名。这种恶意软件一开始的设计就是隐藏自己，来逃过系统和杀毒软件的检测。这个东西会监视你的网络流量还有键盘输入等。主要影响“user-mode applications” ，当然，也会影响内核，固件。 它可以摧毁或者使杀毒软件无效。因此，Rootkits使很难追踪和清除的。它可以隐藏的很好</p></li><li><p>Backdoors：后门，注重隐藏，允许控制者执行他们想要的动作，一般为下一步的进攻做准备。被感染的机器俗称“肉鸡”。</p></li><li><p>Logic bomb：逻辑炸弹，在固定的时间造成损害，在活跃之前，完全无害。主要破坏数据库</p></li><li><p>Botnets：僵尸网络。一片网络的电脑感染了恶意软件。通常隐蔽的很好，在必要的时候，攻击者可以操控这些感染了的机器执行特定任务，比如DDOS攻击</p></li></ul><h2 id="防护类型"><a href="#防护类型" class="headerlink" title="防护类型"></a>防护类型</h2><p>SQL注入、xss攻击、网页木马、网站扫描、webshell、跨站请求伪造、系统命令注入、文件包含攻击、目录遍历攻击、信息泄漏攻击、web整站系统漏洞</p><h2 id="僵尸网络判断"><a href="#僵尸网络判断" class="headerlink" title="僵尸网络判断"></a>僵尸网络判断</h2><p>检查目的地址，结合深信服自己发现的以及一些第三方威胁情报机构。如：微步在线发现的木马服务器地址库进行判断</p><h2 id="弱密码检测"><a href="#弱密码检测" class="headerlink" title="弱密码检测"></a>弱密码检测</h2><p>通过分析经过的流量，根据关键字提取疑似密码的字符串和弱密码库对比</p><h2 id="防火墙规则库"><a href="#防火墙规则库" class="headerlink" title="防火墙规则库"></a>防火墙规则库</h2><p>防火墙的规则库会自动更新，一般是一、二周更新一次的，规则库更新会涉及收费的，以年为单位</p><h3 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h3><h4 id="web漏洞攻击"><a href="#web漏洞攻击" class="headerlink" title="web漏洞攻击"></a>web漏洞攻击</h4><h4 id="scan漏洞攻击"><a href="#scan漏洞攻击" class="headerlink" title="scan漏洞攻击"></a>scan漏洞攻击</h4><h4 id="口令暴力破解攻击"><a href="#口令暴力破解攻击" class="headerlink" title="口令暴力破解攻击"></a>口令暴力破解攻击</h4><h4 id="僵尸网络活动"><a href="#僵尸网络活动" class="headerlink" title="僵尸网络活动"></a>僵尸网络活动</h4><h4 id="弱密码漏洞"><a href="#弱密码漏洞" class="headerlink" title="弱密码漏洞"></a>弱密码漏洞</h4><h4 id="配置错误漏洞"><a href="#配置错误漏洞" class="headerlink" title="配置错误漏洞"></a>配置错误漏洞</h4><h4 id="方法过滤"><a href="#方法过滤" class="headerlink" title="方法过滤"></a>方法过滤</h4><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>CNNVD 漏洞库 查询</p><blockquote><p><a href="http://www.cnnvd.org.cn/index.html">http://www.cnnvd.org.cn/index.html</a></p></blockquote><p>中国还有一个的 CNVD ，不要搞错这两者</p><p>漏洞编号</p><blockquote><p><a href="https://blog.csdn.net/tinyletero/article/details/25277507">https://blog.csdn.net/tinyletero/article/details/25277507</a></p></blockquote><p>CVE 编号的过程</p><blockquote><p><a href="http://blog.nsfocus.net/cve-vulnerability-numbers-officially-disclose/">http://blog.nsfocus.net/cve-vulnerability-numbers-officially-disclose/</a></p></blockquote><p>国外漏洞公布网站</p><blockquote><p><a href="https://blog.csdn.net/samxx8/article/details/82805046">https://blog.csdn.net/samxx8/article/details/82805046</a></p></blockquote><p>漏洞专报</p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/28205621">https://zhuanlan.zhihu.com/p/28205621</a></p></blockquote><h3 id="绵羊墙"><a href="#绵羊墙" class="headerlink" title="绵羊墙"></a>绵羊墙</h3><p>绵羊墙（The Wall of Sheep）</p><p>相当于耻辱柱</p><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>另外，附上一份官方说明书</p><p><a href="sangfor_af_v8.0.6_manual_cn_20181120_PDF.pdf">点击下载</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 安全 </tag>
            
            <tag> 防火墙 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>华为三层交换机备份恢复配置文件</title>
      <link href="/2019/09/21/hua-wei-san-ceng-jiao-huan-ji-bei-fen-hui-fu-pei-zhi-wen-jian/"/>
      <url>/2019/09/21/hua-wei-san-ceng-jiao-huan-ji-bei-fen-hui-fu-pei-zhi-wen-jian/</url>
      
        <content type="html"><![CDATA[<h2 id="一、使用Console进行配置"><a href="#一、使用Console进行配置" class="headerlink" title="一、使用Console进行配置"></a>一、使用Console进行配置</h2><p>首次使用此交换机，必须通过console口配置，完成后才可以使用WEB页面进行进一步的配置操作<br><img src="pics/1.png"></p><p>使用上图的线分别连接电脑的usb口和<strong>交换机的CONSOLE口</strong><br><img src="pics/2.png"></p><p>然后，查看电脑是否已经安装好驱动，如下图所示。如果显示异常，用驱动大师等打驱动<br><img src="pics/3.png"></p><p>使用 putty 或者华为的 IPOP 软件</p><p><a href="IPOP-V4.1.EXE">点击这里下载IPOP软件</a></p><p>这里，我以putty为例，打开软件后，按下图填写， 【COM3】这个通过在<strong>设备管理器</strong>那里查看获取<br><img src="pics/4.png"></p><p>然后，就进入了控制台，如果没有反应，按一下回车键</p><h2 id="二、初始化交换机"><a href="#二、初始化交换机" class="headerlink" title="二、初始化交换机"></a>二、初始化交换机</h2><p>参考网址：<br><a href="https://support.huawei.com/enterprise/zh/knowledge/EKB1000067741">https://support.huawei.com/enterprise/zh/knowledge/EKB1000067741</a></p><h3 id="如下是知道密码的方法："><a href="#如下是知道密码的方法：" class="headerlink" title="如下是知道密码的方法："></a>如下是知道密码的方法：</h3><p>进入Console，输入下方命令，进入系统视图</p><blockquote><p>system-view</p></blockquote><p>然后输入</p><blockquote><p>undo startup saved-configuration</p></blockquote><p>ctrl+z 退出 系统视图，进入用户视图，输入</p><blockquote><p>reset saved-configuration </p></blockquote><p>在出现的提示中输入 【y】</p><p>然后，输入</p><blockquote><p>reboot</p></blockquote><p>重启设备，此时系统会提示两次选择，第一次提示是否保存当前配置，选择N，第二次提示是否重启，选择Y。  重启完成后设备即恢复出厂设置。</p><h3 id="如果不知道密码，则使用下方的方法"><a href="#如果不知道密码，则使用下方的方法" class="headerlink" title="如果不知道密码，则使用下方的方法"></a>如果不知道密码，则使用下方的方法</h3><p>按下开关，重启交换机</p><p>重启过程中，出现如下提示,按下Ctrl+B 进入 BOOTROM 菜单</p><blockquote><p>Press Ctrl+B to enter BootROM menu … 2</p></blockquote><p>然后输入默认密码：</p><blockquote><p><a href="mailto:&#x41;&#100;&#x6d;&#x69;&#x6e;&#x40;&#104;&#x75;&#97;&#119;&#101;&#x69;&#46;&#99;&#x6f;&#109;">&#x41;&#100;&#x6d;&#x69;&#x6e;&#x40;&#104;&#x75;&#97;&#119;&#101;&#x69;&#46;&#99;&#x6f;&#109;</a></p></blockquote><p>输入 7 ，选择如下选项：</p><blockquote><ol start="7"><li>Clear password for console user</li></ol></blockquote><p>之后输入 1 ， 选择如下选项：</p><blockquote><ol><li>Boot with default mode</li></ol></blockquote><p>然后，按照上面知道密码的方法重置交换机</p><h2 id="三、开启WEB管理界面"><a href="#三、开启WEB管理界面" class="headerlink" title="三、开启WEB管理界面"></a>三、开启WEB管理界面</h2><p>参考文档：<a href="https://support.huawei.com/enterprise/zh/knowledge/EKB1000067408">https://support.huawei.com/enterprise/zh/knowledge/EKB1000067408</a></p><p>在Console下，输入 dir , 查看是否有 WEB.zip 或 WEB.7z 等字样的文件</p><blockquote><p>dir</p></blockquote><p>之后输入 sy ， 进入系统视图, 按照下方操作</p><blockquote><p>sy</p></blockquote><blockquote><p>http server load xxxxx.web.zip      //加载WEB文件，如果有加载过，则忽略</p></blockquote><blockquote><p>http server enable                           //开启WEB</p></blockquote><blockquote><p>aaa</p></blockquote><blockquote><p>local-user 用户名 pass cip 密码          //设置登陆账号密码，替换 “用户名” 和 “密码” </p></blockquote><blockquote><p>local-user 用户名 service-type http               //设置账号的服务类型</p></blockquote><blockquote><p>local-user 用户名  privilege level 15              //设置账号的权限等级，用户的优先级分为16个级别，级别标识为0～15，标识越高则优先级越高。</p></blockquote><blockquote><p>quit</p></blockquote><blockquote><p>int vlan 1</p></blockquote><blockquote><p>ip add x.x.x.x 24                                  //配置登陆的接口IP地址</p></blockquote><blockquote><p>quit</p></blockquote><blockquote><p>save                                                    //保存配置</p></blockquote><p>之后，用网线连接电脑和交换机。网线接交换机的LAN口，电脑设置ip 跟刚才设置的IP 同网段，然后浏览器访问该网址即可。</p><p>如果在浏览器访问过程中，有些地方不能操作，可能是浏览器问题，换成IE的吧</p><h2 id="四、启用交换机的Telnet"><a href="#四、启用交换机的Telnet" class="headerlink" title="四、启用交换机的Telnet"></a>四、启用交换机的Telnet</h2><blockquote><p>system-view  //输入命令进入系统视图 ,符号由 <sysname>变为[sysname]</p></blockquote><blockquote><p>telnet server ?  // 查看telnet的参数 ，如 enable 或 disable</p></blockquote><blockquote><p>telnet server enable // 开启交换机的telnet服务</p></blockquote><blockquote><p>telnet server port 23   // 可选，配置telent端口 （默认为23）</p></blockquote><blockquote><p>user-interface maximum-vty 5   // 默认为5，此选项可选，配置VTY用户界面的最大个数（同时可以登录的最大数）</p></blockquote><blockquote><p>user-interface vty 0 4  // 因为上面设置为 5 ， 所以这里填写 0（第一个界面）和4（最后一个界面），总共选择5个界面</p></blockquote><blockquote><p>protocol inbound telnet  //配置 vty 支持 telnet 协议</p></blockquote><blockquote><p>authentication-mode aaa  // 这些界面使用aaa认证</p></blockquote><blockquote><p>quit //退出vty配置界面</p></blockquote><blockquote><p>aaa  // 进入 aaa 配置界面</p></blockquote><blockquote><p>local-user <em>用户名</em> password ?  // 查看可以设置的密码类型</p></blockquote><blockquote><p>local-user teluser password irreversible-cipher General@1  //添加一个用户名为【teluser】的用户，密码为【General@1】，密码类型为不可逆加密</p></blockquote><blockquote><p>local-user teluser service-type telnet http  // 配置 teluser 这个用户可以使用的服务类型，这里给它配置了 telnet 和 http</p></blockquote><blockquote><p>local-user teluser privilege level 15  // 等级越高，权限越大，0-15 </p></blockquote><blockquote><p>quit</p></blockquote><blockquote><p>quit</p></blockquote><blockquote><p>save  // 保存配置</p></blockquote><p>到这里，交换机的Telnet服务就配置好了，剩下的，就是打开pc端，运行cmd ，输入命令</p><blockquote><p>telnet 192.168.1.22  //后面的ip 为交换机的ip</p></blockquote><p><img src="pics/5.png"></p><p>之后输入用户名和密码，后面的操作跟 Console 是一样的</p><h2 id="五、使用ftp备份还原交换机配置文件"><a href="#五、使用ftp备份还原交换机配置文件" class="headerlink" title="五、使用ftp备份还原交换机配置文件"></a>五、使用ftp备份还原交换机配置文件</h2><p>首先，使用IPOP这个软件在本地电脑开启Ftp服务，将电脑作为ftp服务器</p><p><img src="pics/6.png"></p><p>电脑开启ftp成功后，用Console或telent连接上交换机后台，将交换机作为ftp客户端，按如下操作</p><p>进入系统，后，输入 ftp ：</p><p><img src="pics/7.png"></p><p>然后输入，这样就打开了ftp服务器的地址</p><blockquote><p>open 192.168.1.44  //地址为你开启ftp服务电脑的ip</p></blockquote><p>因为ftp服务器没有定义用户和密码，直接按两下回车，进入我们电脑ftp共享的目录，可以输入<br>【dir】查看该共享目录下的文件</p><p>这里有两个命令，分别是【get】和【put】，直接在其后面加文件名，就可以上传和备份文件了</p><blockquote><p>[get] 是从服务器下载文件到本地 （即从pc共享目录导入文件到交换机）<br><br>[put] 是从本地上传文件到服务器 （即从交换机备份文件pc共享目录）</p></blockquote><h3 id="备份交换机配置文件"><a href="#备份交换机配置文件" class="headerlink" title="备份交换机配置文件"></a>备份交换机配置文件</h3><blockquote><p>put vrpcfg.zip  backup2019-5-7.zip   // [vrpcfg.zip] 这个文件就是交换机的配置文件， [backup2019-5-7.zip] 下载备份文件，另起一个名字</p></blockquote><h3 id="还原交换机配置文件"><a href="#还原交换机配置文件" class="headerlink" title="还原交换机配置文件"></a>还原交换机配置文件</h3><blockquote><p>get backup2019-5-7.zip  // 获取pc上的备份文件到交换机，（如果备份的文件名为vrpcfg.zip ,则会提示覆盖该文件，选择【Y】）</p></blockquote><blockquote><p>quit  // 退出 ftp</p></blockquote><blockquote><p>startup saved-configuration backup2019-5-7.zip   //设置恢复的配置文件为下次启动配置文件</p></blockquote><blockquote><p>display startup  // 显示目前的配置文件状态</p></blockquote><blockquote><p>reboot   //执行重启命令，让还原的配置生效.</p></blockquote><p><img src="pics/8.png"></p><p>** 出现上图的提示，记得选 【 N 】**</p><p>然后 提示重启 ，选择 【 Y 】</p><hr><p>注意事项：</p><ul><li>console 和 telnet 密码可以不同，还原后密码可能跟远程telnet不同</li><li>还原备份文件，文件一定要有后缀 .zip </li></ul><hr><p>另外，附上一个自己华为三层交换机的笔记</p><p><a href="华为三层交换机.txt" download="1.txt">点击下载笔记</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 硬件 </tag>
            
            <tag> 交换机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PVE使用总结</title>
      <link href="/2019/09/21/pve-shi-yong-zong-jie/"/>
      <url>/2019/09/21/pve-shi-yong-zong-jie/</url>
      
        <content type="html"><![CDATA[<p>这里总结我使用PVE的一些坑</p><h2 id="集群创建"><a href="#集群创建" class="headerlink" title="集群创建"></a>集群创建</h2><ol><li><p>首先在三台实体机上安装pve</p></li><li><p>安装完成后，在其中一台创建集群。登陆PVE的网页管理界面</p></li></ol><p><img src="pics/1.png"></p><ol start="3"><li>接下来，在其他2个pve节点，执行</li></ol><blockquote><p># pvecm add 10.0.77.170   ;其中10.0.77.170是上面创建集群的实体机的ip地址</p></blockquote><p>加入完成之后，可以通过命令在任何一个节点上查看集群情况</p><blockquote><p># pvecm status </p></blockquote><p>如果要查看集群日志，可以看文件 /var/log/daemon.log</p><p>集群建立完成之后，任何一个pve节点的web管理界面视图都可以管理整个集群</p><h2 id="删除节点"><a href="#删除节点" class="headerlink" title="删除节点"></a>删除节点</h2><blockquote><p># pvecm delnode pve</p></blockquote><h2 id="降低Cluster"><a href="#降低Cluster" class="headerlink" title="降低Cluster"></a>降低Cluster</h2><p>有时候，集群出现错误，比如某些节点发生故障，或网络错误。这时候，一些操作无法完成，<strong>甚至虚拟机无法开启</strong></p><pre class="line-numbers language-none"><code class="language-none">Cluster 中節點數量低於 2 時， Cluster 就會被鎖住，會陷入「no quorum」的狀態<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>暫時把 Cluster 的期待數量從 2 降低為 1</p><blockquote><p># pvecm expected 1</p></blockquote><p>重新啟動 Proxmox VE Cluster</p><blockquote><p># service pve-cluster restart</p></blockquote><p>参考资料</p><blockquote><p><a href="http://blog.ilc.edu.tw/blog/index.php?op=printView&amp;articleId=689007&amp;blogId=25793">http://blog.ilc.edu.tw/blog/index.php?op=printView&amp;articleId=689007&amp;blogId=25793</a></p></blockquote><h2 id="迁移或复制没有节点"><a href="#迁移或复制没有节点" class="headerlink" title="迁移或复制没有节点"></a>迁移或复制没有节点</h2><p>如果你想迁移虚拟机到其他节点，但是迁移并没有其他节点的选项，那</p><p>在每个节点的shell输入</p><blockquote><p># pvecm updatecerts -f</p></blockquote><h2 id="迁移过程中出现如下报错"><a href="#迁移过程中出现如下报错" class="headerlink" title="迁移过程中出现如下报错"></a>迁移过程中出现如下报错</h2><pre class="line-numbers language-none"><code class="language-none">found local disk &#39;local:iso&#x2F;cn_windows_server_2012_r2_vl_with_update_x64_dvd_6052729.iso&#39; (referenced by snapshot(s))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> 说明要迁移的虚拟机上面有挂载 iso 光盘镜像，需要先移除，包括快照里面的iso，也要移除</p><blockquote><p><a href="https://blog.csdn.net/weixin_34185560/article/details/91830209">https://blog.csdn.net/weixin_34185560/article/details/91830209</a></p></blockquote><h2 id="克隆备份"><a href="#克隆备份" class="headerlink" title="克隆备份"></a>克隆备份</h2><p> 克隆：两个节点直接复制虚拟机，不需要重复创建虚拟机<br> 备份：将虚拟机备份到一个文件，如果重装了PVE ，可以直接使用备份文件恢复虚拟机</p><h2 id="PVE-克隆不能克隆到其他节点"><a href="#PVE-克隆不能克隆到其他节点" class="headerlink" title="PVE 克隆不能克隆到其他节点"></a>PVE 克隆不能克隆到其他节点</h2><p> 解决方法：先克隆到本节点，然后迁移</p><h2 id="vmware-虚拟机迁移到-pve-Beta"><a href="#vmware-虚拟机迁移到-pve-Beta" class="headerlink" title="vmware 虚拟机迁移到  pve (Beta)"></a>vmware 虚拟机迁移到  pve (Beta)</h2><p> <strong>这个了解即可，我实验失败了，可用的迁移方式见另一个文档</strong></p><ol><li>导出vmware 虚拟机  </li></ol><p> <img src="pics/2.png"></p><ol start="2"><li>将刚才导出的vmdk文档迁移到pve节点上</li><li>执行 格式转换</li></ol><p> qemu-img是專門虛擬磁盤映像文件的qemu命令行工具</p><blockquote><p># qemu-img convert -f vmdk -O 原始映象檔名稱.vmdk 新虛擬機名稱.qcow2 </p></blockquote><p> 參數說明：convert 將磁盤文件轉換為指定格式的文件<br>-f 指定需要轉換文件的文件格式<br>-O 指定要轉換的目標格式</p><p>轉換完成後，將新生產一個目標映像文件，原文件仍保存。</p><h2 id="附加"><a href="#附加" class="headerlink" title="附加"></a>附加</h2><p>raw轉qcow2</p><blockquote><p># qemu-img convert -f raw centos.img -O qcow2 centos.qcow2 </p></blockquote><p>上传ISO镜像，通过sftp上传到以下目录/var/lib/vz/template/iso，但这里上传的iso只能本机显示，如果要让集群中其它的主机也能共享iso，那就要用到共享存储，比如NFS</p><h2 id="PVE-qm-命令"><a href="#PVE-qm-命令" class="headerlink" title="PVE  qm 命令"></a>PVE  qm 命令</h2><p>过命令“qm importdisk”来实现，qm是QEMU/KVM虚拟机的管理工具，可以将指定的磁盘映像导入到指定的虚拟机的存储中，后面要加所需的命令和参数，具体的格式如下：</p><blockquote><p># qm importdisk <vmid> <source> <storage></p></blockquote><p>下面是一个具体的实例：</p><blockquote><p># qm importdisk 201 vm-201-disk-1.qcow2   local-lvm</p></blockquote><p>其中，VM的ID为201，磁盘文件为“vm-201-disk-1.qcow2”，存储为“local-lvm”。</p><blockquote><p># qemu-img convert -f vmdk /mnt/usb/windows-server/windows-server.vmdk -O qcow2 /var/lib/vz/images/100/windows-server.qcow2</p></blockquote><h2 id="PVE-虚拟机无法拍摄快照"><a href="#PVE-虚拟机无法拍摄快照" class="headerlink" title="PVE 虚拟机无法拍摄快照"></a>PVE 虚拟机无法拍摄快照</h2><p> 如果你的虚拟机里的磁盘格式不支持快照，也就无法做快照</p><p> 下面的PVE官方的说明</p><blockquote><p><a href="https://pve.proxmox.com/wiki/Storage">https://pve.proxmox.com/wiki/Storage</a></p></blockquote><p> <img src="pics/3.png"></p><p> 要拍快照，可以先把不支持的磁盘卸载掉，然后再做快照</p><p>  <img src="pics/4.png"></p><h2 id="为-local-lvm-增加容量"><a href="#为-local-lvm-增加容量" class="headerlink" title="为 local-lvm 增加容量"></a>为 local-lvm 增加容量</h2><p> local-lvm 这个地方一般放置虚拟系统的磁盘文件，很容易爆满，因此。有时，我们需要增加硬盘</p><p> 进入PVE的后台操作：</p><p> 首先，停止系统，将固态硬盘接入。然后启动系统</p><p> 进入系统查看情况</p> <pre class="line-numbers language-none"><code class="language-none"># lsblk # fdisk &#x2F;dev&#x2F;sd? <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p> <img src="pics/5.png"></p><p>我新添加的硬盘是sdb，并且为它分了一个sdb1的主分区</p><p>然后</p><blockquote><p>pvcreate /dev/sdb1</p></blockquote><p>proxmox里面默认只有一个卷组，名字叫<code>pve</code>，可以通过执行下面命令查看</p><blockquote><p>vgs </p></blockquote><p>我们将添加的硬盘加入到<code>pve</code>这个卷组中去</p><blockquote><p>vgextend pve /dev/sdb1</p></blockquote><p> <img src="pics/7.png"></p><p> 这一步完成后，我们去网页前台，可以看到已经添加成功，但是还没有生效</p><p><img src="pics/8.png"> </p><p>之后我们查看一下逻辑卷组，其中，<code>data</code>就是我们需要添加容量的逻辑卷</p><blockquote><p>lvs </p></blockquote><p> <img src="pics/6.png"></p><p> 之后，开始扩展容量</p><blockquote><p>lvresize –size +50G pve/data</p></blockquote><p> pve 是卷组， data是逻辑卷</p><p> <img src="pics/9.png"></p><p> 可以看到，data逻辑卷已经扩容</p><p> 我们返回前台，容量已经用到了</p><p>  <img src="pics/10.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> PVE </tag>
            
            <tag> 虚拟化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>正则表达式笔记</title>
      <link href="/2019/09/21/zheng-ze-biao-da-shi-bi-ji/"/>
      <url>/2019/09/21/zheng-ze-biao-da-shi-bi-ji/</url>
      
        <content type="html"><![CDATA[<h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p>正则表达式（英语：Regular Expression，常简写为regex、regexp或RE），又称正则表示式、正则表示法、规则表达式、常规表示法，是计算机科学的一个概念。正则表达式使用单个字符串来描述、匹配一系列符合某个句法规则的字符串。在很多文本编辑器里，正则表达式通常被用来检索、替换那些符合某个模式的文本。 </p><p>正则表达式这个概念最初是由Unix中的工具软件（例如sed和grep）普及开的。 </p><p><strong>先了解基本的，后面多练，光靠记忆是记不住的</strong></p><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><blockquote><p>通常，处理正则表达式的工具会提供一个忽略大小写的选项，如果选中了这个选项，它可以匹配hi,HI,Hi,hI这四种情况中的任意一种</p></blockquote><p><code>\b</code> ：代表单词的开头或结尾，也就是单词的分界处</p><p><code>\bhi\b</code> ：表示 寻找  hi 这个单词 ，而不会搜索到 him 这种包含 hi 的单词</p><p><code>.</code> ：匹配除了换行符意外的任意字符</p><p><code>*</code> ：不是代表字符，也不是位置，而是<strong>数量</strong>。它指定 * 前面的内容可以连续重复使用任意次</p><p><code>.*</code> ：代表 任意数量的不包含换行的字符</p><p><code>\d</code> ：匹配一个数字</p><p><code>\d&#123;2&#125;</code> ： 表示匹配两个数字，是 <code>\d\d</code> 的简写</p><h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><p>上面介绍的那些都是元字符</p><p>还有下面这些</p><p><code>\s</code> ：匹配任意的空白符，包括空格，制表符（Tab），换行符，中文全角空格等</p><p><code>\w</code> ：匹配字母或数字或下划线或汉字等（对汉字的支持情况要参考各个软件的相关文档）</p><p><code>\ba\w*\b</code> ：匹配以字母a开头的单词</p><p><code>\d+</code> ： 匹配一个或更多连续的数字 。 ** 这里的 <code>+</code> 和 <code>*</code> 是类似的元字符，不同的是 * 匹配重复任意次（可能是0次），而 + 者匹配重复1次或更多次</p><table><thead><tr><th>代码</th><th>说明</th></tr></thead><tbody><tr><td>.</td><td>匹配除换行符以外的任意字符</td></tr><tr><td>\w</td><td>匹配字幕或数字或下划线或汉字</td></tr><tr><td>\s</td><td>匹配任意的空白符</td></tr><tr><td>\d</td><td>匹配数字</td></tr><tr><td>\b</td><td>匹配单词的开始或结束</td></tr><tr><td>^</td><td>匹配字符串的开始</td></tr><tr><td>$</td><td>匹配字符串的结束</td></tr></tbody></table><p><code>^\d&#123;5,12&#125;$</code> ：表示5到12位的QQ号码</p><h2 id="字符转义"><a href="#字符转义" class="headerlink" title="字符转义"></a>字符转义</h2><p>如果要搜索特殊的符号，比如 * 号，那就需要用到转义符 <code>\</code> </p><h2 id="重复"><a href="#重复" class="headerlink" title="重复"></a>重复</h2><table><thead><tr><th>代码</th><th>说明</th></tr></thead><tbody><tr><td>*</td><td>重复零次或更多次</td></tr><tr><td>+</td><td>重复一次或更多次</td></tr><tr><td>?</td><td>重复零次或一次</td></tr><tr><td>{n}</td><td>重复n次</td></tr><tr><td>{n,}</td><td>重复n次或更多次</td></tr><tr><td>{n,m}</td><td>重复n到m次</td></tr></tbody></table><h2 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a>字符类</h2><p><code>[aeiou]</code> ： 匹配其中任意一个<br><code>[0-9]</code> ： 含义与 <code>\d</code> 一致 ，一位数字<br><code>[a-z0-9A-Z]</code> ： 含义与 <code>\w</code> 一致 （英文情况下）</p><h2 id="分支条件"><a href="#分支条件" class="headerlink" title="分支条件"></a>分支条件</h2><p>正则表达式里的分枝条件指的是有几种规则，如果满足其中任意一种规则都应该当成匹配，具体方法是用|把不同的规则分隔开</p><p><strong>匹配分枝条件时，将会从左到右地测试每个条件，如果满足了某个分枝的话，就不会去再管其它的条件了</strong></p><blockquote><p><code>0\d&#123;2&#125;-\d&#123;8&#125;|0\d&#123;3&#125;-\d&#123;7&#125;</code>这个表达式能匹配两种以连字号分隔的电话号码：一种是三位区号，8位本地号(如010-12345678)，一种是4位区号，7位本地号(0376-2233445)</p></blockquote><h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h2><p>当我们需要重复多个字符，可以用小括号来指定子表达式(也叫做分组)</p><blockquote><p><code>(\d&#123;1,3&#125;\.)&#123;3&#125;\d&#123;1,3&#125;</code>是一个简单的IP地址匹配表达式 </p></blockquote><blockquote><p>不幸的是，上面的表达式也将匹配256.300.888.999这种不可能存在的IP地址。如果能使用算术比较的话，或许能简单地解决这个问题，但是正则表达式中并不提供关于数学的任何功能，所以只能使用冗长的分组，选择，字符类来描述一个正确的IP地址：((2[0-4]\d|25[0-5]|[01]?\d\d?).){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)</p></blockquote><h2 id="反义"><a href="#反义" class="headerlink" title="反义"></a>反义</h2><table><thead><tr><th>代码</th><th>说明</th></tr></thead><tbody><tr><td>\W</td><td>匹配任意不是字幕，数字，下划线，汉字的字符</td></tr><tr><td>\S</td><td>匹配任意不是空白符的字符</td></tr><tr><td>\D</td><td>匹配任意非数字的字符</td></tr><tr><td>\B</td><td>匹配不是单词开头或结束的位置</td></tr><tr><td>[^x]</td><td>匹配除了x以外的任意字符</td></tr><tr><td>[^aeiou]</td><td>匹配除了aeiou 这几个字母以外的任意字符</td></tr></tbody></table><pre class="line-numbers language-none"><code class="language-none">&#96;\S+&#96; 匹配不包含空白符的字符串。&#96;&lt;a[^&gt;]+&gt;&#96; 匹配用尖括号括起来的以a开头的字符串。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="后向引用"><a href="#后向引用" class="headerlink" title="后向引用"></a>后向引用</h2><p>使用小括号指定一个子表达式后，匹配这个子表达式的文本(也就是此分组捕获的内容)可以在表达式或其它程序中作进一步的处理。默认情况下，每个分组会自动拥有一个组号，规则是：从左向右，以分组的左括号为标志，第一个出现的分组的组号为1，第二个为2，以此类推。</p><p>后向引用用于重复搜索前面某个分组匹配的文本。例如，\1代表分组1匹配的文本</p><blockquote><p><code>\b(\w+)\b\s+\1\b</code> 可以用来匹配重复的单词，像go go, 或者kitty kitty。这个表达式首先是一个单词，也就是单词开始处和结束处之间的多于一个的字母或数字(\b(\w+)\b)，这个单词会被捕获到编号为1的分组中，然后是1个或几个空白符(\s+)，最后是分组1中捕获的内容（也就是前面匹配的那个单词）(\1)</p></blockquote><blockquote><p>你也可以自己指定子表达式的组名。要指定一个子表达式的组名，请使用这样的语法：(?<Word>\w+)(或者把尖括号换成’也行：(?’Word’\w+)),这样就把\w+的组名指定为Word了。要反向引用这个分组捕获的内容，你可以使用\k<Word>,所以上一个例子也可以写成这样：\b(?<Word>\w+)\b\s+\k<Word>\b</p></blockquote><h3 id="常用分组语法"><a href="#常用分组语法" class="headerlink" title="常用分组语法"></a>常用分组语法</h3><p><img src="pics/1.png"></p><h2 id="零宽断言"><a href="#零宽断言" class="headerlink" title="零宽断言"></a>零宽断言</h2><p>接下来的四个用于查找在某些内容(但并不包括这些内容)之前或之后的东西，也就是说它们像\b,^,$那样用于指定一个<strong>位置</strong></p><ul><li><p>(?=exp)   比如 <code>\b\w+(?=ing\b)</code> ，匹配以ing结尾的单词的前面部分(除了ing以外的部分)，如查找I’m singing while you’re dancing.时，它会匹配sing和danc</p></li><li><p>(?&lt;=exp)  比如 <code>(?&lt;=\bre)\w+\b</code> 会匹配以re开头的单词的后半部分(除了re以外的部分)，例如在查找reading a book时，它匹配ading</p></li></ul><blockquote><p>(?&lt;=\s)\d+(?=\s)匹配以空白符间隔的数字(再次强调，不包括这些空白符)</p></blockquote><ul><li>(?!exp)   断言此位置的后面不能匹配表达式exp。例如：\d{3}(?!\d)匹配三位数字，而且这三位数字的后面不能是数字；\b((?!abc)\w)+\b匹配不包含连续字符串abc的单词</li></ul><ul><li>(?&lt;!exp)   此位置的前面不能匹配表达式exp：<code>(?&lt;![a-z])\d&#123;7&#125;</code>匹配前面不是小写字母的七位数字</li></ul><blockquote><p><code>(?&lt;=&lt;(\w+)&gt;).*(?=&lt;\/\1&gt;)</code>匹配不包含属性的简单HTML标签内里的内容</p></blockquote><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>小括号的另一种用途是通过语法(?#comment)来包含注释。例如：2[0-4]\d(?#200-249)|25<a href="?#250-255">0-5</a>|[01]?\d\d?(?#0-199)</p><p>要包含注释的话，最好是启用“忽略模式里的空白符”选项，这样在编写表达式时能任意的添加空格，Tab，换行，而实际使用时这些都将被忽略。启用这个选项后，在#后面到这一行结束的所有文本都将被当成注释忽略掉。例如，我们可以前面的一个表达式写成这样：</p><pre class="line-numbers language-none"><code class="language-none">(?&lt;&#x3D;    # 断言要匹配的文本的前缀 &lt;(\w+)&gt; # 查找尖括号括起来的字母或数字(即HTML&#x2F;XML标签) )       # 前缀结束 .*      # 匹配任意文本 (?&#x3D;     # 断言要匹配的文本的后缀 &lt;\&#x2F;\1&gt;  # 查找尖括号括起来的内容：前面是一个&quot;&#x2F;&quot;，后面是先前捕获的标签 )       # 后缀结束 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="贪婪与懒惰"><a href="#贪婪与懒惰" class="headerlink" title="贪婪与懒惰"></a>贪婪与懒惰</h2><ul><li><p>当正则表达式中包含能接受重复的限定符时，通常的行为是（在使整个表达式能得到匹配的前提下）匹配尽可能多的字符。以这个表达式为例：a.*b，它将会匹配最长的以a开始，以b结束的字符串。如果用它来搜索aabab的话，它会匹配整个字符串aabab。这被称为贪婪匹配。</p></li><li><p>有时，我们更需要懒惰匹配，也就是匹配尽可能少的字符。前面给出的限定符都可以被转化为懒惰匹配模式，只要在它后面加上一个问号?。这样.*?就意味着匹配任意数量的重复，但是在能使整个匹配成功的前提下使用最少的重复。现在看看懒惰版的例子吧：</p></li></ul><blockquote><p>a.*?b匹配最短的，以a开始，以b结束的字符串。如果把它应用于aabab的话，它会匹配aab（第一到第三个字符）和ab（第四到第五个字符）</p></blockquote><p><em>为什么第一个匹配是aab（第一到第三个字符）而不是ab（第二到第三个字符）？简单地说，因为正则表达式有另一条规则，比懒惰／贪婪规则的优先级更高：最先开始的匹配拥有最高的优先权——The match that begins earliest wins.</em></p><table><thead><tr><th>代码/语法</th><th>说明</th></tr></thead><tbody><tr><td>*?</td><td>重复任意次，但尽可能少重复</td></tr><tr><td>+?</td><td>重复1次或更多次，但尽可能少重复</td></tr><tr><td>??</td><td>重复0次或1次，但尽可能少重复</td></tr><tr><td>{n,m}?</td><td>重复n到m次，但尽可能少重复</td></tr><tr><td>{n,}?</td><td>重复n次以上，但尽可能少重复</td></tr><tr><td></td><td></td></tr></tbody></table><h2 id="处理选项"><a href="#处理选项" class="headerlink" title="处理选项"></a>处理选项</h2><p>下面是一些软件可能会带的一些设置选项：</p><ul><li>IgnoreCase(忽略大小写)     匹配时不区分大小写。</li><li>Multiline(多行模式)     更改^和$的含义，使它们分别在任意一行的行首和行尾匹配，而不仅仅在整个字符串的开头和结尾匹配。(在此模式下,$的精确含意是:匹配\n之前的位置以及字符串结束前的位置.)</li><li>Singleline(单行模式)     更改.的含义，使它与每一个字符匹配（包括换行符\n）。</li><li> IgnorePatternWhitespace(忽略空白)     忽略表达式中的非转义空白并启用由#标记的注释。</li><li>ExplicitCapture(显式捕获)     仅捕获已被显式命名的组。</li></ul><h2 id="Python-RE-语法"><a href="#Python-RE-语法" class="headerlink" title="Python RE 语法"></a>Python RE 语法</h2><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><pre class="line-numbers language-none"><code class="language-none">r&#39;ABC\-001&#39;&#x3D;&#39;ABC\\-001&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p> 使用Python的r前缀，就不用考虑转义的问题了</p><p>match()方法判断是否匹配，如果匹配成功，返回一个Match对象，否则返回None。</p><pre class="line-numbers language-none"><code class="language-none">&gt;&gt;&gt; import re&gt;&gt;&gt; re.match(r&#39;^\d&#123;3&#125;\-\d&#123;3,8&#125;$&#39;, &#39;010-12345&#39;)&lt;_sre.SRE_Match object; span&#x3D;(0, 9), match&#x3D;&#39;010-12345&#39;&gt;&gt;&gt;&gt; re.match(r&#39;^\d&#123;3&#125;\-\d&#123;3,8&#125;$&#39;, &#39;010 12345&#39;)&gt;&gt;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>一般的使用方法:</p><pre class="line-numbers language-none"><code class="language-none">test &#x3D; &#39;用户输入的字符串&#39;if re.match(r&#39;正则表达式&#39;, test):    print(&#39;ok&#39;)else:    print(&#39;failed&#39;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="切分字符串"><a href="#切分字符串" class="headerlink" title="切分字符串"></a>切分字符串</h3><p>正常切分</p><pre class="line-numbers language-none"><code class="language-none">&gt;&gt;&gt; &#39;a b   c&#39;.split(&#39; &#39;)[&#39;a&#39;, &#39;b&#39;, &#39;&#39;, &#39;&#39;, &#39;c&#39;]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>无法识别多个空格</p><p>正则切分</p><pre class="line-numbers language-none"><code class="language-none">&gt;&gt;&gt; re.split(r&#39;\s+&#39;, &#39;a b   c&#39;)[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="分组功能"><a href="#分组功能" class="headerlink" title="分组功能"></a>分组功能</h3><pre class="line-numbers language-none"><code class="language-none">&gt;&gt;&gt; m &#x3D; re.match(r&#39;^(\d&#123;3&#125;)-(\d&#123;3,8&#125;)$&#39;, &#39;010-12345&#39;)&gt;&gt;&gt; m&lt;_sre.SRE_Match object; span&#x3D;(0, 9), match&#x3D;&#39;010-12345&#39;&gt;&gt;&gt;&gt; m.group(0)&#39;010-12345&#39;&gt;&gt;&gt; m.group(1)&#39;010&#39;&gt;&gt;&gt; m.group(2)&#39;12345&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>识别合法时间</p><pre class="line-numbers language-none"><code class="language-none">&gt;&gt;&gt; t &#x3D; &#39;19:05:30&#39;&gt;&gt;&gt; m &#x3D; re.match(r&#39;^(0[0-9]|1[0-9]|2[0-3]|[0-9])\:(0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]|[0-9])\:(0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]|[0-9])$&#39;, t)&gt;&gt;&gt; m.groups()(&#39;19&#39;, &#39;05&#39;, &#39;30&#39;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="贪婪匹配"><a href="#贪婪匹配" class="headerlink" title="贪婪匹配"></a>贪婪匹配</h3><p>正则匹配默认是贪婪匹配，也就是匹配尽可能多的字符</p><h3 id="正则编译"><a href="#正则编译" class="headerlink" title="正则编译"></a>正则编译</h3><p>如果一个正则表达式要重复使用几千次，出于效率的考虑，我们可以预编译该正则表达式，接下来重复使用时就不需要编译这个步骤了，直接匹配：</p><pre class="line-numbers language-none"><code class="language-none">&gt;&gt;&gt; import re# 编译:&gt;&gt;&gt; re_telephone &#x3D; re.compile(r&#39;^(\d&#123;3&#125;)-(\d&#123;3,8&#125;)$&#39;)# 使用：&gt;&gt;&gt; re_telephone.match(&#39;010-12345&#39;).groups()(&#39;010&#39;, &#39;12345&#39;)&gt;&gt;&gt; re_telephone.match(&#39;010-8086&#39;).groups()(&#39;010&#39;, &#39;8086&#39;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><blockquote><p><a href="https://deerchao.net/tutorials/regex/regex.htm">https://deerchao.net/tutorials/regex/regex.htm</a></p></blockquote><p>这个是我参考的网址，这里只做一个简单的总结，方便在后面调用。需要详细的信息，可以查考上面网站</p>]]></content>
      
      
      
        <tags>
            
            <tag> 编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>迁移VMware的虚拟机到PVE上</title>
      <link href="/2019/09/21/qian-yi-vmware-de-xu-ni-ji-dao-pve-shang/"/>
      <url>/2019/09/21/qian-yi-vmware-de-xu-ni-ji-dao-pve-shang/</url>
      
        <content type="html"><![CDATA[<p><strong>重要：优先选择再生龙的迁移方式，这个是离线迁移，能保证迁移前后数据的一致性。而且能在PVE上事先创建硬盘，相比其他方案，后续不容易出现兼容问题</strong></p><hr><p>首先，下载如下两个软件软件</p><p><img src="pics/1.png"></p><p>第一个是加载一个IDE磁盘的注册表，貌似不用的话，导入到PVE后，虚拟机启动不起来<br>第二个是Vmware官方出品的转移软件，能实现在线和离线转移</p><p><img src="pics/9.png"></p><p>这个是再生龙的光盘，挂载在虚拟机上面，然后选择从光盘启动就可以了</p><h2 id="在线迁移"><a href="#在线迁移" class="headerlink" title="在线迁移"></a>在线迁移</h2><h3 id="VM虚拟机操作部分"><a href="#VM虚拟机操作部分" class="headerlink" title="VM虚拟机操作部分"></a>VM虚拟机操作部分</h3><p>在不关闭VMware虚拟机的情况下，实现转移。<strong>但是该方案有缺点，不能确保数据的一致性</strong></p><p>首先，在<strong>虚拟机</strong>运行压缩包里面的“mergeide.reg”，导入注册表</p><p>迁移软件安装在你需要迁移的虚拟机上面，不是主机</p><p><img src="pics/2.png"></p><p>安装后<strong>以管理员身份</strong>打开，点击“Convert Machine”</p><p><img src="pics/3.png"></p><p>按照下图操作，可以点击“View source details…” 验证连接情况</p><p><img src="pics/4.png"></p><p>按照如图选择，需要注意：</p><ul><li>位置2，版本一开始不需要选择太高，如果选择到12x，转移后，开启proxmox虚拟机，windows可能会蓝屏。（我测试是这样的，有空各位试试看是否也有这样的情况）</li><li>位置3，可以随意起一个英文名</li><li>位置4， 必须是U盘或网络位置，不要存放在本地的硬盘里</li></ul><p><img src="pics/5.png"></p><p>之后一直下一步，知道向导完成。然后等待导出</p><p>导出结束后，在你指定的位置查看文件，我们需要的，是那个容量大的vmdk文件</p><p><img src="pics/6.png"></p><p>接下来，我们要把这个vmdk文件丢到PVE服务器能读到的地方，这里我创建了一个NFS服务器，你可以直接拿u盘连接PVE挂载，也可以使用winscp这个神器来上传文件</p><h3 id="Proxmox操作部分"><a href="#Proxmox操作部分" class="headerlink" title="Proxmox操作部分"></a>Proxmox操作部分</h3><p>首先，我们在proxmox创建一个虚拟机，尽量硬件信息跟迁移的机器的配置一样。硬盘这部分的参数需要特别注意，如果你配置迁移后，发现启动不了，或者蓝屏，很大原因是因为硬盘配置有问题</p><p><img src="pics/7.png"></p><ul><li>位置1：我这里选择IDE（折腾几次都蓝屏了，不想搞了）后面如果发现性能有问题，可以试试用别的模式</li><li>位置2：选择一个存储位置，注意，不要选择local-lvm这个地点，不然后面系统启动不了（连硬盘都识别不到），目前不知道原因</li><li>位置3：选择qcow2</li></ul><p>我们将刚才的vmdk文件上传，无论上传到NFS之类的服务器，还有PVE实体机本身，要确保PVE本身可以读写。之后，进入PVE实体机的shell</p><blockquote><p>qemu-img convert -f vmdk /?/?/…/<em>.vmdk -O qcow2 /var/lib/vz/images/100/</em>.qcow2</p></blockquote><p>上面 /?/?…/*.vmdk 是你上传vmdk的位置<br>/var/lib/vz/images  是proxmox默认的镜像文件位置（非LVM），你也可以根据你的文件的路径来。100 是你创建虚拟机的VMID号</p><p>转换后，编辑VM的配置文件</p><blockquote><p>vim /etc/pve/local/qemu-server/100.conf</p></blockquote><p>在ide0的行中：我们要将vm-100-disk-1.raw，size = 32G更改为windows-server.qcow2</p><p>然后我们移除原来的空磁盘</p><p>rm /var/lib/vz/images/100/vm-100-disk-1.raw</p><p>然后就可以开启虚拟机看看，如果启动蓝屏或者启动不了，google一下</p><br><p><em>附加教程(我参考的资料）</em></p><p>这个是官网的教程，可以参考里面的 “Physical (running) Windows server to Proxmox VE (KVM) using VMware Converter” 这一个章节</p><blockquote><p><a href="https://pve.proxmox.com/wiki/Migration_of_servers_to_Proxmox_VE">https://pve.proxmox.com/wiki/Migration_of_servers_to_Proxmox_VE</a></p></blockquote><blockquote><p><a href="https://chuansongme.com/n/652461651234">https://chuansongme.com/n/652461651234</a></p></blockquote><h2 id="离线迁移"><a href="#离线迁移" class="headerlink" title="离线迁移"></a>离线迁移</h2><h3 id="再生龙"><a href="#再生龙" class="headerlink" title="再生龙"></a>再生龙</h3><p>首推再生龙，这个是一个开源的软件，对中文支持很好，PVE官网也有它的教程</p><blockquote><p><a href="https://blog.51cto.com/yuweibing/2334783">https://blog.51cto.com/yuweibing/2334783</a></p></blockquote><blockquote><p><a href="https://leooo48.github.io/2018/07/13/clonezila/">https://leooo48.github.io/2018/07/13/clonezila/</a></p></blockquote><p>使用过程中，要注意如下事项：</p><ul><li><p>切记，一定要先导入IDE的注册表，不然蓝屏，启动不了的问题会让你欲哭无泪。。。。</p></li><li><p>pve创建虚拟机默认是SeaBIOS，是传统的启动模式，如果你迁移过来的虚拟机是UEFI启动的，一定要更改一下它的BIOS（在硬件那里修改为UEFI）</p></li></ul><p><img src="pics/8.png"></p><ul><li><p>配置完服务端要ping一下服务器，看一下网络是否通顺</p></li><li><p>客户端需要输入的就两条命令 </p><blockquote><p>sudo ocs-live-netcfg</p></blockquote></li></ul><blockquote><p>sudo ocs-onthefly -s 10.0.77.171 -t sda  /// -s 后面接服务端的ip ，-t后面接需要靠边数据的磁盘，可以在客户机里面用命令lsblk命令查看</p></blockquote><hr><p>以下是官方的说明文档：</p><p>This method is fast, reliable and OS independent as it uses live cds.</p><ul><li>Get a live linux cd like CloneZilla.</li><li>Prepare the source host, make sure that you have standard IDE drivers enabled (for WinXP/Win2003 use the mergeide.reg (File:Mergeide.zip) ), for W2k I followed this link (solution 2 worked for me): [2]</li><li>Now, boot the physical host with Clonezilla, go for beginner mode and select device - device and then remote, just follow the wizard</li><li>On the Proxmox VE host, prepare a KVM guest, make sure you got a big enough IDE disk assigned (add 1 GB extra to be on the safe side) and also boot this KVM guest with the live cd and execute a shell.</li><li>Become root and run fdisk (fdisk /dev/sda/) to make sure that sda is here, exit fdisk with ‘w’. this was essential.</li><li>Now enter all commands from the wizard on the source server tells you (configure network and request the copy process)</li><li>After success (the wizard just copies the data, means I got a 80 GB disk but only 5 GB data on it so it was just a few minutes for the whole process on a gigabit network) just change the boot device to the hard disk and start the VM. Windows will install all needed drivers automatically, just the Intel NIC drivers for e1000 must be loaded from ISO (I got one big driver ISO from Intel containing all NIC drivers).</li></ul><h3 id="VMware-converter"><a href="#VMware-converter" class="headerlink" title="VMware converter"></a>VMware converter</h3><h2 id="其他的参考"><a href="#其他的参考" class="headerlink" title="其他的参考"></a>其他的参考</h2><p>这个链接有一个命令很有用 ： qm importdisk <vmid> <source> <storage>。有兴趣可以看看全文</p><blockquote><p><a href="http://everun.top/helpcenter/others/pve-ow-7.html">http://everun.top/helpcenter/others/pve-ow-7.html</a></p></blockquote><br><p>转移之后蓝屏，无限重启问题</p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/38275419">https://zhuanlan.zhihu.com/p/38275419</a></p></blockquote><br><p>再生龙的其他用法及介绍</p><blockquote><p><a href="https://blog.csdn.net/enweitech/article/details/48173713">https://blog.csdn.net/enweitech/article/details/48173713</a></p></blockquote><br><p>这个windows 加载 virtio 总线的驱动，我也不知道有什么用，这里记录备用</p><blockquote><p><a href="https://my.oschina.net/xintq/blog/92947">https://my.oschina.net/xintq/blog/92947</a></p></blockquote><br><p>这个遇到的情况和我很像，特此记录</p><blockquote><p><a href="http://blog.sina.com.cn/s/blog_53ab41fd01013ksq.html">http://blog.sina.com.cn/s/blog_53ab41fd01013ksq.html</a></p></blockquote><ol><li>无论是Windows系统或Linux系统，在KVM虚拟机设置时尽量设置硬盘为IDE，设成SCSI时会有问题。我在RedHat AS3 迁移中，发现IDE可以顺利转移(使用CloneZilla)，只需把/etc/fstab中原来/dev/sdax 更改为/dev/hdax。使用SCSI硬盘时，出现Kernel Panic错误</li></ol><p>2.在Windows系统转移前，应当先执行mergeide.reg (查看微软的 KB 公告）以允许IDE接口，不然就会出现0x0000007B的蓝屏错误。但在实际迁移中，使用VMware 免费的工具Convert转移的vmdk文件再转换成qcow2文件后(具体方法参见Proxmox的wiki文档)，重启仍然蓝屏，最后只能使用windows系统盘修复安装以恢复错误(2003R2)。但是使用CloneZilla转换的Image文件恢复后，可以正常启动(只做过win2000服务器)。</p><p>LVM Thin Storage is much more stable then the qcow2. One thing are the snapshots. For example you have an machine with 50GB of memory und you make an Livesnapshot with qcow2 sometimes you will get an error. When not on creation then really on delete. The second thing. Raw is an nice generic format, like DD. You can do everything with, without convert… And it have better performance then qcow2.</p><p>local-lvm 这个区域只支持 raw 格式</p><p>/etc/pve/storage.cfg<br>这个文件是各个区域的配置文件，可以参考下方的连接</p><blockquote><p><a href="https://forum.proxmox.com/threads/disk-image-option-greyed-out-only-raw-availble.27943/">https://forum.proxmox.com/threads/disk-image-option-greyed-out-only-raw-availble.27943/</a></p></blockquote><p><strong>在创建硬盘的时候， Bus/Device 这个选项要尽量避免选择VirtIO Block和SCSI这个选项，不然系统识别不到硬盘，可以选择Sata</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> PVE </tag>
            
            <tag> 虚拟化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Raid6 搭建存储环境</title>
      <link href="/2019/09/21/raid6-da-jian-cun-chu-huan-jing/"/>
      <url>/2019/09/21/raid6-da-jian-cun-chu-huan-jing/</url>
      
        <content type="html"><![CDATA[<p>前些时间，写了一个 Raid+LVM的教程，测试和写教程花了不少时间，但是这个方案目前达不到我的要求，故弃坑了</p><p><a href="/2019/09/21/Raid-LVM搭建磁盘环境/" target="_blank">点击查看原来的教程</a></p><p>后来了解到Raid也是可以扩容的，因此重新写一个教程</p><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol><li>按照上面那个教程，创建出包含4个硬盘的raid6软阵列，这里因为只有5个硬盘能用，不创建热备盘，剩下的一个盘，用来作为添加的盘</li></ol><p>这是阵列刚创建好的状态</p><p><img src="pics/1.png"></p><ol start="2"><li>然后用fdisk创建分区，这里暂时创建出两个分区</li></ol><p><img src="pics/2.png"></p><ol start="3"><li>格式化+挂载</li></ol><p><img src="pics/3.png"></p><ol start="4"><li>然后，我随便写入一些东西</li></ol><blockquote><p># dd if=/dev/zero of=/mnt/md0p1/test.file bs=1M count=10000 status=progress</p></blockquote><blockquote><p># dd if=/dev/zero of=/mnt/md0p2/test.file2 bs=1M count=5000  status=progress</p></blockquote><p><img src="pics/4.png"></p><ol start="5"><li>向阵列增加一个热备盘硬盘（sdf）（注意：磁盘需要初始化，然后创建一个分区，跟上面4块硬盘一样）</li></ol><blockquote><p># mdadm /dev/md0 -a /dev/sdf1</p></blockquote><p><img src="pics/6.png"></p><ol start="6"><li>将热备盘增加到阵列中</li></ol><blockquote><p># mdadm -G -n5 /dev/md0</p></blockquote><p>之后，数据会同步到新添加的硬盘中，这个过程需要时间</p><p><img src="pics/7.png"></p><p>同步之后，我们检查一下我们前面创建的文件，没有问题</p><p><img src="pics/8.png"></p><hr><p>这个就是RAID的扩容，很简单</p><h2 id="老样子，下面罗列一下参考的资料"><a href="#老样子，下面罗列一下参考的资料" class="headerlink" title="老样子，下面罗列一下参考的资料"></a>老样子，下面罗列一下参考的资料</h2><h3 id="dd-命令"><a href="#dd-命令" class="headerlink" title="dd 命令"></a>dd 命令</h3><p>这个在磁盘操作是很有作用的，包括测试，或者备份，<strong>但是一定要注意使用方法，不然有可能毁掉整个硬盘的数据，慎重！</strong></p><p>如何在 Linux 系统中使用 dd 命令而不会损毁你的磁盘</p><blockquote><p><a href="https://www.zcfy.cc/article/how-to-use-dd-in-linux-without-destroying-your-disk">https://www.zcfy.cc/article/how-to-use-dd-in-linux-without-destroying-your-disk</a></p></blockquote><p>在Linux中实现dd命令写入进度的方法，显示图形化百分比的界面</p><blockquote><p><a href="https://ywnz.com/linuxml/3666.html">https://ywnz.com/linuxml/3666.html</a></p></blockquote><p>清空磁盘</p><blockquote><p><a href="http://www.markjour.com/article/linux-clean-disk.html">http://www.markjour.com/article/linux-clean-disk.html</a></p></blockquote><h3 id="Raid-扩容"><a href="#Raid-扩容" class="headerlink" title="Raid 扩容"></a>Raid 扩容</h3><p>增长现有的RAID阵列和删除Raid中的失败磁盘 - 第7部分</p><blockquote><p><a href="https://linux.cn/article-6123-1.html">https://linux.cn/article-6123-1.html</a></p></blockquote><h3 id="mdadm-管理工具"><a href="#mdadm-管理工具" class="headerlink" title="mdadm 管理工具"></a>mdadm 管理工具</h3><blockquote><p><a href="https://linux.cn/article-6463-1.html">https://linux.cn/article-6463-1.html</a></p></blockquote><h3 id="杂"><a href="#杂" class="headerlink" title="杂"></a>杂</h3><p>这个是linux 中国翻译外国教程的一个汇总，没事可以看看</p><blockquote><p><a href="https://linux.cn/lctt/strugglingyouth?page=1">https://linux.cn/lctt/strugglingyouth?page=1</a></p></blockquote><p>linux 前后台程序查看切换</p><blockquote><p><a href="https://blog.csdn.net/lee244868149/article/details/38535163">https://blog.csdn.net/lee244868149/article/details/38535163</a></p></blockquote><p>真正牛*的LVM</p><blockquote><p><a href="http://stor.51cto.com/art/201808/581712.htm?mobile">http://stor.51cto.com/art/201808/581712.htm?mobile</a></p></blockquote><p>写的不错的LVM +　raid  教程</p><blockquote><p><a href="https://serchaofan.github.io/2018/08/01/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E4%B8%8ERAID%E7%A3%81%E7%9B%98%E9%98%B5%E5%88%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#RAID%E5%9F%BA%E7%A1%80%E6%90%AD%E5%BB%BA">https://serchaofan.github.io/2018/08/01/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E4%B8%8ERAID%E7%A3%81%E7%9B%98%E9%98%B5%E5%88%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#RAID%E5%9F%BA%E7%A1%80%E6%90%AD%E5%BB%BA</a></p></blockquote><p>很详细的LVM 教程</p><blockquote><p><a href="https://www.cnblogs.com/f-ck-need-u/p/7049233.html">https://www.cnblogs.com/f-ck-need-u/p/7049233.html</a></p></blockquote><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>这是我测试的机器，用了一个模组电源，外加一个pci-e扩展卡，加了8块固态硬盘，32G内存，i7-8700，技嘉z370主板</p><p><img src="pics/1.jpg"></p><p><img src="pics/2.jpg"></p><p>这里有一个比较坑的地方，就是主板。刚安装完Centos后，无论怎么设置，启动项也修改，硬盘也能识别，就是启动不了，连grub界面都没有。后来找原因，是技嘉主板的一个设置引起的</p><p><img src="pics/3.jpg"></p><p>要选择AHCI这个选项，Intel的傲腾坑啊！</p><p>另外，这个主板也是可以开启硬阵列的，开启方法可以Google。不要用到里面的EZ-Raid。家用可以，生产环境跟不上！</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Raid </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Raid+LVM搭建磁盘环境</title>
      <link href="/2019/09/21/raid-lvm-da-jian-ci-pan-huan-jing/"/>
      <url>/2019/09/21/raid-lvm-da-jian-ci-pan-huan-jing/</url>
      
        <content type="html"><![CDATA[<p>注意：这个教程目前已经作废，可以当作学习了解心得使用，但是不建议上正式环境</p><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>之所以用这种方式部署，是计划购买一个新的服务器（性能较强），用于将目前的机房的一些实体机淘汰，统一托管到Proxmox上面管理。考虑到公司现在不可能做双机热备份，只能在一台机器上实现，因此磁盘数据的保护尤为重要</p><p>现在设想是这样的，由若干块硬盘（大于4块）组建成<strong>RAID6</strong>阵列（禁止组建RAID5），其中需要1-2热备盘。在RAID阵列上，组建LVM，实现硬盘的可扩容。这是一个服务器基础的配置方向。可以根据需要，将固态硬盘和机械硬盘分开配置，不过这个不在今天的讨论范围内</p><p><img src="pics/1.jpg"></p><p><em>以下的模拟实验，基于Centos7。收集了5块真正的实体硬盘（不包括系统盘）（250G），用于实验（是不是很牛x)</em></p><h2 id="搭建RAID6"><a href="#搭建RAID6" class="headerlink" title="搭建RAID6"></a>搭建RAID6</h2><h3 id="查看系统硬盘情况"><a href="#查看系统硬盘情况" class="headerlink" title="查看系统硬盘情况"></a>查看系统硬盘情况</h3><p>首先，在系统中，我们看一下目前的磁盘配置</p><blockquote><p># lsblk</p></blockquote><p><img src="pics/2.png"></p><p>可以看到，我们有sd[b-f]五块硬盘，其中sda是我的系统，这里我们不要管它</p><h3 id="创建硬盘分区"><a href="#创建硬盘分区" class="headerlink" title="创建硬盘分区"></a>创建硬盘分区</h3><p><strong>如果你的硬盘不是全新，有分区以及数据，请删除所有分区数据，这一步，你可以在Windows PE 下操作，当然，你会Linux也行</strong></p><p>在全新硬盘下，我们执行如下操作</p><blockquote><p># fdisk /dev/sdb</p></blockquote><p><em>fdisk针对的是mbr等小容量的硬盘，如果硬盘容量超过2T的gpt，请使用gdisk这个命令，操作都是类似</em></p><p><img src="pics/3.jpg"></p><p>上面是针对 /dev/sdb 这个硬盘进行操作，后面我们对剩下的四个硬盘 （/dev/sd[c-f]）进行上面的操作。虽然有点枯燥，但是集中一点注意力，不要出错，不然就是自己给自己挖坑。。。。。</p><p>下面是创建之后磁盘的情况</p><p><img src="pics/4.png"></p><p>之后，我们要检查一下磁盘是否存储有其他类型阵列的数据，这个很重要，如果有其他阵列的数据，这个磁盘是用不了的，我们必须清除这些数据后，才能将这个磁盘用于RAID的构建</p><blockquote><p># mdadm -E /dev/sd[b-f]1</p></blockquote><p>这里，我们使用了 mdadm  这个命令，这个就是 linux 内建的软阵列命令。这个命令适用于检查在<strong>硬盘分区</strong>是否存在其他阵列的信息<br>如果一切正常，则应如下显示</p><p><img src="pics/5.png"></p><p>同样的，我们对<strong>硬盘</strong>也检查一遍</p><p><img src="pics/6.png"></p><p><em>如果是上面的显示，我们可以继续往下面走，不是的话，请查看下面教程的【删除阵列】篇章，有具体的解决步骤</em></p><h3 id="创建阵列"><a href="#创建阵列" class="headerlink" title="创建阵列"></a>创建阵列</h3><blockquote><p># mdadm -C -v /dev/md0 -l6 -n4 /dev/sd[b-e]1 -x1 /dev/sdf1</p></blockquote><ul><li>C : 创建阵列</li><li>v : 显示详细信息</li><li>/dev/md0 : 创建后阵列的磁盘文件</li><li>l : 创建RAID的等级，我们创建的RAID6 ，所以后面接数字6</li><li>n : 创建阵列磁盘的数量，RAID6阵列至少需要四个，所以这里为4</li><li>x : 创建阵列热备盘的数量，我们有五个盘，用了四个，所以，这里数量为1就行了</li></ul><p> 注意：我们这里使用的磁盘的分区，而不是磁盘本身</p><p> <em>热备盘的作用：事先准备一个硬盘，让它处于准备的状态，在阵列的主硬盘坏了之后，热备盘迅速顶替上去，过程无需人工干预</em></p><p> <img src="pics/7.png"></p><h3 id="查看创建好的阵列"><a href="#查看创建好的阵列" class="headerlink" title="查看创建好的阵列"></a>查看创建好的阵列</h3><blockquote><p># mdadm -D /dev/md0</p></blockquote><p> <img src="pics/8.png"></p><h3 id="模拟阵列硬盘崩坏"><a href="#模拟阵列硬盘崩坏" class="headerlink" title="模拟阵列硬盘崩坏"></a>模拟阵列硬盘崩坏</h3><p>RAID6允许2块硬盘同时出错，在这里，我模拟一个硬盘出错，这里我让sdb这个硬盘出错</p><blockquote><p># mdadm /dev/md0 -f /dev/sdb1</p></blockquote><ul><li>f : 指定出错的硬盘（模拟)</li></ul><p> <img src="pics/9.png"></p><p>然后，我们运行命令，查看阵列目前的磁盘情况</p><blockquote><p># watch mdadm -D /dev/md0</p></blockquote><p>其中，watch 是一个定时刷新的命令，它刷新后面的mdadm ，我们要查看的就是下图的修复速度（“Rebuild Status”）</p><p> <img src="pics/10.png"></p><p>有关硬盘修复的信息：我们磁盘出错后，会被指定为“faulty”状态，不能再使用。这是，我们前面设置的热备盘就会自动替换上去，然后从其他硬盘计算需要恢复的数据。这是一个很耗时间和CPU资源的过程（特别针对企业动不动就上4T这些硬盘），因此在这个过程中，为了防止第二块硬盘出错，我们需要设置阵列为RAID6！<strong>不使用</strong>RAID5</p><p>经过漫长的等待，我们的硬盘修复完成，阵列也正常了</p><p> <img src="pics/11.png"></p><p> 然后，我们可以移除这块损坏的硬盘，或者重启服务器</p><blockquote><p># mdadm /dev/md0 -r /dev/sdb1</p></blockquote><ul><li>r : 移除硬盘</li></ul><p>  <img src="pics/12.png"></p><p>好了，到这里，我们数据就修复成功，可以看到，四块硬盘都是正常的，我们现在的阵列里面没有热备盘了，下面介绍如何为这个阵列添加热备盘</p><h3 id="添加热备盘"><a href="#添加热备盘" class="headerlink" title="添加热备盘"></a>添加热备盘</h3><p>我们用刚才损坏的那块盘（sdb）为例，将它再次添加回来作为热备盘</p><p>我们用 lsblk 命令 查看目前磁盘的情况，可以看到，sdb目前是存在的，但是已经不是阵列磁盘了（不存在md0)</p><p>  <img src="pics/13.png"></p><p>我们用如下命令检查一下它的磁盘信息情况</p><blockquote><p># mdadm -E /dev/sdb1</p></blockquote><p>   <img src="pics/14.png"></p><p>可以看到，它存在阵列的信息，我们需要清除这些信息</p><blockquote><p># fdisk /dev/sdb</p></blockquote><p> <img src="pics/15.png"></p><blockquote><p># dd if=/dev/zero of=/dev/sdb bs=1M count=1024</p></blockquote><p>  这个命令是擦除磁盘信息用的</p><p>   <img src="pics/16.png"></p><p> 到这里，我们就可以使用这块硬盘了，初始化跟上面章节的步骤一样，<strong>先创建分区，转换为raid格式</strong>，然后执行下方命令，添加sdb作为热备盘</p><blockquote><p># mdadm /dev/md0 -a /dev/sdb1 </p></blockquote><p> <img src="pics/17.png"><br> <img src="pics/18.png"></p><h3 id="保存阵列配置文件"><a href="#保存阵列配置文件" class="headerlink" title="保存阵列配置文件"></a>保存阵列配置文件</h3><p>这一步不是必须的，但是有备无患</p><blockquote><p>#  mdadm -D -s &gt;&gt; /etc/mdadm.conf</p></blockquote><h3 id="参考的资料"><a href="#参考的资料" class="headerlink" title="参考的资料"></a>参考的资料</h3><p>软RAID管理命令mdadm详解</p><blockquote><p><a href="https://blog.csdn.net/GGxiaobai/article/details/59521459">https://blog.csdn.net/GGxiaobai/article/details/59521459</a></p></blockquote><p>RAID磁盘阵列的部署(red hat 6.5)</p><blockquote><p><a href="https://blog.51cto.com/13643643/2095452">https://blog.51cto.com/13643643/2095452</a></p></blockquote><p>RAID及LVM技术的实现</p><blockquote><p><a href="https://www.jianshu.com/p/0aa305e1440e">https://www.jianshu.com/p/0aa305e1440e</a></p></blockquote><hr><p>好了，上面就是阵列的创建方法，如果是一般使用，只需要将/dev/md0 这个设备当作一个普通的硬盘，然后分区，挂载就行了。但是，我们的目标是星辰大海，在RAID的上面，我们需要再建一个LVM，下面介绍LVM的创建</p><hr><h2 id="RAID-上方创建-LVM"><a href="#RAID-上方创建-LVM" class="headerlink" title="RAID 上方创建 LVM"></a>RAID 上方创建 LVM</h2><p><strong>切记，后面我们针对的硬盘操作，都是 /dev/md0 这个RAID磁盘，而不是 /dev/sd[b-f]这几个真实的硬盘了</strong></p><p>首先，需要自己先去了解LVM的一些基础知识，我这里就不介绍了，自己Google，很多教程的<br>譬如下面这个教程就很详细</p><blockquote><p><a href="https://huiliu.github.io/2016/01/19/lvm.html">https://huiliu.github.io/2016/01/19/lvm.html</a></p></blockquote><p>还记得上面那张图吗？</p><p><img src="pics/1.jpg"></p><p>我们计划创建一个卷组（vg1) ，然后创建三个的逻辑卷（lv1，lv2，lv3），所用的物理卷是 /dev/md0 ，即我们上面创建的阵列RAID6</p><h3 id="创建-物理卷-PV"><a href="#创建-物理卷-PV" class="headerlink" title="创建 物理卷(PV)"></a>创建 物理卷(PV)</h3><blockquote><p>#  pvcreate /dev/md0</p></blockquote><p>将 /dev/md0 初始化为PV卷，这里我们没有为md0这个RAID创建分区</p><blockquote><p>#  pvdisplay</p></blockquote><p>显示创建PV的详情，请忽略上方那个，那个是创建Centos自动创建的</p><br><p><img src="pics/19.png"></p><h3 id="创建-卷组-VG"><a href="#创建-卷组-VG" class="headerlink" title="创建  卷组(VG)"></a>创建  卷组(VG)</h3><blockquote><p>#  vgcreate vg1 /dev/md0</p></blockquote><p>这里，我们指定一个名称为vg1的VG，使用md0这个PV</p><blockquote><p>#  vgdisplay</p></blockquote><p>显示创建VG的详细信息。请忽略下面那个c1，这个是Centos系统自建的</p><p><img src="pics/20.png"></p><h3 id="创建-逻辑卷-LV"><a href="#创建-逻辑卷-LV" class="headerlink" title="创建 逻辑卷(LV)"></a>创建 逻辑卷(LV)</h3><blockquote><p># lvcreate -L 40G -n lv1 vg1</p></blockquote><p>在vg1的卷组上面创建一个名为lv1的逻辑卷，容量大小为40G， -L  后面接容量，单位可以是K，M，T，P，E ， -n 后面接LV的名称，最后是VG的名称</p><blockquote><p># lvdisplay</p></blockquote><p><img src="pics/21.png"></p><p>然后，我们需要格式化这个逻辑卷lv1，逻辑卷相当于磁盘分区，怎么理解就行了</p><blockquote><p># mkfs.ext4 /dev/vg1/lv1</p></blockquote><p><img src="pics/22.png"></p><p>这里我将lv1格式为ext4 格式作为测试。</p><p><strong>注意，你创建一个VG后，在/dev目录下面，会有相应的VG名称，例如：我创建了vg1，你能找到/dev/vg1/这个目录，在这个目录下面，有你创建的LV文件。以后你的挂载等操作，都可以调用这些文件。这个体现了Linux万物皆文件的概念吧</strong></p><p>然后挂载</p><blockquote><p># mount /dev/vg1/lv1 /mnt/lv1</p></blockquote><p><img src="pics/23.png"></p><p>然后，我们重复上面的步骤，依次创建lv2,lv3 </p><p>这是创建的结果</p><p><img src="pics/24.png"></p><hr><p>到此，我们创建了一个lvm。</p><hr><h3 id="扩展逻辑卷"><a href="#扩展逻辑卷" class="headerlink" title="扩展逻辑卷"></a>扩展逻辑卷</h3><p>假设lv1的容量不够用了，我们要增加容量，这里我增加了20G的容量</p><blockquote><p># lvextend -L +20G /dev/vg1/lv1 </p></blockquote><p>扩展后，我们如下图命令查看，发现文件系统并没有识别出磁盘的扩容的部分，因此，运行“resize2fs”这个命令，之后再执行“df -hT”查看，可以看到文件系统是扩容的了</p><blockquote><p># resize2fs /dev/vg1/lv1</p></blockquote><p><img src="pics/25.png"></p><p><em>如果系统提示需要先运行fsck检查文件系统，则执行如下命令”e2fsck -f       /dev/vg1/lv1”</em></p><h3 id="扩展卷组"><a href="#扩展卷组" class="headerlink" title="扩展卷组"></a>扩展卷组</h3><p>如果哪天发现vg1这个卷组的空间不够用了，我们可以扩展卷组，扩展卷组意味着增加磁盘</p><p>这里我再增加一块硬盘(/dev/sdg)（没错，我就硬盘多 ^_^)</p><p><img src="pics/26.png"></p><p>首先，我们检查一下这个硬盘</p><p><img src="pics/27.png"></p><p>这里不需要创建分区，然后执行如下命令</p><blockquote><p># pvcreate /dev/sdg</p></blockquote><p><img src="pics/28.png"></p><p>将sdg加入到vg1这个卷组里面，命令一下，效果立现</p><blockquote><p># vgextend vg1 /dev/sdg</p></blockquote><p><img src="pics/29.png"></p><p>卷组扩容后，我们就可以愉快的扩展逻辑卷了 </p><h3 id="磁盘更换"><a href="#磁盘更换" class="headerlink" title="磁盘更换"></a>磁盘更换</h3><p>假设哪天，这个sdg的硬盘寿命快到了，我们如何保护里面的数据？</p><p>我们可以将sdg的数据迁移到sdh。蛤！sdh哪来的？没错，我又加了一块硬盘！</p><p>确保sdh无分区，然后</p><blockquote><p># pvcreate /dev/sdh</p></blockquote><p>然后将 /dev/sdh 加入到 vg1 这个卷组里面。<strong>注意，要迁移数据盘，两块硬盘必须在同一个卷组里面</strong></p><blockquote><p># vgextend vg1 /dev/sdh</p></blockquote><p><img src="pics/30.png"></p><p>然后，执行下面的命令，将sdg的数据迁移到sdh</p><blockquote><p># pvmove /dev/sdg  /dev/sdh</p></blockquote><p>之后，使用如下命令将sdg从vg1移除</p><blockquote><p># vgreduce vg1 /dev/sdg</p></blockquote><p>然后，再将sdg从PV中移除</p><blockquote><p># pvremove /dev/sdg</p></blockquote><h3 id="LVM-快照"><a href="#LVM-快照" class="headerlink" title="LVM 快照"></a>LVM 快照</h3><p> 后续补充</p><hr><p>上面介绍了RAID和LVM的结合部署，那么问题来了，如果我的一个磁盘崩了，这个组合会怎样。这个问题困扰了我一周多，网上只有怎么创建，但是崩了，怎么修复，都找不到案例。。。。。<br>今天我就记录一下吧</p><hr><h2 id="RAID-LVM-硬盘崩坏修复"><a href="#RAID-LVM-硬盘崩坏修复" class="headerlink" title="RAID+LVM 硬盘崩坏修复"></a>RAID+LVM 硬盘崩坏修复</h2><p>现在实验环境如下</p><p><img src="pics/31.jpg"></p><p>然后我要再一次模拟sdb这块硬盘崩掉的情况，看一下，系统能不能自动修复</p><p>在我设置阵列 f 参数之后，阵列会使用热备盘顶替，系统能够正常使用。</p><p>但是，我说但是，只要重启系统之后，使用 pvs 命令，直接提示错误，那个md0的PV直接变成【unknown】。。。。。这个问题花了一个多星期，也没搞定，所以，弃坑！</p><p><img src="pics/32.png"></p><p>尽管有一个PV成了 unknown ，但是很神奇，上层的lv1，lv2等都能正常挂载使用，写入信息也可以，心中万马奔腾。。。。</p><p>补充：后续还有一个离奇的事情，在还原清空硬盘时，我把所有的lv，vg，pv都删除了，还是不让我删除md0，说后台还在使用md0，卧槽。。。。而且，重启一次电脑之后，原本unknown的那个pv，竟然识别出来了，f*** ，而且挂载后，数据都在，这个让我说啥好呢。。。。。。<br>后续一定要去弄清除这个LVM的底细</p><hr><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>鉴于上方出现那个pv成了unknown的情况，不打算继续研究下去，网上能找到的文档也很少，一开始我以为是我搜索姿势不对，后来我才了解到，RAID本身自带扩容功能，根本就不需要LVM辅助。果然，不对一个东西了解透彻，踩坑在所难免</p><p>所以，这个RAID+LVM的方案搁置，除非能找到上面问题的解决方案，不然不上正式环境。</p><p>后续的文章，开始实验RAID的扩容，这个应该比较简单了</p><p>所以，本文章就当作了解 RAID 和 LVM 使用方法的教程，看看就行</p><h2 id="将硬盘初始化"><a href="#将硬盘初始化" class="headerlink" title="将硬盘初始化"></a>将硬盘初始化</h2><p>经过上面的折腾，我们的硬盘已经写入了RAID+LVM 的信息，如果要重新实验折腾，就必须清空这些信息</p><p>接下来，来了解怎么重(删)置(库)环(跑)境(路)</p><h3 id="删除-LVM"><a href="#删除-LVM" class="headerlink" title="删除 LVM"></a>删除 LVM</h3><ol><li>用umount卸载挂载的lv1，lv2，lv3 </li></ol><blockquote><p># umount /dev/vg1/lv[1-3]</p></blockquote><ol start="2"><li>删除逻辑卷lv[1-3]</li></ol><blockquote><p># lvremove /dev/vg1/lv[1-3]</p></blockquote><ol start="3"><li>删除卷组vg1</li></ol><blockquote><p># vgremove vg1</p></blockquote><ol start="4"><li>删除PV</li></ol><blockquote><p># pvremove /dev/md0</p></blockquote><p>到这里，我们成功将LVM删除了，后面，我们清空RAID阵列</p><h3 id="删除-RAID"><a href="#删除-RAID" class="headerlink" title="删除 RAID"></a>删除 RAID</h3><ol><li>如果挂载了md0，请先卸载</li><li>先覆盖RAID的metadata </li></ol><blockquote><p># dd if=/dev/zero of=/dev/md0 bs=1M count=50</p></blockquote><ol start="3"><li>停止md0</li></ol><blockquote><p># mdadm -S /dev/md0</p></blockquote><ol start="4"><li>清除成员磁盘当中阵列的超级块信息，对所有磁盘也执行如下的命令</li></ol><blockquote><p># dd if=/dev/zero of=/dev/sdb1 bs=1M count=50</p></blockquote><p>这里就不一一列举了</p><ol start="5"><li>查看阵列的情况</li></ol><blockquote><p># cat /proc/mdstat</p></blockquote><p>如果还是出现RAID的信息，重启一下服务器就行</p><h3 id="参考的资料-1"><a href="#参考的资料-1" class="headerlink" title="参考的资料"></a>参考的资料</h3><p>Linux LVM学习总结——删除卷组VG</p><blockquote><p><a href="https://www.cnblogs.com/kerrycode/p/4569515.html">https://www.cnblogs.com/kerrycode/p/4569515.html</a></p></blockquote><p>鸟哥 ，阵列知识</p><blockquote><p><a href="https://wizardforcel.gitbooks.io/vbird-linux-basic-4e/content/126.html">https://wizardforcel.gitbooks.io/vbird-linux-basic-4e/content/126.html</a></p></blockquote><h2 id="其他总结"><a href="#其他总结" class="headerlink" title="其他总结"></a>其他总结</h2><h3 id="LVM"><a href="#LVM" class="headerlink" title="LVM"></a>LVM</h3><ol><li>重设逻辑卷大小，<strong>重置之后，需要同步一下文件系统大小，不然容量不会改变</strong></li></ol><blockquote><p># lvresize -L 3G  /dev/vgname/lvname</p></blockquote><ol start="2"><li>为VG 添加新的PV</li></ol><p>用命令 vgextend</p><ol start="3"><li>pvcreate 是提示“Device /dev/sdb not found (or ignored by filtering)”<br>可能 硬盘没有没有初始化</li></ol><blockquote><p># dd if=/dev/urandom of=/dev/sdb bs=512 count=64</p></blockquote><ol start="4"><li>查看磁盘信息的一些命令</li></ol><p>blkid</p><p>lsblk</p><p>df -hT</p><p>du </p><p>fdisk -l</p><ol start="4"><li>很详细的LVM说明教程</li></ol><blockquote><p><a href="https://blog.csdn.net/cmzsteven/article/details/78476242">https://blog.csdn.net/cmzsteven/article/details/78476242</a></p></blockquote><ol start="5"><li>RAID + LVM 的说明</li></ol><blockquote><p><a href="https://blog.51cto.com/yinsuifeng/1916766">https://blog.51cto.com/yinsuifeng/1916766</a></p></blockquote><ol start="6"><li>LVM 创建快照</li></ol><p>快照卷是对某逻辑卷进行的，因此必须跟目标逻辑卷在同一个卷组（VG）中；无需指明卷组</p><blockquote><p># lvcreate -s -L 200M -n snap_LV_name -p r  /dev/vg/lv  </p></blockquote><ul><li>s ：创建快照卷</li><li>p r ： 限制为只读访问</li></ul><p>执行完后，会创建一个LV ，把它挂载起来就可以用了</p><pre><code>快照卷的容量必须等同于逻辑卷的容量；快照卷仅一次有效，一旦执行还原操作后则会被立即自动删除。</code></pre><p>删除快照</p><p>lvremove /dev/vgroup/snap_LV_name</p><h4 id="PE-和-LE"><a href="#PE-和-LE" class="headerlink" title="PE 和 LE"></a>PE 和 LE</h4><p>PE(Physical Extend)</p><p>PE是VG中的存储单元。实际存储的数据都是存储在这里面的。</p><p>LE(logical extent)</p><p>PE是物理存储单元，而LE则是逻辑存储单元，也即为lv中的逻辑存储单元，和pe的大小是一样的。从vg中划分lv，实际上是从vg中划分vg中的pe，只不过划分lv后它不再称为pe，而是成为le。</p><p>LVM之所以能够伸缩容量，其实现的方法就是将LV里空闲的PE移出，或向LV中添加空闲的PE。</p><h4 id="LVM-写入模式"><a href="#LVM-写入模式" class="headerlink" title="LVM 写入模式"></a>LVM 写入模式</h4><blockquote><p><a href="https://www.cnblogs.com/f-ck-need-u/p/7049233.html">https://www.cnblogs.com/f-ck-need-u/p/7049233.html</a></p></blockquote><p>LV是从VG中划分出来的，LV中的PE很可能来自于多个PV。在向LV存储数据时，有多种存储机制，其中两种是：</p><pre><code>线性模式(linear)：先写完来自于同一个PV的PE，再写来自于下一个PV的PE。条带模式(striped)：一份数据拆分成多份，分别写入该LV对应的每个PV中，所以读写性能较好，类似于RAID 0。</code></pre><p>尽管striped读写性能较好也不建议使用该模式，因为lvm的着重点在于弹性容量扩展而非性能，要实现性能应该使用RAID来实现，而且使用striped模式时要进行容量的扩展和收缩将比较麻烦。默认的是使用线性模式。</p><h3 id="RAID"><a href="#RAID" class="headerlink" title="RAID"></a>RAID</h3><h4 id="raid-0"><a href="#raid-0" class="headerlink" title="raid 0"></a>raid 0</h4><p>代表了所有RAID级别中最高的存储性能</p><h4 id="raid-1"><a href="#raid-1" class="headerlink" title="raid 1"></a>raid 1</h4><p>镜像冗余 ，原始数据繁忙时，可以直接从奖项拷贝中读取数据，RAID 1 可以提高读取性能</p><p>在这里，需要注意的是，读只能在一块磁盘上进行，并不会进行并行读取，性能取决于硬盘中较快的一块。写的话通常比单块磁盘要慢，虽然是并行写，即对两块磁盘的写入是同时进行的，但因为要比较两块硬盘中的数据，所以性能比单块磁盘慢。</p><h4 id="raid-5"><a href="#raid-5" class="headerlink" title="raid 5"></a>raid 5</h4><p>磁盘空间利用率：(N-1)/N，即只浪费一块磁盘用于奇偶校验。至少需要3块硬盘</p><p>读性能：(n-1)*单块磁盘的读性能，接近RAID0的读性能。</p><p>写性能：比单块磁盘的写性能要差（这点不是很明白，不是可以并行写入么？）</p><p>冗余：只允许一块磁盘损坏。</p><p>做raid 5阵列所有磁盘容量必须一样大，当容量不同时，会以最小的容量为准。 最好硬盘转速一样，否则会影响性能，而且可用空间=磁盘数n-1，Raid 5 没有独立的奇偶校验盘，所有校验信息分散放在所有磁盘上， 只占用一个磁盘的容量。</p><h4 id="raid-10"><a href="#raid-10" class="headerlink" title="raid 10"></a>raid 10</h4><p>Raid10其实结构非常简单，首先创建2个独立的Raid1，然后将这两个独立的Raid1组成一个Raid0</p><p>冗余：只要一对镜像盘中有一块磁盘可以使用就没问题</p><h4 id="raid-6"><a href="#raid-6" class="headerlink" title="raid 6"></a>raid 6</h4><p>最少需要4个硬盘。同时两块磁盘损毁时，数据还是可以救回来。</p><h2 id="SnapRAID"><a href="#SnapRAID" class="headerlink" title="SnapRAID"></a>SnapRAID</h2><p>后续补充</p><hr><p><strong>RAID不是备份，重要数据，请做好备份</strong></p><p>这里是RAID5坏盘后数据恢复的成功率的讨论，感兴趣可以看看</p><blockquote><p><a href="https://www.zhihu.com/question/20164654">https://www.zhihu.com/question/20164654</a></p></blockquote><p>RAID5现在来看也存在风险，一是校验算法导致存在“write hole”导致存在数据不一致的问题，二是3TB、4TB硬盘商用后使得重建时间较长，在其期间极易第二块硬盘损坏导致RAID5崩溃</p><p>RAID5在如今已经没必要了，SSD的I/O秒杀机械盘，用SSD建RAID0，再加机械盘做RAID1同步。或者RAID1+SSD缓存</p><p>raid5加hot spare也就是所说的raid5+1.一旦raid5里面某块盘宕机，热备盘就会立刻替换宕机的盘。</p><p>4块盘做raid6基本相当于做raid1，不过比raid1更安全，同时允许任意两块盘宕机。</p><hr><p>一些文献把这两种 RAID 等级看作是等同的，本文认为是不同的。 RAID01 是先做条带化再作镜像，本质是对物理磁盘实现镜像；而 RAID10 是先做镜像再作条带化，是对虚拟磁盘实现镜像。相同的配置下，通常 RAID01 比 RAID10 具有更好的容错能力。</p><p>RAID基础知识了解</p><blockquote><p><a href="https://wsgzao.github.io/post/raid/">https://wsgzao.github.io/post/raid/</a></p></blockquote><p>-a(–add)，-d(–del),-r(–remove),-f(–fail)</p><blockquote><p><a href="https://blog.csdn.net/GGxiaobai/article/details/59521459">https://blog.csdn.net/GGxiaobai/article/details/59521459</a></p></blockquote><blockquote><p><a href="https://wizardforcel.gitbooks.io/vbird-linux-basic-4e/content/126.html">https://wizardforcel.gitbooks.io/vbird-linux-basic-4e/content/126.html</a><br>l</p></blockquote><p>mdadm 这套软件，这套软件会以 partition 或 disk 为磁盘的单位，也就是说，你不需要两颗以上的磁盘，只要有两个以上的分区 （partition） 就能够设计你的磁盘阵列了</p><p>硬件磁盘阵列的设备文件名为 /dev/sd[a-p] ，因为使用到 SCSI 的模块之故。至于软件磁盘阵列则是系统仿真的，因此使用的设备文件名是系统的设备文件， 文件名为 /dev/md0, /dev/md1…，两者的设备文件名并不相同</p><h4 id="鸟哥的linux"><a href="#鸟哥的linux" class="headerlink" title="鸟哥的linux"></a>鸟哥的linux</h4><blockquote><p><a href="https://wizardforcel.gitbooks.io/vbird-linux-basic-4e/content/126.html">https://wizardforcel.gitbooks.io/vbird-linux-basic-4e/content/126.html</a></p></blockquote><h4 id="查看硬盘-信息"><a href="#查看硬盘-信息" class="headerlink" title="查看硬盘 信息"></a>查看硬盘 信息</h4><blockquote><p>hdparm -i /dev/sda</p></blockquote><h4 id="mdadm-参数"><a href="#mdadm-参数" class="headerlink" title="mdadm 参数"></a>mdadm 参数</h4><p>-a  检测设备名称<br>-n  指定设备数量<br>-l  指定RAID级别<br>-C  创建<br>-c  指定chunk大小，为2的整数次方，默认为64<br>-v  显示过程<br>-f  模拟设备损坏<br>-r  移除设备<br>-Q  查看摘要信息<br>-D  查看详细信息<br>-S  停止RAID磁盘阵列<br>-x  指定空闲盘的数量</p><p>[root@study ~]# mdadm –manage /dev/md[0-9] [–add 设备] [–remove 设备] [–fail 设备]<br>选项与参数：<br>–add    ：会将后面的设备加入到这个 md 中！<br>–remove ：会将后面的设备由这个 md 中移除<br>–fail   ：会将后面的设备设置成为出错的状态</p><h4 id="启动-RAID"><a href="#启动-RAID" class="headerlink" title="启动 RAID"></a>启动 RAID</h4><blockquote><p>#  mdadm -A /dev/md0 /dev/sd[b-f]1  </p></blockquote><p><strong>注意，需要再次指定该raid中的设备成员，且和关闭前的成员一样，不能有任何不同</strong></p><p>如果下次想直接使用-A参数激活，可以在停止RAID之前，扫描RAID，将结果保存到配置文件中，下次启动的时候直接读取配置文件即可</p><blockquote><p># mdadm -D –scan &gt;&gt; /etc/mdadm.conf</p></blockquote><p>如果不放在默认配置文件中，者装配的时候使用“-c”或“–config”选项指定配置文件即可</p><blockquote><p># mdadm -D –scan &gt;&gt; /tmp/mdadm.conf</p></blockquote><blockquote><p># mdadm -A /dev/md0 -c /tmp/mdadm.conf</p></blockquote><p>重启raid mdadm -R /dev/md0</p><p>mdadm –examine /dev/sdb</p><p>** mdadm –manage /dev/md0 –add /dev/sdb ** </p><p>组建raid阵列后，磁盘的物理插槽位置不能更改，不然阵列会出错</p><h4 id="停止阵列："><a href="#停止阵列：" class="headerlink" title="停止阵列："></a>停止阵列：</h4><p><a href="https://blog.csdn.net/w849593893/article/details/82962322">https://blog.csdn.net/w849593893/article/details/82962322</a></p><p><a href="https://www.cnblogs.com/f-ck-need-u/p/7049501.html">https://www.cnblogs.com/f-ck-need-u/p/7049501.html</a></p><p><img src="pics/33.png"><br><img src="pics/34.png"></p><h2 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h2><p>在创建的时候，如果遇到坑，能Google解决最好，但是有些问题，没必要硬钻，不行的话，可以把整个测试环境重置，重头再来一遍，有时候，能有意外的收获。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 存储 </tag>
            
            <tag> Raid </tag>
            
            <tag> LVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NFS搭建使用</title>
      <link href="/2019/09/21/nfs-da-jian-shi-yong/"/>
      <url>/2019/09/21/nfs-da-jian-shi-yong/</url>
      
        <content type="html"><![CDATA[<p>这次介绍一下NFS的搭建使用。我搭建这个的目的是用于PVE虚拟机备份数据的存放</p><p>搭建环境，Centos7</p><p><strong>NFS 必须独立一台实体机器部署，不允许安装在PVE虚拟机里面</strong></p><h2 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h2><ol><li>使用yum安装NFS (使用yum之前，记得“yum update” 一下)</li></ol><blockquote><p># yum install nfs-utils</p></blockquote><p><em>只安装 nfs-utils 即可，rpcbind 属于它的依赖，也会安装上</em></p><p>如果客户端没有安装nfs-utils , 挂载会报错</p><ol start="2"><li>设置NFS服务开机启动</li></ol><blockquote><p># systemctl enable rpcbind</p></blockquote><blockquote><p># systemctl enable nfs</p></blockquote><ol start="3"><li>启动NFS服务</li></ol><blockquote><p># systemctl start rpcbind</p></blockquote><blockquote><p># systemctl start nfs</p></blockquote><ol start="4"><li>防火墙打开rpc-bind 和 nfs 的服务</li></ol><blockquote><p># firewall-cmd –zone=public –permanent –add-service=rpc-bind</p></blockquote><blockquote><p># firewall-cmd –zone=public –permanent –add-service=mountd</p></blockquote><blockquote><p># firewall-cmd –zone=public –permanent –add-service=nfs</p></blockquote><p>然后重启防火墙</p><blockquote><p># firewall-cmd –reload</p></blockquote><pre class="line-numbers language-none"><code class="language-none">如果对防火墙的用法和操作不熟悉，可以直接禁用防火墙的功能，但是不推荐这么做！1. 关闭防火墙# systemctl stop firewalld.service2. 禁止防火墙服务开机自启# systemctl disable firewalled.service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li>在服务端新建一个共享目录，并设置权限</li></ol><blockquote><p># mkdir /nfs<br># chmod 777 /nfs  ;权限要设置正确，不然客户端可能无法正常读写</p></blockquote><ol start="6"><li>编辑配置文件</li></ol><blockquote><p># vim /etc/exports  ;注意，刚开始这个配置文件可能不存在，需要我们自己创建</p></blockquote><p>添加如下配置</p><blockquote><p>   /nfs/   10.0.77.0/24(rw,sync,no_root_squash,no_all_squash)</p></blockquote><pre class="line-numbers language-none"><code class="language-none">- &#x2F;nfs&#x2F;: 共享目录位置。- 10.0.77.0&#x2F;24 : 只有77段的客户机能访问这个共享文件夹，这里不能写成“10.0.77.*&#x2F;24” 通配符的格式。- rw: 权限设置，可读可写。- sync: 同步共享目录。- no_root_squash: 可以使用 root 授权。- no_all_squash: 可以使用普通用户授权。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="7"><li>重启NFS服务</li></ol><blockquote><p># systemctl restart nfs</p></blockquote><p>可以检查一下本地的共享目录</p><blockquote><p># showmount -e localhost</p></blockquote><h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><h3 id="linux客户端"><a href="#linux客户端" class="headerlink" title="linux客户端"></a>linux客户端</h3><ol><li>安装nfs-utils</li></ol><blockquote><p># yum install nfs-utils</p></blockquote><ol start="2"><li>设置rpcbind服务开机自启</li></ol><blockquote><p># systemctl enable rpcbind</p></blockquote><p>** 不论是客户端还是服务器端，要使用 NFS 时，两者都需要启动 RPC 才行 **</p><p>启动rpc</p><blockquote><p># systemctl start rpcbind</p></blockquote><pre class="line-numbers language-none"><code class="language-none">客户端不需要打开防火墙，因为客户端时发出请求方，网络能连接到服务端即可。客户端也不需要开启 NFS 服务，因为不共享目录。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="3"><li>创建目录并挂载</li></ol><blockquote><p># mkdir /mnt/nfs</p></blockquote><blockquote><p># mount -t nfs 10.0.77.30:/nfs  /mnt/nfs</p></blockquote><p><em>我在服务器创建的nfs共享目录位于根目录（ / ）下面，所以写法如上</em></p><ol start="4"><li>测试挂载的目录是否能正常读写</li></ol><pre class="line-numbers language-none"><code class="language-none">mount.nfs:Operation not permitted   遇到这样的错误，查看服务器共享的目录权限，一般改为777<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="5"><li>客户端自动挂载</li></ol><blockquote><p># vim /etc/fstab</p></blockquote><p>在最后追加如下内容</p> <pre class="line-numbers language-none"><code class="language-none">10.0.77.30:&#x2F;nfs      &#x2F;mnt&#x2F;nfs     nfs     defaults        0 0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="6"><li>修改了 /etc/fstab ，需要重新加载systemctl</li></ol><blockquote><p># systemctl daemon-reload</p></blockquote><h3 id="Windows客户端"><a href="#Windows客户端" class="headerlink" title="Windows客户端"></a>Windows客户端</h3><ol><li>打开控制面板 &gt; 程序 &gt; 启用或关闭 Windows 功能，找到NFS服务打开子目录勾选NFS客户端与管理工具。</li></ol><p><img src="pics/1.png" title=":size=300%"></p><ol start="2"><li>查看NFS服务器共享的目录。打开Windows的CMD</li></ol><p>显示 NFS 服务器导出的所有共享</p><blockquote><p> shoumount -e 10.0.77.30</p></blockquote><p>显示 NFS 服务器上当前由某些 NFS 客户端安装的目录</p><blockquote><p> shoumount -d 10.0.77.30</p></blockquote><ol start="3"><li>直接使用CMD进行挂载</li></ol><blockquote><p>mount 10.0.77.30:/nfs  M:</p></blockquote><p> <img src="pics/2.png" title=":size=500%"></p><p> <em>如果出现网络错误，请检查是否命令格式输入正确</em></p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>CentOS 7 下 yum 安装和配置 NFS</p><blockquote><p><a href="https://qizhanming.com/blog/2018/08/08/how-to-install-nfs-on-centos-7">https://qizhanming.com/blog/2018/08/08/how-to-install-nfs-on-centos-7</a></p></blockquote><p>win10 挂载NFS（网络文件夹）</p><blockquote><p><a href="https://blog.csdn.net/qq_34158598/article/details/81976063">https://blog.csdn.net/qq_34158598/article/details/81976063</a></p></blockquote><p>Windows客户端挂载NFS</p><blockquote><p><a href="https://www.jianshu.com/p/edc928e58183">https://www.jianshu.com/p/edc928e58183</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 存储 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AD域下推软件经验总结</title>
      <link href="/2019/09/20/ad-yu-xia-tui-ruan-jian-jing-yan-zong-jie/"/>
      <url>/2019/09/20/ad-yu-xia-tui-ruan-jian-jing-yan-zong-jie/</url>
      
        <content type="html"><![CDATA[<p>这个教程其实是为了域统一下推软件准备的。但是现在没用上，做了个总结，免得以后用到却忘记了</p><p>下面，把我以前的一些笔记拿出来记录一下，同样是为了域下推软件使用的</p><h2 id="静默安装"><a href="#静默安装" class="headerlink" title="静默安装"></a>静默安装</h2><p>首先，了解一下安装包有哪些封装格式：</p><blockquote><p><a href="https://blog.csdn.net/zhaobangyu/article/details/18406957">https://blog.csdn.net/zhaobangyu/article/details/18406957</a></p></blockquote><hr><p>一般，如果域要下推一个软件，有如下方法</p><ol><li>使用msi格式的安装包下推（优选）</li><li>组策略通过zap方式发布软件</li><li>将exe转换成msi文件</li><li>使用专门的exe分发软件</li><li>编写安装脚本，下推这个脚本</li></ol><hr><h3 id="1-msi-安装"><a href="#1-msi-安装" class="headerlink" title="1. msi 安装"></a>1. msi 安装</h3><p>这里主要记录了msi的静默安装参数</p><blockquote><p><a href="https://blog.csdn.net/jonahzheng/article/details/12113285">https://blog.csdn.net/jonahzheng/article/details/12113285</a></p></blockquote><p>如果觉得上面那个排版不清楚，可以参考这个英文的说明</p><blockquote><p><a href="https://www.advancedinstaller.com/user-guide/msiexec.html">https://www.advancedinstaller.com/user-guide/msiexec.html</a></p></blockquote><p>msi格式的静默安装很简单，在cmd里运行：</p><blockquote><p>msiexec.exe /i “C:\Example.msi” /qn</p></blockquote><p>用msi安装的软件，后续也可以很简单实现卸载，以及一些管理</p><h3 id="2-zap-方式下推"><a href="#2-zap-方式下推" class="headerlink" title="2. zap 方式下推"></a>2. zap 方式下推</h3><blockquote><p><a href="https://blog.51cto.com/854852312/541000">https://blog.51cto.com/854852312/541000</a></p></blockquote><blockquote><p><a href="https://blog.51cto.com/91xueit/1137482">https://blog.51cto.com/91xueit/1137482</a></p></blockquote><h3 id="3-exe转msi"><a href="#3-exe转msi" class="headerlink" title="3. exe转msi"></a>3. exe转msi</h3><p>这里，可以使用Advanced Installled  这个软件，可以将exe格式转换成msi</p><p>这里介绍这个软件两种转换方式</p><h4 id="3-1-Repackage-Installation"><a href="#3-1-Repackage-Installation" class="headerlink" title="3.1 Repackage Installation"></a>3.1 Repackage Installation</h4><p>这个原理是在安装软件前，保存一份系统镜像，然后安装exe软件，然后再保存一份系统镜像，比较不同的地方，再build出msi包。下面是官方的教程</p><blockquote><p><a href="https://www.advancedinstaller.com/user-guide/tutorial-repackager.html">https://www.advancedinstaller.com/user-guide/tutorial-repackager.html</a></p></blockquote><p>这里，再放出一些旧版本的教程</p><blockquote><p><a href="https://www.yuanmas.com/info/obzmmmErzP.html">https://www.yuanmas.com/info/obzmmmErzP.html</a></p></blockquote><blockquote><p><a href="http://www.360doc.com/content/14/1124/14/14641369_427660922.shtml">http://www.360doc.com/content/14/1124/14/14641369_427660922.shtml</a></p></blockquote><p>这种方法对一些比较复杂的程序，如360 ，会报错，现在排查不出问题所在。</p><h4 id="3-2-Convert-EXE-to-MSI"><a href="#3-2-Convert-EXE-to-MSI" class="headerlink" title="3.2 Convert EXE to MSI"></a>3.2 Convert EXE to MSI</h4><p>这个直接将exe转成msi </p><blockquote><p><a href="https://www.advancedinstaller.com/user-guide/tutorial-convert-exe-to-msi.html">https://www.advancedinstaller.com/user-guide/tutorial-convert-exe-to-msi.html</a></p></blockquote><p>下面这个是微软论坛推荐的，时间有点旧</p><blockquote><p>我们也荐使用一个新的工具，那就是：FLEXnet AdminStudio SMS Edition，它可以将EXE文件打包为MSI并生成MST文件(MST是MSI的应答文件，可以提供MSI安装过程中需要的信息)，从而完成无人应答安装。该工具可以在下面链接内下载到：</p><blockquote><p><a href="https://www.flexera.com/products/operations/adminstudio.html">https://www.flexera.com/products/operations/adminstudio.html</a></p></blockquote></blockquote><h4 id="4-使用专门的exe软件分发软件"><a href="#4-使用专门的exe软件分发软件" class="headerlink" title="4. 使用专门的exe软件分发软件"></a>4. 使用专门的exe软件分发软件</h4><p>和Landesk同类的产品有微软的SMS和SCCM。你应该使用这些产品来分发EXE软件</p><p>都是收费软件</p><p>SMS 是 SCCM 的前身 ， 这里我只查看了SCCM的教程，其他的软件以后有时间再摸索</p><blockquote><p><a href="https://blog.51cto.com/horse87/2059932">https://blog.51cto.com/horse87/2059932</a></p></blockquote><p>还有这个收费软件，免费版本可以支持一个域和100个客户机</p><blockquote><p><a href="https://www.manageengine.cn/products/desktop-central/software-installation.html">https://www.manageengine.cn/products/desktop-central/software-installation.html</a></p></blockquote><ol start="5"><li>使用下推脚本安装</li></ol><p>很多exe格式的软件也是支持静默安装的，可以直接加参数进行静默安装，这一步的部署类似 zap 安装</p><hr><h2 id="SCCM"><a href="#SCCM" class="headerlink" title="SCCM"></a>SCCM</h2><p>SCCM 2012 R2实战系列之二 【可以通过google搜索，能找到一系列的教程】</p><blockquote><p><a href="https://yq.aliyun.com/articles/412017">https://yq.aliyun.com/articles/412017</a></p></blockquote><p>这个人的博客也有一系列教程，是2016 的</p><blockquote><p><a href="https://blog.51cto.com/horse87/p1">https://blog.51cto.com/horse87/p1</a></p></blockquote><h3 id="坑"><a href="#坑" class="headerlink" title="坑"></a>坑</h3><p>下面是部署SCCM过程中遇到的一些坑（包括部署MSSql）</p><p>以下的扩展报错都要在日志查看</p><ul><li>SCCM扩展报错（Failed to extend the Active Directory Schema, Error Code = 1355）<br><a href="https://krishnamohaninturi.wordpress.com/sccm/failed-to-extend-the-active-directory-schema-error-code-1355/">https://krishnamohaninturi.wordpress.com/sccm/failed-to-extend-the-active-directory-schema-error-code-1355/</a></li></ul><p> – 改用 域的管理员 账号登录SCCM服务器进行 扩展</p><ul><li>Resolved SCCM 2012 R2 (extadsh) Schema Extension Error code 8224 and 8202<br><a href="https://kunaludapi.blogspot.com/2015/12/resolved-sccm-extadsh-schema-extention.html">https://kunaludapi.blogspot.com/2015/12/resolved-sccm-extadsh-schema-extention.html</a></li></ul><blockquote><p> –运行命令：repadmin.exe /syncall</p></blockquote><ul><li>安装SCCM提示 “Configmgr.Manifest.cab”不在下载的文件中。用联网的方式获取缺少的文件</li></ul><ul><li>修改SQL Server 实例名</li></ul><blockquote><p><a href="https://www.cnblogs.com/mywiki/p/3821911.html">https://www.cnblogs.com/mywiki/p/3821911.html</a></p></blockquote><p>可能用得上</p><ul><li>更改 SQL server 里面的Server Name 等属性</li></ul><blockquote><p><a href="http://tsuozoe.pixnet.net/blog/post/29844250-%E6%9B%B4%E6%94%B9%E9%9B%BB%E8%85%A6%E5%90%8D%E7%A8%B1%E5%BE%8C-sql-server-%E7%9A%84-server-name-%E8%AE%8A%E5%8C%96">http://tsuozoe.pixnet.net/blog/post/29844250-%E6%9B%B4%E6%94%B9%E9%9B%BB%E8%85%A6%E5%90%8D%E7%A8%B1%E5%BE%8C-sql-server-%E7%9A%84-server-name-%E8%AE%8A%E5%8C%96</a></p></blockquote><p>因为是第一次部署，难度有点大，中间可能疏忽了一些设置，后面有机会重新来过一次</p>]]></content>
      
      
      
        <tags>
            
            <tag> 域 </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AutoHotKey使用案例介绍</title>
      <link href="/2019/09/20/autohotkey-shi-yong-an-li-jie-shao/"/>
      <url>/2019/09/20/autohotkey-shi-yong-an-li-jie-shao/</url>
      
        <content type="html"><![CDATA[<p>这次介绍 AutoHotKey这个软件的使用方法，以自动卸载360软件为例</p><h2 id="下载软件"><a href="#下载软件" class="headerlink" title="下载软件"></a>下载软件</h2><p>可以去官网下载对应软件</p><blockquote><p><a href="https://www.autohotkey.com/">https://www.autohotkey.com/</a></p></blockquote><p>下载后，点击安装</p><p>安装是很快速的，弹出这个界面，说明安装完成，可以看一下它的教程</p><p> <img src="pics/1.png"></p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><ol><li>找一个目录，鼠标右键新建一个脚本</li></ol><p><img src="pics/2.png"> </p><ol start="2"><li>右键这个脚本，选择编辑，输入以下内容</li></ol><p><img src="pics/4.png"> </p><pre class="line-numbers language-none"><code class="language-none">Run C:\Program Files\360\360sd\Uninst.exe  WinWait 360杀毒卸载向导WinActivateControlClick Button12ControlClick Button13<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>Run 后面接要运行的程序，请确保路径正确，以及文件确实存在。这里运行360的卸载程序</li><li>WinWait 等待程序的开启后，拆执行下面的内容。 后面接这个界面的名称。(安装AutoHotKey之后，软件会自动安装window spy这个软件，可以用来捕获窗口的一些信息)</li></ul><p><img src="pics/5.png"> </p><ul><li><p>WinActivate  作用是把窗口激活，即放到桌面的最前面</p></li><li><p>ControlClick  模拟鼠标点击按钮<br><img src="pics/6.png"> </p></li></ul><ol start="3"><li>保存退出，双击这个文件执行脚本内容</li></ol><p><img src="pics/3.png"> </p><h2 id="附加"><a href="#附加" class="headerlink" title="附加"></a>附加</h2><p>这里有一个AutoHotKey的教程，可以参考它的一些具体用法</p><blockquote><p><a href="https://wyagd001.github.io/zh-cn/docs/AutoHotkey.htm">https://wyagd001.github.io/zh-cn/docs/AutoHotkey.htm</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git笔记</title>
      <link href="/2019/09/20/git-bi-ji/"/>
      <url>/2019/09/20/git-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="Git-使用介绍"><a href="#Git-使用介绍" class="headerlink" title="Git 使用介绍"></a>Git 使用介绍</h1><p>原文地址：</p><blockquote><p><a href="https://www.liaoxuefeng.com/wiki/896043488029600">https://www.liaoxuefeng.com/wiki/896043488029600</a></p></blockquote><p>所有的版本控制都只能针对文本内容，像WORD文件这样的二进制内容，只能做快照</p><p>首先这里再明确一下，所有的版本控制系统，其实只能跟踪文本文件的改动，比如TXT文件，网页，所有的程序代码等等，Git也不例外。版本控制系统可以告诉你每次的改动，比如在第5行加了一个单词“Linux”，在第8行删了一个单词“Windows”。而图片、视频这些二进制文件，虽然也能由版本控制系统管理，但没法跟踪文件的变化，只能把二进制文件每次改动串起来，也就是只知道图片从100KB改成了120KB，但到底改了啥，版本控制系统不知道，也没法知道</p><p><strong>如果要真正使用版本控制系统，就要以纯文本方式编写文件</strong></p><p>千万不要使用Windows自带的记事本编辑任何文本文件。原因是Microsoft开发记事本的团队使用了一个非常弱智的行为来保存UTF-8编码的文件，他们自作聪明地在每个文件开头添加了0xefbbbf（十六进制）的字符，你会遇到很多不可思议的问题，比如，网页第一行可能会显示一个“?”，明明正确的程序一编译就报语法错误，等等，都是由记事本的弱智行为带来的。建议你下载Notepad++代替记事本，不但功能强大，而且免费！记得把Notepad++的默认编码设置为UTF-8 without BOM即可</p><h2 id="Git-背景"><a href="#Git-背景" class="headerlink" title="Git 背景"></a>Git 背景</h2><p>由Linus 创建，C 语言编写 ，最初目的用于linux内核管理</p><h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><p>CVS 和 SVN 都是 集中式的版本控制系统</p><p>GIT 是分布式的版本控制系统</p><h3 id="集中式版本控制系统"><a href="#集中式版本控制系统" class="headerlink" title="集中式版本控制系统"></a>集中式版本控制系统</h3><p>版本库是集中存放在中央服务器的</p><h3 id="分布式版本控制系统"><a href="#分布式版本控制系统" class="headerlink" title="分布式版本控制系统"></a>分布式版本控制系统</h3><p>没有“中央服务器”，每个人的电脑上都是一个完整的版本库</p><h2 id="安装方法"><a href="#安装方法" class="headerlink" title="安装方法"></a>安装方法</h2><p>linux 版本如果是 debian系的，直接</p><pre class="line-numbers language-none"><code class="language-none"># apt update# apt install git  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>windows系统可以去官网下载安装包</p><h2 id="Git-使用方法"><a href="#Git-使用方法" class="headerlink" title="Git 使用方法"></a>Git 使用方法</h2><p><strong>注意：所有的操作都要在有 .git 这个目录 的目录下面操作</strong></p><h3 id="创建和添加"><a href="#创建和添加" class="headerlink" title="创建和添加"></a>创建和添加</h3><ol><li><p>创建空文件</p></li><li><p>进入该文件夹下面，初始化这个文件</p></li></ol><pre class="line-numbers language-none"><code class="language-none"># git init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>瞬间Git就把仓库建好了，而且告诉你是一个空的仓库（empty Git repository），细心的读者可以发现当前目录下多了一个.git的目录，这个目录是Git来跟踪管理版本库的，没事千万不要手动修改这个目录里面的文件，不然改乱了，就把Git仓库给破坏了。</p></blockquote><ol start="3"><li>向版本库添加文件</li></ol><p>版本库，即我们刚才创建的文件夹，也称 repository</p><p>新建一个文件，放在版本库里，然后执行如下命令</p><pre class="line-numbers language-none"><code class="language-none">git add testfile   \\testfile 是我创建的测试文件<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>提交文件到仓库</p><pre class="line-numbers language-none"><code class="language-none"># git commit -m &quot;描述的信息&quot;   &#x2F;&#x2F; -m 后面输入本次提交的说明，可以是任意内容<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>commit 相当于一个快照</p><p>commit 可以一次提交多个文件，前提是这个文件已经加入<code>add</code></p><h3 id="查看文件状态"><a href="#查看文件状态" class="headerlink" title="查看文件状态"></a>查看文件状态</h3><pre class="line-numbers language-none"><code class="language-none"># git status <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这个命令可以看到修改的文件，以及未加入的文件（add）</p><pre class="line-numbers language-none"><code class="language-none"># git diff  testfile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这个命令可以查一个文件更改前后的不同</p><pre class="line-numbers language-none"><code class="language-none">详解： diff --git a&#x2F;test.txt b&#x2F;test.txt ——对比两个文件，其中a改动前，b是改动后，以git的diff格式显示；index 629d9c8..3d98a7f 100644 ——两个版本的git哈希值，index区域（add之后）的 629d9c8 对象和工作区域的 3d98a7f 对象， 100表示普通文件，644表示权限控制； --- a&#x2F;test.txt +++ b&#x2F;test.txt ——减号表示变动前，加号表示变动后；@@ -4,8 +4,9 @@ test line3. ——@@表示文件变动描述合并显示的开始和结束，一般在变动前后多显示3行，其中-+表示变动前后，逗号前是起始行位置，逗号后为从起始行往后几行。合起来就是变动前后都是从第4行开始，变动前文件往后数8行对应变动后文件往后数9行。 变动内容 ——+表示增加了这一行，-表示删除了这一行，没符号表示此行没有变动。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="查看历史更改"><a href="#查看历史更改" class="headerlink" title="查看历史更改"></a>查看历史更改</h3><pre class="line-numbers language-none"><code class="language-none"># git log <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>显示从最近到最远的提交日志</p><h4 id="回退文件版本"><a href="#回退文件版本" class="headerlink" title="回退文件版本"></a>回退文件版本</h4><p>首先，Git必须知道当前版本是哪个版本，在Git中，用HEAD表示当前版本。上一个版本就是HEAD^，上上一个版本就是HEAD^^，当然往上100个版本写100个^比较容易数不过来，所以写成HEAD~100。</p><pre class="line-numbers language-none"><code class="language-none"># git reset --hard HEAD^<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>指定回退到某个版本</p><pre class="line-numbers language-none"><code class="language-none"># git reset --hard 1094a \\ 1094a 是 commit 提交时的id ，通过 git log 或者  git reflog 能查找到。版本号没必要写全，前几位就可以了！<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="版本库（Repository）"><a href="#版本库（Repository）" class="headerlink" title="版本库（Repository）"></a>版本库（Repository）</h3><p><img src="pics/1.png"></p><p>一个文件的状态为”Untracked”，代表没有add</p><p>要提交一个文件 ，一定要先 add ，然后才 commit 。 如果没有add ，即使commit了也不会有任何提交。 因为git 针对的是修改的内容，而不是文件！</p><h3 id="丢弃修改"><a href="#丢弃修改" class="headerlink" title="丢弃修改"></a>丢弃修改</h3><pre class="line-numbers language-none"><code class="language-none"># git checkout -- readme.txt  \\git checkout -- filename 命令中的--很重要，没有--，就变成了“切换到另一个分支”的命令<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>命令git checkout – readme.txt意思就是，把readme.txt文件在工作区的修改全部撤销，这里有两种情况：</p><p>一种是readme.txt自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；</p><p>一种是readme.txt已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。</p><p>总之，就是<strong>让这个文件回到最近一次git commit或git add时的状态</strong></p><pre class="line-numbers language-none"><code class="language-none"># git reset HEAD filename  \\可以把暂存区的修改撤销掉（unstage），重新放回工作区<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> <strong>checkout 丢弃的是工作区的修改， reset HEAD 是丢弃暂存区的修改</strong></p><p>文件已修改，未add到暂存区: git checkout – file可还原</p><p>文件已修改，并add到暂存区未commit： git reset HEAD file 可还原</p><blockquote><p>checkout命令用于从历史提交(commit)（或者暂存区域）中拷贝文件到工作目录，也可用于切换分支</p></blockquote><h3 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h3><p>当你删掉工作区的文件，但是版本库里面的历史文件还是存在的。如果要把历史文件记录也删除，执行如下操作</p><pre class="line-numbers language-none"><code class="language-none"># git rm  filename # git commit -m &quot;说明&quot;  \\rm 后记得commit一下<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>另一种情况是工作区删除错了，但是版本库中有保留的文件，可以把误删的文件恢复</p><pre class="line-numbers language-none"><code class="language-none"># git checkout  -- filename \\git checkout其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以“一键还原”。<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="生成密钥对"><a href="#生成密钥对" class="headerlink" title="生成密钥对"></a>生成密钥对</h3><pre class="line-numbers language-none"><code class="language-none"># ssh-keygen -t rsa -C &quot;email@xxx.com&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>密钥对的位置一般位于：/用户目录/.ssh/</p><p><strong>id_rsa 是私钥，不能泄漏</strong><br>id_rsa.pub 是公钥，可以上传到github上面</p><p><strong>友情提示，在GitHub上免费托管的Git仓库，任何人都可以看到喔（但只有你自己才能改）（现在github被微软收购，免费账户可以创建无限的私有仓库，所以把仓库改成私有仓库别人就看不到了）。所以，不要把敏感信息放进去。</strong></p><p>如果你不想让别人看到Git库，有两个办法，一个是交点保护费，让GitHub把公开的仓库变成私有的，这样别人就看不见了（不可读更不可写）。另一个办法是自己动手，搭一个Git服务器，因为是你自己的Git服务器，所以别人也是看不见的。这个方法我们后面会讲到的，相当简单，公司内部开发必备。</p><h3 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h3><p>Git 默认有一个 master 的主分支</p><h4 id="新建分支"><a href="#新建分支" class="headerlink" title="新建分支"></a>新建分支</h4><pre class="line-numbers language-none"><code class="language-none"># git checkout -b dev   \\ 创建一个 dev 的分支 , -b 表示创建并切换上面的命令相当于下面两条命令# git branch dev# git checkout dev <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none"># git branch \\显示所有分支， 当前分支会以星号表示<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h4><pre class="line-numbers language-none"><code class="language-none"># git merge dev  \\ merge 用于合并指定分支（dev）到当前分支（需要事先切换）<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h4><pre class="line-numbers language-none"><code class="language-none"># git branch -d dev <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="可视化查看git-log"><a href="#可视化查看git-log" class="headerlink" title="可视化查看git log"></a>可视化查看git log</h3><pre class="line-numbers language-none"><code class="language-none">#  git log --graph --pretty&#x3D;oneline --abbrev-commit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="合并分支的另外一种情况"><a href="#合并分支的另外一种情况" class="headerlink" title="合并分支的另外一种情况"></a>合并分支的另外一种情况</h3><p>先切回master分支，准备合并dev分支，请注意–no-ff参数，表示禁用Fast forward。<br>通常，合并分支时，如果可能，Git会用Fast forward模式，但这种模式下，删除分支后，会丢掉分支信息。<br>如果要强制禁用Fast forward模式，Git就会在merge时生成一个新的commit，这样，从分支历史上就可以看出分支信息。</p><pre class="line-numbers language-none"><code class="language-none"># git merge --no-ff -m &quot;merge with no-ff&quot; dev<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="忽略文件"><a href="#忽略文件" class="headerlink" title="忽略文件"></a>忽略文件</h3><p>在Git工作区的根目录下创建一个特殊的.gitignore文件，然后把要忽略的文件名填进去，Git就会自动忽略这些文件</p><p>文件内容如下：</p><pre class="line-numbers language-none"><code class="language-none"># Windows:Thumbs.dbehthumbs.dbDesktop.ini# Python:*.py[cod]*.so*.egg*.egg-infodistbuild# My configurations:db.inideploy_key_rsa<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="配置别名"><a href="#配置别名" class="headerlink" title="配置别名"></a>配置别名</h3><pre class="line-numbers language-none"><code class="language-none"># git config --global alias.st status \\ 将 git status 替换成 git st<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none"># git config --global alias.unstage &#39;reset HEAD&#39;    \\git reset HEAD test.py &#x3D; git unstage test.py<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none"># git config --global alias.lg &quot;log --color --graph --pretty&#x3D;format:&#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#39; --abbrev-commit&quot;&#x3D; git lg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>设置用户名和邮箱</p><pre class="line-numbers language-none"><code class="language-none">git config --global user.name &quot;Firstname Lastname&quot;git config --global user.email &quot;your_email@Example.com&quot;这些命令 会在 &quot;~&#x2F;gitconfig &quot; 中形成.这里设置的 姓名  和 邮箱 地址 会用在 Git的 提交日志中.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>可以让命令的输出有 更高 的可读性</p><pre class="line-numbers language-none"><code class="language-none">git config --global color.ui auto <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="配置Git"><a href="#配置Git" class="headerlink" title="配置Git"></a>配置Git</h3><p>配置Git的时候，加上–global是针对当前用户起作用的，如果不加，那只针对当前的仓库起作用。</p><p><strong>每个仓库的Git配置文件都放在.git/config文件中</strong></p><h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><h3 id="github-添加同步仓库"><a href="#github-添加同步仓库" class="headerlink" title="github 添加同步仓库"></a>github 添加同步仓库</h3><p>在github上面创建一个空的仓库</p><p>在自己的电脑执行如下命令</p><pre class="line-numbers language-none"><code class="language-none"># git remote add origin git@github.com:username&#x2F;repository.git \\ username 为你github的用户名；repository为你github仓库的名称；origin 是远程库的意思，这是git的默认的叫法，可以改成别的<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="推送内容的远程库（github）"><a href="#推送内容的远程库（github）" class="headerlink" title="推送内容的远程库（github）"></a>推送内容的远程库（github）</h3><p>把本地库的内容推送到远程，用git push命令，实际上是把当前分支master推送到远程。</p><p>由于远程库是空的，我们第一次推送master分支时，加上了-u参数，Git不但会把本地的master分支内容推送的远程新的master分支，还会把本地的master分支和远程的master分支关联起来，在以后的推送或者拉取时就可以简化命令。</p><p>要关联一个远程库，使用命令git remote add origin git@server-name:path/repo-name.git；</p><p>关联后，使用命令第一次推送master分支的所有内容:</p><p><code>git push -u origin master</code></p><p>此后，每次本地提交后，只要有必要，就可以使用命令 <code>git push origin master</code> 推送最新修改；</p><h3 id="同步仓库"><a href="#同步仓库" class="headerlink" title="同步仓库"></a>同步仓库</h3><p>如果Github上面的仓库有内容，需要先pull下来，然后才能push上去</p><p><code>git pull --rebase origin master</code></p><p>特别的：本地没有add 的文件，是不会同步到GitHub上面的</p><h3 id="克隆仓库"><a href="#克隆仓库" class="headerlink" title="克隆仓库"></a>克隆仓库</h3><pre class="line-numbers language-none"><code class="language-none"># git clone git@github.com:username&#x2F;repo-name.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>你也许还注意到，GitHub给出的地址不止一个，还可以用 <a href="https://github.com/michaelliao/gitskills.git">https://github.com/michaelliao/gitskills.git</a> 这样的地址。实际上，Git支持多种协议，默认的 git://使用ssh ，但也可以使用https等其他协议。</p><p>使用https除了速度慢以外，还有个最大的麻烦是每次推送都必须输入口令，但是在某些只开放http端口的公司内部就无法使用ssh协议而只能用https。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 编程 </tag>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AP部署基本概念</title>
      <link href="/2019/09/20/ap-bu-shu-ji-ben-gai-nian/"/>
      <url>/2019/09/20/ap-bu-shu-ji-ben-gai-nian/</url>
      
        <content type="html"><![CDATA[<h2 id="信号强度"><a href="#信号强度" class="headerlink" title="信号强度"></a>信号强度</h2><p>db是一个纯粹的比值，只表示两个量的相对大小关系。举个栗子，当考虑A功率比B功率大多少db时，可使用公式：10lg[Pa/Pb]。假设A功率比B功率大一倍，则10lg[Pa/Pb]=10log2=3db，即A功率比B功率大3db</p><blockquote><p> X = 1000000000000000（不用数了，15个0）= 10lgX = 150 dB</p></blockquote><blockquote><p>X = 0.000000000000001 = 10lgX = -150 dB </p></blockquote><p>实际上我们通常用1w的比值来表示为dbw，与1mw的比值单位表示为dbm。因为WIFI信号的能量通常为mw级，因此业界将WIFI信号大小表示为与1mw的强度比，用dbm来表示</p><pre class="line-numbers language-none"><code class="language-none">0dbm&#x3D;1mw，30dbm&#x3D;1000mw，Wi-Fi信号发出时强度通常就在这个范围内。此外，业界通常有这么一个规则：+3dbm，功率*2；-3dbm，功率&#x2F;2；+10dbm，功率*10；-10dbm，功率&#x2F;10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> dBm是一个表示功率绝对值的单位，计算公式为：10lg功率值/1mW。例如：如果发射功率为 1mW，按dBm单位进行折算后的值应为：10 lg (1mW/1mW) = 0dBm；对于40W的功率,则10 lg(40W/1mW)=46dBm</p><blockquote><p>dbm=30+10lgP </p></blockquote><p>其中P是功率</p><p><strong>-70dbm以上为理想的信号强度，-70dbm～-80dbm为中等信号强度，小于-80dbm为弱信号</strong></p><h2 id="信噪比"><a href="#信噪比" class="headerlink" title="信噪比"></a>信噪比</h2><p>SNR（Signal-to-Noise Ratio） </p><p>当某WIFI STA的接收信号强度为-85 dBm，而这时的背景噪声强度为-95dBm，<del>这时SNR=10dB。</del> 10dB的差别对于WIFI芯片来说SNR太小了，芯片无法区分背景噪声和WIFI信号</p><pre class="line-numbers language-none"><code class="language-none">信噪比的表达方式为：SNR &#x3D; 10lg（ PS &#x2F; PN），其中： SNR：信噪比，单位是dB。 PS：信号的有效功率。 PN：噪声的有效功率。  信噪比越大，说明信号中携带的噪声信号越小，从而对信号传输的影响越小。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>一般认为信噪比&gt;30db时，基本不会影响到当前信道工作</strong></p><p><strong>2.4G每间隔5个信道，可认为信号的隔离度能够达到30db，这也是为什么需要用1、6、11信道蜂窝部署</strong></p><p><strong>5G推荐36、40、44、48、149、153、157、161、165信道</strong></p><h2 id="HT20-HT40"><a href="#HT20-HT40" class="headerlink" title="HT20 HT40"></a>HT20 HT40</h2><p>802.11n有两种频宽模式：HT20和HT40。HT20使用的时20MHz频宽，HT40使用的40MHz频宽。20Mhz和40Mhz的区别，可以想象成道路的宽度，宽度越宽当然同时能跑的数据越多，也就提高了速度。但是无线网的“道路”是大家共享的，一共就这么宽(802.11 b/g/n的频带是 2.412Ghz ~ 2.472Ghz，一共60Mhz。802.11a/n在中国可用的频带是5.745Ghz ~ 5.825Ghz，同样也是60Mhz)，你占用的道路宽了，跑得数据多了，当然也就容易跟别人撞车，一旦撞车大家就都会慢下来，比你在窄路上走还要慢。原来挤一挤可以四个人同时用的，如果你用了40Mhz的话就只能两个人同时用了。</p><p>HT20与HT40怎么选择：</p><p>使用HT20主要是出于兼容性考虑：比如，一个区域内存在11b/g信号，那么为了尽量减少对它们的干扰，需要设定为HT20，以减少频带的重叠。</p><p>使用HT40主要是出于高性能考虑：HT40相当于两个HT20的捆绑，一个是主，一个是辅。主信道发送beacon报文和部分数据报文，辅信道发送其他报文。</p><p>出于兼容性及Wifi稳定性考虑，HT40模式在一个蜂窝式无线覆盖区域最好不要在2.4GHz使用，最好在5GHz使用。在2.4G使用HT40，则有效通道有3~13，非重叠的却只有3，11.</p><p>如果有高吞吐需求，可使用HT80信道，推荐使用149、156、157、161或者153、157、161、165绑定</p><h2 id="AP之间的距离"><a href="#AP之间的距离" class="headerlink" title="AP之间的距离"></a>AP之间的距离</h2><p>如果两个AP不在同一个信道，那么他们在一起很近也不会有影响（1m以上），但如果是同一个信道的两个AP，他们之间必须保持安全距离，这个安全距离约为两个AP覆盖距离之和</p><h2 id="控制AP功率"><a href="#控制AP功率" class="headerlink" title="控制AP功率"></a>控制AP功率</h2><p>降低AP的功率，减少干扰</p><p>减少信标帧beacon、探测帧Probe request 、回应帧Probe response 的发送功率，避免弱信号设备连接，减小远端设备连接</p><p>禁用低速率集，避免远端的低速率设备连入</p>]]></content>
      
      
      
        <tags>
            
            <tag> 硬件 </tag>
            
            <tag> WiFi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初步了解Windows日志</title>
      <link href="/2019/09/20/chu-bu-liao-jie-windows-ri-zhi/"/>
      <url>/2019/09/20/chu-bu-liao-jie-windows-ri-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="Windows日志笔记"><a href="#Windows日志笔记" class="headerlink" title="Windows日志笔记"></a>Windows日志笔记</h1><p>Windows日志包括应用程序、安全、系统等几个部分，它的存放路径是“%systemroot%system32config”，应用程序日志、安全日志和系统日志对应的文件名为AppEvent.evt、SecEvent.evt和SysEvent.evt。这些文件受到“Event Log（事件记录）”服务的保护不能被删除，但可以被清空。</p><h2 id="查看日志文件"><a href="#查看日志文件" class="headerlink" title="查看日志文件"></a>查看日志文件</h2><p>打开【事件查看器】即可</p><h2 id="保护日志文件"><a href="#保护日志文件" class="headerlink" title="保护日志文件"></a>保护日志文件</h2><h3 id="更改路径"><a href="#更改路径" class="headerlink" title="更改路径"></a>更改路径</h3><p>Windows日志文件默认路径是“%systemroot%system32config”，我们可以通过修改注册表来改变它的存储目录，来增强对日志的保护。</p><p>点击“开始→运行”，在对话框中输入“Regedit”，回车后弹出注册表编辑器，依次展开 </p><blockquote><p>HKEY_LOCAL_MACHINE/SYSTEM/CurrentControlSet/Services/Eventlog</p></blockquote><p>后，下面的</p><ul><li><p>Application  应用程序日志(Application.evtx)</p></li><li><p>Security      安全日志(Security.evtx)</p></li><li><p>System    系统日志(System.evtx)</p></li></ul><p>其他</p><ul><li><p>Microsoft Office Alerts  微软Office应用程序   OAerts.evtx</p></li><li><p>Windows PowerShell  Windows PowerShell.evtx</p></li><li><p>Internet Explorer  Internet Explorer.evtx </p></li></ul><p>笔者以应用程序日志为例，将其转移到“d:\cce”目录下。选中Application子项,在右栏中找到File键，其键值为应用程序日志文件的路径“%SystemRoot%\system32config\AppEvent.Evt”，将它修改为“d:\cce\AppEvent.Evt”。接着在D 盘新建“CCE”目录，将“AppEvent.Evt”拷贝到该目录下，重新启动系统，完成应用程序日志文件存放目录的修改。其它类型日志文件路径修改方法相同，只是在不同的子项下操作</p><h3 id="修改日志文件的权限"><a href="#修改日志文件的权限" class="headerlink" title="修改日志文件的权限"></a>修改日志文件的权限</h3><p>在文件属性对话框的安全选项</p><ul><li><p>取消“允许将来自父系的可继承权限传播给该对象”选项勾选</p></li><li><p>“Everyone”账号，只赋予“只读”权限</p></li><li><p>添加“system”账号，赋予“完全控制”权限</p></li></ul><h2 id="日志详情"><a href="#日志详情" class="headerlink" title="日志详情"></a>日志详情</h2><p>每个记录事件的数据结构中包含了9个元素（可以理解成数据库中的字段）：</p><ul><li><p>日期/时间</p></li><li><p>事件类型</p></li><li><p>用户</p></li><li><p>计算机</p></li><li><p>事件ID</p></li><li><p>来源</p></li><li><p>类别</p></li><li><p>描述</p></li><li><p>数据等信息</p></li></ul><p>系统内置的三个核心日志文件（System，Security和Application）默认大小均为20480KB（20MB），记录事件数据超过20MB时，默认系统将优先覆盖过期的日志记录。其它应用程序及服务日志默认最大为1024KB，超过最大限制也优先覆盖过期的日志记录。</p><p>Windows事件日志中共有五种事件类型，所有的事件必须拥有五种事件类型中的一种，且只可以有一种。五种事件类型分为：</p><ol><li><pre><code>信息（Information）</code></pre></li></ol><p>信息事件指应用程序、驱动程序或服务的成功操作的事件。</p><ol start="2"><li><pre><code>警告（Warning）</code></pre></li></ol><p>警告事件指不是直接的、主要的，但是会导致将来问题发生的问题。例如，当磁盘空间不足或未找到打印机时，都会记录一个“警告”事件。</p><ol start="3"><li><pre><code>错误（Error）</code></pre></li></ol><p>错误事件指用户应该知道的重要的问题。错误事件通常指功能和数据的丢失。例如,如果一个服务不能作为系统引导被加载，那么它会产生一个错误事件。</p><ol start="4"><li><pre><code>成功审核（Success audit）</code></pre></li></ol><p>成功的审核安全访问尝试，主要是指安全性日志，这里记录着用户登录/注销、对象访问、特权使用、账户管理、策略更改、详细跟踪、目录服务访问、账户登录等事件，例如所有的成功登录系统都会被记录为“ 成功审核”事件。</p><ol start="5"><li><pre><code>失败审核（Failure audit）</code></pre></li></ol><p>失败的审核安全登录尝试，例如用户试图访问网络驱动器失败，则该尝试会被作为失败审核事件记录下来。</p><h2 id="日志分析实例"><a href="#日志分析实例" class="headerlink" title="日志分析实例"></a>日志分析实例</h2><ul><li>在Windows系统中，我们可以通过事件查看器的系统日志查看计算机的开、关机记录，这是因为日志服务会随计算机一起启动或关闭，并在日志中留下记录。这里我们要介绍两个事件ID“6006和6005”。6005表示事件日志服务已启动，如果在事件查看器中发现某日的事件ID号为6005的事件，就说明在这天正常启动了Windows系统。6006表示事件日志服务已停止，如果没有在事件查看器中发现某日的事件ID号为6006的事件，就表示计算机在这天没有正常关机，可能是因为系统原因或者直接切断电源导致没有执行正常的关机操作。</li></ul><h2 id="删除日志"><a href="#删除日志" class="headerlink" title="删除日志"></a>删除日志</h2><p>Windwos操作系统默认没有提供删除特定日志记录的功能，仅提供了删除所有日志的操作功能。也就意味着日志记录ID（Event Record ID）应该是连续的，默认的排序方式应该是从大到小往下排列。</p><h2 id="辅助工具"><a href="#辅助工具" class="headerlink" title="辅助工具"></a>辅助工具</h2><blockquote><p><a href="http://www.eventid.net/">http://www.eventid.net/</a></p></blockquote><p>这个网站可以查相应id的日志的介绍</p><p><img src="1.png"></p><pre class="line-numbers language-none"><code class="language-none">可是EVENTID.NET上有的信息要付费注册用户才能看，怎么办呢：） 查EVENTID.NET可以按以下方法来查[url]http:&#x2F;&#x2F;www.eventid.net&#x2F;display.asp?eventid&#x3D;xxxx&amp;source&#x3D;yyyy[&#x2F;url]xxxx即事件IDyyyy即事件来源<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="引伸阅读"><a href="#引伸阅读" class="headerlink" title="引伸阅读"></a>引伸阅读</h2><p>日志攻击</p><blockquote><p><a href="https://www.4hou.com/system/6036.html">https://www.4hou.com/system/6036.html</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> 安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>百度云不限速下载</title>
      <link href="/2019/09/20/bai-du-yun-bu-xian-su-xia-zai/"/>
      <url>/2019/09/20/bai-du-yun-bu-xian-su-xia-zai/</url>
      
        <content type="html"><![CDATA[<p>本文创建于19年8月16号</p><p>首先，百度会不断出封杀的策略，所以本文的教程不可能一直有效。但是，破解的方法也会不断跟进的（你可以自己去留意一下论坛，或者在全球最大的“同性交友网站”找到与时俱进的客户端）</p><p><strong>本人不对使用所造成的任何后果负责，请酌情使用</strong></p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>这是一个开源的软件，所以放心用吧。下面是github的网址，里面有软件的下载地址。（这个提供了两个软件，我这里只使用第一种）</p><blockquote><p><a href="https://github.com/b3log/baidu-netdisk-downloaderx">https://github.com/b3log/baidu-netdisk-downloaderx</a></p></blockquote><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>下载之后，解压软件，然后点击如下软件</p><p><img src="pics/1.png"></p><p>之后，有如下界面，需要填入一个代码，以登录你的百度云账号</p><p><img src="pics/2.png"></p><p>这里，我以Chrome浏览器为例，获取这个BDUSS值</p><h3 id="获取-BDUSS-登录"><a href="#获取-BDUSS-登录" class="headerlink" title="获取 BDUSS 登录"></a>获取 BDUSS 登录</h3><ol><li>打开百度云的网页，登录自己的账号，进入文件管理页面后，点击搜索栏的锁头图标，然后点击cookie</li></ol><p><img src="pics/3.png"></p><ol start="2"><li>然后安装如下图，找到自己的BDUSS值</li></ol><p><img src="pics/4.png"></p><p>返回软件，粘贴我们刚才复制的代码，然后点击登录，然后，选择下载后的文件的存放位置</p><p><img src="pics/5.png"></p><h3 id="下载-1"><a href="#下载-1" class="headerlink" title="下载"></a>下载</h3><p><img src="pics/6.png"></p><p>选择好文件之后，点击【3.开始下载】就行。实测速度还行，100多兆的文件10几秒就搞定了</p><p><img src="pics/7.png"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这里我只介绍了BND1 ，开源项目有两个 ，还有BND2 ，出于某些原因，就不介绍了</p><p>其实，运营一个（国民级）网盘成本是很高的，，这个经费是亿级别的。感兴趣的可以看一下下面的的视频</p><blockquote><p><a href="https://www.bilibili.com/video/av58647793?from=search&amp;seid=1296837114026661321">https://www.bilibili.com/video/av58647793?from=search&amp;seid=1296837114026661321</a></p></blockquote><p>如果自己动手能力强的话，可以“白嫖”。但是，如果不想折腾，那去充一个会员（百度云的收费其实是很便宜了，如果你有去了解国外的一些网盘，如谷歌云，或微软的365，你就会发现，百度简直是白菜价）就能给自己省下很多的时间精力。你应当承认你的时间精力比这几十块钱值钱，不是吗？</p><p>另外，如果只是临时下载文件，有一个不错的网站推荐使用，每天有5次下载机会，每次只能下载单文件。</p><blockquote><p><a href="https://www.baiduwp.com/">https://www.baiduwp.com/</a></p></blockquote><p><em>这个网站访问不了请使用代理</em></p>]]></content>
      
      
      
        <tags>
            
            <tag> 破解 </tag>
            
            <tag> 百度云 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows主机定时播放音乐</title>
      <link href="/2019/09/20/windows-zhu-ji-ding-shi-bo-fang-yin-le/"/>
      <url>/2019/09/20/windows-zhu-ji-ding-shi-bo-fang-yin-le/</url>
      
        <content type="html"><![CDATA[<h2 id="一、建立播放列表文件"><a href="#一、建立播放列表文件" class="headerlink" title="一、建立播放列表文件"></a>一、建立播放列表文件</h2><ol><li>将需要播放的音频文件归类整理好，分目录存放</li></ol><p><img src="pics/1.png"></p><ol start="2"><li>打开 VLC 视频播放软件，界面如下，将<strong>随机播放按钮打开</strong>（打开随机播放的目的是因为下班有多个音频，每天下班随机播放）</li></ol><p><img src="pics/2.png"></p><ol start="3"><li>将一个目录下面的音频文件拖到VLC播放器列表里面</li></ol><p><img src="pics/3.png"></p><ol start="4"><li>将播放列表保存为文件，建议放在桌面</li></ol><p><img src="pics/4.png"></p><p><img src="pics/5.png"></p><ol start="5"><li>保存好之后，会有这个文件</li></ol><p><img src="pics/6.png"></p><ol start="6"><li><strong>关闭VLC软件</strong>，重新按照上面的步骤添加新的播放类别软件。这样，我们导出来两个列表文件</li></ol><p><img src="pics/7.png"></p><h2 id="二、创建播放音乐的计划任务"><a href="#二、创建播放音乐的计划任务" class="headerlink" title="二、创建播放音乐的计划任务"></a>二、创建播放音乐的计划任务</h2><ol><li>打开 计划任务 面板，点击【创建任务】</li></ol><p><img src="pics/8.png"></p><ol start="2"><li>【常规】如下图设置</li></ol><p><img src="pics/9.png"></p><p><strong>如果设置了【不管用户是否登录都要运行】，然后，在测试的时候，有后台VlC程序，但是没有声音，这个时候，可以试试重新安装VLC或使用【只有在用户登录才运行】</strong></p><ol start="3"><li>【触发器】如下图设置</li></ol><p><img src="pics/10.png"></p><ol start="4"><li>【操作】如下图设置， 选择第一个步骤导出的播放列表文件（下班.xspf) ，作为执行文件</li></ol><p><img src="pics/11.png"></p><ol start="5"><li>然后点击【确认】，完成设置</li></ol><p>这样我们就创建了一个下班自动播放音乐的任务，同样，午休的播放铃声也同样创建一个计划任务</p><h2 id="三、创建结束音乐的计划任务"><a href="#三、创建结束音乐的计划任务" class="headerlink" title="三、创建结束音乐的计划任务"></a>三、创建结束音乐的计划任务</h2><p>创建了播放的任务后，因为下班有多个音乐，不可能等播放器全部播放完结束，我们要写一个脚本来结束VLC程序。音乐的播放时间为5分钟。</p><ol><li>创建一个【kill_vlc.bat】的脚本，里面的内容为</li></ol><blockquote><p>taskkill /im vlc.exe /f   </p></blockquote><p><strong>注意，文本的编码使用【ANSI】编码格式</strong></p><ol start="2"><li>同样，在任务计划程序里点击【创建任务】，在【常规】里如下图设置</li></ol><p><img src="pics/12.png"></p><ol start="3"><li>【触发器】的设置如下</li></ol><p><img src="pics/13.png"></p><ol start="4"><li>【操作】的设置如下，选择刚才创建的脚本（kill_vlc.bat)</li></ol><p><img src="pics/14.png"></p><ol start="5"><li>点击【确定】，我们就添加了一个结束播放任务的脚本</li></ol><p>同理，午休的播放任务也要创建一个结束任务</p><h2 id="创建一个计划重启任务"><a href="#创建一个计划重启任务" class="headerlink" title="创建一个计划重启任务"></a>创建一个计划重启任务</h2><p>为了电脑运行的稳定，每周重启一次电脑</p><ol><li>首先建一个【reboot.bat】脚本文件，内容为：</li></ol><blockquote><p>shutdown -r   -f  -t  60</p></blockquote><p><strong>注意，文本的编码使用【ANSI】编码格式</strong></p><ol start="2"><li>在任务计划程序里面，创建一个任务，如下图</li></ol><p><img src="pics/15.png"></p><p><img src="pics/16.png"></p><p><img src="pics/17.png"></p><p>然后，点击【确定】添加</p><h2 id="四、改变播放的音频"><a href="#四、改变播放的音频" class="headerlink" title="四、改变播放的音频"></a>四、改变播放的音频</h2><p>如果后面要更改音乐，可以按照下面的步骤操作</p><ol><li>记住，目前有两个播放列表，分别为【午休.xspf】和【下班.xspf】，如果要替换目前午休和下班的音乐，参考第一步，将音乐文件拷到对应文件夹，重新创建播放列表文件，然后<strong>命名为同样的文件名</strong>，覆盖替换原先的就可以。</li></ol><p><strong>其他地方不需要变动</strong> </p><p><em>建议让电脑开机后自动登录运行</em></p><p>如果电脑有开机密码，参考下方的教程，有密码也能自动登录：</p><p><a href="https://www.sysgeek.cn/auto-login-windows-10/">https://www.sysgeek.cn/auto-login-windows-10/</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> 计划任务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo笔记</title>
      <link href="/2019/09/20/hexo-bi-ji/"/>
      <url>/2019/09/20/hexo-bi-ji/</url>
      
        <content type="html"><![CDATA[<p>官方说明文档</p><blockquote><p><a href="https://hexo.io/zh-cn/docs/">https://hexo.io/zh-cn/docs/</a></p></blockquote><h1 id="Hexo-使用"><a href="#Hexo-使用" class="headerlink" title="Hexo 使用"></a>Hexo 使用</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>确保电脑安装了Git 和 Npm ，然后执行下方命令</p><p><code>$ npm install -g hexo-cli</code></p><p>npm 指定代理的方式，后面加上</p><p><code> --proxy=http://127.0.0.1:1080</code></p><h2 id="在指定文件夹初始化"><a href="#在指定文件夹初始化" class="headerlink" title="在指定文件夹初始化"></a>在指定文件夹初始化</h2><pre class="line-numbers language-none"><code class="language-none">&gt; $ hexo init &lt;folder&gt;&gt; $ cd &lt;folder&gt;&gt; $ npm install   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><ul><li>_config.yml : 网站的配置信息</li><li>package.json: 应用程序的信息</li><li>scaffolds: 模版文件夹。新建文章时，Hexo会根据scaffold来建立文件</li><li>source: 资源文件夹是存放用户资源的地方。除 _posts 文件夹之外，开头命名为 _ (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹，而其他文件会被拷贝过去。</li><li>themes: 主体文件夹，Hexo会根据主体来生成静态页面</li></ul><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p><code>_config.yml</code></p><blockquote><p><a href="https://hexo.io/zh-cn/docs/configuration">https://hexo.io/zh-cn/docs/configuration</a></p></blockquote><h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><p><code>hexo init [folder]</code></p><p>新建一个网站。如果没有设置 folder ，Hexo 默认在目前的文件夹建立网站。</p><h3 id="new"><a href="#new" class="headerlink" title="new"></a>new</h3><pre class="line-numbers language-none"><code class="language-none">$ hexo new [layout] &lt;title&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>新建一篇文章。如果没有设置 layout 的话，默认使用 _config.yml 中的 default_layout 参数代替。如果标题包含空格的话，请使用引号括起来。</p><p><code>$ hexo new --path about/me &quot;about me&quot;</code></p><p>文章存放的默认目录为： source/_posts</p><p><code>$ hexo new page --path contact/me “contact me”</code></p><p>加了 page 参数后 ， 会在 soruce 目录下面 直接创建 目录。注意，后面的“contact me”不能缺少</p><h3 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h3><p>生成静态文件</p><p><code>hexo generate</code></p><p>等效于</p><p><code>hexo g</code></p><h3 id="publish"><a href="#publish" class="headerlink" title="publish"></a>publish</h3><p>发表草稿</p><pre class="line-numbers language-none"><code class="language-none">$ hexo publish [layout] &lt;filename&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><p><code>hexo server</code></p><p>启动服务器。默认情况下，访问网址为： <a href="http://localhost:4000/">http://localhost:4000/</a></p><p>加入 <code>-p</code> 选项可以重置端口</p><h3 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h3><p>部署网站</p><p><code>hexo deploy</code></p><h3 id="render"><a href="#render" class="headerlink" title="render"></a>render</h3><p><code>hexo render &lt;file1&gt; [file2] ...</code></p><p>渲染文件</p><p><code>-o</code> ： 设置输出路径</p><h3 id="migrate"><a href="#migrate" class="headerlink" title="migrate"></a>migrate</h3><p><code>hexo migrate &lt;type&gt;</code></p><p>从其他博客系统迁移内容</p><h3 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h3><p><code>hexo clean </code></p><p>清除缓存文件 (db.json) 和已生成的静态文件 (public)。</p><p>在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行该命令。</p><h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><p><code>hexo list &lt;type&gt;</code></p><p>列出网站资料</p><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><h4 id="安全模式"><a href="#安全模式" class="headerlink" title="安全模式"></a>安全模式</h4><p><code>hexo --safe </code></p><p>在安全模式下，不会载入插件和脚本。当您在安装新插件遭遇问题时，可以尝试以安全模式重新执行。</p><h2 id="写作"><a href="#写作" class="headerlink" title="写作"></a>写作</h2><h3 id="布局（Layout）"><a href="#布局（Layout）" class="headerlink" title="布局（Layout）"></a>布局（Layout）</h3><pre class="line-numbers language-none"><code class="language-none">$ hexo new [layout] &lt;title&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> <strong>您可以在命令中指定文章的布局（layout），默认为 post，可以通过修改 _config.yml 中的 default_layout 参数来指定默认布局</strong></p><p>Hexo 有三种默认布局：post、page 和 draft。在创建者三种不同类型的文件时，它们将会被保存到不同的路径；而您自定义的其他布局和 post 相同，都将储存到 source/_posts 文件夹。</p><table><thead><tr><th>布局</th><th>路径</th></tr></thead><tbody><tr><td>post</td><td>source/_posts</td></tr><tr><td>page</td><td>source</td></tr><tr><td>draft</td><td>source/_drafts</td></tr></tbody></table><h3 id="分类和标签"><a href="#分类和标签" class="headerlink" title="分类和标签"></a>分类和标签</h3><ul><li>分类：categories</li><li>标签：tags</li></ul><p>只有文章支持分类和标签，您可以在 Front-matter 中设置。在其他系统中，分类和标签听起来很接近，但是在 Hexo 中两者有着明显的差别：分类具有顺序性和层次性，也就是说 Foo, Bar 不等于 Bar, Foo；而标签没有顺序和层次。</p><h3 id="文件名"><a href="#文件名" class="headerlink" title="文件名"></a>文件名</h3><p>Hexo 默认以标题做为文件名称，但您可编辑 new_post_name 参数来改变默认的文件名称，举例来说，设为 :year-:month-:day-:title.md 可让您更方便的通过日期来管理文章。</p><table><thead><tr><th>变量</th><th>描述</th></tr></thead><tbody><tr><td>:title</td><td>标题（小写，空格将会被替换为短杆）</td></tr><tr><td>:year</td><td></td></tr><tr><td>:month</td><td></td></tr><tr><td>:i_month</td><td>上面为两位数（03），这个为一位数（3）</td></tr><tr><td>:day</td><td></td></tr><tr><td>:i_day</td><td></td></tr></tbody></table><h3 id="草稿"><a href="#草稿" class="headerlink" title="草稿"></a>草稿</h3><p>刚刚提到了 Hexo 的一种特殊布局：draft，这种布局在建立时会被保存到 source/_drafts 文件夹，您可通过 publish 命令将草稿移动到 source/_posts 文件夹，该命令的使用方式与 new 十分类似，您也可在命令中指定 layout 来指定布局。</p><pre class="line-numbers language-none"><code class="language-none">$ hexo publish [layout] &lt;title&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>草稿默认不会显示在页面中， <code>hexo s --draft</code>，或是把 render_drafts 参数设为 true 来预览草稿。</p><h3 id="模版（Scaffold）"><a href="#模版（Scaffold）" class="headerlink" title="模版（Scaffold）"></a>模版（Scaffold）</h3><p>在执行这行指令时，Hexo 会尝试在 scaffolds 文件夹中寻找 photo.md，并根据其内容建立文章，以下是您可以在模版中使用的变量：</p><table><thead><tr><th>变量</th><th>描述</th></tr></thead><tbody><tr><td>layout</td><td>布局</td></tr><tr><td>title</td><td>标题</td></tr><tr><td>date</td><td>文件建立日期</td></tr></tbody></table><h2 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h2><p>Hexo 3.0 把服务器独立成了个别模块，您必须先安装 hexo-server 才能使用。</p><p><code>npm install hexo-server --save</code></p><p>启动服务</p><p><code>hexo server</code></p><p>更换端口启动</p><p><code>hexo server -p 5000</code></p><h3 id="静态模式"><a href="#静态模式" class="headerlink" title="静态模式"></a>静态模式</h3><p>在静态模式下，服务器只处理 public 文件夹内的文件，而不会处理文件变动，在执行时，<strong>您应该先自行执行 hexo generate</strong> ，此模式通常用于生产环境（production mode）下。</p><p><code>hexo server -s</code></p><h3 id="自定义IP"><a href="#自定义IP" class="headerlink" title="自定义IP"></a>自定义IP</h3><p>服务器默认运行在 0.0.0.0，您可以覆盖默认的 IP 设置：</p><p><code>hexo server -i 192.168.1.1</code></p><h2 id="生成文件"><a href="#生成文件" class="headerlink" title="生成文件"></a>生成文件</h2><blockquote><p>$ hexo generate</p></blockquote><h3 id="监视文件变动"><a href="#监视文件变动" class="headerlink" title="监视文件变动"></a>监视文件变动</h3><p>Hexo 能够监视文件变动并立即重新生成静态文件，在生成时会比对文件的 SHA1 checksum，只有变动的文件才会写入。<br><code>hexo generate --watch </code></p><h3 id="完成后部署"><a href="#完成后部署" class="headerlink" title="完成后部署"></a>完成后部署</h3><p>执行下方两个命令中的一个，两条命令是等价的</p><p><code>hexo generate --deploy</code><br><code>hexo deploy --generate</code></p><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p><code>hexo deploy</code></p><p>必须要在_config.yml中修改参数，一个正确的部署配置中至少要有type参数，例如：</p><pre class="line-numbers language-none"><code class="language-none">deploy:type:git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="Git-部署"><a href="#Git-部署" class="headerlink" title="Git 部署"></a>Git 部署</h3><p>安装hexo-deployer-git</p><p><code>npm install hexo-deployer-git --save </code></p><p>修改配置</p><pre class="line-numbers language-none"><code class="language-none">deploy:  type: git  repo: &lt;repository url&gt; #https:&#x2F;&#x2F;bitbucket.org&#x2F;JohnSmith&#x2F;johnsmith.bitbucket.io  branch: [branch] #published  message: [message]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>repo</td><td>库（Repository）地址</td></tr><tr><td>branch</td><td>分支名称。如果不指定，则默认值为 master</td></tr><tr><td>message</td><td>自定义提交信息</td></tr></tbody></table><p><strong>生成站点文件并推送至远程库。执行 hexo clean &amp;&amp; hexo deploy 命令（如果您并未全局安装 Hexo Cli，则需要执行 ./node_modules/.bin/hexo clean &amp;&amp; ./node_modules/.bin/hexo deploy）</strong></p><p>当执行 hexo deploy 时，Hexo 会将 public 目录中的文件和目录推送至 _config.yml 中指定的远端仓库和分支中，并且完全覆盖该分支下的已有内容。</p><p><em>此外，如果您的 Github Pages 需要使用 CNAME 文件自定义域名，请将 CNAME 文件置于 source 目录下，只有这样 hexo deploy 才能将 CNAME 文件一并推送至部署分支。</em></p><h2 id="MD-写作的一些技巧"><a href="#MD-写作的一些技巧" class="headerlink" title="MD 写作的一些技巧"></a>MD 写作的一些技巧</h2><blockquote><p><a href="https://lxxs.xyz/archives/17/">https://lxxs.xyz/archives/17/</a></p></blockquote><h3 id="折叠显示"><a href="#折叠显示" class="headerlink" title="折叠显示"></a>折叠显示</h3><pre class="line-numbers language-none"><code class="language-none">&lt;details&gt;&lt;summary&gt;点击查看&lt;&#x2F;summary&gt;内容&lt;&#x2F;details&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="1.png"></p><h3 id="彩色字体"><a href="#彩色字体" class="headerlink" title="彩色字体"></a>彩色字体</h3><blockquote><p><a href="https://xiabor.com/714f.html#%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7">https://xiabor.com/714f.html#%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7</a></p></blockquote><pre class="line-numbers language-none"><code class="language-none">&lt;font face&#x3D;&quot;黑体&quot;&gt;这是黑体字&lt;&#x2F;font&gt;&lt;font face&#x3D;&quot;微软雅黑&quot;&gt;这是微软雅黑&lt;&#x2F;font&gt;&lt;font face&#x3D;&quot;STCAIYUN&quot;&gt;这是华文彩云&lt;&#x2F;font&gt;&lt;font color&#x3D;#0099ff size&#x3D;3 face&#x3D;&quot;黑体&quot;&gt;三号蓝色黑体&lt;&#x2F;font&gt;&lt;font color&#x3D;#00ffff size&#x3D;4&gt;四号青色字&lt;&#x2F;font&gt;&lt;font color&#x3D;gray size&#x3D;5&gt;五号灰色字&lt;&#x2F;font&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>效果如下：</p><p>  <font face="黑体">这是黑体字</font></p><p>  <font face="微软雅黑">这是微软雅黑</font></p><p>  <font face="STCAIYUN">这是华文彩云</font></p><p>  <font color=#0099ff size=3 face="黑体">三号蓝色黑体</font></p><p>  <font color=#00ffff size=4>四号青色字</font></p><p>  <font color=gray size=5>五号灰色字</font></p><ul><li><p>中文字体：<br>黑体：SimHei<br>宋体：SimSun<br>新宋体：NSimSun<br>仿宋：FangSong<br>楷体：KaiTi<br>仿宋_GB2312：FangSong_GB2312<br>楷体_GB2312：KaiTi_GB2312<br>微软雅黑：Microsoft YaHei</p></li><li><p>英文字体：<br>PmingLiu<br>Impact<br>Georgia<br>Tahoma<br>Arial<br>Book Antiqua<br>Century Gothic<br>Courier New<br>Times New Roman<br>Verdana</p></li><li><p>其他字体<br>仿宋：FangSong<br>华文细黑：STHeiti Light (STXihei)<br>华文黑体：STHeiti<br>华文楷体：STKaiti<br>华文宋体：STSong<br>华文仿宋：STFangsong<br>隶书：LiSu<br>幼圆：YouYuan<br>华文细黑：STXihei<br>华文楷体：STKaiti<br>华文宋体：STSong<br>华文中宋：STZhongsong<br>华文仿宋：STFangsong<br>方正舒体：FZShuTi<br>方正姚体：FZYaoti<br>华文彩云：STCaiyun<br>华文琥珀：STHupo<br>华文隶书：STLiti<br>华文行楷：STXingkai<br>华文新魏：STXinwei</p></li><li><p>常用颜色代码<br>color=maroon<br>color=grey<br>color=silver<br>color=lightgrey<br>color=HotPink<br>color=DeepPink<br>color=VioletRed<br>color=Purple<br>color=navy<br>color=Blue<br>color=DeepSkyBlue<br>color=LightSkyBlue<br>color=aqua<br>color=DarkTurquoise<br>color=LightSeaGreen<br>color=YellowGreen<br>color=LawnGreen<br>color=GreenYellow<br>color=Yellow<br>color=Tomato<br>color=red<br>color=fuchsia<br>color=MediumOrchid<br>color=DarkViolet </p></li></ul><h3 id="插入Bilibili视频"><a href="#插入Bilibili视频" class="headerlink" title="插入Bilibili视频"></a>插入Bilibili视频</h3><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> 30% 45%<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://player.bilibili.com/player.html?aid=70993038&amp;cid=123009768&amp;page=1&amp;as_wide=1&amp;high_quality=1&amp;danmaku=0<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no<span class="token punctuation">"</span></span> <span class="token attr-name">scrolling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="插入网易云歌曲"><a href="#插入网易云歌曲" class="headerlink" title="插入网易云歌曲"></a>插入网易云歌曲</h3><pre class="line-numbers language-none"><code class="language-none">&lt;iframe frameborder&#x3D;&quot;no&quot; border&#x3D;&quot;0&quot; marginwidth&#x3D;&quot;0&quot; marginheight&#x3D;&quot;0&quot; width&#x3D;330 height&#x3D;86 src&#x3D;&quot;&#x2F;&#x2F;music.163.com&#x2F;outchain&#x2F;player?type&#x3D;2&amp;id&#x3D;22778741&amp;auto&#x3D;0&amp;height&#x3D;66&quot;&gt;&lt;&#x2F;iframe&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h3><pre class="line-numbers language-none"><code class="language-none">欢迎来到[宅世界](https:&#x2F;&#x2F;blog.bingfeng.ml)欢迎来到[宅世界](https:&#x2F;&#x2F;blog.bingfeng.ml &quot;宅世界&quot;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="文章内锚点"><a href="#文章内锚点" class="headerlink" title="文章内锚点"></a>文章内锚点</h3><pre class="line-numbers language-none"><code class="language-none">跳转到[草稿](#草稿)括号内的草稿为标题的名称<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>跳转到<a href="#%E8%8D%89%E7%A8%BF">草稿</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 建站 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chorme和Firefox保存网页密码安全性探究</title>
      <link href="/2019/09/20/chorme-he-firefox-bao-cun-wang-ye-mi-ma-an-quan-xing-tan-jiu/"/>
      <url>/2019/09/20/chorme-he-firefox-bao-cun-wang-ye-mi-ma-an-quan-xing-tan-jiu/</url>
      
        <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>今天看到微软发布了基于chromium的Edge浏览器，下载了Beta版本下来体验。但是我发现了一个隐患很大的地方—-Edge把我的chrome里的浏览记录，甚至是网页保存的密码，都同步过去了。当时我就纳闷了，微软这么牛逼的吗？后来我发现，不是人家太流弊，而是开源这东西，一言难尽。。。。。。</p><hr><h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>在网上查了一番资料之后，发现如下几点（如果有错误，请指正）：</p><ul><li>chrome其实是会对你存储的密码加密的。但是加密算法是开源的，所以，找到解密算法，破解密码应该就不是什么问题了</li></ul><p>具体可以参见下面的文章</p><blockquote><p><a href="https://www.4hou.com/technology/10114.html">https://www.4hou.com/technology/10114.html</a></p></blockquote><ul><li>加密的密码，一般只有对应的凭据才能查看（比如你的windows以KO这个用户登录，那么只有KO能查看密码，你导出密码文件到其他地方查看，也是没用的）</li></ul><pre class="line-numbers language-none"><code class="language-none">这是解密的三个要素1.加密密钥，位于%appdata%\Microsoft\Protect下对应sid文件夹下的文件2.数据库文件Login Data3.用户明文的密码，用于解密加密密钥<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>网上已经有很多工具，可以直接导出chorme里面的账号密码了…。比如这个牛逼的网站，提供了相应的工具</li></ul><blockquote><p><a href="https://www.nirsoft.net/utils/web_browser_password.html">https://www.nirsoft.net/utils/web_browser_password.html</a></p></blockquote><ul><li>从上面这个工具的介绍可以看出，不止chorme，甚至Firefox，safari等浏览器也难以幸免</li></ul><pre class="line-numbers language-none"><code class="language-none">DescriptionWebBrowserPassView is a password recovery tool that reveals the passwords stored by the following Web browsers: Internet Explorer (Version 4.0 - 11.0), Mozilla Firefox (All Versions), Google Chrome, Safari, and Opera. This tool can be used to recover your lost&#x2F;forgotten password of any Website, including popular Web sites, like Facebook, Yahoo, Google, and GMail, as long as the password is stored by your Web Browser. <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>IE，Edge，Chrome和Firefox都利用Windows DPAPI（数据保护接口）来加密自动填写数据，并在下次使用之前将其解密</li></ul><p>DPAPI（数据保护接口）是一对调用函数，为用户和系统进程提供操作系统级别的数据保护服务。可是我们知道数据保护是操作系统的一部分，所以每个应用程序都可以保护数据，而不需要任何特定的加密代码，也就是说不需要DPAPI进行的函数调用。<br>那么问题来了：浏览器使用DPAPI函数，同时加密所需的数据，而且不需要用户干预。任何脚本或代码都可以在不需要特殊许可或提升权限的情况下就可以调用解密DPAPI函数来解密数据，比如信用卡信息</p><blockquote><p><a href="https://www.anquanke.com/post/id/102039">https://www.anquanke.com/post/id/102039</a></p></blockquote><h2 id="Firefox"><a href="#Firefox" class="headerlink" title="Firefox"></a>Firefox</h2><p>经过考虑，打算弃用Chrome。毕竟Google家的嘛，也是有点隐患的</p><p>于是了解了Firefox的密码管理策略</p><pre class="line-numbers language-none"><code class="language-none">尽管密码管理器将用户名和密码以加密格式存储在本地硬盘上，可以访问该计算机的用户配置文件的人仍然可以看到并使用这些信息。使用【主密码保护存储的密码】 一文会告诉您如何防止这种情况，以及如何在计算机丢失或被盗的情况下保护您的信息。 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>上面引用Firefox官网文章，跟Chrome差不多，但我注意到了一个【主密码保护】。</p><p>后面在Google搜了一圈，大多也是说这个弱加密，容易被爆破</p><blockquote><p><a href="https://www.cyclonis.com/zh-hans/why-should-not-rely-firefoxs-master-password/">https://www.cyclonis.com/zh-hans/why-should-not-rely-firefoxs-master-password/</a></p></blockquote><blockquote><p><a href="https://nosec.org/home/detail/2875.html">https://nosec.org/home/detail/2875.html</a></p></blockquote><p>其实我的目的是这样的，系统的密码肯定是第一道防线，电脑肯定不会借给他人。如果借给他人，也是另外开一个系统用户（后面会验证一下这个方法，是否能使用我的密码）。但是，如果我的电脑感染了后门，这个主密码是否能成为我的第二道防线？！这个是我需要验证的。</p><ul><li><p>我的实验结果是，开启了火狐的主密码保护后，nirsoft的软件无法获取到火狐保存的账号密码，而且每次网页要调用登录时，都需要输入主密码。嗯，确实好多了，给火狐点赞</p></li><li><p>另外，Chrome 和 Firefox 的密码文件默认都放置在 当前用户的<code>AppData</code>目录下面。别人借你电脑，你开另外一个普通权限用户账户，应该是看不到你的账号密码了。我进入PE环境运行nirsoft的软件，发现chrome和Firefox都<strong>看不到记录</strong>了。</p></li></ul><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>从上面的分析，可以得出</p><ul><li><p>设置了【主密码保护】后的火狐比Chrome好（前提不考虑爆破的问题）</p></li><li><p>设置火狐【主密码保护】，一定要设置一个<strong>很复杂</strong>的密码，才不容易被爆破。另外这个主密码一但忘记，是可以取消的，具体的方法自己查，但是吶，<strong>你保存的网页密码都会不见</strong></p></li><li><p>如果你是个注重安全的人，电脑不要借给别人</p></li><li><p>在搜索资料的时候，在V2EX上面有个“chorme网页保存的密码是明文”的讨论，虽说那个楼主的说法表述有问题，但是看了一些言论，莫名搞笑，比如：“总有刁民想害朕” 。感觉大伙的安全意识还有待提高啊！ </p></li></ul><blockquote><p><a href="https://www.v2ex.com/t/302006">https://www.v2ex.com/t/302006</a></p></blockquote><ul><li><p>如果你每次打开火狐后，发现一会就弹出主密码输入框，那是你登录了火狐的账号。退出火狐账号之后，就不会出现这个情况</p></li><li><p>如果火狐设置里面出现“你的浏览器由你的组织管理”这种情况，可能是杀毒软件（比如：AVG）造成的，卸载杀毒即可。网上说可以删除注册表项，但是重新开机后，还是出现该提示，没用</p></li><li><p>如果你不需要火狐的密码管理，可以禁用它<br><img src="1.png"></p></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>V2ray 防检测部署</title>
      <link href="/2019/09/19/v2ray-fang-jian-ce-bu-shu/"/>
      <url>/2019/09/19/v2ray-fang-jian-ce-bu-shu/</url>
      
        <content type="html"><![CDATA[<p>v2ray WebSocket+TLS+Web 实现方法</p><p>以前用的都是最基本的配置方法，没有开启 tlc。时不时就断连，作为Google的重度使用者，接受不了，就用WebSocket+TLS+Web结合的方式</p><p>建议：用这个方法搭建，你起码要会使用一些基本的Linux 命令，一些常见的报错也要看得懂，不然会很吃力</p><h2 id="安装-v2ray"><a href="#安装-v2ray" class="headerlink" title="安装 v2ray"></a>安装 v2ray</h2><p> 与Shadowsocks 不同，从软件上 V2Ray 不区分服务器版和客户端版，也就是说在服务器和客户端运行的 V2Ray 是同一个软件，区别只是配置文件的不同。</p><h3 id="校准时间"><a href="#校准时间" class="headerlink" title="校准时间"></a>校准时间</h3><p>对于 V2Ray，它的验证方式包含时间，就算是配置没有任何问题，如果时间不正确，也无法连接 V2Ray 服务器的，服务器会认为你这是不合法的请求。所以系统时间一定要正确，只要保证时间误差在90秒之内就没问题。</p><p>查看时间</p><p><code>date -R</code></p><p>修改时间，等号后面接要更改的时间</p><p><code>date --set=&quot;2017-01-22 16:16:23&quot;</code></p><p>有时候VPS的时间是正确的,只是时区不一样,更改时区的方法<br>依次运行下方的命令,然后<strong>重启电脑</strong></p><pre class="line-numbers language-none"><code class="language-none">[root@linux-node ~]# echo &quot;ZONE&#x3D;Asia&#x2F;Shanghai&quot; &gt;&gt; &#x2F;etc&#x2F;sysconfig&#x2F;clock         [root@linux-node ~]# rm -f &#x2F;etc&#x2F;localtime#链接到上海时区文件       [root@linux-node ~]# ln -sf &#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F;Asia&#x2F;Shanghai &#x2F;etc&#x2F;localtime————————————————原文链接：https:&#x2F;&#x2F;blog.csdn.net&#x2F;m0_37886429&#x2F;article&#x2F;details&#x2F;78477638<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="下载并安装v2ray"><a href="#下载并安装v2ray" class="headerlink" title="下载并安装v2ray"></a>下载并安装v2ray</h3><p><a href="https://github.com/v2fly/fhs-install-v2ray">https://github.com/v2fly/fhs-install-v2ray</a></p><pre class="line-numbers language-none"><code class="language-none"># curl -O https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;v2fly&#x2F;fhs-install-v2ray&#x2F;master&#x2F;install-release.sh# curl -O https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;v2fly&#x2F;fhs-install-v2ray&#x2F;master&#x2F;install-dat-release.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">安裝和更新 V2Ray# bash install-release.sh安裝最新發行的 geoip.dat 和 geosite.dat# bash install-dat-release.sh移除 V2Ray# bash install-release.sh --remove<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>让v2ray服务开机自启，<strong>关闭SELinux</strong>，不然无法enable </p><pre class="line-numbers language-none"><code class="language-none">sestatus  #查看 selinux的状态setenforce 0  # 临时关闭 selinux永久关闭,可以修改配置文件&#x2F;etc&#x2F;selinux&#x2F;config,将其中SELINUX设置为disabledhttps:&#x2F;&#x2F;blog.csdn.net&#x2F;edide&#x2F;article&#x2F;details&#x2F;52389946<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>systemctl enable v2ray</code></p><p>到这里，V2ray就安装完成了，后面我们开始配置其他东西</p><h2 id="注册域名"><a href="#注册域名" class="headerlink" title="注册域名"></a>注册域名</h2><p>这一步开开启 TLS </p><p>你可以从一些知名的域名服务商那里获取域名，我们使用免费的就可以了<br>购买域名的方法，请Google</p><p><strong>注册好域名之后务必记得添加一个 <code>A 记录</code> 指向你的 VPS的 IP地址!</strong>  这一步是在域名服务商的管理后台操作的</p><h2 id="证书安装"><a href="#证书安装" class="headerlink" title="证书安装"></a>证书安装</h2><blockquote><p>证书有两种，一种是 ECC 证书（内置公钥是 ECDSA 公钥），一种是 RSA 证书（内置 RSA 公钥）。简单来说，同等长度 ECC 比 RSA 更安全,也就是说在具有同样安全性的情况下，ECC 的密钥长度比 RSA 短得多（加密解密会更快）。但问题是 ECC 的兼容性会差一些，Android 4.x 以下和 Windows XP 不支持。只要您的设备不是非常老的老古董，强烈建议使用 ECC 证书。</p></blockquote><h3 id="获取-acme-sh-脚本"><a href="#获取-acme-sh-脚本" class="headerlink" title="获取 acme.sh 脚本"></a>获取 acme.sh 脚本</h3><p>这个是用来帮助你获取 Let’s Encrypt 的免费证书的</p><p>下载</p><p><code>curl  https://get.acme.sh | sh</code></p><p>———————重要————————</p><p>过程中如果提示 <code>standalone模式</code>(下图)，请根据提示下载缺失的软件</p><p><img src="2.png"></p><p><code>yum install socat </code></p><p>看到 “Install success!” 代表成功</p><p>安装成功后执行 <code>source ~/.bashrc </code> 以确保脚本所设置的命令别名生效。</p><h3 id="生成证书"><a href="#生成证书" class="headerlink" title="生成证书"></a>生成证书</h3><p><em>以下命令，请把 <code>mydomain.me</code> 替换成你的域名</em></p><p>以下的命令会临时监听 80 端口，请确保执行该命令前 80 端口没有使用</p><p><code>sudo ~/.acme.sh/acme.sh --issue -d mydomain.me --standalone -k ec-256</code></p><p> -k 表示密钥长度，后面的值可以是 ec-256 、ec-384、2048、3072、4096、8192，带有 ec 表示生成的是 ECC 证书，没有则是 RSA 证书。在安全性上 256 位的 ECC 证书等同于 3072 位的 RSA 证书。</p><h3 id="更新证书"><a href="#更新证书" class="headerlink" title="更新证书"></a>更新证书</h3><p>由于 Let’s Encrypt 的证书有效期只有 3 个月，因此需要 90 天至少要更新一次证书，acme.sh 脚本会每 60 天自动更新证书。也可以手动更新。</p><p>手动更新 ECC 证书，执行：</p><p><code>$ sudo ~/.acme.sh/acme.sh --renew -d mydomain.com --force --ecc</code></p><h3 id="安装证书"><a href="#安装证书" class="headerlink" title="安装证书"></a>安装证书</h3><p><em>以下命令，请把 <code>mydomain.me</code> 替换成你的域名</em></p><p>将证书和密钥安装到 /etc/v2ray 中：</p><pre class="line-numbers language-none"><code class="language-none">$ sudo ~&#x2F;.acme.sh&#x2F;acme.sh --installcert -d mydomain.me --fullchainpath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.crt --keypath &#x2F;etc&#x2F;v2ray&#x2F;v2ray.key --ecc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>由于本例中将证书生成到 /etc/v2ray/ 文件夹，更新证书之后还得把新证书生成到 /etc/v2ray</p><p><strong>无论什么情况，密钥(即上面的v2ray.key)都不能泄漏，如果你不幸泄漏了密钥，可以使用 acme.sh 将原证书吊销，再生成新的证书，吊销方法请自行参考 acme.sh 的手册</strong></p><h2 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h2><p>这里我们选择用源码编译的方法来安装</p><p>到nginx官网下载</p><blockquote><p><a href="http://nginx.org/en/download.html">http://nginx.org/en/download.html</a></p></blockquote><p>一般选择“nginx-1.17.3”字样就是源码</p><p>可以用 wget 命令 下载到 你的vps上，准备编译用</p><p>安装编译用的工具</p><pre class="line-numbers language-none"><code class="language-none">yum -y install gcc gcc-c++ automake pcre pcre-devel zlib zlib-devel open openssl-devel<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>编译nginx</p><pre class="line-numbers language-none"><code class="language-none">tar xf nginx-1.17.3.tar.gz cd nginx-1.17.3.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx --with-http_stub_status_module --with-http_ssl_module<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong><code>configure</code> 一定要指定上面的参数。<code>--prefix</code> 是编译好后nginx安装的位置. <code>http_ssl_module</code> 是 ssl 需要的，切记要加上去.不然，后面又要再编译一次，很麻烦</strong></p><p>如果需要重新编译，方法见下面链接</p><blockquote><p><a href="https://imshusheng.com/linux/173.html">https://imshusheng.com/linux/173.html</a></p></blockquote><p>我们继续：</p><pre class="line-numbers language-none"><code class="language-none">$ make $ make install <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>更多关于nginx的信息(重要)</p><blockquote><p><a href="https://www.jianshu.com/p/320a48fcef57">https://www.jianshu.com/p/320a48fcef57</a></p></blockquote><h2 id="设置nginx开机自启"><a href="#设置nginx开机自启" class="headerlink" title="设置nginx开机自启"></a>设置nginx开机自启</h2><pre class="line-numbers language-none"><code class="language-none">vi &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;nginx.service<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>填写如下信息</p><pre class="line-numbers language-Bash" data-language="Bash"><code class="language-Bash">[Unit]Description&#x3D;nginxAfter&#x3D;network.target  [Service]Type&#x3D;forkingExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginxExecReload&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -s reloadExecStop&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -s quitPrivateTmp&#x3D;true  [Install]WantedBy&#x3D;multi-user.target<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>让nginx开机自动动</p><p><code>systemctl enable nginx.service</code></p><p>查看nginx是否启动成功</p><p><code>systemctl status nginx.service</code></p><p>更详细的信息，请参考</p><blockquote><p><a href="https://www.jianshu.com/p/ca5ee5f7075c">https://www.jianshu.com/p/ca5ee5f7075c</a></p></blockquote><h2 id="配置服务器v2ray和nginx"><a href="#配置服务器v2ray和nginx" class="headerlink" title="配置服务器v2ray和nginx"></a>配置服务器v2ray和nginx</h2><p>这里，我们只需要更改</p><p><code>/etc/v2ray/config.json</code> 和 <code>/usr/local/nginx/conf/nginx.conf</code></p><p>这两个文件就行</p><p>参考下面的教程：</p><blockquote><p><a href="https://toutyrater.github.io/advanced/wss_and_web.html">https://toutyrater.github.io/advanced/wss_and_web.html</a></p></blockquote><h3 id="v2ray-配置"><a href="#v2ray-配置" class="headerlink" title="v2ray 配置"></a>v2ray 配置</h3><p>将文件所有的内容替换为如下</p><pre class="line-numbers language-Json" data-language="Json"><code class="language-Json">&#123;  &quot;inbounds&quot;: [    &#123;      &quot;port&quot;: 10000,      &quot;listen&quot;:&quot;127.0.0.1&quot;,&#x2F;&#x2F;只监听 127.0.0.1，避免除本机外的机器探测到开放了 10000 端口      &quot;protocol&quot;: &quot;vmess&quot;,      &quot;settings&quot;: &#123;        &quot;clients&quot;: [          &#123;            &quot;id&quot;: &quot;b831381d-6324-4d53-ad4f-8cda48b30811&quot;, &#x2F;&#x2F;id更改为自己的            &quot;alterId&quot;: 64          &#125;        ]      &#125;,      &quot;streamSettings&quot;: &#123;        &quot;network&quot;: &quot;ws&quot;,        &quot;wsSettings&quot;: &#123;        &quot;path&quot;: &quot;&#x2F;ray&quot;        &#125;      &#125;    &#125;  ],  &quot;outbounds&quot;: [    &#123;      &quot;protocol&quot;: &quot;freedom&quot;,      &quot;settings&quot;: &#123;&#125;    &#125;  ]&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="nginx-配置"><a href="#nginx-配置" class="headerlink" title="nginx 配置"></a>nginx 配置</h4><p>将nginx的配置文件里面 <code>原 server 花括号里的内容</code>替换为如下.<strong>请注意格式以及内容,不然启动不了nginx的</strong></p><pre class="line-numbers language-Bash" data-language="Bash"><code class="language-Bash">server &#123;  listen  443 ssl;   # 后续如果开了防火墙，记得开放该端口  ssl on;  ssl_certificate       &#x2F;etc&#x2F;v2ray&#x2F;v2ray.crt;   #这里调用我们TLS那里生成的证书  ssl_certificate_key   &#x2F;etc&#x2F;v2ray&#x2F;v2ray.key;   #这里调用我们TLS那里生成的证书  ssl_protocols         TLSv1 TLSv1.1 TLSv1.2;  ssl_ciphers           HIGH:!aNULL:!MD5;  server_name           mydomain.me;        location &#x2F;ray &#123; # 与 V2Ray 配置中的 path 保持一致        proxy_redirect off;        proxy_pass http:&#x2F;&#x2F;127.0.0.1:10000;#假设WebSocket监听在环回地址的10000端口上        proxy_http_version 1.1;        proxy_set_header Upgrade $http_upgrade;        proxy_set_header Connection &quot;upgrade&quot;;        proxy_set_header Host $http_host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果你配置后,实际使用的时候会出现错误。查了资料，别的人也有这个问题</p><blockquote><p><a href="https://github.com/v2ray/v2ray-core/issues/1588">https://github.com/v2ray/v2ray-core/issues/1588</a></p></blockquote><p>看一下你nginx的配置文件,是不是重复了下面的配置</p><pre class="line-numbers language-none"><code class="language-none">proxy_set_header Host $http_host;proxy_set_header Host $host;這兩個重複了，刪除一個即可正常<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><p>这里，我贴一张我客户端的设置界面</p><p><img src="1.png"></p><h2 id="后续服务端更新"><a href="#后续服务端更新" class="headerlink" title="后续服务端更新"></a>后续服务端更新</h2><p>找到脚本，然后执行</p><p><code>&gt; bash go.sh</code></p><h2 id="Linux-防火墙"><a href="#Linux-防火墙" class="headerlink" title="Linux 防火墙"></a>Linux 防火墙</h2><p><strong>注意：部署服务端的时候，请暂时关闭防火墙。部署完后如果开启防火墙，把必须的端口开放</strong></p><p>下面时Centos7防火墙的一些基本操作。centos7默认使用firewall-cmd，以前的iptable已经不用了</p><pre class="line-numbers language-none"><code class="language-none">查看防火墙状态firewall-cmd --state停止systemctl stop firewalld.service禁止 firewall 开机启动systemctl disable firewalld.service查看已经开放的端口firewall-cmd --list-ports开启端口firewall-cmd --zone&#x3D;public --add-port&#x3D;80&#x2F;tcp --permanent--zone # 作用域--permanent # 永久生效，没有此参数重启后失效重启防火墙firewall-cmd --reload移除端口firewall-cmd --remove-port&#x3D;9998&#x2F;udp --permanent来自 https:&#x2F;&#x2F;blog.csdn.net&#x2F;zj_jim&#x2F;article&#x2F;details&#x2F;53841516<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>官方教程</p><blockquote><p><a href="https://toutyrater.github.io/advanced/tls.html">https://toutyrater.github.io/advanced/tls.html</a></p></blockquote><blockquote><p><a href="https://toutyrater.github.io/advanced/wss_and_web.html">https://toutyrater.github.io/advanced/wss_and_web.html</a></p></blockquote><p>道高一尺，魔高一丈。不存在一劳永逸的翻墙方法，最重要的是不断学习提高，搞不好哪天这个教程就失效了呢。祝各位早日看到外面的世界</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 翻墙 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/02/20/hello-world/"/>
      <url>/2019/02/20/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to My Blog! This is a <code>Hello World</code> post.</p>]]></content>
      
      
      
        <tags>
            
            <tag> 建站 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
